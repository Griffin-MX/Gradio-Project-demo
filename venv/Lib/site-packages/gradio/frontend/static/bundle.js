/*! For license information please see bundle.js.LICENSE.txt */
!function(e){function t(t){for(var n,o,i=t[0],a=t[1],s=0,u=[];s<i.length;s++)o=i[s],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(l&&l(t);u.length;)u.shift()()}var n={},r={0:0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(){return Promise.resolve()},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var i=this.webpackJsonpgradio=this.webpackJsonpgradio||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=a;o(o.s=93)}([function(e,t,n){"use strict";e.exports=n(23)},function(e,t,n){"use strict";e.exports=n(19)},function(e,t,n){e.exports=n(24)()},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&e.push(s);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){(function(e){var r,o=o||{version:"4.5.0"};if(t.fabric=o,"undefined"!==typeof document&&"undefined"!==typeof window)document instanceof("undefined"!==typeof HTMLDocument?HTMLDocument:Document)?o.document=document:o.document=document.implementation.createHTMLDocument(""),o.window=window;else{var i=new(n(32).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;o.document=i.document,o.jsdomImplForWrapper=n(33).implForWrapper,o.nodeCanvas=n(34).Canvas,o.window=i,DOMParser=o.window.DOMParser}function a(e,t){var n=e.canvas,r=t.targetCanvas,o=r.getContext("2d");o.translate(0,r.height),o.scale(1,-1);var i=n.height-r.height;o.drawImage(n,0,i,r.width,r.height,0,0,r.width,r.height)}function s(e,t){var n=t.targetCanvas.getContext("2d"),r=t.destinationWidth,o=t.destinationHeight,i=r*o*4,a=new Uint8Array(this.imageBuffer,0,i),s=new Uint8ClampedArray(this.imageBuffer,0,i);e.readPixels(0,0,r,o,e.RGBA,e.UNSIGNED_BYTE,a);var l=new ImageData(s,r,o);n.putImageData(l,0,0)}o.isTouchSupported="ontouchstart"in o.window||"ontouchstart"in o.document||o.window&&o.window.navigator&&o.window.navigator.maxTouchPoints>0,o.isLikelyNode="undefined"!==typeof e&&"undefined"===typeof window,o.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],o.DPI=96,o.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",o.commaWsp="(?:\\s+,?\\s*|,\\s*)",o.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,o.reNonWord=/[ \n\.,;!\?\-]/,o.fontPaths={},o.iMatrix=[1,0,0,1,0,0],o.svgNS="http://www.w3.org/2000/svg",o.perfLimitSizeTotal=2097152,o.maxCacheSideLimit=4096,o.minCacheSideLimit=256,o.charWidthsCache={},o.textureSize=2048,o.disableStyleCopyPaste=!1,o.enableGLFiltering=!0,o.devicePixelRatio=o.window.devicePixelRatio||o.window.webkitDevicePixelRatio||o.window.mozDevicePixelRatio||1,o.browserShadowBlurConstant=1,o.arcToSegmentsCache={},o.boundsOfCurveCache={},o.cachesBoundsOfCurve=!0,o.forceGLPutImageData=!1,o.initFilterBackend=function(){return o.enableGLFiltering&&o.isWebglSupported&&o.isWebglSupported(o.textureSize)?(console.log("max texture size: "+o.maxTextureSize),new o.WebglFilterBackend({tileSize:o.textureSize})):o.Canvas2dFilterBackend?new o.Canvas2dFilterBackend:void 0},"undefined"!==typeof document&&"undefined"!==typeof window&&(window.fabric=o),function(){function e(e,t){if(this.__eventListeners[e]){var n=this.__eventListeners[e];t?n[n.indexOf(t)]=!1:o.util.array.fill(n,!1)}}o.Observable={fire:function(e,t){if(!this.__eventListeners)return this;var n=this.__eventListeners[e];if(!n)return this;for(var r=0,o=n.length;r<o;r++)n[r]&&n[r].call(this,t||{});return this.__eventListeners[e]=n.filter((function(e){return!1!==e})),this},on:function(e,t){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in e)this.on(n,e[n]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(t);return this},off:function(t,n){if(!this.__eventListeners)return this;if(0===arguments.length)for(t in this.__eventListeners)e.call(this,t);else if(1===arguments.length&&"object"===typeof arguments[0])for(var r in t)e.call(this,r,t[r]);else e.call(this,t,n);return this}}}(),o.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var e=0,t=arguments.length;e<t;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(e,t,n){var r=this._objects;return n?r[t]=e:r.splice(t,0,e),this._onObjectAdded&&this._onObjectAdded(e),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var e,t=this._objects,n=!1,r=0,o=arguments.length;r<o;r++)-1!==(e=t.indexOf(arguments[r]))&&(n=!0,t.splice(e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(e,t){for(var n=this.getObjects(),r=0,o=n.length;r<o;r++)e.call(t,n[r],r,n);return this},getObjects:function(e){return"undefined"===typeof e?this._objects.concat():this._objects.filter((function(t){return t.type===e}))},item:function(e){return this._objects[e]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e){return this._objects.indexOf(e)>-1},complexity:function(){return this._objects.reduce((function(e,t){return e+=t.complexity?t.complexity():0}),0)}},o.CommonMethods={_setOptions:function(e){for(var t in e)this.set(t,e[t])},_initGradient:function(e,t){!e||!e.colorStops||e instanceof o.Gradient||this.set(t,new o.Gradient(e))},_initPattern:function(e,t,n){!e||!e.source||e instanceof o.Pattern?n&&n():this.set(t,new o.Pattern(e,n))},_setObject:function(e){for(var t in e)this._set(t,e[t])},set:function(e,t){return"object"===typeof e?this._setObject(e):this._set(e,t),this},_set:function(e,t){this[e]=t},toggle:function(e){var t=this.get(e);return"boolean"===typeof t&&this.set(e,!t),this},get:function(e){return this[e]}},function(e){var t=Math.sqrt,n=Math.atan2,r=Math.pow,i=Math.PI/180,a=Math.PI/2;o.util={cos:function(e){if(0===e)return 1;switch(e<0&&(e=-e),e/a){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(0===e)return 0;var t=1;switch(e<0&&(t=-1),e/a){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(e)},removeFromArray:function(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),e},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},degreesToRadians:function(e){return e*i},radiansToDegrees:function(e){return e/i},rotatePoint:function(e,t,n){e.subtractEquals(t);var r=o.util.rotateVector(e,n);return new o.Point(r.x,r.y).addEquals(t)},rotateVector:function(e,t){var n=o.util.sin(t),r=o.util.cos(t);return{x:e.x*r-e.y*n,y:e.x*n+e.y*r}},transformPoint:function(e,t,n){return n?new o.Point(t[0]*e.x+t[2]*e.y,t[1]*e.x+t[3]*e.y):new o.Point(t[0]*e.x+t[2]*e.y+t[4],t[1]*e.x+t[3]*e.y+t[5])},makeBoundingBoxFromPoints:function(e,t){if(t)for(var n=0;n<e.length;n++)e[n]=o.util.transformPoint(e[n],t);var r=[e[0].x,e[1].x,e[2].x,e[3].x],i=o.util.array.min(r),a=o.util.array.max(r)-i,s=[e[0].y,e[1].y,e[2].y,e[3].y],l=o.util.array.min(s);return{left:i,top:l,width:a,height:o.util.array.max(s)-l}},invertTransform:function(e){var t=1/(e[0]*e[3]-e[1]*e[2]),n=[t*e[3],-t*e[1],-t*e[2],t*e[0]],r=o.util.transformPoint({x:e[4],y:e[5]},n,!0);return n[4]=-r.x,n[5]=-r.y,n},toFixed:function(e,t){return parseFloat(Number(e).toFixed(t))},parseUnit:function(e,t){var n=/\D{0,2}$/.exec(e),r=parseFloat(e);switch(t||(t=o.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return r*o.DPI/25.4;case"cm":return r*o.DPI/2.54;case"in":return r*o.DPI;case"pt":return r*o.DPI/72;case"pc":return r*o.DPI/72*12;case"em":return r*t;default:return r}},falseFunction:function(){return!1},getKlass:function(e,t){return e=o.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),o.util.resolveNamespace(t)[e]},getSvgAttributes:function(e){var t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":t=t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":t=t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":t=t.concat(["offset","stop-color","stop-opacity"])}return t},resolveNamespace:function(t){if(!t)return o;var n,r=t.split("."),i=r.length,a=e||o.window;for(n=0;n<i;++n)a=a[r[n]];return a},loadImage:function(e,t,n,r){if(e){var i=o.util.createImage(),a=function(){t&&t.call(n,i,!1),i=i.onload=i.onerror=null};i.onload=a,i.onerror=function(){o.log("Error loading "+i.src),t&&t.call(n,null,!0),i=i.onload=i.onerror=null},0!==e.indexOf("data")&&void 0!==r&&null!==r&&(i.crossOrigin=r),"data:image/svg"===e.substring(0,14)&&(i.onload=null,o.util.loadImageInDom(i,a)),i.src=e}else t&&t.call(n,e)},loadImageInDom:function(e,t){var n=o.document.createElement("div");n.style.width=n.style.height="1px",n.style.left=n.style.top="-100%",n.style.position="absolute",n.appendChild(e),o.document.querySelector("body").appendChild(n),e.onload=function(){t(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(e,t,n,r){var i=[],a=0,s=(e=e||[]).length;function l(){++a===s&&t&&t(i.filter((function(e){return e})))}s?e.forEach((function(e,t){e&&e.type?o.util.getKlass(e.type,n).fromObject(e,(function(n,o){o||(i[t]=n),r&&r(e,n,o),l()})):l()})):t&&t(i)},enlivenPatterns:function(e,t){function n(){++i===a&&t&&t(r)}var r=[],i=0,a=(e=e||[]).length;a?e.forEach((function(e,t){e&&e.source?new o.Pattern(e,(function(e){r[t]=e,n()})):(r[t]=e,n())})):t&&t(r)},groupSVGElements:function(e,t,n){var r;return e&&1===e.length?e[0]:(t&&(t.width&&t.height?t.centerPoint={x:t.width/2,y:t.height/2}:(delete t.width,delete t.height)),r=new o.Group(e,t),"undefined"!==typeof n&&(r.sourcePath=n),r)},populateWithProperties:function(e,t,n){if(n&&"[object Array]"===Object.prototype.toString.call(n))for(var r=0,o=n.length;r<o;r++)n[r]in e&&(t[n[r]]=e[n[r]])},drawDashedLine:function(e,r,o,i,a,s){var l=i-r,u=a-o,c=t(l*l+u*u),d=n(u,l),h=s.length,f=0,p=!0;for(e.save(),e.translate(r,o),e.moveTo(0,0),e.rotate(d),r=0;c>r;)(r+=s[f++%h])>c&&(r=c),e[p?"lineTo":"moveTo"](r,0),p=!p;e.restore()},createCanvasElement:function(){return o.document.createElement("canvas")},copyCanvasElement:function(e){var t=o.util.createCanvasElement();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},toDataURL:function(e,t,n){return e.toDataURL("image/"+t,n)},createImage:function(){return o.document.createElement("img")},multiplyTransformMatrices:function(e,t,n){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],n?0:e[0]*t[4]+e[2]*t[5]+e[4],n?0:e[1]*t[4]+e[3]*t[5]+e[5]]},qrDecompose:function(e){var o=n(e[1],e[0]),a=r(e[0],2)+r(e[1],2),s=t(a),l=(e[0]*e[3]-e[2]*e[1])/s,u=n(e[0]*e[2]+e[1]*e[3],a);return{angle:o/i,scaleX:s,scaleY:l,skewX:u/i,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return o.iMatrix.concat();var t=o.util.degreesToRadians(e.angle),n=o.util.cos(t),r=o.util.sin(t);return[n,r,-r,n,0,0]},calcDimensionsMatrix:function(e){var t="undefined"===typeof e.scaleX?1:e.scaleX,n="undefined"===typeof e.scaleY?1:e.scaleY,r=[e.flipX?-t:t,0,0,e.flipY?-n:n,0,0],i=o.util.multiplyTransformMatrices,a=o.util.degreesToRadians;return e.skewX&&(r=i(r,[1,0,Math.tan(a(e.skewX)),1],!0)),e.skewY&&(r=i(r,[1,Math.tan(a(e.skewY)),0,1],!0)),r},composeMatrix:function(e){var t=[1,0,0,1,e.translateX||0,e.translateY||0],n=o.util.multiplyTransformMatrices;return e.angle&&(t=n(t,o.util.calcRotateMatrix(e))),(1!==e.scaleX||1!==e.scaleY||e.skewX||e.skewY||e.flipX||e.flipY)&&(t=n(t,o.util.calcDimensionsMatrix(e))),t},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},isTransparent:function(e,t,n,r){r>0&&(t>r?t-=r:t=0,n>r?n-=r:n=0);var o,i=!0,a=e.getImageData(t,n,2*r||1,2*r||1),s=a.data.length;for(o=3;o<s&&!1!==(i=a.data[o]<=0);o+=4);return a=null,i},parsePreserveAspectRatioAttribute:function(e){var t,n="meet",r=e.split(" ");return r&&r.length&&("meet"!==(n=r.pop())&&"slice"!==n?(t=n,n="meet"):r.length&&(t=r.pop())),{meetOrSlice:n,alignX:"none"!==t?t.slice(1,4):"none",alignY:"none"!==t?t.slice(5,8):"none"}},clearFabricFontCache:function(e){(e=(e||"").toLowerCase())?o.charWidthsCache[e]&&delete o.charWidthsCache[e]:o.charWidthsCache={}},limitDimsByArea:function(e,t){var n=Math.sqrt(t*e),r=Math.floor(t/n);return{x:Math.floor(n),y:r}},capValue:function(e,t,n){return Math.max(e,Math.min(t,n))},findScaleToFit:function(e,t){return Math.min(t.width/e.width,t.height/e.height)},findScaleToCover:function(e,t){return Math.max(t.width/e.width,t.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map((function(e){return o.util.toFixed(e,o.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(e,t){var n=o.util.invertTransform(t),r=o.util.multiplyTransformMatrices(n,e.calcOwnMatrix());o.util.applyTransformToObject(e,r)},addTransformToObject:function(e,t){o.util.applyTransformToObject(e,o.util.multiplyTransformMatrices(t,e.calcOwnMatrix()))},applyTransformToObject:function(e,t){var n=o.util.qrDecompose(t),r=new o.Point(n.translateX,n.translateY);e.flipX=!1,e.flipY=!1,e.set("scaleX",n.scaleX),e.set("scaleY",n.scaleY),e.skewX=n.skewX,e.skewY=n.skewY,e.angle=n.angle,e.setPositionByOrigin(r,"center","center")},sizeAfterTransform:function(e,t,n){var r=e/2,i=t/2,a=[{x:-r,y:-i},{x:r,y:-i},{x:-r,y:i},{x:r,y:i}],s=o.util.calcDimensionsMatrix(n),l=o.util.makeBoundingBoxFromPoints(a,s);return{x:l.width,y:l.height}}}}(t),function(){var e=Array.prototype.join,t={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},n={m:"l",M:"L"};function r(e,t,n,r,i,a,s,l,u,c,d){var h=o.util.cos(e),f=o.util.sin(e),p=o.util.cos(t),g=o.util.sin(t),b=n*i*p-r*a*g+s,m=r*i*p+n*a*g+l;return["C",c+u*(-n*i*f-r*a*h),d+u*(-r*i*f+n*a*h),b+u*(n*i*g+r*a*p),m+u*(r*i*g-n*a*p),b,m]}function i(e,t,n,i,s,l,u){var c=Math.PI,d=u*c/180,h=o.util.sin(d),f=o.util.cos(d),p=0,g=0,b=-f*e*.5-h*t*.5,m=-f*t*.5+h*e*.5,v=(n=Math.abs(n))*n,y=(i=Math.abs(i))*i,j=m*m,x=b*b,w=v*y-v*j-y*x,C=0;if(w<0){var _=Math.sqrt(1-w/(v*y));n*=_,i*=_}else C=(s===l?-1:1)*Math.sqrt(w/(v*j+y*x));var S=C*n*m/i,E=-C*i*b/n,O=f*S-h*E+.5*e,T=h*S+f*E+.5*t,A=a(1,0,(b-S)/n,(m-E)/i),k=a((b-S)/n,(m-E)/i,(-b-S)/n,(-m-E)/i);0===l&&k>0?k-=2*c:1===l&&k<0&&(k+=2*c);for(var M=Math.ceil(Math.abs(k/c*2)),L=[],I=k/M,D=8/3*Math.sin(I/4)*Math.sin(I/4)/Math.sin(I/2),N=A+I,P=0;P<M;P++)L[P]=r(A,N,f,h,n,i,O,T,D,p,g),p=L[P][5],g=L[P][6],A=N,N+=I;return L}function a(e,t,n,r){var o=Math.atan2(t,e),i=Math.atan2(r,n);return i>=o?i-o:2*Math.PI-(o-i)}function s(t,n,r,i,a,s,l,u){var c;if(o.cachesBoundsOfCurve&&(c=e.call(arguments),o.boundsOfCurveCache[c]))return o.boundsOfCurveCache[c];var d,h,f,p,g,b,m,v,y=Math.sqrt,j=Math.min,x=Math.max,w=Math.abs,C=[],_=[[],[]];h=6*t-12*r+6*a,d=-3*t+9*r-9*a+3*l,f=3*r-3*t;for(var S=0;S<2;++S)if(S>0&&(h=6*n-12*i+6*s,d=-3*n+9*i-9*s+3*u,f=3*i-3*n),w(d)<1e-12){if(w(h)<1e-12)continue;0<(p=-f/h)&&p<1&&C.push(p)}else(m=h*h-4*f*d)<0||(0<(g=(-h+(v=y(m)))/(2*d))&&g<1&&C.push(g),0<(b=(-h-v)/(2*d))&&b<1&&C.push(b));for(var E,O,T,A=C.length,k=A;A--;)E=(T=1-(p=C[A]))*T*T*t+3*T*T*p*r+3*T*p*p*a+p*p*p*l,_[0][A]=E,O=T*T*T*n+3*T*T*p*i+3*T*p*p*s+p*p*p*u,_[1][A]=O;_[0][k]=t,_[1][k]=n,_[0][k+1]=l,_[1][k+1]=u;var M=[{x:j.apply(null,_[0]),y:j.apply(null,_[1])},{x:x.apply(null,_[0]),y:x.apply(null,_[1])}];return o.cachesBoundsOfCurve&&(o.boundsOfCurveCache[c]=M),M}function l(e,t,n){for(var r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=i(n[6]-e,n[7]-t,r,o,s,l,a),c=0,d=u.length;c<d;c++)u[c][1]+=e,u[c][2]+=t,u[c][3]+=e,u[c][4]+=t,u[c][5]+=e,u[c][6]+=t;return u}function u(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function c(e,t,n,r,o,i,a,s){return function(l){var u,c=(u=l)*u*u,d=function(e){return 3*e*e*(1-e)}(l),h=function(e){return 3*e*(1-e)*(1-e)}(l),f=function(e){return(1-e)*(1-e)*(1-e)}(l);return{x:a*c+o*d+n*h+e*f,y:s*c+i*d+r*h+t*f}}}function d(e,t,n,r,o,i,a,s){return function(l){var u=1-l,c=3*u*u*(n-e)+6*u*l*(o-n)+3*l*l*(a-o),d=3*u*u*(r-t)+6*u*l*(i-r)+3*l*l*(s-i);return Math.atan2(d,c)}}function h(e,t,n,r,o,i){return function(a){var s,l=(s=a)*s,u=function(e){return 2*e*(1-e)}(a),c=function(e){return(1-e)*(1-e)}(a);return{x:o*l+n*u+e*c,y:i*l+r*u+t*c}}}function f(e,t,n,r,o,i){return function(a){var s=1-a,l=2*s*(n-e)+2*a*(o-n),u=2*s*(r-t)+2*a*(i-r);return Math.atan2(u,l)}}function p(e,t,n){var r,o,i={x:t,y:n},a=0;for(o=.01;o<=1;o+=.01)r=e(o),a+=u(i.x,i.y,r.x,r.y),i=r;return a}function g(e,t){for(var n,r,o,i=0,a=0,s=e.iterator,l={x:e.x,y:e.y},c=.01,d=e.angleFinder;a<t&&i<=1&&c>1e-4;)n=s(i),o=i,(r=u(l.x,l.y,n.x,n.y))+a>t?i-=c/=2:(l=n,i+=c,a+=r);return n.angle=d(o),n}function b(e){for(var t,n,r,o,i=0,a=e.length,s=0,l=0,g=0,b=0,m=[],v=0;v<a;v++){switch(r={x:s,y:l,command:(t=e[v])[0]},t[0]){case"M":r.length=0,g=s=t[1],b=l=t[2];break;case"L":r.length=u(s,l,t[1],t[2]),s=t[1],l=t[2];break;case"C":n=c(s,l,t[1],t[2],t[3],t[4],t[5],t[6]),o=d(s,l,t[1],t[2],t[3],t[4],t[5],t[6]),r.iterator=n,r.angleFinder=o,r.length=p(n,s,l),s=t[5],l=t[6];break;case"Q":n=h(s,l,t[1],t[2],t[3],t[4]),o=f(s,l,t[1],t[2],t[3],t[4]),r.iterator=n,r.angleFinder=o,r.length=p(n,s,l),s=t[3],l=t[4];break;case"Z":case"z":r.destX=g,r.destY=b,r.length=u(s,l,g,b),s=g,l=b}i+=r.length,m.push(r)}return m.push({length:i,x:s,y:l}),m}o.util.parsePath=function(e){var r,i,a,s,l,u=[],c=[],d=o.rePathCommand,h="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",f="("+h+")"+o.commaWsp,p="([01])"+o.commaWsp+"?",g=new RegExp(f+"?"+f+"?"+f+p+p+f+"?("+h+")","g");if(!e||!e.match)return u;for(var b,m=0,v=(l=e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;m<v;m++){s=(r=l[m]).slice(1).trim(),c.length=0;var y=r.charAt(0);if(b=[y],"a"===y.toLowerCase())for(var j;j=g.exec(s);)for(var x=1;x<j.length;x++)c.push(j[x]);else for(;a=d.exec(s);)c.push(a[0]);x=0;for(var w=c.length;x<w;x++)i=parseFloat(c[x]),isNaN(i)||b.push(i);var C=t[y.toLowerCase()],_=n[y]||y;if(b.length-1>C)for(var S=1,E=b.length;S<E;S+=C)u.push([y].concat(b.slice(S,S+C))),y=_;else u.push(b)}return u},o.util.makePathSimpler=function(e){var t,n,r,o,i,a,s=0,u=0,c=e.length,d=0,h=0,f=[];for(n=0;n<c;++n){switch(r=!1,(t=e[n].slice(0))[0]){case"l":t[0]="L",t[1]+=s,t[2]+=u;case"L":s=t[1],u=t[2];break;case"h":t[1]+=s;case"H":t[0]="L",t[2]=u,s=t[1];break;case"v":t[1]+=u;case"V":t[0]="L",u=t[1],t[1]=s,t[2]=u;break;case"m":t[0]="M",t[1]+=s,t[2]+=u;case"M":s=t[1],u=t[2],d=t[1],h=t[2];break;case"c":t[0]="C",t[1]+=s,t[2]+=u,t[3]+=s,t[4]+=u,t[5]+=s,t[6]+=u;case"C":i=t[3],a=t[4],s=t[5],u=t[6];break;case"s":t[0]="S",t[1]+=s,t[2]+=u,t[3]+=s,t[4]+=u;case"S":"C"===o?(i=2*s-i,a=2*u-a):(i=s,a=u),s=t[3],u=t[4],t[0]="C",t[5]=t[3],t[6]=t[4],t[3]=t[1],t[4]=t[2],t[1]=i,t[2]=a,i=t[3],a=t[4];break;case"q":t[0]="Q",t[1]+=s,t[2]+=u,t[3]+=s,t[4]+=u;case"Q":i=t[1],a=t[2],s=t[3],u=t[4];break;case"t":t[0]="T",t[1]+=s,t[2]+=u;case"T":"Q"===o?(i=2*s-i,a=2*u-a):(i=s,a=u),t[0]="Q",s=t[1],u=t[2],t[1]=i,t[2]=a,t[3]=s,t[4]=u;break;case"a":t[0]="A",t[6]+=s,t[7]+=u;case"A":r=!0,f=f.concat(l(s,u,t)),s=t[6],u=t[7];break;case"z":case"Z":s=d,u=h}r||f.push(t),o=t[0]}return f},o.util.getPathSegmentsInfo=b,o.util.fromArcToBeziers=l,o.util.fromArcToBeizers=l,o.util.getBoundsOfCurve=s,o.util.getPointOnPath=function(e,t,n){n||(n=b(e));for(var r=0;t-n[r].length>0&&r<n.length-2;)t-=n[r].length,r++;var i,a=n[r],s=t/a.length,l=a.command,u=e[r];switch(l){case"M":return{x:a.x,y:a.y,angle:0};case"Z":case"z":return(i=new o.Point(a.x,a.y).lerp(new o.Point(a.destX,a.destY),s)).angle=Math.atan2(a.destY-a.y,a.destX-a.x),i;case"L":return(i=new o.Point(a.x,a.y).lerp(new o.Point(u[1],u[2]),s)).angle=Math.atan2(u[2]-a.y,u[1]-a.x),i;case"C":case"Q":return g(a,t)}},o.util.getBoundsOfArc=function(e,t,n,r,o,a,l,u,c){for(var d,h=0,f=0,p=[],g=i(u-e,c-t,n,r,a,l,o),b=0,m=g.length;b<m;b++)d=s(h,f,g[b][1],g[b][2],g[b][3],g[b][4],g[b][5],g[b][6]),p.push({x:d[0].x+e,y:d[0].y+t}),p.push({x:d[1].x+e,y:d[1].y+t}),h=g[b][5],f=g[b][6];return p},o.util.drawArc=function(e,t,n,r){l(t,n,r=r.slice(0).unshift("X")).forEach((function(t){e.bezierCurveTo.apply(e,t.slice(1))}))}}(),function(){var e=Array.prototype.slice;function t(e,t,n){if(e&&0!==e.length){var r=e.length-1,o=t?e[r][t]:e[r];if(t)for(;r--;)n(e[r][t],o)&&(o=e[r][t]);else for(;r--;)n(e[r],o)&&(o=e[r]);return o}}o.util.array={fill:function(e,t){for(var n=e.length;n--;)e[n]=t;return e},invoke:function(t,n){for(var r=e.call(arguments,2),o=[],i=0,a=t.length;i<a;i++)o[i]=r.length?t[i][n].apply(t[i],r):t[i][n].call(t[i]);return o},min:function(e,n){return t(e,n,(function(e,t){return e<t}))},max:function(e,n){return t(e,n,(function(e,t){return e>=t}))}}}(),function(){function e(t,n,r){if(r)if(!o.isLikelyNode&&n instanceof Element)t=n;else if(n instanceof Array){t=[];for(var i=0,a=n.length;i<a;i++)t[i]=e({},n[i],r)}else if(n&&"object"===typeof n)for(var s in n)"canvas"===s||"group"===s?t[s]=null:n.hasOwnProperty(s)&&(t[s]=e({},n[s],r));else t=n;else for(var s in n)t[s]=n[s];return t}o.util.object={extend:e,clone:function(t,n){return e({},t,n)}},o.util.object.extend(o.util,o.Observable)}(),function(){function e(e,t){var n=e.charCodeAt(t);if(isNaN(n))return"";if(n<55296||n>57343)return e.charAt(t);if(55296<=n&&n<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";var r=e.charCodeAt(t+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";var o=e.charCodeAt(t-1);if(55296>o||o>56319)throw"Low surrogate without preceding high surrogate";return!1}o.util.string={camelize:function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(t){var n,r=0,o=[];for(r=0;r<t.length;r++)!1!==(n=e(t,r))&&o.push(n);return o}}}(),function(){var e=Array.prototype.slice,t=function(){},n=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),r=function(e,t,r){for(var o in t)o in e.prototype&&"function"===typeof e.prototype[o]&&(t[o]+"").indexOf("callSuper")>-1?e.prototype[o]=function(e){return function(){var n=this.constructor.superclass;this.constructor.superclass=r;var o=t[e].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==e)return o}}(o):e.prototype[o]=t[o],n&&(t.toString!==Object.prototype.toString&&(e.prototype.toString=t.toString),t.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=t.valueOf))};function i(){}function a(t){for(var n=null,r=this;r.constructor.superclass;){var o=r.constructor.superclass.prototype[t];if(r[t]!==o){n=o;break}r=r.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,e.call(arguments,1)):n.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}o.util.createClass=function(){var n=null,o=e.call(arguments,0);function s(){this.initialize.apply(this,arguments)}"function"===typeof o[0]&&(n=o.shift()),s.superclass=n,s.subclasses=[],n&&(i.prototype=n.prototype,s.prototype=new i,n.subclasses.push(s));for(var l=0,u=o.length;l<u;l++)r(s,o[l],n);return s.prototype.initialize||(s.prototype.initialize=t),s.prototype.constructor=s,s.prototype.callSuper=a,s}}(),function(){var e=!!o.document.createElement("div").attachEvent,t=["touchstart","touchmove","touchend"];o.util.addListener=function(t,n,r,o){t&&t.addEventListener(n,r,!e&&o)},o.util.removeListener=function(t,n,r,o){t&&t.removeEventListener(n,r,!e&&o)},o.util.getPointer=function(e){var t=e.target,n=o.util.getScrollLeftTop(t),r=function(e){var t=e.changedTouches;return t&&t[0]?t[0]:e}(e);return{x:r.clientX+n.left,y:r.clientY+n.top}},o.util.isTouchEvent=function(e){return t.indexOf(e.type)>-1||"touch"===e.pointerType}}(),function(){var e=o.document.createElement("div"),t="string"===typeof e.style.opacity,n="string"===typeof e.style.filter,r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,i=function(e){return e};t?i=function(e,t){return e.style.opacity=t,e}:n&&(i=function(e,t){var n=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(n.zoom=1),r.test(n.filter)?(t=t>=.9999?"":"alpha(opacity="+100*t+")",n.filter=n.filter.replace(r,t)):n.filter+=" alpha(opacity="+100*t+")",e}),o.util.setStyle=function(e,t){var n=e.style;if(!n)return e;if("string"===typeof t)return e.style.cssText+=";"+t,t.indexOf("opacity")>-1?i(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var r in t){if("opacity"===r)i(e,t[r]);else n["float"===r||"cssFloat"===r?"undefined"===typeof n.styleFloat?"cssFloat":"styleFloat":r]=t[r]}return e}}(),function(){var e=Array.prototype.slice;var t,n,r=function(t){return e.call(t,0)};try{t=r(o.document.childNodes)instanceof Array}catch(s){}function i(e,t){var n=o.document.createElement(e);for(var r in t)"class"===r?n.className=t[r]:"for"===r?n.htmlFor=t[r]:n.setAttribute(r,t[r]);return n}function a(e){for(var t=0,n=0,r=o.document.documentElement,i=o.document.body||{scrollLeft:0,scrollTop:0};e&&(e.parentNode||e.host)&&((e=e.parentNode||e.host)===o.document?(t=i.scrollLeft||r.scrollLeft||0,n=i.scrollTop||r.scrollTop||0):(t+=e.scrollLeft||0,n+=e.scrollTop||0),1!==e.nodeType||"fixed"!==e.style.position););return{left:t,top:n}}t||(r=function(e){for(var t=new Array(e.length),n=e.length;n--;)t[n]=e[n];return t}),n=o.document.defaultView&&o.document.defaultView.getComputedStyle?function(e,t){var n=o.document.defaultView.getComputedStyle(e,null);return n?n[t]:void 0}:function(e,t){var n=e.style[t];return!n&&e.currentStyle&&(n=e.currentStyle[t]),n},function(){var e=o.document.documentElement.style,t="userSelect"in e?"userSelect":"MozUserSelect"in e?"MozUserSelect":"WebkitUserSelect"in e?"WebkitUserSelect":"KhtmlUserSelect"in e?"KhtmlUserSelect":"";o.util.makeElementUnselectable=function(e){return"undefined"!==typeof e.onselectstart&&(e.onselectstart=o.util.falseFunction),t?e.style[t]="none":"string"===typeof e.unselectable&&(e.unselectable="on"),e},o.util.makeElementSelectable=function(e){return"undefined"!==typeof e.onselectstart&&(e.onselectstart=null),t?e.style[t]="":"string"===typeof e.unselectable&&(e.unselectable=""),e}}(),o.util.setImageSmoothing=function(e,t){e.imageSmoothingEnabled=e.imageSmoothingEnabled||e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled||e.oImageSmoothingEnabled,e.imageSmoothingEnabled=t},o.util.getById=function(e){return"string"===typeof e?o.document.getElementById(e):e},o.util.toArray=r,o.util.addClass=function(e,t){e&&-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=(e.className?" ":"")+t)},o.util.makeElement=i,o.util.wrapElement=function(e,t,n){return"string"===typeof t&&(t=i(t,n)),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t},o.util.getScrollLeftTop=a,o.util.getElementOffset=function(e){var t,r,o=e&&e.ownerDocument,i={left:0,top:0},s={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!o)return s;for(var u in l)s[l[u]]+=parseInt(n(e,u),10)||0;return t=o.documentElement,"undefined"!==typeof e.getBoundingClientRect&&(i=e.getBoundingClientRect()),r=a(e),{left:i.left+r.left-(t.clientLeft||0)+s.left,top:i.top+r.top-(t.clientTop||0)+s.top}},o.util.getNodeCanvas=function(e){var t=o.jsdomImplForWrapper(e);return t._canvas||t._image},o.util.cleanUpJsdomNode=function(e){if(o.isLikelyNode){var t=o.jsdomImplForWrapper(e);t&&(t._image=null,t._canvas=null,t._currentSrc=null,t._attributes=null,t._classList=null)}}}(),function(){function e(){}o.util.request=function(t,n){n||(n={});var r=n.method?n.method.toUpperCase():"GET",i=n.onComplete||function(){},a=new o.window.XMLHttpRequest,s=n.body||n.parameters;return a.onreadystatechange=function(){4===a.readyState&&(i(a),a.onreadystatechange=e)},"GET"===r&&(s=null,"string"===typeof n.parameters&&(t=function(e,t){return e+(/\?/.test(e)?"&":"?")+t}(t,n.parameters))),a.open(r,t,!0),"POST"!==r&&"PUT"!==r||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(s),a}}(),o.log=console.log,o.warn=console.warn,function(){function e(){return!1}function t(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t}var n=o.window.requestAnimationFrame||o.window.webkitRequestAnimationFrame||o.window.mozRequestAnimationFrame||o.window.oRequestAnimationFrame||o.window.msRequestAnimationFrame||function(e){return o.window.setTimeout(e,1e3/60)},r=o.window.cancelAnimationFrame||o.window.clearTimeout;function i(){return n.apply(o.window,arguments)}o.util.animate=function(n){i((function(r){n||(n={});var o,a=r||+new Date,s=n.duration||500,l=a+s,u=n.onChange||e,c=n.abort||e,d=n.onComplete||e,h=n.easing||t,f="startValue"in n?n.startValue:0,p="endValue"in n?n.endValue:100,g=n.byValue||p-f;n.onStart&&n.onStart(),function e(t){var n=(o=t||+new Date)>l?s:o-a,r=n/s,b=h(n,f,g,s),m=Math.abs((b-f)/g);if(!c())return o>l?(u(p,1,1),void d(p,1,1)):(u(b,m,r),void i(e));d(p,1,1)}(a)}))},o.util.requestAnimFrame=i,o.util.cancelAnimFrame=function(){return r.apply(o.window,arguments)}}(),function(){function e(e,t,n){var r="rgba("+parseInt(e[0]+n*(t[0]-e[0]),10)+","+parseInt(e[1]+n*(t[1]-e[1]),10)+","+parseInt(e[2]+n*(t[2]-e[2]),10);return r+=","+(e&&t?parseFloat(e[3]+n*(t[3]-e[3])):1),r+=")"}o.util.animateColor=function(t,n,r,i){var a=new o.Color(t).getSource(),s=new o.Color(n).getSource(),l=i.onComplete,u=i.onChange;i=i||{},o.util.animate(o.util.object.extend(i,{duration:r||500,startValue:a,endValue:s,byValue:s,easing:function(t,n,r,o){return e(n,r,i.colorEasing?i.colorEasing(t,o):1-Math.cos(t/o*(Math.PI/2)))},onComplete:function(t,n,r){if(l)return l(e(s,s,0),n,r)},onChange:function(t,n,r){if(u){if(Array.isArray(t))return u(e(t,t,0),n,r);u(t,n,r)}}}))}}(),function(){function e(e,t,n,r){return e<Math.abs(t)?(e=t,r=n/4):r=0===t&&0===e?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(t/e),{a:e,c:t,p:n,s:r}}function t(e,t,n){return e.a*Math.pow(2,10*(t-=1))*Math.sin((t*n-e.s)*(2*Math.PI)/e.p)}function n(e,t,n,o){return n-r(o-e,0,n,o)+t}function r(e,t,n,r){return(e/=r)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t}o.util.ease={easeInQuad:function(e,t,n,r){return n*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return n*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){return 0===e?t:n*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){return e===r?t+n:n*(1-Math.pow(2,-10*e/r))+t},easeInOutExpo:function(e,t,n,r){return 0===e?t:e===r?t+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(n,r,o,i){var a=0;return 0===n?r:1===(n/=i)?r+o:(a||(a=.3*i),-t(e(o,o,a,1.70158),n,i)+r)},easeOutElastic:function(t,n,r,o){var i=0;if(0===t)return n;if(1===(t/=o))return n+r;i||(i=.3*o);var a=e(r,r,i,1.70158);return a.a*Math.pow(2,-10*t)*Math.sin((t*o-a.s)*(2*Math.PI)/a.p)+a.c+n},easeInOutElastic:function(n,r,o,i){var a=0;if(0===n)return r;if(2===(n/=i/2))return r+o;a||(a=i*(.3*1.5));var s=e(o,o,a,1.70158);return n<1?-.5*t(s,n,i)+r:s.a*Math.pow(2,-10*(n-=1))*Math.sin((n*i-s.s)*(2*Math.PI)/s.p)*.5+s.c+r},easeInBack:function(e,t,n,r,o){return void 0===o&&(o=1.70158),n*(e/=r)*e*((o+1)*e-o)+t},easeOutBack:function(e,t,n,r,o){return void 0===o&&(o=1.70158),n*((e=e/r-1)*e*((o+1)*e+o)+1)+t},easeInOutBack:function(e,t,n,r,o){return void 0===o&&(o=1.70158),(e/=r/2)<1?n/2*(e*e*((1+(o*=1.525))*e-o))+t:n/2*((e-=2)*e*((1+(o*=1.525))*e+o)+2)+t},easeInBounce:n,easeOutBounce:r,easeInOutBounce:function(e,t,o,i){return e<i/2?.5*n(2*e,0,o,i)+t:.5*r(2*e-i,0,o,i)+.5*o+t}}}(),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.object.clone,o=t.util.toFixed,i=t.util.parseUnit,a=t.util.multiplyTransformMatrices,s={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},l={stroke:"strokeOpacity",fill:"fillOpacity"},u="font-size",c="clip-path";function d(e){return e in s?s[e]:e}function h(e,n,r,o){var s,l="[object Array]"===Object.prototype.toString.call(n);if("fill"!==e&&"stroke"!==e||"none"!==n){if("strokeUniform"===e)return"non-scaling-stroke"===n;if("strokeDashArray"===e)n="none"===n?null:n.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)n=r&&r.transformMatrix?a(r.transformMatrix,t.parseTransformAttribute(n)):t.parseTransformAttribute(n);else if("visible"===e)n="none"!==n&&"hidden"!==n,r&&!1===r.visible&&(n=!1);else if("opacity"===e)n=parseFloat(n),r&&"undefined"!==typeof r.opacity&&(n*=r.opacity);else if("textAnchor"===e)n="start"===n?"left":"end"===n?"right":"center";else if("charSpacing"===e)s=i(n,o)/o*1e3;else if("paintFirst"===e){var u=n.indexOf("fill"),c=n.indexOf("stroke");n="fill";(u>-1&&c>-1&&c<u||-1===u&&c>-1)&&(n="stroke")}else{if("href"===e||"xlink:href"===e||"font"===e)return n;if("imageSmoothing"===e)return"optimizeQuality"===n;s=l?n.map(i):i(n,o)}}else n="";return!l&&isNaN(s)?n:s}function f(e){return new RegExp("^("+e.join("|")+")\\b","i")}function p(e,t){var n,r,o,i,a=[];for(o=0,i=t.length;o<i;o++)n=t[o],r=e.getElementsByTagName(n),a=a.concat(Array.prototype.slice.call(r));return a}function g(e,t){var n,r=!0;return(n=b(e,t.pop()))&&t.length&&(r=function(e,t){var n,r=!0;for(;e.parentNode&&1===e.parentNode.nodeType&&t.length;)r&&(n=t.pop()),r=b(e=e.parentNode,n);return 0===t.length}(e,t)),n&&r&&0===t.length}function b(e,t){var n,r,o=e.nodeName,i=e.getAttribute("class"),a=e.getAttribute("id");if(n=new RegExp("^"+o,"i"),t=t.replace(n,""),a&&t.length&&(n=new RegExp("#"+a+"(?![a-zA-Z\\-]+)","i"),t=t.replace(n,"")),i&&t.length)for(r=(i=i.split(" ")).length;r--;)n=new RegExp("\\."+i[r]+"(?![a-zA-Z\\-]+)","i"),t=t.replace(n,"");return 0===t.length}function m(e,t){var n;if(e.getElementById&&(n=e.getElementById(t)),n)return n;var r,o,i,a=e.getElementsByTagName("*");for(o=0,i=a.length;o<i;o++)if(t===(r=a[o]).getAttribute("id"))return r}t.svgValidTagNamesRegEx=f(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),t.svgViewBoxElementsRegEx=f(["symbol","image","marker","pattern","view","svg"]),t.svgInvalidAncestorsRegEx=f(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),t.svgValidParentsRegEx=f(["symbol","g","a","svg","clipPath","defs"]),t.cssRules={},t.gradientDefs={},t.clipPaths={},t.parseTransformAttribute=function(){function e(e,n,r){e[r]=Math.tan(t.util.degreesToRadians(n[0]))}var n=t.iMatrix,r=t.reNum,o=t.commaWsp,i="(?:"+("(?:(matrix)\\s*\\(\\s*("+r+")"+o+"("+r+")"+o+"("+r+")"+o+"("+r+")"+o+"("+r+")"+o+"("+r+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+r+")(?:"+o+"("+r+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+r+")(?:"+o+"("+r+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+r+")(?:"+o+"("+r+")"+o+"("+r+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+r+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+r+")\\s*\\))")+")",a=new RegExp("^\\s*(?:"+("(?:"+i+"(?:"+o+"*"+i+")*)")+"?)\\s*$"),s=new RegExp(i,"g");return function(r){var o=n.concat(),l=[];if(!r||r&&!a.test(r))return o;r.replace(s,(function(r){var a=new RegExp(i).exec(r).filter((function(e){return!!e})),s=a[1],u=a.slice(2).map(parseFloat);switch(s){case"translate":!function(e,t){e[4]=t[0],2===t.length&&(e[5]=t[1])}(o,u);break;case"rotate":u[0]=t.util.degreesToRadians(u[0]),function(e,n){var r=t.util.cos(n[0]),o=t.util.sin(n[0]),i=0,a=0;3===n.length&&(i=n[1],a=n[2]),e[0]=r,e[1]=o,e[2]=-o,e[3]=r,e[4]=i-(r*i-o*a),e[5]=a-(o*i+r*a)}(o,u);break;case"scale":!function(e,t){var n=t[0],r=2===t.length?t[1]:t[0];e[0]=n,e[3]=r}(o,u);break;case"skewX":e(o,u,2);break;case"skewY":e(o,u,1);break;case"matrix":o=u}l.push(o.concat()),o=n.concat()}));for(var u=l[0];l.length>1;)l.shift(),u=t.util.multiplyTransformMatrices(u,l[0]);return u}}();var v=new RegExp("^\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*$");function y(e){if(t.svgViewBoxElementsRegEx.test(e.nodeName)){var n,r,o,a,s,l,u=e.getAttribute("viewBox"),c=1,d=1,h=e.getAttribute("width"),f=e.getAttribute("height"),p=e.getAttribute("x")||0,g=e.getAttribute("y")||0,b=e.getAttribute("preserveAspectRatio")||"",m=!u||!(u=u.match(v)),y=!h||!f||"100%"===h||"100%"===f,j=m&&y,x={},w="",C=0,_=0;if(x.width=0,x.height=0,x.toBeParsed=j,m&&(p||g)&&e.parentNode&&"#document"!==e.parentNode.nodeName&&(w=" translate("+i(p)+" "+i(g)+") ",s=(e.getAttribute("transform")||"")+w,e.setAttribute("transform",s),e.removeAttribute("x"),e.removeAttribute("y")),j)return x;if(m)return x.width=i(h),x.height=i(f),x;if(n=-parseFloat(u[1]),r=-parseFloat(u[2]),o=parseFloat(u[3]),a=parseFloat(u[4]),x.minX=n,x.minY=r,x.viewBoxWidth=o,x.viewBoxHeight=a,y?(x.width=o,x.height=a):(x.width=i(h),x.height=i(f),c=x.width/o,d=x.height/a),"none"!==(b=t.util.parsePreserveAspectRatioAttribute(b)).alignX&&("meet"===b.meetOrSlice&&(d=c=c>d?d:c),"slice"===b.meetOrSlice&&(d=c=c>d?c:d),C=x.width-o*c,_=x.height-a*c,"Mid"===b.alignX&&(C/=2),"Mid"===b.alignY&&(_/=2),"Min"===b.alignX&&(C=0),"Min"===b.alignY&&(_=0)),1===c&&1===d&&0===n&&0===r&&0===p&&0===g)return x;if((p||g)&&"#document"!==e.parentNode.nodeName&&(w=" translate("+i(p)+" "+i(g)+") "),s=w+" matrix("+c+" 0 0 "+d+" "+(n*c+C)+" "+(r*d+_)+") ","svg"===e.nodeName){for(l=e.ownerDocument.createElementNS(t.svgNS,"g");e.firstChild;)l.appendChild(e.firstChild);e.appendChild(l)}else(l=e).removeAttribute("x"),l.removeAttribute("y"),s=l.getAttribute("transform")+s;return l.setAttribute("transform",s),x}}function j(e,t){var n="xlink:href",r=m(e,t.getAttribute(n).substr(1));if(r&&r.getAttribute(n)&&j(e,r),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach((function(e){r&&!t.hasAttribute(e)&&r.hasAttribute(e)&&t.setAttribute(e,r.getAttribute(e))})),!t.children.length)for(var o=r.cloneNode(!0);o.firstChild;)t.appendChild(o.firstChild);t.removeAttribute(n)}t.parseSVGDocument=function(e,n,o,i){if(e){!function(e){for(var n=p(e,["use","svg:use"]),r=0;n.length&&r<n.length;){var o=n[r],i=o.getAttribute("xlink:href")||o.getAttribute("href");if(null===i)return;var a,s,l,u,c=i.substr(1),d=o.getAttribute("x")||0,h=o.getAttribute("y")||0,f=m(e,c).cloneNode(!0),g=(f.getAttribute("transform")||"")+" translate("+d+", "+h+")",b=n.length,v=t.svgNS;if(y(f),/^svg$/i.test(f.nodeName)){var j=f.ownerDocument.createElementNS(v,"g");for(s=0,u=(l=f.attributes).length;s<u;s++)a=l.item(s),j.setAttributeNS(v,a.nodeName,a.nodeValue);for(;f.firstChild;)j.appendChild(f.firstChild);f=j}for(s=0,u=(l=o.attributes).length;s<u;s++)"x"!==(a=l.item(s)).nodeName&&"y"!==a.nodeName&&"xlink:href"!==a.nodeName&&"href"!==a.nodeName&&("transform"===a.nodeName?g=a.nodeValue+" "+g:f.setAttribute(a.nodeName,a.nodeValue));f.setAttribute("transform",g),f.setAttribute("instantiated_by_use","1"),f.removeAttribute("id"),o.parentNode.replaceChild(f,o),n.length===b&&r++}}(e);var a,s,l=t.Object.__uid++,u=y(e),c=t.util.toArray(e.getElementsByTagName("*"));if(u.crossOrigin=i&&i.crossOrigin,u.svgUid=l,0===c.length&&t.isLikelyNode){var d=[];for(a=0,s=(c=e.selectNodes('//*[name(.)!="svg"]')).length;a<s;a++)d[a]=c[a];c=d}var h=c.filter((function(e){return y(e),t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))&&!function(e,t){for(;e&&(e=e.parentNode);)if(e.nodeName&&t.test(e.nodeName.replace("svg:",""))&&!e.getAttribute("instantiated_by_use"))return!0;return!1}(e,t.svgInvalidAncestorsRegEx)}));if(!h||h&&!h.length)n&&n([],{});else{var f={};c.filter((function(e){return"clipPath"===e.nodeName.replace("svg:","")})).forEach((function(e){var n=e.getAttribute("id");f[n]=t.util.toArray(e.getElementsByTagName("*")).filter((function(e){return t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))}))})),t.gradientDefs[l]=t.getGradientDefs(e),t.cssRules[l]=t.getCSSRules(e),t.clipPaths[l]=f,t.parseElements(h,(function(e,r){n&&(n(e,u,r,c),delete t.gradientDefs[l],delete t.cssRules[l],delete t.clipPaths[l])}),r(u),o,i)}}};var x=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+t.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+t.reNum+"))?\\s+(.*)");n(t,{parseFontDeclaration:function(e,t){var n=e.match(x);if(n){var r=n[1],o=n[3],a=n[4],s=n[5],l=n[6];r&&(t.fontStyle=r),o&&(t.fontWeight=isNaN(parseFloat(o))?o:parseFloat(o)),a&&(t.fontSize=i(a)),l&&(t.fontFamily=l),s&&(t.lineHeight="normal"===s?1:s)}},getGradientDefs:function(e){var t,n=p(e,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),r=0,o={};for(r=n.length;r--;)(t=n[r]).getAttribute("xlink:href")&&j(e,t),o[t.getAttribute("id")]=t;return o},parseAttributes:function(e,r,a){if(e){var s,f,p,b={};"undefined"===typeof a&&(a=e.getAttribute("svgUid")),e.parentNode&&t.svgValidParentsRegEx.test(e.parentNode.nodeName)&&(b=t.parseAttributes(e.parentNode,r,a));var m=r.reduce((function(t,n){return(s=e.getAttribute(n))&&(t[n]=s),t}),{}),v=n(function(e,n){var r={};for(var o in t.cssRules[n])if(g(e,o.split(" ")))for(var i in t.cssRules[n][o])r[i]=t.cssRules[n][o][i];return r}(e,a),t.parseStyleAttribute(e));m=n(m,v),v[c]&&e.setAttribute(c,v[c]),f=p=b.fontSize||t.Text.DEFAULT_SVG_FONT_SIZE,m[u]&&(m[u]=f=i(m[u],p));var y,j,x={};for(var w in m)j=h(y=d(w),m[w],b,f),x[y]=j;x&&x.font&&t.parseFontDeclaration(x.font,x);var C=n(b,x);return t.svgValidParentsRegEx.test(e.nodeName)?C:function(e){for(var n in l)if("undefined"!==typeof e[l[n]]&&""!==e[n]){if("undefined"===typeof e[n]){if(!t.Object.prototype[n])continue;e[n]=t.Object.prototype[n]}if(0!==e[n].indexOf("url(")){var r=new t.Color(e[n]);e[n]=r.setAlpha(o(r.getAlpha()*e[l[n]],2)).toRgba()}}return e}(C)}},parseElements:function(e,n,r,o,i){new t.ElementsParser(e,n,r,o,i).parse()},parseStyleAttribute:function(e){var t={},n=e.getAttribute("style");return n?("string"===typeof n?function(e,t){var n,r;e.replace(/;\s*$/,"").split(";").forEach((function(e){var o=e.split(":");n=o[0].trim().toLowerCase(),r=o[1].trim(),t[n]=r}))}(n,t):function(e,t){var n,r;for(var o in e)"undefined"!==typeof e[o]&&(n=o.toLowerCase(),r=e[o],t[n]=r)}(n,t),t):t},parsePointsAttribute:function(e){if(!e)return null;var t,n,r=[];for(t=0,n=(e=(e=e.replace(/,/g," ").trim()).split(/\s+/)).length;t<n;t+=2)r.push({x:parseFloat(e[t]),y:parseFloat(e[t+1])});return r},getCSSRules:function(e){var n,r,o=e.getElementsByTagName("style"),i={};for(n=0,r=o.length;n<r;n++){var a=o[n].textContent;""!==(a=a.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&a.match(/[^{]*\{[\s\S]*?\}/g).map((function(e){return e.trim()})).forEach((function(e){var o=e.match(/([\s\S]*?)\s*\{([^}]*)\}/),a={},s=o[2].trim().replace(/;$/,"").split(/\s*;\s*/);for(n=0,r=s.length;n<r;n++){var l=s[n].split(/\s*:\s*/),u=l[0],c=l[1];a[u]=c}(e=o[1]).split(",").forEach((function(e){""!==(e=e.replace(/^svg/i,"").trim())&&(i[e]?t.util.object.extend(i[e],a):i[e]=t.util.object.clone(a))}))}))}return i},loadSVGFromURL:function(e,n,r,o){e=e.replace(/^\n\s*/,"").trim(),new t.util.request(e,{method:"get",onComplete:function(e){var i=e.responseXML;if(!i||!i.documentElement)return n&&n(null),!1;t.parseSVGDocument(i.documentElement,(function(e,t,r,o){n&&n(e,t,r,o)}),r,o)}})},loadSVGFromString:function(e,n,r,o){var i=(new t.window.DOMParser).parseFromString(e.trim(),"text/xml");t.parseSVGDocument(i.documentElement,(function(e,t,r,o){n(e,t,r,o)}),r,o)}})}(t),o.ElementsParser=function(e,t,n,r,o,i){this.elements=e,this.callback=t,this.options=n,this.reviver=r,this.svgUid=n&&n.svgUid||0,this.parsingOptions=o,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=i},(r=o.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},r.createObjects=function(){var e=this;this.elements.forEach((function(t,n){t.setAttribute("svgUid",e.svgUid),e.createObject(t,n)}))},r.findTag=function(e){return o[o.util.string.capitalize(e.tagName.replace("svg:",""))]},r.createObject=function(e,t){var n=this.findTag(e);if(n&&n.fromElement)try{n.fromElement(e,this.createCallback(t,e),this.options)}catch(r){o.log(r)}else this.checkIfDone()},r.createCallback=function(e,t){var n=this;return function(r){var i;n.resolveGradient(r,t,"fill"),n.resolveGradient(r,t,"stroke"),r instanceof o.Image&&r._originalElement&&(i=r.parsePreserveAspectRatioAttribute(t)),r._removeTransformMatrix(i),n.resolveClipPath(r,t),n.reviver&&n.reviver(t,r),n.instances[e]=r,n.checkIfDone()}},r.extractPropertyDefinition=function(e,t,n){var r=e[t],i=this.regexUrl;if(i.test(r)){i.lastIndex=0;var a=i.exec(r)[1];return i.lastIndex=0,o[n][this.svgUid][a]}},r.resolveGradient=function(e,t,n){var r=this.extractPropertyDefinition(e,n,"gradientDefs");if(r){var i=t.getAttribute(n+"-opacity"),a=o.Gradient.fromElement(r,e,i,this.options);e.set(n,a)}},r.createClipPathCallback=function(e,t){return function(e){e._removeTransformMatrix(),e.fillRule=e.clipRule,t.push(e)}},r.resolveClipPath=function(e,t){var n,r,i,a,s=this.extractPropertyDefinition(e,"clipPath","clipPaths");if(s){i=[],r=o.util.invertTransform(e.calcTransformMatrix());for(var l=s[0].parentNode,u=t;u.parentNode&&u.getAttribute("clip-path")!==e.clipPath;)u=u.parentNode;u.parentNode.appendChild(l);for(var c=0;c<s.length;c++)n=s[c],this.findTag(n).fromElement(n,this.createClipPathCallback(e,i),this.options);s=1===i.length?i[0]:new o.Group(i),a=o.util.multiplyTransformMatrices(r,s.calcTransformMatrix()),s.clipPath&&this.resolveClipPath(s,u);var d=o.util.qrDecompose(a);s.flipX=!1,s.flipY=!1,s.set("scaleX",d.scaleX),s.set("scaleY",d.scaleY),s.angle=d.angle,s.skewX=d.skewX,s.skewY=0,s.setPositionByOrigin({x:d.translateX,y:d.translateY},"center","center"),e.clipPath=s}else delete e.clipPath},r.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter((function(e){return null!=e})),this.callback(this.instances,this.elements))},function(e){"use strict";var t=e.fabric||(e.fabric={});function n(e,t){this.x=e,this.y=t}t.Point?t.warn("fabric.Point is already defined"):(t.Point=n,n.prototype={type:"point",constructor:n,add:function(e){return new n(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new n(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new n(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new n(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new n(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new n(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,t){return"undefined"===typeof t&&(t=.5),t=Math.max(Math.min(1,t),0),new n(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)},distanceFrom:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},midPointFrom:function(e){return this.lerp(e)},min:function(e){return new n(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new n(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setFromPoint:function(e){return this.x=e.x,this.y=e.y,this},swap:function(e){var t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n},clone:function(){return new n(this.x,this.y)}})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});function n(e){this.status=e,this.points=[]}t.Intersection?t.warn("fabric.Intersection is already defined"):(t.Intersection=n,t.Intersection.prototype={constructor:n,appendPoint:function(e){return this.points.push(e),this},appendPoints:function(e){return this.points=this.points.concat(e),this}},t.Intersection.intersectLineLine=function(e,r,o,i){var a,s=(i.x-o.x)*(e.y-o.y)-(i.y-o.y)*(e.x-o.x),l=(r.x-e.x)*(e.y-o.y)-(r.y-e.y)*(e.x-o.x),u=(i.y-o.y)*(r.x-e.x)-(i.x-o.x)*(r.y-e.y);if(0!==u){var c=s/u,d=l/u;0<=c&&c<=1&&0<=d&&d<=1?(a=new n("Intersection")).appendPoint(new t.Point(e.x+c*(r.x-e.x),e.y+c*(r.y-e.y))):a=new n}else a=new n(0===s||0===l?"Coincident":"Parallel");return a},t.Intersection.intersectLinePolygon=function(e,t,r){var o,i,a,s,l=new n,u=r.length;for(s=0;s<u;s++)o=r[s],i=r[(s+1)%u],a=n.intersectLineLine(e,t,o,i),l.appendPoints(a.points);return l.points.length>0&&(l.status="Intersection"),l},t.Intersection.intersectPolygonPolygon=function(e,t){var r,o=new n,i=e.length;for(r=0;r<i;r++){var a=e[r],s=e[(r+1)%i],l=n.intersectLinePolygon(a,s,t);o.appendPoints(l.points)}return o.points.length>0&&(o.status="Intersection"),o},t.Intersection.intersectPolygonRectangle=function(e,r,o){var i=r.min(o),a=r.max(o),s=new t.Point(a.x,i.y),l=new t.Point(i.x,a.y),u=n.intersectLinePolygon(i,s,e),c=n.intersectLinePolygon(s,a,e),d=n.intersectLinePolygon(a,l,e),h=n.intersectLinePolygon(l,i,e),f=new n;return f.appendPoints(u.points),f.appendPoints(c.points),f.appendPoints(d.points),f.appendPoints(h.points),f.points.length>0&&(f.status="Intersection"),f})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});function n(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}function r(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}t.Color?t.warn("fabric.Color is already defined."):(t.Color=n,t.Color.prototype={_tryParsingColor:function(e){var t;e in n.colorNameMap&&(e=n.colorNameMap[e]),"transparent"===e&&(t=[255,255,255,0]),t||(t=n.sourceFromHex(e)),t||(t=n.sourceFromRgb(e)),t||(t=n.sourceFromHsl(e)),t||(t=[0,0,0,1]),t&&this.setSource(t)},_rgbToHsl:function(e,n,r){e/=255,n/=255,r/=255;var o,i,a,s=t.util.array.max([e,n,r]),l=t.util.array.min([e,n,r]);if(a=(s+l)/2,s===l)o=i=0;else{var u=s-l;switch(i=a>.5?u/(2-s-l):u/(s+l),s){case e:o=(n-r)/u+(n<r?6:0);break;case n:o=(r-e)/u+2;break;case r:o=(e-n)/u+4}o/=6}return[Math.round(360*o),Math.round(100*i),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+t[0]+","+t[1]+"%,"+t[2]+"%)"},toHsla:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+t[0]+","+t[1]+"%,"+t[2]+"%,"+e[3]+")"},toHex:function(){var e,t,n,r=this.getSource();return e=1===(e=r[0].toString(16)).length?"0"+e:e,t=1===(t=r[1].toString(16)).length?"0"+t:t,n=1===(n=r[2].toString(16)).length?"0"+n:n,e.toUpperCase()+t.toUpperCase()+n.toUpperCase()},toHexa:function(){var e,t=this.getSource();return e=1===(e=(e=Math.round(255*t[3])).toString(16)).length?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var t=this.getSource();return t[3]=e,this.setSource(t),this},toGrayscale:function(){var e=this.getSource(),t=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10),n=e[3];return this.setSource([t,t,t,n]),this},toBlackWhite:function(e){var t=this.getSource(),n=(.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),r=t[3];return e=e||127,n=Number(n)<Number(e)?0:255,this.setSource([n,n,n,r]),this},overlayWith:function(e){e instanceof n||(e=new n(e));var t,r=[],o=this.getAlpha(),i=this.getSource(),a=e.getSource();for(t=0;t<3;t++)r.push(Math.round(.5*i[t]+.5*a[t]));return r[3]=o,this.setSource(r),this}},t.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,t.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,t.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,t.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},t.Color.fromRgb=function(e){return n.fromSource(n.sourceFromRgb(e))},t.Color.sourceFromRgb=function(e){var t=e.match(n.reRGBa);if(t){var r=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),o=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1),i=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1);return[parseInt(r,10),parseInt(o,10),parseInt(i,10),t[4]?parseFloat(t[4]):1]}},t.Color.fromRgba=n.fromRgb,t.Color.fromHsl=function(e){return n.fromSource(n.sourceFromHsl(e))},t.Color.sourceFromHsl=function(e){var t=e.match(n.reHSLa);if(t){var o,i,a,s=(parseFloat(t[1])%360+360)%360/360,l=parseFloat(t[2])/(/%$/.test(t[2])?100:1),u=parseFloat(t[3])/(/%$/.test(t[3])?100:1);if(0===l)o=i=a=u;else{var c=u<=.5?u*(l+1):u+l-u*l,d=2*u-c;o=r(d,c,s+1/3),i=r(d,c,s),a=r(d,c,s-1/3)}return[Math.round(255*o),Math.round(255*i),Math.round(255*a),t[4]?parseFloat(t[4]):1]}},t.Color.fromHsla=n.fromHsl,t.Color.fromHex=function(e){return n.fromSource(n.sourceFromHex(e))},t.Color.sourceFromHex=function(e){if(e.match(n.reHex)){var t=e.slice(e.indexOf("#")+1),r=3===t.length||4===t.length,o=8===t.length||4===t.length,i=r?t.charAt(0)+t.charAt(0):t.substring(0,2),a=r?t.charAt(1)+t.charAt(1):t.substring(2,4),s=r?t.charAt(2)+t.charAt(2):t.substring(4,6),l=o?r?t.charAt(3)+t.charAt(3):t.substring(6,8):"FF";return[parseInt(i,16),parseInt(a,16),parseInt(s,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},t.Color.fromSource=function(e){var t=new n;return t.setSource(e),t})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=["e","se","s","sw","w","nw","n","ne","e"],r=["ns","nesw","ew","nwse"],o={},i="left",a="top",s="right",l="bottom",u="center",c={top:l,bottom:a,left:s,right:i,center:u},d=t.util.radiansToDegrees,h=Math.sign||function(e){return(e>0)-(e<0)||+e};function f(e,t){var n=e.angle+d(Math.atan2(t.y,t.x))+360;return Math.round(n%360/45)}function p(e,n){var r=n.transform.target,o=r.canvas,i=t.util.object.clone(n);i.target=r,o&&o.fire("object:"+e,i),r.fire(e,n)}function g(e,t){var n=t.canvas,r=e[n.uniScaleKey];return n.uniformScaling&&!r||!n.uniformScaling&&r}function b(e){return e.originX===u&&e.originY===u}function m(e,t,n){var r=e.lockScalingX,o=e.lockScalingY;return!(!r||!o)||(!(t||!r&&!o||!n)||(!(!r||"x"!==t)||!(!o||"y"!==t)))}function v(e,t,n,r){return{e:e,transform:t,pointer:{x:n,y:r}}}function y(e){return function(t,n,r,o){var i=n.target,a=i.getCenterPoint(),s=i.translateToOriginPoint(a,n.originX,n.originY),l=e(t,n,r,o);return i.setPositionByOrigin(s,n.originX,n.originY),l}}function j(e,t){return function(n,r,o,i){var a=t(n,r,o,i);return a&&p(e,v(n,r,o,i)),a}}function x(e,n,r,o,i){var a=e.target,s=a.controls[e.corner],l=a.canvas.getZoom(),u=a.padding/l,c=a.toLocalPoint(new t.Point(o,i),n,r);return c.x>=u&&(c.x-=u),c.x<=-u&&(c.x+=u),c.y>=u&&(c.y-=u),c.y<=u&&(c.y+=u),c.x-=s.offsetX,c.y-=s.offsetY,c}function w(e){return e.flipX!==e.flipY}function C(e,t,n,r,o){if(0!==e[t]){var i=o/e._getTransformedDimensions()[r]*e[n];e.set(n,i)}}function _(e,t,n,r){var o,u=t.target,c=u._getTransformedDimensions(0,u.skewY),h=x(t,t.originX,t.originY,n,r),f=Math.abs(2*h.x)-c.x,p=u.skewX;f<2?o=0:(o=d(Math.atan2(f/u.scaleX,c.y/u.scaleY)),t.originX===i&&t.originY===l&&(o=-o),t.originX===s&&t.originY===a&&(o=-o),w(u)&&(o=-o));var g=p!==o;if(g){var b=u._getTransformedDimensions().y;u.set("skewX",o),C(u,"skewY","scaleY","y",b)}return g}function S(e,t,n,r){var o,u=t.target,c=u._getTransformedDimensions(u.skewX,0),h=x(t,t.originX,t.originY,n,r),f=Math.abs(2*h.y)-c.y,p=u.skewY;f<2?o=0:(o=d(Math.atan2(f/u.scaleY,c.x/u.scaleX)),t.originX===i&&t.originY===l&&(o=-o),t.originX===s&&t.originY===a&&(o=-o),w(u)&&(o=-o));var g=p!==o;if(g){var b=u._getTransformedDimensions().x;u.set("skewY",o),C(u,"skewX","scaleX","x",b)}return g}function E(e,t,n,r,o){o=o||{};var i,a,s,l,u,d,f=t.target,p=f.lockScalingX,v=f.lockScalingY,y=o.by,j=g(e,f),w=m(f,y,j),C=t.gestureScale;if(w)return!1;if(C)a=t.scaleX*C,s=t.scaleY*C;else{if(i=x(t,t.originX,t.originY,n,r),u="y"!==y?h(i.x):1,d="x"!==y?h(i.y):1,t.signX||(t.signX=u),t.signY||(t.signY=d),f.lockScalingFlip&&(t.signX!==u||t.signY!==d))return!1;if(l=f._getTransformedDimensions(),j&&!y){var _=Math.abs(i.x)+Math.abs(i.y),S=t.original,E=_/(Math.abs(l.x*S.scaleX/f.scaleX)+Math.abs(l.y*S.scaleY/f.scaleY));a=S.scaleX*E,s=S.scaleY*E}else a=Math.abs(i.x*f.scaleX/l.x),s=Math.abs(i.y*f.scaleY/l.y);b(t)&&(a*=2,s*=2),t.signX!==u&&"y"!==y&&(t.originX=c[t.originX],a*=-1,t.signX=u),t.signY!==d&&"x"!==y&&(t.originY=c[t.originY],s*=-1,t.signY=d)}var O=f.scaleX,T=f.scaleY;return y?("x"===y&&f.set("scaleX",a),"y"===y&&f.set("scaleY",s)):(!p&&f.set("scaleX",a),!v&&f.set("scaleY",s)),O!==f.scaleX||T!==f.scaleY}o.scaleCursorStyleHandler=function(e,t,r){var o=g(e,r),i="";if(0!==t.x&&0===t.y?i="x":0===t.x&&0!==t.y&&(i="y"),m(r,i,o))return"not-allowed";var a=f(r,t);return n[a]+"-resize"},o.skewCursorStyleHandler=function(e,t,n){var o="not-allowed";if(0!==t.x&&n.lockSkewingY)return o;if(0!==t.y&&n.lockSkewingX)return o;var i=f(n,t)%4;return r[i]+"-resize"},o.scaleSkewCursorStyleHandler=function(e,t,n){return e[n.canvas.altActionKey]?o.skewCursorStyleHandler(e,t,n):o.scaleCursorStyleHandler(e,t,n)},o.rotationWithSnapping=j("rotating",y((function(e,t,n,r){var o=t,i=o.target,a=i.translateToOriginPoint(i.getCenterPoint(),o.originX,o.originY);if(i.lockRotation)return!1;var s,l=Math.atan2(o.ey-a.y,o.ex-a.x),u=Math.atan2(r-a.y,n-a.x),c=d(u-l+o.theta);if(i.snapAngle>0){var h=i.snapAngle,f=i.snapThreshold||h,p=Math.ceil(c/h)*h,g=Math.floor(c/h)*h;Math.abs(c-g)<f?c=g:Math.abs(c-p)<f&&(c=p)}return c<0&&(c=360+c),c%=360,s=i.angle!==c,i.angle=c,s}))),o.scalingEqually=j("scaling",y((function(e,t,n,r){return E(e,t,n,r)}))),o.scalingX=j("scaling",y((function(e,t,n,r){return E(e,t,n,r,{by:"x"})}))),o.scalingY=j("scaling",y((function(e,t,n,r){return E(e,t,n,r,{by:"y"})}))),o.scalingYOrSkewingX=function(e,t,n,r){return e[t.target.canvas.altActionKey]?o.skewHandlerX(e,t,n,r):o.scalingY(e,t,n,r)},o.scalingXOrSkewingY=function(e,t,n,r){return e[t.target.canvas.altActionKey]?o.skewHandlerY(e,t,n,r):o.scalingX(e,t,n,r)},o.changeWidth=j("resizing",y((function(e,t,n,r){var o=t.target,i=x(t,t.originX,t.originY,n,r),a=o.strokeWidth/(o.strokeUniform?o.scaleX:1),s=b(t)?2:1,l=o.width,u=Math.abs(i.x*s/o.scaleX)-a;return o.set("width",Math.max(u,0)),l!==u}))),o.skewHandlerX=function(e,t,n,r){var o,l=t.target,c=l.skewX,d=t.originY;return!l.lockSkewingX&&(0===c?o=x(t,u,u,n,r).x>0?i:s:(c>0&&(o=d===a?i:s),c<0&&(o=d===a?s:i),w(l)&&(o=o===i?s:i)),t.originX=o,j("skewing",y(_))(e,t,n,r))},o.skewHandlerY=function(e,t,n,r){var o,s=t.target,c=s.skewY,d=t.originX;return!s.lockSkewingY&&(0===c?o=x(t,u,u,n,r).y>0?a:l:(c>0&&(o=d===i?a:l),c<0&&(o=d===i?l:a),w(s)&&(o=o===a?l:a)),t.originY=o,j("skewing",y(S))(e,t,n,r))},o.dragHandler=function(e,t,n,r){var o=t.target,i=n-t.offsetX,a=r-t.offsetY,s=!o.get("lockMovementX")&&o.left!==i,l=!o.get("lockMovementY")&&o.top!==a;return s&&o.set("left",i),l&&o.set("top",a),(s||l)&&p("moving",v(e,t,n,r)),s||l},o.scaleOrSkewActionName=function(e,t,n){var r=e[n.canvas.altActionKey];return 0===t.x?r?"skewX":"scaleY":0===t.y?r?"skewY":"scaleX":void 0},o.rotationStyleHandler=function(e,t,n){return n.lockRotation?"not-allowed":t.cursorStyle},o.fireEvent=p,o.wrapWithFixedAnchor=y,o.wrapWithFireEvent=j,o.getLocalPoint=x,t.controlsUtils=o}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.degreesToRadians,r=t.controlsUtils;r.renderCircleControl=function(e,t,n,r,o){r=r||{};var i,a=this.sizeX||r.cornerSize||o.cornerSize,s=this.sizeY||r.cornerSize||o.cornerSize,l="undefined"!==typeof r.transparentCorners?r.transparentCorners:o.transparentCorners,u=l?"stroke":"fill",c=!l&&(r.cornerStrokeColor||o.cornerStrokeColor),d=t,h=n;e.save(),e.fillStyle=r.cornerColor||o.cornerColor,e.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor,a>s?(i=a,e.scale(1,s/a),h=n*a/s):s>a?(i=s,e.scale(a/s,1),d=t*s/a):i=a,e.lineWidth=1,e.beginPath(),e.arc(d,h,i/2,0,2*Math.PI,!1),e[u](),c&&e.stroke(),e.restore()},r.renderSquareControl=function(e,t,r,o,i){o=o||{};var a=this.sizeX||o.cornerSize||i.cornerSize,s=this.sizeY||o.cornerSize||i.cornerSize,l="undefined"!==typeof o.transparentCorners?o.transparentCorners:i.transparentCorners,u=l?"stroke":"fill",c=!l&&(o.cornerStrokeColor||i.cornerStrokeColor),d=a/2,h=s/2;e.save(),e.fillStyle=o.cornerColor||i.cornerColor,e.strokeStyle=o.cornerStrokeColor||i.cornerStrokeColor,e.lineWidth=1,e.translate(t,r),e.rotate(n(i.angle)),e[u+"Rect"](-d,-h,a,s),c&&e.strokeRect(-d,-h,a,s),e.restore()}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Control=function(e){for(var t in e)this[t]=e[t]},t.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(e,t){return t.cursorStyle},getActionName:function(e,t){return t.actionName},getVisibility:function(e,t){var n=e._controlsVisibility;return n&&"undefined"!==typeof n[t]?n[t]:this.visible},setVisibility:function(e){this.visible=e},positionHandler:function(e,n){return t.util.transformPoint({x:this.x*e.x+this.offsetX,y:this.y*e.y+this.offsetY},n)},calcCornerCoords:function(e,n,r,o,i){var a,s,l,u,c=i?this.touchSizeX:this.sizeX,d=i?this.touchSizeY:this.sizeY;if(c&&d&&c!==d){var h=Math.atan2(d,c),f=Math.sqrt(c*c+d*d)/2,p=h-t.util.degreesToRadians(e),g=Math.PI/2-h-t.util.degreesToRadians(e);a=f*t.util.cos(p),s=f*t.util.sin(p),l=f*t.util.cos(g),u=f*t.util.sin(g)}else{f=.7071067812*(c&&d?c:n);p=t.util.degreesToRadians(45-e);a=l=f*t.util.cos(p),s=u=f*t.util.sin(p)}return{tl:{x:r-u,y:o-l},tr:{x:r+a,y:o-s},bl:{x:r-a,y:o+s},br:{x:r+u,y:o+l}}},render:function(e,n,r,o,i){switch((o=o||{}).cornerStyle||i.cornerStyle){case"circle":t.controlsUtils.renderCircleControl.call(this,e,n,r,o,i);break;default:t.controlsUtils.renderSquareControl.call(this,e,n,r,o,i)}}}}(t),function(){function e(e,t){var n,r,i,a,s=e.getAttribute("style"),l=e.getAttribute("offset")||0;if(l=(l=parseFloat(l)/(/%$/.test(l)?100:1))<0?0:l>1?1:l,s){var u=s.split(/\s*;\s*/);for(""===u[u.length-1]&&u.pop(),a=u.length;a--;){var c=u[a].split(/\s*:\s*/),d=c[0].trim(),h=c[1].trim();"stop-color"===d?n=h:"stop-opacity"===d&&(i=h)}}return n||(n=e.getAttribute("stop-color")||"rgb(0,0,0)"),i||(i=e.getAttribute("stop-opacity")),r=(n=new o.Color(n)).getAlpha(),i=isNaN(parseFloat(i))?1:parseFloat(i),i*=r*t,{offset:l,color:n.toRgb(),opacity:i}}var t=o.util.object.clone;o.Gradient=o.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){e||(e={}),e.coords||(e.coords={});var t,n=this;Object.keys(e).forEach((function(t){n[t]=e[t]})),this.id?this.id+="_"+o.Object.__uid++:this.id=o.Object.__uid++,t={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},"radial"===this.type&&(t.r1=e.coords.r1||0,t.r2=e.coords.r2||0),this.coords=t,this.colorStops=e.colorStops.slice()},addColorStop:function(e){for(var t in e){var n=new o.Color(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(e){var t={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return o.util.populateWithProperties(this,t,e),t},toSVG:function(e,n){var r,i,a,s,l=t(this.coords,!0),u=(n=n||{},t(this.colorStops,!0)),c=l.r1>l.r2,d=this.gradientTransform?this.gradientTransform.concat():o.iMatrix.concat(),h=-this.offsetX,f=-this.offsetY,p=!!n.additionalTransform,g="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(u.sort((function(e,t){return e.offset-t.offset})),"objectBoundingBox"===g?(h/=e.width,f/=e.height):(h+=e.width/2,f+=e.height/2),"path"===e.type&&"percentage"!==this.gradientUnits&&(h-=e.pathOffset.x,f-=e.pathOffset.y),d[4]-=h,d[5]-=f,s='id="SVGID_'+this.id+'" gradientUnits="'+g+'"',s+=' gradientTransform="'+(p?n.additionalTransform+" ":"")+o.util.matrixToSVG(d)+'" ',"linear"===this.type?a=["<linearGradient ",s,' x1="',l.x1,'" y1="',l.y1,'" x2="',l.x2,'" y2="',l.y2,'">\n']:"radial"===this.type&&(a=["<radialGradient ",s,' cx="',c?l.x1:l.x2,'" cy="',c?l.y1:l.y2,'" r="',c?l.r1:l.r2,'" fx="',c?l.x2:l.x1,'" fy="',c?l.y2:l.y1,'">\n']),"radial"===this.type){if(c)for((u=u.concat()).reverse(),r=0,i=u.length;r<i;r++)u[r].offset=1-u[r].offset;var b=Math.min(l.r1,l.r2);if(b>0){var m=b/Math.max(l.r1,l.r2);for(r=0,i=u.length;r<i;r++)u[r].offset+=m*(1-u[r].offset)}}for(r=0,i=u.length;r<i;r++){var v=u[r];a.push("<stop ",'offset="',100*v.offset+"%",'" style="stop-color:',v.color,"undefined"!==typeof v.opacity?";stop-opacity: "+v.opacity:";",'"/>\n')}return a.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),a.join("")},toLive:function(e){var t,n,r,i=o.util.object.clone(this.coords);if(this.type){for("linear"===this.type?t=e.createLinearGradient(i.x1,i.y1,i.x2,i.y2):"radial"===this.type&&(t=e.createRadialGradient(i.x1,i.y1,i.r1,i.x2,i.y2,i.r2)),n=0,r=this.colorStops.length;n<r;n++){var a=this.colorStops[n].color,s=this.colorStops[n].opacity,l=this.colorStops[n].offset;"undefined"!==typeof s&&(a=new o.Color(a).setAlpha(s).toRgba()),t.addColorStop(l,a)}return t}}}),o.util.object.extend(o.Gradient,{fromElement:function(t,n,r,i){var a=parseFloat(r)/(/%$/.test(r)?100:1);a=a<0?0:a>1?1:a,isNaN(a)&&(a=1);var s,l,u,c,d=t.getElementsByTagName("stop"),h="userSpaceOnUse"===t.getAttribute("gradientUnits")?"pixels":"percentage",f=t.getAttribute("gradientTransform")||"",p=[],g=0,b=0;for("linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?(s="linear",l=function(e){return{x1:e.getAttribute("x1")||0,y1:e.getAttribute("y1")||0,x2:e.getAttribute("x2")||"100%",y2:e.getAttribute("y2")||0}}(t)):(s="radial",l=function(e){return{x1:e.getAttribute("fx")||e.getAttribute("cx")||"50%",y1:e.getAttribute("fy")||e.getAttribute("cy")||"50%",r1:0,x2:e.getAttribute("cx")||"50%",y2:e.getAttribute("cy")||"50%",r2:e.getAttribute("r")||"50%"}}(t)),u=d.length;u--;)p.push(e(d[u],a));return c=o.parseTransformAttribute(f),function(e,t,n,r){var o,i;Object.keys(t).forEach((function(e){"Infinity"===(o=t[e])?i=1:"-Infinity"===o?i=0:(i=parseFloat(t[e],10),"string"===typeof o&&/^(\d+\.\d+)%|(\d+)%$/.test(o)&&(i*=.01,"pixels"===r&&("x1"!==e&&"x2"!==e&&"r2"!==e||(i*=n.viewBoxWidth||n.width),"y1"!==e&&"y2"!==e||(i*=n.viewBoxHeight||n.height)))),t[e]=i}))}(0,l,i,h),"pixels"===h&&(g=-n.left,b=-n.top),new o.Gradient({id:t.getAttribute("id"),type:s,coords:l,colorStops:p,gradientUnits:h,gradientTransform:c,offsetX:g,offsetY:b})}})}(),function(){"use strict";var e=o.util.toFixed;o.Pattern=o.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(e,t){if(e||(e={}),this.id=o.Object.__uid++,this.setOptions(e),!e.source||e.source&&"string"!==typeof e.source)t&&t(this);else{var n=this;this.source=o.util.createImage(),o.util.loadImage(e.source,(function(e,r){n.source=e,t&&t(n,r)}),null,this.crossOrigin)}},toObject:function(t){var n,r,i=o.Object.NUM_FRACTION_DIGITS;return"string"===typeof this.source.src?n=this.source.src:"object"===typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),r={type:"pattern",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:e(this.offsetX,i),offsetY:e(this.offsetY,i),patternTransform:this.patternTransform?this.patternTransform.concat():null},o.util.populateWithProperties(this,r,t),r},toSVG:function(e){var t="function"===typeof this.source?this.source():this.source,n=t.width/e.width,r=t.height/e.height,o=this.offsetX/e.width,i=this.offsetY/e.height,a="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(r=1,i&&(r+=Math.abs(i))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,o&&(n+=Math.abs(o))),t.src?a=t.src:t.toDataURL&&(a=t.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+i+'" width="'+n+'" height="'+r+'">\n<image x="0" y="0" width="'+t.width+'" height="'+t.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},setOptions:function(e){for(var t in e)this[t]=e[t]},toLive:function(e){var t=this.source;if(!t)return"";if("undefined"!==typeof t.src){if(!t.complete)return"";if(0===t.naturalWidth||0===t.naturalHeight)return""}return e.createPattern(t,this.repeat)}})}(),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.toFixed;t.Shadow?t.warn("fabric.Shadow is already defined."):(t.Shadow=t.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(e){for(var n in"string"===typeof e&&(e=this._parseShadow(e)),e)this[n]=e[n];this.id=t.Object.__uid++},_parseShadow:function(e){var n=e.trim(),r=t.Shadow.reOffsetsAndBlur.exec(n)||[];return{color:(n.replace(t.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(r[1],10)||0,offsetY:parseFloat(r[2],10)||0,blur:parseFloat(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(e){var r=40,o=40,i=t.Object.NUM_FRACTION_DIGITS,a=t.util.rotateVector({x:this.offsetX,y:this.offsetY},t.util.degreesToRadians(-e.angle)),s=new t.Color(this.color);return e.width&&e.height&&(r=100*n((Math.abs(a.x)+this.blur)/e.width,i)+20,o=100*n((Math.abs(a.y)+this.blur)/e.height,i)+20),e.flipX&&(a.x*=-1),e.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+o+'%" height="'+(100+2*o)+'%" x="-'+r+'%" width="'+(100+2*r)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+n(this.blur?this.blur/2:0,i)+'"></feGaussianBlur>\n\t<feOffset dx="'+n(a.x,i)+'" dy="'+n(a.y,i)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+s.toRgb()+'" flood-opacity="'+s.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var e={},n=t.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(t){this[t]!==n[t]&&(e[t]=this[t])}),this),e}}),t.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(t),function(){"use strict";if(o.StaticCanvas)o.warn("fabric.StaticCanvas is already defined.");else{var e=o.util.object.extend,t=o.util.getElementOffset,n=o.util.removeFromArray,r=o.util.toFixed,i=o.util.transformPoint,a=o.util.invertTransform,s=o.util.getNodeCanvas,l=o.util.createCanvasElement,u=new Error("Could not initialize `canvas` element");o.StaticCanvas=o.util.createClass(o.CommonMethods,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:o.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(e,t){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(e),this._initOptions(t),this.interactive||this._initRetinaScaling(),t.overlayImage&&this.setOverlayImage(t.overlayImage,n),t.backgroundImage&&this.setBackgroundImage(t.backgroundImage,n),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor,n),t.overlayColor&&this.setOverlayColor(t.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return 1!==o.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?o.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var e=o.devicePixelRatio;this.__initRetinaScaling(e,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(e,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(e,t,n){t.setAttribute("width",this.width*e),t.setAttribute("height",this.height*e),n.scale(e,e)},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(e,t,n){return this.__setBgOverlayImage("overlayImage",e,t,n)},setBackgroundImage:function(e,t,n){return this.__setBgOverlayImage("backgroundImage",e,t,n)},setOverlayColor:function(e,t){return this.__setBgOverlayColor("overlayColor",e,t)},setBackgroundColor:function(e,t){return this.__setBgOverlayColor("backgroundColor",e,t)},__setBgOverlayImage:function(e,t,n,r){return"string"===typeof t?o.util.loadImage(t,(function(t,i){if(t){var a=new o.Image(t,r);this[e]=a,a.canvas=this}n&&n(t,i)}),this,r&&r.crossOrigin):(r&&t.setOptions(r),this[e]=t,t&&(t.canvas=this),n&&n(t,!1)),this},__setBgOverlayColor:function(e,t,n){return this[e]=t,this._initGradient(t,e),this._initPattern(t,e,n),this},_createCanvasElement:function(){var e=l();if(!e)throw u;if(e.style||(e.style={}),"undefined"===typeof e.getContext)throw u;return e},_initOptions:function(e){var t=this.lowerCanvasEl;this._setOptions(e),this.width=this.width||parseInt(t.width,10)||0,this.height=this.height||parseInt(t.height,10)||0,this.lowerCanvasEl.style&&(t.width=this.width,t.height=this.height,t.style.width=this.width+"px",t.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(e){e&&e.getContext?this.lowerCanvasEl=e:this.lowerCanvasEl=o.util.getById(e)||this._createCanvasElement(),o.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,t){return this.setDimensions({width:e},t)},setHeight:function(e,t){return this.setDimensions({height:e},t)},setDimensions:function(e,t){var n;for(var r in t=t||{},e)n=e[r],t.cssOnly||(this._setBackstoreDimension(r,e[r]),n+="px",this.hasLostContext=!0),t.backstoreOnly||this._setCssDimension(r,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),t.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(e,t){return this.lowerCanvasEl[e]=t,this.upperCanvasEl&&(this.upperCanvasEl[e]=t),this.cacheCanvasEl&&(this.cacheCanvasEl[e]=t),this[e]=t,this},_setCssDimension:function(e,t){return this.lowerCanvasEl.style[e]=t,this.upperCanvasEl&&(this.upperCanvasEl.style[e]=t),this.wrapperEl&&(this.wrapperEl.style[e]=t),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(e){var t,n,r,o=this._activeObject,i=this.backgroundImage,a=this.overlayImage;for(this.viewportTransform=e,n=0,r=this._objects.length;n<r;n++)(t=this._objects[n]).group||t.setCoords(!0);return o&&o.setCoords(),i&&i.setCoords(!0),a&&a.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(e,t){var n=e,r=this.viewportTransform.slice(0);e=i(e,a(this.viewportTransform)),r[0]=t,r[3]=t;var o=i(e,r);return r[4]+=n.x-o.x,r[5]+=n.y-o.y,this.setViewportTransform(r)},setZoom:function(e){return this.zoomToPoint(new o.Point(0,0),e),this},absolutePan:function(e){var t=this.viewportTransform.slice(0);return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)},relativePan:function(e){return this.absolutePan(new o.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(e){this.stateful&&e.setupState(),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added")},_onObjectRemoved:function(e){this.fire("object:removed",{target:e}),e.fire("removed"),delete e.canvas},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var e=this.contextContainer;return this.renderCanvas(e,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=o.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var e={},t=this.width,n=this.height,r=a(this.viewportTransform);return e.tl=i({x:0,y:0},r),e.br=i({x:t,y:n},r),e.tr=new o.Point(e.br.x,e.tl.y),e.bl=new o.Point(e.tl.x,e.br.y),this.vptCoords=e,e},cancelRequestedRender:function(){this.isRendering&&(o.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(e,t){var n=this.viewportTransform,r=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(e),o.util.setImageSmoothing(e,this.imageSmoothingEnabled),this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),r&&(r.canvas=this,r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e)),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render",{ctx:e})},drawClipPathOnCanvas:function(e){var t=this.viewportTransform,n=this.clipPath;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e.globalCompositeOperation="destination-in",n.transform(e),e.scale(1/n.zoomX,1/n.zoomY),e.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),e.restore()},_renderObjects:function(e,t){var n,r;for(n=0,r=t.length;n<r;++n)t[n]&&t[n].render(e)},_renderBackgroundOrOverlay:function(e,t){var n=this[t+"Color"],r=this[t+"Image"],o=this.viewportTransform,i=this[t+"Vpt"];if(n||r){if(n){e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=n.toLive?n.toLive(e,this):n,i&&e.transform(o[0],o[1],o[2],o[3],o[4],o[5]),e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);var a=n.gradientTransform||n.patternTransform;a&&e.transform(a[0],a[1],a[2],a[3],a[4],a[5]),e.fill(),e.restore()}r&&(e.save(),i&&e.transform(o[0],o[1],o[2],o[3],o[4],o[5]),r.render(e),e.restore())}},_renderBackground:function(e){this._renderBackgroundOrOverlay(e,"background")},_renderOverlay:function(e){this._renderBackgroundOrOverlay(e,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(e){return this._centerObject(e,new o.Point(this.getCenter().left,e.getCenterPoint().y))},centerObjectV:function(e){return this._centerObject(e,new o.Point(e.getCenterPoint().x,this.getCenter().top))},centerObject:function(e){var t=this.getCenter();return this._centerObject(e,new o.Point(t.left,t.top))},viewportCenterObject:function(e){var t=this.getVpCenter();return this._centerObject(e,t)},viewportCenterObjectH:function(e){var t=this.getVpCenter();return this._centerObject(e,new o.Point(t.x,e.getCenterPoint().y)),this},viewportCenterObjectV:function(e){var t=this.getVpCenter();return this._centerObject(e,new o.Point(e.getCenterPoint().x,t.y))},getVpCenter:function(){var e=this.getCenter(),t=a(this.viewportTransform);return i({x:e.left,y:e.top},t)},_centerObject:function(e,t){return e.setPositionByOrigin(t,"center","center"),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(t,n){var r=this.clipPath,i={version:o.version,objects:this._toObjects(t,n)};return r&&(i.clipPath=this._toObject(this.clipPath,t,n)),e(i,this.__serializeBgOverlay(t,n)),o.util.populateWithProperties(this,i,n),i},_toObjects:function(e,t){return this._objects.filter((function(e){return!e.excludeFromExport})).map((function(n){return this._toObject(n,e,t)}),this)},_toObject:function(e,t,n){var r;this.includeDefaultValues||(r=e.includeDefaultValues,e.includeDefaultValues=!1);var o=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=r),o},__serializeBgOverlay:function(e,t){var n={},r=this.backgroundImage,o=this.overlayImage;return this.backgroundColor&&(n.background=this.backgroundColor.toObject?this.backgroundColor.toObject(t):this.backgroundColor),this.overlayColor&&(n.overlay=this.overlayColor.toObject?this.overlayColor.toObject(t):this.overlayColor),r&&!r.excludeFromExport&&(n.backgroundImage=this._toObject(r,e,t)),o&&!o.excludeFromExport&&(n.overlayImage=this._toObject(o,e,t)),n},svgViewportTransformation:!0,toSVG:function(e,t){e||(e={}),e.reviver=t;var n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")},_setSVGPreamble:function(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(e,t){var n,i=t.width||this.width,a=t.height||this.height,s='viewBox="0 0 '+this.width+" "+this.height+'" ',l=o.Object.NUM_FRACTION_DIGITS;t.viewBox?s='viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ':this.svgViewportTransformation&&(n=this.viewportTransform,s='viewBox="'+r(-n[4]/n[0],l)+" "+r(-n[5]/n[3],l)+" "+r(this.width/n[0],l)+" "+r(this.height/n[3],l)+'" '),e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',a,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",o.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")},createSVGClipPathMarkup:function(e){var t=this.clipPath;return t?(t.clipPathId="CLIPPATH_"+o.Object.__uid++,'<clipPath id="'+t.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(e.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var e=this;return["background","overlay"].map((function(t){var n=e[t+"Color"];if(n&&n.toLive){var r=e[t+"Vpt"],i=e.viewportTransform,a={width:e.width/(r?i[0]:1),height:e.height/(r?i[3]:1)};return n.toSVG(a,{additionalTransform:r?o.util.matrixToSVG(i):""})}})).join("")},createSVGFontFacesMarkup:function(){var e,t,n,r,i,a,s,l,u="",c={},d=o.fontPaths,h=[];for(this._objects.forEach((function e(t){h.push(t),t._objects&&t._objects.forEach(e)})),s=0,l=h.length;s<l;s++)if(t=(e=h[s]).fontFamily,-1!==e.type.indexOf("text")&&!c[t]&&d[t]&&(c[t]=!0,e.styles))for(i in n=e.styles)for(a in r=n[i])!c[t=r[a].fontFamily]&&d[t]&&(c[t]=!0);for(var f in c)u+=["\t\t@font-face {\n","\t\t\tfont-family: '",f,"';\n","\t\t\tsrc: url('",d[f],"');\n","\t\t}\n"].join("");return u&&(u=['\t<style type="text/css">',"<![CDATA[\n",u,"]]>","</style>\n"].join("")),u},_setSVGObjects:function(e,t){var n,r,o,i=this._objects;for(r=0,o=i.length;r<o;r++)(n=i[r]).excludeFromExport||this._setSVGObject(e,n,t)},_setSVGObject:function(e,t,n){e.push(t.toSVG(n))},_setSVGBgOverlayImage:function(e,t,n){this[t]&&!this[t].excludeFromExport&&this[t].toSVG&&e.push(this[t].toSVG(n))},_setSVGBgOverlayColor:function(e,t){var n=this[t+"Color"],r=this.viewportTransform,i=this.width,a=this.height;if(n)if(n.toLive){var s=n.repeat,l=o.util.invertTransform(r),u=this[t+"Vpt"]?o.util.matrixToSVG(l):"";e.push('<rect transform="'+u+" translate(",i/2,",",a/2,')"',' x="',n.offsetX-i/2,'" y="',n.offsetY-a/2,'" ','width="',"repeat-y"===s||"no-repeat"===s?n.source.width:i,'" height="',"repeat-x"===s||"no-repeat"===s?n.source.height:a,'" fill="url(#SVGID_'+n.id+')"',"></rect>\n")}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',"></rect>\n")},sendToBack:function(e){if(!e)return this;var t,r,o,i=this._activeObject;if(e===i&&"activeSelection"===e.type)for(t=(o=i._objects).length;t--;)r=o[t],n(this._objects,r),this._objects.unshift(r);else n(this._objects,e),this._objects.unshift(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(e){if(!e)return this;var t,r,o,i=this._activeObject;if(e===i&&"activeSelection"===e.type)for(o=i._objects,t=0;t<o.length;t++)r=o[t],n(this._objects,r),this._objects.push(r);else n(this._objects,e),this._objects.push(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(e,t){if(!e)return this;var r,o,i,a,s,l=this._activeObject,u=0;if(e===l&&"activeSelection"===e.type)for(s=l._objects,r=0;r<s.length;r++)o=s[r],(i=this._objects.indexOf(o))>0+u&&(a=i-1,n(this._objects,o),this._objects.splice(a,0,o)),u++;else 0!==(i=this._objects.indexOf(e))&&(a=this._findNewLowerIndex(e,i,t),n(this._objects,e),this._objects.splice(a,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(e,t,n){var r,o;if(n)for(r=t,o=t-1;o>=0;--o){if(e.intersectsWithObject(this._objects[o])||e.isContainedWithinObject(this._objects[o])||this._objects[o].isContainedWithinObject(e)){r=o;break}}else r=t-1;return r},bringForward:function(e,t){if(!e)return this;var r,o,i,a,s,l=this._activeObject,u=0;if(e===l&&"activeSelection"===e.type)for(r=(s=l._objects).length;r--;)o=s[r],(i=this._objects.indexOf(o))<this._objects.length-1-u&&(a=i+1,n(this._objects,o),this._objects.splice(a,0,o)),u++;else(i=this._objects.indexOf(e))!==this._objects.length-1&&(a=this._findNewUpperIndex(e,i,t),n(this._objects,e),this._objects.splice(a,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(e,t,n){var r,o,i;if(n)for(r=t,o=t+1,i=this._objects.length;o<i;++o){if(e.intersectsWithObject(this._objects[o])||e.isContainedWithinObject(this._objects[o])||this._objects[o].isContainedWithinObject(e)){r=o;break}}else r=t+1;return r},moveTo:function(e,t){return n(this._objects,e),this._objects.splice(t,0,e),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(o.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,o.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),e(o.StaticCanvas.prototype,o.Observable),e(o.StaticCanvas.prototype,o.Collection),e(o.StaticCanvas.prototype,o.DataURLExporter),e(o.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var t=l();if(!t||!t.getContext)return null;var n=t.getContext("2d");if(!n)return null;switch(e){case"setLineDash":return"undefined"!==typeof n.setLineDash;default:return null}}}),o.StaticCanvas.prototype.toJSON=o.StaticCanvas.prototype.toObject,o.isLikelyNode&&(o.StaticCanvas.prototype.createPNGStream=function(){var e=s(this.lowerCanvasEl);return e&&e.createPNGStream()},o.StaticCanvas.prototype.createJPEGStream=function(e){var t=s(this.lowerCanvasEl);return t&&t.createJPEGStream(e)})}}(),o.BaseBrush=o.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var e=this.canvas.contextTop;e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,o.StaticCanvas.supports("setLineDash")&&e.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(e){var t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},_setShadow:function(){if(this.shadow){var e=this.canvas,t=this.shadow,n=e.contextTop,r=e.getZoom();e&&e._isRetinaScaling()&&(r*=o.devicePixelRatio),n.shadowColor=t.color,n.shadowBlur=t.blur*r,n.shadowOffsetX=t.offsetX*r,n.shadowOffsetY=t.offsetY*r}},needsFullRender:function(){return new o.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0},_isOutSideCanvas:function(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}),o.PencilBrush=o.util.createClass(o.BaseBrush,{decimate:.4,initialize:function(e){this.canvas=e,this._points=[]},_drawSegment:function(e,t,n){var r=t.midPointFrom(n);return e.quadraticCurveTo(t.x,t.y,r.x,r.y),r},onMouseDown:function(e,t){this.canvas._isMainEvent(t.e)&&(this._prepareForDrawing(e),this._captureDrawingPath(e),this._render())},onMouseMove:function(e,t){if(this.canvas._isMainEvent(t.e)&&(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(e))&&this._captureDrawingPath(e)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var n=this._points,r=n.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(o,n[r-2],n[r-1],!0),o.stroke(),o.restore()}},onMouseUp:function(e){return!this.canvas._isMainEvent(e.e)||(this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(e){var t=new o.Point(e.x,e.y);this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)},_addPoint:function(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this._points.push(e),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(e){var t=new o.Point(e.x,e.y);return this._addPoint(t)},_render:function(){var e,t,n=this.canvas.contextTop,r=this._points[0],i=this._points[1];if(this._saveAndTransform(n),n.beginPath(),2===this._points.length&&r.x===i.x&&r.y===i.y){var a=this.width/1e3;r=new o.Point(r.x,r.y),i=new o.Point(i.x,i.y),r.x-=a,i.x+=a}for(n.moveTo(r.x,r.y),e=1,t=this._points.length;e<t;e++)this._drawSegment(n,r,i),r=this._points[e],i=this._points[e+1];n.lineTo(r.x,r.y),n.stroke(),n.restore()},convertPointsToSVGPath:function(e){var t,n=[],r=this.width/1e3,i=new o.Point(e[0].x,e[0].y),a=new o.Point(e[1].x,e[1].y),s=e.length,l=1,u=0,c=s>2;for(c&&(l=e[2].x<a.x?-1:e[2].x===a.x?0:1,u=e[2].y<a.y?-1:e[2].y===a.y?0:1),n.push("M ",i.x-l*r," ",i.y-u*r," "),t=1;t<s;t++){if(!i.eq(a)){var d=i.midPointFrom(a);n.push("Q ",i.x," ",i.y," ",d.x," ",d.y," ")}i=e[t],t+1<e.length&&(a=e[t+1])}return c&&(l=i.x>e[t-2].x?1:i.x===e[t-2].x?0:-1,u=i.y>e[t-2].y?1:i.y===e[t-2].y?0:-1),n.push("L ",i.x+l*r," ",i.y+u*r),n},createPath:function(e){var t=new o.Path(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new o.Shadow(this.shadow)),t},decimatePoints:function(e,t){if(e.length<=2)return e;var n,r=this.canvas.getZoom(),o=Math.pow(t/r,2),i=e.length-1,a=e[0],s=[a];for(n=1;n<i-1;n++)Math.pow(a.x-e[n].x,2)+Math.pow(a.y-e[n].y,2)>=o&&(a=e[n],s.push(a));return s.push(e[i]),s},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==e){var t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}else this.canvas.requestRenderAll()}}),o.CircleBrush=o.util.createClass(o.BaseBrush,{width:10,initialize:function(e){this.canvas=e,this.points=[]},drawDot:function(e){var t=this.addPoint(e),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,t),n.restore()},dot:function(e,t){e.fillStyle=t.fill,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.closePath(),e.fill()},onMouseDown:function(e){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)},_render:function(){var e,t,n=this.canvas.contextTop,r=this.points;for(this._saveAndTransform(n),e=0,t=r.length;e<t;e++)this.dot(n,r[e]);n.restore()},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e))},onMouseUp:function(){var e,t,n=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var r=[];for(e=0,t=this.points.length;e<t;e++){var i=this.points[e],a=new o.Circle({radius:i.radius,left:i.x,top:i.y,originX:"center",originY:"center",fill:i.fill});this.shadow&&(a.shadow=new o.Shadow(this.shadow)),r.push(a)}var s=new o.Group(r);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=n,this.canvas.requestRenderAll()},addPoint:function(e){var t=new o.Point(e.x,e.y),n=o.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new o.Color(this.color).setAlpha(o.util.getRandomInt(0,100)/100).toRgba();return t.radius=n,t.fill=r,this.points.push(t),t}}),o.SprayBrush=o.util.createClass(o.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(e){this.canvas=e,this.sprayChunks=[]},onMouseDown:function(e){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.render(this.sprayChunkPoints)},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.addSprayChunk(e),this.render(this.sprayChunkPoints))},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var t=[],n=0,r=this.sprayChunks.length;n<r;n++)for(var i=this.sprayChunks[n],a=0,s=i.length;a<s;a++){var l=new o.Rect({width:i[a].width,height:i[a].width,left:i[a].x+1,top:i[a].y+1,originX:"center",originY:"center",fill:this.color});t.push(l)}this.optimizeOverlapping&&(t=this._getOptimizedRects(t));var u=new o.Group(t);this.shadow&&u.set("shadow",new o.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.fire("path:created",{path:u}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()},_getOptimizedRects:function(e){var t,n,r,o={};for(n=0,r=e.length;n<r;n++)o[t=e[n].left+""+e[n].top]||(o[t]=e[n]);var i=[];for(t in o)i.push(o[t]);return i},render:function(e){var t,n,r=this.canvas.contextTop;for(r.fillStyle=this.color,this._saveAndTransform(r),t=0,n=e.length;t<n;t++){var o=e[t];"undefined"!==typeof o.opacity&&(r.globalAlpha=o.opacity),r.fillRect(o.x,o.y,o.width,o.width)}r.restore()},_render:function(){var e,t,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),e=0,t=this.sprayChunks.length;e<t;e++)this.render(this.sprayChunks[e]);n.restore()},addSprayChunk:function(e){this.sprayChunkPoints=[];var t,n,r,i,a=this.width/2;for(i=0;i<this.density;i++){t=o.util.getRandomInt(e.x-a,e.x+a),n=o.util.getRandomInt(e.y-a,e.y+a),r=this.dotWidthVariance?o.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new o.Point(t,n);s.width=r,this.randomOpacity&&(s.opacity=o.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),o.PatternBrush=o.util.createClass(o.PencilBrush,{getPatternSrc:function(){var e=o.util.createCanvasElement(),t=e.getContext("2d");return e.width=e.height=25,t.fillStyle=this.color,t.beginPath(),t.arc(10,10,10,0,2*Math.PI,!1),t.closePath(),t.fill(),e},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(e){var t=this.callSuper("createPath",e),n=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new o.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),t}}),function(){var e=o.util.getPointer,t=o.util.degreesToRadians,n=Math.abs,r=o.StaticCanvas.supports("setLineDash"),i=o.util.isTouchEvent,a=.5;for(var s in o.Canvas=o.util.createClass(o.StaticCanvas,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=o.PencilBrush&&new o.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e,t,n,r=this.getActiveObjects();if(r.length>0&&!this.preserveObjectStacking){t=[],n=[];for(var o=0,i=this._objects.length;o<i;o++)e=this._objects[o],-1===r.indexOf(e)?t.push(e):n.push(e);r.length>1&&(this._activeObject._objects=n),t.push.apply(t,n)}else t=this._objects;return t},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_normalizePointer:function(e,t){var n=e.calcTransformMatrix(),r=o.util.invertTransform(n),i=this.restorePointerVpt(t);return o.util.transformPoint(i,r)},isTargetTransparent:function(e,t,n){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var r=this._normalizePointer(e,{x:t,y:n}),i=Math.max(e.cacheTranslationX+r.x*e.zoomX,0),a=Math.max(e.cacheTranslationY+r.y*e.zoomY,0);return o.util.isTransparent(e._cacheContext,Math.round(i),Math.round(a),this.targetFindTolerance)}var s=this.contextCache,l=e.selectionBackgroundColor,u=this.viewportTransform;return e.selectionBackgroundColor="",this.clearContext(s),s.save(),s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),e.render(s),s.restore(),e.selectionBackgroundColor=l,o.util.isTransparent(s,t,n,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return"[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find((function(t){return!0===e[t]})):e[this.selectionKey]},_shouldClearSelection:function(e,t){var n=this.getActiveObjects(),r=this._activeObject;return!t||t&&r&&n.length>1&&-1===n.indexOf(t)&&r!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&r&&r!==t},_shouldCenterTransform:function(e,t,n){var r;if(e)return"scale"===t||"scaleX"===t||"scaleY"===t||"resizing"===t?r=this.centeredScaling||e.centeredScaling:"rotate"===t&&(r=this.centeredRotation||e.centeredRotation),r?!n:n},_getOriginFromCorner:function(e,t){var n={x:e.originX,y:e.originY};return"ml"===t||"tl"===t||"bl"===t?n.x="right":"mr"!==t&&"tr"!==t&&"br"!==t||(n.x="left"),"tl"===t||"mt"===t||"tr"===t?n.y="bottom":"bl"!==t&&"mb"!==t&&"br"!==t||(n.y="top"),n},_getActionFromCorner:function(e,t,n,r){if(!t||!e)return"drag";var o=r.controls[t];return o.getActionName(n,o,r)},_setupCurrentTransform:function(e,n,r){if(n){var i=this.getPointer(e),a=n.__corner,s=n.controls[a],l=r&&a?s.getActionHandler(e,n,s):o.controlsUtils.dragHandler,u=this._getActionFromCorner(r,a,e,n),c=this._getOriginFromCorner(n,a),d=e[this.centeredKey],h={target:n,action:u,actionHandler:l,corner:a,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:i.x-n.left,offsetY:i.y-n.top,originX:c.x,originY:c.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:t(n.angle),width:n.width*n.scaleX,shiftKey:e.shiftKey,altKey:d,original:o.util.saveObjectTransform(n)};this._shouldCenterTransform(n,u,d)&&(h.originX="center",h.originY="center"),h.original.originX=c.x,h.original.originY=c.y,this._currentTransform=h,this._beforeTransform(e)}},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var t=this._groupSelector,i=t.left,s=t.top,l=n(i),u=n(s);if(this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(t.ex-(i>0?0:-i),t.ey-(s>0?0:-s),l,u)),this.selectionLineWidth&&this.selectionBorderColor)if(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!r){var c=t.ex+a-(i>0?0:l),d=t.ey+a-(s>0?0:u);e.beginPath(),o.util.drawDashedLine(e,c,d,c+l,d,this.selectionDashArray),o.util.drawDashedLine(e,c,d+u-1,c+l,d+u-1,this.selectionDashArray),o.util.drawDashedLine(e,c,d,c,d+u,this.selectionDashArray),o.util.drawDashedLine(e,c+l-1,d,c+l-1,d+u,this.selectionDashArray),e.closePath(),e.stroke()}else o.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(t.ex+a-(i>0?0:l),t.ey+a-(s>0?0:u),l,u)},findTarget:function(e,t){if(!this.skipTargetFind){var n,r,o=this.getPointer(e,!0),a=this._activeObject,s=this.getActiveObjects(),l=i(e),u=s.length>1&&!t||1===s.length;if(this.targets=[],u&&a._findTargetCorner(o,l))return a;if(s.length>1&&!t&&a===this._searchPossibleTargets([a],o))return a;if(1===s.length&&a===this._searchPossibleTargets([a],o)){if(!this.preserveObjectStacking)return a;n=a,r=this.targets,this.targets=[]}var c=this._searchPossibleTargets(this._objects,o);return e[this.altSelectionKey]&&c&&n&&c!==n&&(c=n,this.targets=r),c}},_checkTarget:function(e,t,n){if(t&&t.visible&&t.evented&&t.containsPoint(e)){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing)return!0;if(!this.isTargetTransparent(t,n.x,n.y))return!0}},_searchPossibleTargets:function(e,t){for(var n,r,i=e.length;i--;){var a=e[i],s=a.group?this._normalizePointer(a.group,t):t;if(this._checkTarget(s,a,t)){(n=e[i]).subTargetCheck&&n instanceof o.Group&&(r=this._searchPossibleTargets(n._objects,t))&&this.targets.push(r);break}}return n},restorePointerVpt:function(e){return o.util.transformPoint(e,o.util.invertTransform(this.viewportTransform))},getPointer:function(t,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var r,o=e(t),i=this.upperCanvasEl,a=i.getBoundingClientRect(),s=a.width||0,l=a.height||0;s&&l||("top"in a&&"bottom"in a&&(l=Math.abs(a.top-a.bottom)),"right"in a&&"left"in a&&(s=Math.abs(a.right-a.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,n||(o=this.restorePointerVpt(o));var u=this.getRetinaScaling();return 1!==u&&(o.x/=u,o.y/=u),r=0===s||0===l?{width:1,height:1}:{width:i.width/s,height:i.height/l},{x:o.x*r.width,y:o.y*r.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),t=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),o.util.addClass(n,"upper-canvas "+e),this.wrapperEl.appendChild(n),this._copyCanvasStyle(t,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=o.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),o.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),o.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.width||e.width,n=this.height||e.height;o.util.setStyle(e,{position:"absolute",width:t+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=t,e.height=n,o.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,t){t.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?"activeSelection"===e.type&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,t){var n=!1,r=this.getActiveObjects(),o=[],i=[];e.forEach((function(e){-1===r.indexOf(e)&&(n=!0,e.fire("deselected",{e:t,target:e}),i.push(e))})),r.forEach((function(r){-1===e.indexOf(r)&&(n=!0,r.fire("selected",{e:t,target:r}),o.push(r))})),e.length>0&&r.length>0?n&&this.fire("selection:updated",{e:t,selected:o,deselected:i,updated:o[0]||i[0],target:this._activeObject}):r.length>0?this.fire("selection:created",{e:t,selected:o,target:this._activeObject}):e.length>0&&this.fire("selection:cleared",{e:t,deselected:i})},setActiveObject:function(e,t){var n=this.getActiveObjects();return this._setActiveObject(e,t),this._fireSelectionEvents(n,t),this},_setActiveObject:function(e,t){return this._activeObject!==e&&(!!this._discardActiveObject(t,e)&&(!e.onSelect({e:t})&&(this._activeObject=e,!0)))},_discardActiveObject:function(e,t){var n=this._activeObject;if(n){if(n.onDeselect({e:e,object:t}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var t=this.getActiveObjects(),n=this.getActiveObject();return t.length&&this.fire("before:selection:cleared",{target:n,e:e}),this._discardActiveObject(e),this._fireSelectionEvents(t,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){o.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,o.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var t=this._activeObject;t&&t._renderControls(e)},_toObject:function(e,t,n){var r=this._realizeGroupTransformOnObject(e),o=this.callSuper("_toObject",e,t,n);return this._unwindGroupTransformOnObject(e,r),o},_realizeGroupTransformOnObject:function(e){if(e.group&&"activeSelection"===e.group.type&&this._activeObject===e.group){var t={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach((function(n){t[n]=e[n]})),o.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),t}return null},_unwindGroupTransformOnObject:function(e,t){t&&e.set(t)},_setSVGObject:function(e,t,n){var r=this._realizeGroupTransformOnObject(t);this.callSuper("_setSVGObject",e,t,n),this._unwindGroupTransformOnObject(t,r)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),o.StaticCanvas.prototype.setViewportTransform.call(this,e)}}),o.StaticCanvas)"prototype"!==s&&(o.Canvas[s]=o.StaticCanvas[s])}(),function(){var e=o.util.addListener,t=o.util.removeListener,n={passive:!1};function r(e,t){return e.button&&e.button===t-1}o.util.object.extend(o.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(e,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(e,t){var r=this.upperCanvasEl,i=this._getEventPrefix();e(o.window,"resize",this._onResize),e(r,i+"down",this._onMouseDown),e(r,i+"move",this._onMouseMove,n),e(r,i+"out",this._onMouseOut),e(r,i+"enter",this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,n),"undefined"!==typeof eventjs&&t in eventjs&&(eventjs[t](r,"gesture",this._onGesture),eventjs[t](r,"drag",this._onDrag),eventjs[t](r,"orientation",this._onOrientationChange),eventjs[t](r,"shake",this._onShake),eventjs[t](r,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(t,"remove");var e=this._getEventPrefix();t(o.document,e+"up",this._onMouseUp),t(o.document,"touchend",this._onTouchEnd,n),t(o.document,e+"move",this._onMouseMove,n),t(o.document,"touchmove",this._onMouseMove,n)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(e,t){this.__onTransformGesture&&this.__onTransformGesture(e,t)},_onDrag:function(e,t){this.__onDrag&&this.__onDrag(e,t)},_onMouseWheel:function(e){this.__onMouseWheel(e)},_onMouseOut:function(e){var t=this._hoveredTarget;this.fire("mouse:out",{target:t,e:e}),this._hoveredTarget=null,t&&t.fire("mouseout",{e:e});var n=this;this._hoveredTargets.forEach((function(r){n.fire("mouse:out",{target:t,e:e}),r&&t.fire("mouseout",{e:e})})),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach((function(e){e.isEditing&&e.hiddenTextarea.focus()}))},_onMouseEnter:function(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",{target:null,e:e}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(e,t){this.__onOrientationChange&&this.__onOrientationChange(e,t)},_onShake:function(e,t){this.__onShake&&this.__onShake(e,t)},_onLongPress:function(e,t){this.__onLongPress&&this.__onLongPress(e,t)},_onDragOver:function(e){e.preventDefault();var t=this._simpleEventHandler("dragover",e);this._fireEnterLeaveEvents(t,e)},_onContextMenu:function(e){return this.stopContextMenu&&(e.stopPropagation(),e.preventDefault()),!1},_onDoubleClick:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData(e)},getPointerId:function(e){var t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1},_isMainEvent:function(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||(!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(r){r.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(r)),this.__onMouseDown(r),this._resetTransformEventData();var i=this.upperCanvasEl,a=this._getEventPrefix();e(o.document,"touchend",this._onTouchEnd,n),e(o.document,"touchmove",this._onMouseMove,n),t(i,a+"down",this._onMouseDown)},_onMouseDown:function(r){this.__onMouseDown(r),this._resetTransformEventData();var i=this.upperCanvasEl,a=this._getEventPrefix();t(i,a+"move",this._onMouseMove,n),e(o.document,a+"up",this._onMouseUp),e(o.document,a+"move",this._onMouseMove,n)},_onTouchEnd:function(r){if(!(r.touches.length>0)){this.__onMouseUp(r),this._resetTransformEventData(),this.mainTouchId=null;var i=this._getEventPrefix();t(o.document,"touchend",this._onTouchEnd,n),t(o.document,"touchmove",this._onMouseMove,n);var a=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){e(a.upperCanvasEl,i+"down",a._onMouseDown),a._willAddMouseDown=0}),400)}},_onMouseUp:function(r){this.__onMouseUp(r),this._resetTransformEventData();var i=this.upperCanvasEl,a=this._getEventPrefix();this._isMainEvent(r)&&(t(o.document,a+"up",this._onMouseUp),t(o.document,a+"move",this._onMouseMove,n),e(i,a+"move",this._onMouseMove,n))},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e){var t=this._activeObject;return!!(!!t!==!!e||t&&e&&t!==e)||(t&&t.isEditing,!1)},__onMouseUp:function(e){var t,n=this._currentTransform,i=this._groupSelector,a=!1,s=!i||0===i.left&&0===i.top;if(this._cacheTransformEventData(e),t=this._target,this._handleEvent(e,"up:before"),r(e,3))this.fireRightClick&&this._handleEvent(e,"up",3,s);else{if(r(e,2))return this.fireMiddleClick&&this._handleEvent(e,"up",2,s),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(e);else if(this._isMainEvent(e)){if(n&&(this._finalizeCurrentTransform(e),a=n.actionPerformed),!s){var l=t===this._activeObject;this._maybeGroupObjects(e),a||(a=this._shouldRender(t)||!l&&t===this._activeObject)}if(t){if(t.selectable&&t!==this._activeObject&&"up"===t.activeOn)this.setActiveObject(t,e),a=!0;else{var u=t._findTargetCorner(this.getPointer(e,!0),o.util.isTouchEvent(e)),c=t.controls[u],d=c&&c.getMouseUpHandler(e,t,c);if(d){var h=this.getPointer(e);d(e,n,h.x,h.y)}}t.isMoving=!1}this._setCursorFromEvent(e,t),this._handleEvent(e,"up",1,s),this._groupSelector=null,this._currentTransform=null,t&&(t.__corner=0),a?this.requestRenderAll():s||this.renderTop()}}},_simpleEventHandler:function(e,t){var n=this.findTarget(t),r=this.targets,o={e:t,target:n,subTargets:r};if(this.fire(e,o),n&&n.fire(e,o),!r)return n;for(var i=0;i<r.length;i++)r[i].fire(e,o);return n},_handleEvent:function(e,t,n,r){var o=this._target,i=this.targets||[],a={e:e,target:o,subTargets:i,button:n||1,isClick:r||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===t&&(a.currentTarget=this.findTarget(e),a.currentSubTargets=this.targets),this.fire("mouse:"+t,a),o&&o.fire("mouse"+t,a);for(var s=0;s<i.length;s++)i[s].fire("mouse"+t,a)},_finalizeCurrentTransform:function(e){var t,n=this._currentTransform,r=n.target,o={e:e,target:r,transform:n,action:n.action};r._scaling&&(r._scaling=!1),r.setCoords(),(n.actionPerformed||this.stateful&&r.hasStateChanged())&&(n.actionPerformed&&(t=this._addEventOptions(o,n),this._fire(t,o)),this._fire("modified",o))},_addEventOptions:function(e,t){var n,r;switch(t.action){case"scaleX":n="scaled",r="x";break;case"scaleY":n="scaled",r="y";break;case"skewX":n="skewed",r="x";break;case"skewY":n="skewed",r="y";break;case"scale":n="scaled",r="equally";break;case"rotate":n="rotated";break;case"drag":n="moved"}return e.by=r,n},_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(e).requestRenderAll();var t=this.getPointer(e);this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down")},_onMouseMoveInDrawingMode:function(e){if(this._isCurrentlyDrawing){var t=this.getPointer(e);this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")},_onMouseUpInDrawingMode:function(e){var t=this.getPointer(e);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:e,pointer:t}),this._handleEvent(e,"up")},__onMouseDown:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"down:before");var t=this._target;if(r(e,3))this.fireRightClick&&this._handleEvent(e,"down",3);else if(r(e,2))this.fireMiddleClick&&this._handleEvent(e,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(e);else if(this._isMainEvent(e)&&!this._currentTransform){var n=this._pointer;this._previousPointer=n;var i=this._shouldRender(t),a=this._shouldGroup(e,t);if(this._shouldClearSelection(e,t)?this.discardActiveObject(e):a&&(this._handleGrouping(e,t),t=this._activeObject),!this.selection||t&&(t.selectable||t.isEditing||t===this._activeObject)||(this._groupSelector={ex:n.x,ey:n.y,top:0,left:0}),t){var s=t===this._activeObject;t.selectable&&"down"===t.activeOn&&this.setActiveObject(t,e);var l=t._findTargetCorner(this.getPointer(e,!0),o.util.isTouchEvent(e));if(t.__corner=l,t===this._activeObject&&(l||!a)){this._setupCurrentTransform(e,t,s);var u=t.controls[l],c=(n=this.getPointer(e),u&&u.getMouseDownHandler(e,t,u));c&&c(e,this._currentTransform,n.x,n.y)}}this._handleEvent(e,"down"),(i||a)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(e){this._resetTransformEventData(),this._pointer=this.getPointer(e,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)||null},_beforeTransform:function(e){var t=this._currentTransform;this.stateful&&t.target.saveState(),this.fire("before:transform",{e:e,transform:t})},__onMouseMove:function(e){var t,n;if(this._handleEvent(e,"move:before"),this._cacheTransformEventData(e),this.isDrawingMode)this._onMouseMoveInDrawingMode(e);else if(this._isMainEvent(e)){var r=this._groupSelector;r?(n=this._pointer,r.left=n.x-r.ex,r.top=n.y-r.ey,this.renderTop()):this._currentTransform?this._transformObject(e):(t=this.findTarget(e)||null,this._setCursorFromEvent(e,t),this._fireOverOutEvents(t,e)),this._handleEvent(e,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(e,t){var n=this._hoveredTarget,r=this._hoveredTargets,o=this.targets,i=Math.max(r.length,o.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:n,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var a=0;a<i;a++)this.fireSyntheticInOutEvents(o[a],t,{oldTarget:r[a],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(e,t){var n=this._draggedoverTarget,r=this._hoveredTargets,o=this.targets,i=Math.max(r.length,o.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:n,evtOut:"dragleave",evtIn:"dragenter"});for(var a=0;a<i;a++)this.fireSyntheticInOutEvents(o[a],t,{oldTarget:r[a],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=e},fireSyntheticInOutEvents:function(e,t,n){var r,o,i,a=n.oldTarget,s=a!==e,l=n.canvasEvtIn,u=n.canvasEvtOut;s&&(r={e:t,target:e,previousTarget:a},o={e:t,target:a,nextTarget:e}),i=e&&s,a&&s&&(u&&this.fire(u,o),a.fire(n.evtOut,o)),i&&(l&&this.fire(l,r),e.fire(n.evtIn,r))},__onMouseWheel:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()},_transformObject:function(e){var t=this.getPointer(e),n=this._currentTransform;n.reset=!1,n.shiftKey=e.shiftKey,n.altKey=e[this.centeredKey],this._performTransformAction(e,n,t),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(e,t,n){var r=n.x,o=n.y,i=t.action,a=!1,s=t.actionHandler;s&&(a=s(e,t,r,o)),"drag"===i&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a},_fire:o.controlsUtils.fireEvent,_setCursorFromEvent:function(e,t){if(!t)return this.setCursor(this.defaultCursor),!1;var n=t.hoverCursor||this.hoverCursor,r=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,o=(!r||!r.contains(t))&&t._findTargetCorner(this.getPointer(e,!0));o?this.setCursor(this.getCornerCursor(o,t,e)):(t.subTargetCheck&&this.targets.concat().reverse().map((function(e){n=e.hoverCursor||n})),this.setCursor(n))},getCornerCursor:function(e,t,n){var r=t.controls[e];return r.cursorStyleHandler(n,r,t)}})}(),function(){var e=Math.min,t=Math.max;o.util.object.extend(o.Canvas.prototype,{_shouldGroup:function(e,t){var n=this._activeObject;return n&&this._isSelectionKeyPressed(e)&&t&&t.selectable&&this.selection&&(n!==t||"activeSelection"===n.type)&&!t.onSelect({e:e})},_handleGrouping:function(e,t){var n=this._activeObject;n.__corner||(t!==n||(t=this.findTarget(e,!0))&&t.selectable)&&(n&&"activeSelection"===n.type?this._updateActiveSelection(t,e):this._createActiveSelection(t,e))},_updateActiveSelection:function(e,t){var n=this._activeObject,r=n._objects.slice(0);n.contains(e)?(n.removeWithUpdate(e),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat(),1===n.size()&&this._setActiveObject(n.item(0),t)):(n.addWithUpdate(e),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(r,t)},_createActiveSelection:function(e,t){var n=this.getActiveObjects(),r=this._createGroup(e);this._hoveredTarget=r,this._setActiveObject(r,t),this._fireSelectionEvents(n,t)},_createGroup:function(e){var t=this._objects,n=t.indexOf(this._activeObject)<t.indexOf(e)?[this._activeObject,e]:[e,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new o.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(e){var t,n=this._collectObjects(e);1===n.length?this.setActiveObject(n[0],e):n.length>1&&(t=new o.ActiveSelection(n.reverse(),{canvas:this}),this.setActiveObject(t,e))},_collectObjects:function(n){for(var r,i=[],a=this._groupSelector.ex,s=this._groupSelector.ey,l=a+this._groupSelector.left,u=s+this._groupSelector.top,c=new o.Point(e(a,l),e(s,u)),d=new o.Point(t(a,l),t(s,u)),h=!this.selectionFullyContained,f=a===l&&s===u,p=this._objects.length;p--&&!((r=this._objects[p])&&r.selectable&&r.visible&&(h&&r.intersectsWithRect(c,d)||r.isContainedWithinRect(c,d)||h&&r.containsPoint(c)||h&&r.containsPoint(d))&&(i.push(r),f)););return i.length>1&&(i=i.filter((function(e){return!e.onSelect({e:n})}))),i},_maybeGroupObjects:function(e){this.selection&&this._groupSelector&&this._groupSelectedObjects(e),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),o.util.object.extend(o.StaticCanvas.prototype,{toDataURL:function(e){e||(e={});var t=e.format||"png",n=e.quality||1,r=(e.multiplier||1)*(e.enableRetinaScaling?this.getRetinaScaling():1),i=this.toCanvasElement(r,e);return o.util.toDataURL(i,t,n)},toCanvasElement:function(e,t){e=e||1;var n=((t=t||{}).width||this.width)*e,r=(t.height||this.height)*e,i=this.getZoom(),a=this.width,s=this.height,l=i*e,u=this.viewportTransform,c=(u[4]-(t.left||0))*e,d=(u[5]-(t.top||0))*e,h=this.interactive,f=[l,0,0,l,c,d],p=this.enableRetinaScaling,g=o.util.createCanvasElement(),b=this.contextTop;return g.width=n,g.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=f,this.width=n,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),this._objects),this.viewportTransform=u,this.width=a,this.height=s,this.calcViewportBoundaries(),this.interactive=h,this.enableRetinaScaling=p,this.contextTop=b,g}}),o.util.object.extend(o.StaticCanvas.prototype,{loadFromJSON:function(e,t,n){if(e){var r="string"===typeof e?JSON.parse(e):o.util.object.clone(e),i=this,a=r.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,(function(e){i.clear(),i._setBgOverlay(r,(function(){a?i._enlivenObjects([a],(function(n){i.clipPath=n[0],i.__setupCanvas.call(i,r,e,s,t)})):i.__setupCanvas.call(i,r,e,s,t)}))}),n),this}},__setupCanvas:function(e,t,n,r){var o=this;t.forEach((function(e,t){o.insertAt(e,t)})),this.renderOnAddRemove=n,delete e.objects,delete e.backgroundImage,delete e.overlayImage,delete e.background,delete e.overlay,this._setOptions(e),this.renderAll(),r&&r()},_setBgOverlay:function(e,t){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(e.backgroundImage||e.overlayImage||e.background||e.overlay){var r=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&t&&t()};this.__setBgOverlay("backgroundImage",e.backgroundImage,n,r),this.__setBgOverlay("overlayImage",e.overlayImage,n,r),this.__setBgOverlay("backgroundColor",e.background,n,r),this.__setBgOverlay("overlayColor",e.overlay,n,r)}else t&&t()},__setBgOverlay:function(e,t,n,r){var i=this;if(!t)return n[e]=!0,void(r&&r());"backgroundImage"===e||"overlayImage"===e?o.util.enlivenObjects([t],(function(t){i[e]=t[0],n[e]=!0,r&&r()})):this["set"+o.util.string.capitalize(e,!0)](t,(function(){n[e]=!0,r&&r()}))},_enlivenObjects:function(e,t,n){e&&0!==e.length?o.util.enlivenObjects(e,(function(e){t&&t(e)}),null,n):t&&t([])},_toDataURL:function(e,t){this.clone((function(n){t(n.toDataURL(e))}))},_toDataURLWithMultiplier:function(e,t,n){this.clone((function(r){n(r.toDataURLWithMultiplier(e,t))}))},clone:function(e,t){var n=JSON.stringify(this.toJSON(t));this.cloneWithoutData((function(t){t.loadFromJSON(n,(function(){e&&e(t)}))}))},cloneWithoutData:function(e){var t=o.util.createCanvasElement();t.width=this.width,t.height=this.height;var n=new o.Canvas(t);this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,(function(){n.renderAll(),e&&e(n)})),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):e&&e(n)}}),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.object.clone,o=t.util.toFixed,i=t.util.string.capitalize,a=t.util.degreesToRadians,s=t.StaticCanvas.supports("setLineDash"),l=!t.isLikelyNode;t.Object||(t.Object=t.util.createClass(t.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:l,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(e){e&&this.setOptions(e)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=t.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(e){var n=t.perfLimitSizeTotal,r=e.width,o=e.height,i=t.maxCacheSideLimit,a=t.minCacheSideLimit;if(r<=i&&o<=i&&r*o<=n)return r<a&&(e.width=a),o<a&&(e.height=a),e;var s=r/o,l=t.util.limitDimsByArea(s,n),u=t.util.capValue,c=u(a,l.x,i),d=u(a,l.y,i);return r>c&&(e.zoomX/=r/c,e.width=c,e.capped=!0),o>d&&(e.zoomY/=o/d,e.height=d,e.capped=!0),e},_getCacheCanvasDimensions:function(){var e=this.getTotalObjectScaling(),t=this._getTransformedDimensions(0,0),n=t.x*e.scaleX/this.scaleX,r=t.y*e.scaleY/this.scaleY;return{width:n+2,height:r+2,zoomX:e.scaleX,zoomY:e.scaleY,x:n,y:r}},_updateCacheCanvas:function(){var e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){var n=e._currentTransform.target,r=e._currentTransform.action;if(this===n&&r.slice&&"scale"===r.slice(0,5))return!1}var o,i,a=this._cacheCanvas,s=this._limitCacheSize(this._getCacheCanvasDimensions()),l=t.minCacheSideLimit,u=s.width,c=s.height,d=s.zoomX,h=s.zoomY,f=u!==this.cacheWidth||c!==this.cacheHeight,p=this.zoomX!==d||this.zoomY!==h,g=f||p,b=0,m=0,v=!1;if(f){var y=this._cacheCanvas.width,j=this._cacheCanvas.height,x=u>y||c>j;v=x||(u<.9*y||c<.9*j)&&y>l&&j>l,x&&!s.capped&&(u>l||c>l)&&(b=.1*u,m=.1*c)}return!!g&&(v?(a.width=Math.ceil(u+b),a.height=Math.ceil(c+m)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,a.width,a.height)),o=s.x/2,i=s.y/2,this.cacheTranslationX=Math.round(a.width/2-o)+o,this.cacheTranslationY=Math.round(a.height/2-i)+i,this.cacheWidth=u,this.cacheHeight=c,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(d,h),this.zoomX=d,this.zoomY=h,!0)},setOptions:function(e){this._setOptions(e),this._initGradient(e.fill,"fill"),this._initGradient(e.stroke,"stroke"),this._initPattern(e.fill,"fill"),this._initPattern(e.stroke,"stroke")},transform:function(e){var t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])},toObject:function(e){var n=t.Object.NUM_FRACTION_DIGITS,r={type:this.type,version:t.version,originX:this.originX,originY:this.originY,left:o(this.left,n),top:o(this.top,n),width:o(this.width,n),height:o(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:o(this.strokeWidth,n),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:o(this.strokeMiterLimit,n),scaleX:o(this.scaleX,n),scaleY:o(this.scaleY,n),angle:o(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:o(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:o(this.skewX,n),skewY:o(this.skewY,n)};return this.clipPath&&(r.clipPath=this.clipPath.toObject(e),r.clipPath.inverted=this.clipPath.inverted,r.clipPath.absolutePositioned=this.clipPath.absolutePositioned),t.util.populateWithProperties(this,r,e),this.includeDefaultValues||(r=this._removeDefaultValues(r)),r},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var n=t.util.getKlass(e.type).prototype;return n.stateProperties.forEach((function(t){"left"!==t&&"top"!==t&&(e[t]===n[t]&&delete e[t],"[object Array]"===Object.prototype.toString.call(e[t])&&"[object Array]"===Object.prototype.toString.call(n[t])&&0===e[t].length&&0===n[t].length&&delete e[t])})),e},toString:function(){return"#<fabric."+i(this.type)+">"},getObjectScaling:function(){var e=t.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(e.scaleX),scaleY:Math.abs(e.scaleY)}},getTotalObjectScaling:function(){var e=this.getObjectScaling(),t=e.scaleX,n=e.scaleY;if(this.canvas){var r=this.canvas.getZoom(),o=this.canvas.getRetinaScaling();t*=r*o,n*=r*o}return{scaleX:t,scaleY:n}},getObjectOpacity:function(){var e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e},_set:function(e,n){var r="scaleX"===e||"scaleY"===e,o=this[e]!==n,i=!1;return r&&(n=this._constrainScale(n)),"scaleX"===e&&n<0?(this.flipX=!this.flipX,n*=-1):"scaleY"===e&&n<0?(this.flipY=!this.flipY,n*=-1):"shadow"!==e||!n||n instanceof t.Shadow?"dirty"===e&&this.group&&this.group.set("dirty",n):n=new t.Shadow(n),this[e]=n,o&&(i=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(e)>-1?(this.dirty=!0,i&&this.group.set("dirty",!0)):i&&this.stateProperties.indexOf(e)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:t.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(e),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),e.restore())},renderCache:function(e){e=e||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!==typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(e){var n=this.clipPath;if(e.save(),n.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",n.absolutePositioned){var r=t.util.invertTransform(this.calcTransformMatrix());e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}n.transform(e),e.scale(1/n.zoomX,1/n.zoomY),e.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),e.restore()},drawObject:function(e,t){var n=this.fill,r=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e),this.fill=n,this.stroke=r},_drawClipPath:function(e){var t=this.clipPath;t&&(t.canvas=this.canvas,t.shouldCache(),t._transformDone=!0,t.renderCache({forClipping:!0}),this.drawClipPathOnCache(e))},drawCacheOnCanvas:function(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(e){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!e&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!e){var t=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-t/2,-n/2,t,n)}return!0}return!1},_renderBackground:function(e){if(this.backgroundColor){var t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}},_setOpacity:function(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity},_setStrokeStyles:function(e,t){var n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,n.toLive?"percentage"===n.gradientUnits||n.gradientTrasnform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e,this),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)},_setFillStyles:function(e,t){var n=t.fill;n&&(n.toLive?(e.fillStyle=n.toLive(e,this),this._applyPatternGradientTransform(e,t.fill)):e.fillStyle=n)},_setClippingProperties:function(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"},_setLineDash:function(e,t,n){t&&0!==t.length&&(1&t.length&&t.push.apply(t,t),s?e.setLineDash(t):n&&n(e))},_renderControls:function(e,n){var r,o,i,s=this.getViewportTransform(),l=this.calcTransformMatrix();o="undefined"!==typeof(n=n||{}).hasBorders?n.hasBorders:this.hasBorders,i="undefined"!==typeof n.hasControls?n.hasControls:this.hasControls,l=t.util.multiplyTransformMatrices(s,l),r=t.util.qrDecompose(l),e.save(),e.translate(r.translateX,r.translateY),e.lineWidth=1*this.borderScaleFactor,this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),n.forActiveSelection?(e.rotate(a(r.angle)),o&&this.drawBordersInGroup(e,r,n)):(e.rotate(a(this.angle)),o&&this.drawBorders(e,n)),i&&this.drawControls(e,n),e.restore()},_setShadow:function(e){if(this.shadow){var n,r=this.shadow,o=this.canvas,i=o&&o.viewportTransform[0]||1,a=o&&o.viewportTransform[3]||1;n=r.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),o&&o._isRetinaScaling()&&(i*=t.devicePixelRatio,a*=t.devicePixelRatio),e.shadowColor=r.color,e.shadowBlur=r.blur*t.browserShadowBlurConstant*(i+a)*(n.scaleX+n.scaleY)/4,e.shadowOffsetX=r.offsetX*i*n.scaleX,e.shadowOffsetY=r.offsetY*a*n.scaleY}},_removeShadow:function(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)},_applyPatternGradientTransform:function(e,t){if(!t||!t.toLive)return{offsetX:0,offsetY:0};var n=t.gradientTransform||t.patternTransform,r=-this.width/2+t.offsetX||0,o=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,r,o):e.transform(1,0,0,1,r,o),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:r,offsetY:o}},_renderPaintInOrder:function(e){"stroke"===this.paintFirst?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))},_render:function(){},_renderFill:function(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())},_renderStroke:function(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform&&this.group){var t=this.getObjectScaling();e.scale(1/t.scaleX,1/t.scaleY)}else this.strokeUniform&&e.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(e,this.strokeDashArray,this._renderDashedStroke),this._setStrokeStyles(e,this),e.stroke(),e.restore()}},_applyPatternForTransformedGradient:function(e,n){var r,o=this._limitCacheSize(this._getCacheCanvasDimensions()),i=t.util.createCanvasElement(),a=this.canvas.getRetinaScaling(),s=o.x/this.scaleX/a,l=o.y/this.scaleY/a;i.width=s,i.height=l,(r=i.getContext("2d")).beginPath(),r.moveTo(0,0),r.lineTo(s,0),r.lineTo(s,l),r.lineTo(0,l),r.closePath(),r.translate(s/2,l/2),r.scale(o.zoomX/this.scaleX/a,o.zoomY/this.scaleY/a),this._applyPatternGradientTransform(r,n),r.fillStyle=n.toLive(e),r.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/o.zoomX,a*this.scaleY/o.zoomY),e.strokeStyle=r.createPattern(i,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var e=t.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",e.scaleX),this.set("scaleY",e.scaleY),this.angle=e.angle,this.skewX=e.skewX,this.skewY=0}},_removeTransformMatrix:function(e){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=t.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,e&&(this.scaleX*=e.scaleX,this.scaleY*=e.scaleY,this.cropX=e.cropX,this.cropY=e.cropY,n.x+=e.offsetLeft,n.y+=e.offsetTop,this.width=e.width,this.height=e.height),this.setPositionByOrigin(n,"center","center")},clone:function(e,n){var r=this.toObject(n);this.constructor.fromObject?this.constructor.fromObject(r,e):t.Object._fromObject("Object",r,e)},cloneAsImage:function(e,n){var r=this.toCanvasElement(n);return e&&e(new t.Image(r)),this},toCanvasElement:function(e){e||(e={});var n=t.util,r=n.saveObjectTransform(this),o=this.group,i=this.shadow,a=Math.abs,s=(e.multiplier||1)*(e.enableRetinaScaling?t.devicePixelRatio:1);delete this.group,e.withoutTransform&&n.resetObjectTransform(this),e.withoutShadow&&(this.shadow=null);var l,u,c,d,h=t.util.createCanvasElement(),f=this.getBoundingRect(!0,!0),p=this.shadow,g={x:0,y:0};p&&(u=p.blur,l=p.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(a(p.offsetX)+u)*a(l.scaleX),g.y=2*Math.round(a(p.offsetY)+u)*a(l.scaleY)),c=f.width+g.x,d=f.height+g.y,h.width=Math.ceil(c),h.height=Math.ceil(d);var b=new t.StaticCanvas(h,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===e.format&&(b.backgroundColor="#fff"),this.setPositionByOrigin(new t.Point(b.width/2,b.height/2),"center","center");var m=this.canvas;b.add(this);var v=b.toCanvasElement(s||1,e);return this.shadow=i,this.set("canvas",m),o&&(this.group=o),this.set(r).setCoords(),b._objects=[],b.dispose(),b=null,v},toDataURL:function(e){return e||(e={}),t.util.toDataURL(this.toCanvasElement(e),e.format||"png",e.quality||1)},isType:function(e){return this.type===e},complexity:function(){return 1},toJSON:function(e){return this.toObject(e)},rotate:function(e){var t=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return t&&this._setOriginToCenter(),this.set("angle",e),t&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(e,n){n=n||this.canvas.getPointer(e);var r=new t.Point(n.x,n.y),o=this._getLeftTopCoords();return this.angle&&(r=t.util.rotatePoint(r,o,a(-this.angle))),{x:r.x-o.x,y:r.y-o.y}},_setupCompositeOperation:function(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}}),t.util.createAccessors&&t.util.createAccessors(t.Object),n(t.Object.prototype,t.Observable),t.Object.NUM_FRACTION_DIGITS=2,t.Object._fromObject=function(e,n,o,i){var a=t[e];n=r(n,!0),t.util.enlivenPatterns([n.fill,n.stroke],(function(e){"undefined"!==typeof e[0]&&(n.fill=e[0]),"undefined"!==typeof e[1]&&(n.stroke=e[1]),t.util.enlivenObjects([n.clipPath],(function(e){n.clipPath=e[0];var t=i?new a(n[i],n):new a(n);o&&o(t)}))}))},t.Object.__uid=0)}(t),function(){var e=o.util.degreesToRadians,t={left:-.5,center:0,right:.5},n={top:-.5,center:0,bottom:.5};o.util.object.extend(o.Object.prototype,{translateToGivenOrigin:function(e,r,i,a,s){var l,u,c,d=e.x,h=e.y;return"string"===typeof r?r=t[r]:r-=.5,"string"===typeof a?a=t[a]:a-=.5,"string"===typeof i?i=n[i]:i-=.5,"string"===typeof s?s=n[s]:s-=.5,u=s-i,((l=a-r)||u)&&(c=this._getTransformedDimensions(),d=e.x+l*c.x,h=e.y+u*c.y),new o.Point(d,h)},translateToCenterPoint:function(t,n,r){var i=this.translateToGivenOrigin(t,n,r,"center","center");return this.angle?o.util.rotatePoint(i,t,e(this.angle)):i},translateToOriginPoint:function(t,n,r){var i=this.translateToGivenOrigin(t,"center","center",n,r);return this.angle?o.util.rotatePoint(i,t,e(this.angle)):i},getCenterPoint:function(){var e=new o.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,t){var n=this.getCenterPoint();return this.translateToOriginPoint(n,e,t)},toLocalPoint:function(t,n,r){var i,a,s=this.getCenterPoint();return i="undefined"!==typeof n&&"undefined"!==typeof r?this.translateToGivenOrigin(s,"center","center",n,r):new o.Point(this.left,this.top),a=new o.Point(t.x,t.y),this.angle&&(a=o.util.rotatePoint(a,s,-e(this.angle))),a.subtractEquals(i)},setPositionByOrigin:function(e,t,n){var r=this.translateToCenterPoint(e,t,n),o=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",o.x),this.set("top",o.y)},adjustPosition:function(n){var r,i,a=e(this.angle),s=this.getScaledWidth(),l=o.util.cos(a)*s,u=o.util.sin(a)*s;r="string"===typeof this.originX?t[this.originX]:this.originX-.5,i="string"===typeof n?t[n]:n-.5,this.left+=l*(i-r),this.top+=u*(i-r),this.setCoords(),this.originX=n},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center",this.originY="center",this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var e=o.util,t=e.degreesToRadians,n=e.multiplyTransformMatrices,r=e.transformPoint;e.object.extend(o.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(e,t){return t?e?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),e?this.aCoords:this.lineCoords)},getCoords:function(e,t){return n=this._getCoords(e,t),[new o.Point(n.tl.x,n.tl.y),new o.Point(n.tr.x,n.tr.y),new o.Point(n.br.x,n.br.y),new o.Point(n.bl.x,n.bl.y)];var n},intersectsWithRect:function(e,t,n,r){var i=this.getCoords(n,r);return"Intersection"===o.Intersection.intersectPolygonRectangle(i,e,t).status},intersectsWithObject:function(e,t,n){return"Intersection"===o.Intersection.intersectPolygonPolygon(this.getCoords(t,n),e.getCoords(t,n)).status||e.isContainedWithinObject(this,t,n)||this.isContainedWithinObject(e,t,n)},isContainedWithinObject:function(e,t,n){for(var r=this.getCoords(t,n),o=t?e.aCoords:e.lineCoords,i=0,a=e._getImageLines(o);i<4;i++)if(!e.containsPoint(r[i],a))return!1;return!0},isContainedWithinRect:function(e,t,n,r){var o=this.getBoundingRect(n,r);return o.left>=e.x&&o.left+o.width<=t.x&&o.top>=e.y&&o.top+o.height<=t.y},containsPoint:function(e,t,n,r){var o=this._getCoords(n,r),i=(t=t||this._getImageLines(o),this._findCrossPoints(e,t));return 0!==i&&i%2===1},isOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.getCoords(!0,e).some((function(e){return e.x<=n.x&&e.x>=t.x&&e.y<=n.y&&e.y>=t.y}))||(!!this.intersectsWithRect(t,n,!0,e)||this._containsCenterOfCanvas(t,n,e))},_containsCenterOfCanvas:function(e,t,n){var r={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return!!this.containsPoint(r,null,!0,n)},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.intersectsWithRect(t,n,!0,e)||this.getCoords(!0,e).every((function(e){return(e.x>=n.x||e.x<=t.x)&&(e.y>=n.y||e.y<=t.y)}))&&this._containsCenterOfCanvas(t,n,e)},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,t){var n,r,o,i=0;for(var a in t)if(!((o=t[a]).o.y<e.y&&o.d.y<e.y)&&!(o.o.y>=e.y&&o.d.y>=e.y)&&(o.o.x===o.d.x&&o.o.x>=e.x?r=o.o.x:(0,n=(o.d.y-o.o.y)/(o.d.x-o.o.x),r=-(e.y-0*e.x-(o.o.y-n*o.o.x))/(0-n)),r>=e.x&&(i+=1),2===i))break;return i},getBoundingRect:function(t,n){var r=this.getCoords(t,n);return e.makeBoundingBoxFromPoints(r)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,t){var n=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(e/this.width/n)},scaleToHeight:function(e,t){var n=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(e/this.height/n)},calcCoords:function(e){return e?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var n=this.getViewportTransform(),o=this.padding,i=t(this.angle),a=e.cos(i)*o,s=e.sin(i)*o,l=a+s,u=a-s,c=this.calcACoords(),d={tl:r(c.tl,n),tr:r(c.tr,n),bl:r(c.bl,n),br:r(c.br,n)};return o&&(d.tl.x-=u,d.tl.y-=l,d.tr.x+=l,d.tr.y-=u,d.bl.x-=l,d.bl.y+=u,d.br.x+=u,d.br.y+=l),d},calcOCoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),r=this.getViewportTransform(),o=n(r,t),i=n(o,e),a=(i=n(i,[1/r[0],0,0,1/r[3],0,0]),this._calculateCurrentDimensions()),s={};return this.forEachControl((function(e,t,n){s[t]=e.positionHandler(a,i,n)})),s},calcACoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),o=n(t,e),i=this._getTransformedDimensions(),a=i.x/2,s=i.y/2;return{tl:r({x:-a,y:-s},o),tr:r({x:a,y:-s},o),bl:r({x:-a,y:s},o),br:r({x:a,y:s},o)}},setCoords:function(e){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),e||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var t="_",n="";return!e&&this.group&&(n=this.group.transformMatrixKey(e)+t),n+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){var t=this.calcOwnMatrix();if(e||!this.group)return t;var r=this.transformMatrixKey(e),o=this.matrixCache||(this.matrixCache={});return o.key===r?o.value:(this.group&&(t=n(this.group.calcTransformMatrix(!1),t)),o.key=r,o.value=t,t)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===t)return n.value;var r=this._calcTranslateMatrix(),o={angle:this.angle,translateX:r[4],translateY:r[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=t,n.value=e.composeMatrix(o),n.value},_calcDimensionsTransformMatrix:function(t,n,r){return e.calcDimensionsMatrix({skewX:t,skewY:n,scaleX:this.scaleX*(r&&this.flipX?-1:1),scaleY:this.scaleY*(r&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var e=this.strokeWidth;return{x:this.width+e,y:this.height+e}},_getTransformedDimensions:function(t,n){"undefined"===typeof t&&(t=this.skewX),"undefined"===typeof n&&(n=this.skewY);var r,o,i=this._getNonTransformedDimensions(),a=0===t&&0===n;if(this.strokeUniform?(r=this.width,o=this.height):(r=i.x,o=i.y),a)return this._finalizeDimensions(r*this.scaleX,o*this.scaleY);var s=e.sizeAfterTransform(r,o,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:n});return this._finalizeDimensions(s.x,s.y)},_finalizeDimensions:function(e,t){return this.strokeUniform?{x:e+this.strokeWidth,y:t+this.strokeWidth}:{x:e,y:t}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),t=this._getTransformedDimensions();return r(t,e,!0).scalarAdd(2*this.padding)}})}(),o.util.object.extend(o.Object.prototype,{sendToBack:function(){return this.group?o.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?o.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(e){return this.group?o.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas&&this.canvas.sendBackwards(this,e),this},bringForward:function(e){return this.group?o.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas&&this.canvas.bringForward(this,e),this},moveTo:function(e){return this.group&&"activeSelection"!==this.group.type?o.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas&&this.canvas.moveTo(this,e),this}}),function(){function e(e,t){if(t){if(t.toLive)return e+": url(#SVGID_"+t.id+"); ";var n=new o.Color(t),r=e+": "+n.toRgb()+"; ",i=n.getAlpha();return 1!==i&&(r+=e+"-opacity: "+i.toString()+"; "),r}return e+": none; "}var t=o.util.toFixed;o.util.object.extend(o.Object.prototype,{getSvgStyles:function(t){var n=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):"none",i=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",u="undefined"!==typeof this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",d=t?"":this.getSvgFilter(),h=e("fill",this.fill);return[e("stroke",this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",l,"; ",h,"fill-rule: ",n,"; ","opacity: ",u,";",d,c].join("")},getSvgSpanStyles:function(t,n){var r="; ",o=t.fontFamily?"font-family: "+(-1===t.fontFamily.indexOf("'")&&-1===t.fontFamily.indexOf('"')?"'"+t.fontFamily+"'":t.fontFamily)+r:"",i=t.strokeWidth?"stroke-width: "+t.strokeWidth+r:"",a=(o=o,t.fontSize?"font-size: "+t.fontSize+"px"+r:""),s=t.fontStyle?"font-style: "+t.fontStyle+r:"",l=t.fontWeight?"font-weight: "+t.fontWeight+r:"",u=t.fill?e("fill",t.fill):"",c=t.stroke?e("stroke",t.stroke):"",d=this.getSvgTextDecoration(t);return d&&(d="text-decoration: "+d+r),[c,i,o,a,s,l,d,u,t.deltaY?"baseline-shift: "+-t.deltaY+"; ":"",n?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(e){return["overline","underline","line-through"].filter((function(t){return e[t.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(e,t){var n=e?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+o.util.matrixToSVG(n)+(t||"")+'" '},_setSVGBg:function(e){if(this.backgroundColor){var n=o.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',t(-this.width/2,n),'" y="',t(-this.height/2,n),'" width="',t(this.width,n),'" height="',t(this.height,n),'"></rect>\n')}},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})},toClipPathSVG:function(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})},_createBaseClipPathSVGMarkup:function(e,t){var n=(t=t||{}).reviver,r=t.additionalTransform||"",o=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=o,n?n(e.join("")):e.join("")},_createBaseSVGMarkup:function(e,t){var n,r,i=(t=t||{}).noStyle,a=t.reviver,s=i?"":'style="'+this.getSvgStyles()+'" ',l=t.withShadow?'style="'+this.getSvgFilter()+'" ':"",u=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=u&&u.absolutePositioned,h=this.stroke,f=this.fill,p=this.shadow,g=[],b=e.indexOf("COMMON_PARTS"),m=t.additionalTransform;return u&&(u.clipPathId="CLIPPATH_"+o.Object.__uid++,r='<clipPath id="'+u.clipPathId+'" >\n'+u.toClipPathSVG(a)+"</clipPath>\n"),d&&g.push("<g ",l,this.getSvgCommons()," >\n"),g.push("<g ",this.getSvgTransform(!1),d?"":l+this.getSvgCommons()," >\n"),n=[s,c,i?"":this.addPaintOrder()," ",m?'transform="'+m+'" ':""].join(""),e[b]=n,f&&f.toLive&&g.push(f.toSVG(this)),h&&h.toLive&&g.push(h.toSVG(this)),p&&g.push(p.toSVG(this)),u&&g.push(r),g.push(e.join("")),g.push("</g>\n"),d&&g.push("</g>\n"),a?a(g.join("")):g.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var e=o.util.object.extend,t="stateProperties";function n(t,n,r){var o={};r.forEach((function(e){o[e]=t[e]})),e(t[n],o,!0)}function r(e,t,n){if(e===t)return!0;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var o=0,i=e.length;o<i;o++)if(!r(e[o],t[o]))return!1;return!0}if(e&&"object"===typeof e){var a,s=Object.keys(e);if(!t||"object"!==typeof t||!n&&s.length!==Object.keys(t).length)return!1;for(o=0,i=s.length;o<i;o++)if("canvas"!==(a=s[o])&&"group"!==a&&!r(e[a],t[a]))return!1;return!0}}o.util.object.extend(o.Object.prototype,{hasStateChanged:function(e){var n="_"+(e=e||t);return Object.keys(this[n]).length<this[e].length||!r(this[n],this,!0)},saveState:function(e){var r=e&&e.propertySet||t,o="_"+r;return this[o]?(n(this,o,this[r]),e&&e.stateProperties&&n(this,o,e.stateProperties),this):this.setupState(e)},setupState:function(e){var n=(e=e||{}).propertySet||t;return e.propertySet=n,this["_"+n]={},this.saveState(e),this}})}(),function(){var e=o.util.degreesToRadians;o.util.object.extend(o.Object.prototype,{_findTargetCorner:function(e,t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var n,r,o,i=e.x,a=e.y,s=Object.keys(this.oCoords),l=s.length-1;for(this.__corner=0;l>=0;l--)if(o=s[l],this.isControlVisible(o)&&(r=this._getImageLines(t?this.oCoords[o].touchCorner:this.oCoords[o].corner),0!==(n=this._findCrossPoints({x:i,y:a},r))&&n%2===1))return this.__corner=o,o;return!1},forEachControl:function(e){for(var t in this.controls)e(this.controls[t],t,this)},_setCornerCoords:function(){var e=this.oCoords;for(var t in e){var n=this.controls[t];e[t].corner=n.calcCornerCoords(this.angle,this.cornerSize,e[t].x,e[t].y,!1),e[t].touchCorner=n.calcCornerCoords(this.angle,this.touchCornerSize,e[t].x,e[t].y,!0)}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;t.save();var n=this.getCenterPoint(),r=this._calculateCurrentDimensions(),o=this.canvas.viewportTransform;return t.translate(n.x,n.y),t.scale(1/o[0],1/o[3]),t.rotate(e(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-r.x/2,-r.y/2,r.x,r.y),t.restore(),this},drawBorders:function(e,t){t=t||{};var n=this._calculateCurrentDimensions(),r=this.borderScaleFactor,o=n.x+r,i=n.y+r,a="undefined"!==typeof t.hasControls?t.hasControls:this.hasControls,s=!1;return e.save(),e.strokeStyle=t.borderColor||this.borderColor,this._setLineDash(e,t.borderDashArray||this.borderDashArray,null),e.strokeRect(-o/2,-i/2,o,i),a&&(e.beginPath(),this.forEachControl((function(t,n,r){t.withConnection&&t.getVisibility(r,n)&&(s=!0,e.moveTo(t.x*o,t.y*i),e.lineTo(t.x*o+t.offsetX,t.y*i+t.offsetY))})),s&&e.stroke()),e.restore(),this},drawBordersInGroup:function(e,t,n){n=n||{};var r=o.util.sizeAfterTransform(this.width,this.height,t),i=this.strokeWidth,a=this.strokeUniform,s=this.borderScaleFactor,l=r.x+i*(a?this.canvas.getZoom():t.scaleX)+s,u=r.y+i*(a?this.canvas.getZoom():t.scaleY)+s;return e.save(),this._setLineDash(e,n.borderDashArray||this.borderDashArray,null),e.strokeStyle=n.borderColor||this.borderColor,e.strokeRect(-l/2,-u/2,l,u),e.restore(),this},drawControls:function(e,t){return t=t||{},e.save(),e.setTransform(this.canvas.getRetinaScaling(),0,0,this.canvas.getRetinaScaling(),0,0),e.strokeStyle=e.fillStyle=t.cornerColor||this.cornerColor,this.transparentCorners||(e.strokeStyle=t.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(e,t.cornerDashArray||this.cornerDashArray,null),this.setCoords(),this.forEachControl((function(n,r,o){n.getVisibility(o,r)&&n.render(e,o.oCoords[r].x,o.oCoords[r].y,t,o)})),e.restore(),this},isControlVisible:function(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)},setControlVisible:function(e,t){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t,this},setControlsVisibility:function(e){for(var t in e||(e={}),e)this.setControlVisible(t,e[t]);return this},onDeselect:function(){},onSelect:function(){}})}(),o.util.object.extend(o.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){var n=function(){},r=(t=t||{}).onComplete||n,i=t.onChange||n,a=this;return o.util.animate({startValue:e.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),a.requestRenderAll(),i()},onComplete:function(){e.setCoords(),r()}}),this},fxCenterObjectV:function(e,t){var n=function(){},r=(t=t||{}).onComplete||n,i=t.onChange||n,a=this;return o.util.animate({startValue:e.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),a.requestRenderAll(),i()},onComplete:function(){e.setCoords(),r()}}),this},fxRemove:function(e,t){var n=function(){},r=(t=t||{}).onComplete||n,i=t.onChange||n,a=this;return o.util.animate({startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set("opacity",t),a.requestRenderAll(),i()},onComplete:function(){a.remove(e),r()}}),this}}),o.util.object.extend(o.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var e,t,n=[];for(e in arguments[0])n.push(e);for(var r=0,o=n.length;r<o;r++)e=n[r],t=r!==o-1,this._animate(e,arguments[0][e],arguments[1],t)}else this._animate.apply(this,arguments);return this},_animate:function(e,t,n,r){var i,a=this;t=t.toString(),n=n?o.util.object.clone(n):{},~e.indexOf(".")&&(i=e.split("."));var s=a.colorProperties.indexOf(e)>-1||i&&a.colorProperties.indexOf(i[1])>-1,l=i?this.get(i[0])[i[1]]:this.get(e);"from"in n||(n.from=l),s||(t=~t.indexOf("=")?l+parseFloat(t.replace("=","")):parseFloat(t));var u={startValue:n.from,endValue:t,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(){return n.abort.call(a)},onChange:function(t,o,s){i?a[i[0]][i[1]]=t:a.set(e,t),r||n.onChange&&n.onChange(t,o,s)},onComplete:function(e,t,o){r||(a.setCoords(),n.onComplete&&n.onComplete(e,t,o))}};s?o.util.animateColor(u.startValue,u.endValue,u.duration,u):o.util.animate(u)}}),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.object.clone,o={x1:1,x2:1,y1:1,y2:1},i=t.StaticCanvas.supports("setLineDash");function a(e,t){var n=e.origin,r=e.axis1,o=e.axis2,i=e.dimension,a=t.nearest,s=t.center,l=t.farthest;return function(){switch(this.get(n)){case a:return Math.min(this.get(r),this.get(o));case s:return Math.min(this.get(r),this.get(o))+.5*this.get(i);case l:return Math.max(this.get(r),this.get(o))}}}t.Line?t.warn("fabric.Line is already defined"):(t.Line=t.util.createClass(t.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:t.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,t){e||(e=[0,0,0,0]),this.callSuper("initialize",t),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(t)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,t){return this.callSuper("_set",e,t),"undefined"!==typeof o[e]&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){if(e.beginPath(),!this.strokeDashArray||this.strokeDashArray&&i){var t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2)}e.lineWidth=this.strokeWidth;var n=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n},_renderDashedStroke:function(e){var n=this.calcLinePoints();e.beginPath(),t.util.drawDashedLine(e,n.x1,n.y1,n.x2,n.y2,this.strokeDashArray),e.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return n(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,t=this.y1<=this.y2?-1:1,n=e*this.width*.5,r=t*this.height*.5;return{x1:n,x2:e*this.width*-.5,y1:r,y2:t*this.height*-.5}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'" />\n']}}),t.Line.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),t.Line.fromElement=function(e,r,o){o=o||{};var i=t.parseAttributes(e,t.Line.ATTRIBUTE_NAMES),a=[i.x1||0,i.y1||0,i.x2||0,i.y2||0];r(new t.Line(a,n(i,o)))},t.Line.fromObject=function(e,n){var o=r(e,!0);o.points=[e.x1,e.y1,e.x2,e.y2],t.Object._fromObject("Line",o,(function(e){delete e.points,n&&n(e)}),"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=Math.PI;t.Circle?t.warn("fabric.Circle is already defined."):(t.Circle=t.util.createClass(t.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*n,cacheProperties:t.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,t){return this.callSuper("_set",e,t),"radius"===e&&this.setRadius(t),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,r=(this.endAngle-this.startAngle)%(2*n);if(0===r)e=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var o=t.util.cos(this.startAngle)*this.radius,i=t.util.sin(this.startAngle)*this.radius,a=t.util.cos(this.endAngle)*this.radius,s=t.util.sin(this.endAngle)*this.radius,l=r>n?"1":"0";e=['<path d="M '+o+" "+i," A "+this.radius+" "+this.radius," 0 ",+l+" 1"," "+a+" "+s,'" ',"COMMON_PARTS"," />\n"]}return e},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",2*e).set("height",2*e)}}),t.Circle.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),t.Circle.fromElement=function(e,n){var r,o=t.parseAttributes(e,t.Circle.ATTRIBUTE_NAMES);if(!("radius"in(r=o)&&r.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");o.left=(o.left||0)-o.radius,o.top=(o.top||0)-o.radius,n(new t.Circle(o))},t.Circle.fromObject=function(e,n){return t.Object._fromObject("Circle",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Triangle?t.warn("fabric.Triangle is already defined"):(t.Triangle=t.util.createClass(t.Object,{type:"triangle",width:100,height:100,_render:function(e){var t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)},_renderDashedStroke:function(e){var n=this.width/2,r=this.height/2;e.beginPath(),t.util.drawDashedLine(e,-n,r,0,-r,this.strokeDashArray),t.util.drawDashedLine(e,0,-r,n,r,this.strokeDashArray),t.util.drawDashedLine(e,n,r,-n,r,this.strokeDashArray),e.closePath()},_toSVG:function(){var e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-e+" "+t,"0 "+-t,e+" "+t].join(","),'" />']}}),t.Triangle.fromObject=function(e,n){return t.Object._fromObject("Triangle",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=2*Math.PI;t.Ellipse?t.warn("fabric.Ellipse is already defined."):(t.Ellipse=t.util.createClass(t.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this.set("rx",e&&e.rx||0),this.set("ry",e&&e.ry||0)},_set:function(e,t){switch(this.callSuper("_set",e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,n,!1),e.restore(),this._renderPaintInOrder(e)}}),t.Ellipse.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),t.Ellipse.fromElement=function(e,n){var r=t.parseAttributes(e,t.Ellipse.ATTRIBUTE_NAMES);r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,n(new t.Ellipse(r))},t.Ellipse.fromObject=function(e,n){return t.Object._fromObject("Ellipse",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend;t.Rect?t.warn("fabric.Rect is already defined"):(t.Rect=t.util.createClass(t.Object,{stateProperties:t.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(e){var t=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,o=this.height,i=-this.width/2,a=-this.height/2,s=0!==t||0!==n,l=.4477152502;e.beginPath(),e.moveTo(i+t,a),e.lineTo(i+r-t,a),s&&e.bezierCurveTo(i+r-l*t,a,i+r,a+l*n,i+r,a+n),e.lineTo(i+r,a+o-n),s&&e.bezierCurveTo(i+r,a+o-l*n,i+r-l*t,a+o,i+r-t,a+o),e.lineTo(i+t,a+o),s&&e.bezierCurveTo(i+l*t,a+o,i,a+o-l*n,i,a+o-n),e.lineTo(i,a+n),s&&e.bezierCurveTo(i,a+l*n,i+l*t,a,i+t,a),e.closePath(),this._renderPaintInOrder(e)},_renderDashedStroke:function(e){var n=-this.width/2,r=-this.height/2,o=this.width,i=this.height;e.beginPath(),t.util.drawDashedLine(e,n,r,n+o,r,this.strokeDashArray),t.util.drawDashedLine(e,n+o,r,n+o,r+i,this.strokeDashArray),t.util.drawDashedLine(e,n+o,r+i,n,r+i,this.strokeDashArray),t.util.drawDashedLine(e,n,r+i,n,r,this.strokeDashArray),e.closePath()},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),t.Rect.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),t.Rect.fromElement=function(e,r,o){if(!e)return r(null);o=o||{};var i=t.parseAttributes(e,t.Rect.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0,i.height=i.height||0,i.width=i.width||0;var a=new t.Rect(n(o?t.util.object.clone(o):{},i));a.visible=a.visible&&a.width>0&&a.height>0,r(a)},t.Rect.fromObject=function(e,n){return t.Object._fromObject("Rect",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.array.min,o=t.util.array.max,i=t.util.toFixed;t.Polyline?t.warn("fabric.Polyline is already defined"):(t.Polyline=t.util.createClass(t.Object,{type:"polyline",points:null,cacheProperties:t.Object.prototype.cacheProperties.concat("points"),initialize:function(e,t){t=t||{},this.points=e||[],this.callSuper("initialize",t),this._setPositionDimensions(t)},_setPositionDimensions:function(e){var t,n=this._calcDimensions(e);this.width=n.width,this.height=n.height,e.fromSVG||(t=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2,y:n.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),"undefined"===typeof e.left&&(this.left=e.fromSVG?n.left:t.x),"undefined"===typeof e.top&&(this.top=e.fromSVG?n.top:t.y),this.pathOffset={x:n.left+this.width/2,y:n.top+this.height/2}},_calcDimensions:function(){var e=this.points,t=r(e,"x")||0,n=r(e,"y")||0;return{left:t,top:n,width:(o(e,"x")||0)-t,height:(o(e,"y")||0)-n}},toObject:function(e){return n(this.callSuper("toObject",e),{points:this.points.concat()})},_toSVG:function(){for(var e=[],n=this.pathOffset.x,r=this.pathOffset.y,o=t.Object.NUM_FRACTION_DIGITS,a=0,s=this.points.length;a<s;a++)e.push(i(this.points[a].x-n,o),",",i(this.points[a].y-r,o)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',e.join(""),'" />\n']},commonRender:function(e){var t,n=this.points.length,r=this.pathOffset.x,o=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-o);for(var i=0;i<n;i++)t=this.points[i],e.lineTo(t.x-r,t.y-o);return!0},_render:function(e){this.commonRender(e)&&this._renderPaintInOrder(e)},_renderDashedStroke:function(e){var n,r;e.beginPath();for(var o=0,i=this.points.length;o<i;o++)n=this.points[o],r=this.points[o+1]||n,t.util.drawDashedLine(e,n.x,n.y,r.x,r.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),t.Polyline.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polyline.fromElementGenerator=function(e){return function(r,o,i){if(!r)return o(null);i||(i={});var a=t.parsePointsAttribute(r.getAttribute("points")),s=t.parseAttributes(r,t[e].ATTRIBUTE_NAMES);s.fromSVG=!0,o(new t[e](a,n(s,i)))}},t.Polyline.fromElement=t.Polyline.fromElementGenerator("Polyline"),t.Polyline.fromObject=function(e,n){return t.Object._fromObject("Polyline",e,n,"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Polygon?t.warn("fabric.Polygon is already defined"):(t.Polygon=t.util.createClass(t.Polyline,{type:"polygon",_render:function(e){this.commonRender(e)&&(e.closePath(),this._renderPaintInOrder(e))},_renderDashedStroke:function(e){this.callSuper("_renderDashedStroke",e),e.closePath()}}),t.Polygon.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polygon.fromElement=t.Polyline.fromElementGenerator("Polygon"),t.Polygon.fromObject=function(e,n){return t.Object._fromObject("Polygon",e,n,"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.array.min,r=t.util.array.max,o=t.util.object.extend,i=Object.prototype.toString,a=t.util.toFixed;t.Path?t.warn("fabric.Path is already defined"):(t.Path=t.util.createClass(t.Object,{type:"path",path:null,cacheProperties:t.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:t.Object.prototype.stateProperties.concat("path"),initialize:function(e,n){n=n||{},this.callSuper("initialize",n),e||(e=[]);var r="[object Array]"===i.call(e);this.path=r?t.util.makePathSimpler(e):t.util.makePathSimpler(t.util.parsePath(e)),this.path&&t.Polyline.prototype._setPositionDimensions.call(this,n)},_renderPathCommands:function(e){var t,n=0,r=0,o=0,i=0,a=0,s=0,l=-this.pathOffset.x,u=-this.pathOffset.y;e.beginPath();for(var c=0,d=this.path.length;c<d;++c)switch((t=this.path[c])[0]){case"L":o=t[1],i=t[2],e.lineTo(o+l,i+u);break;case"M":n=o=t[1],r=i=t[2],e.moveTo(o+l,i+u);break;case"C":o=t[5],i=t[6],a=t[3],s=t[4],e.bezierCurveTo(t[1]+l,t[2]+u,a+l,s+u,o+l,i+u);break;case"Q":e.quadraticCurveTo(t[1]+l,t[2]+u,t[3]+l,t[4]+u),o=t[3],i=t[4],a=t[1],s=t[2];break;case"z":case"Z":o=n,i=r,e.closePath()}},_render:function(e){this._renderPathCommands(e),this._renderPaintInOrder(e)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(e){return o(this.callSuper("toObject",e),{path:this.path.map((function(e){return e.slice()}))})},toDatalessObject:function(e){var t=this.toObject(["sourcePath"].concat(e));return t.sourcePath&&delete t.path,t},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',this.path.map((function(e){return e.join(" ")})).join(" "),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var e=t.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,e)+", "+a(-this.pathOffset.y,e)+")"},toClipPathSVG:function(e){var t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},toSVG:function(e){var t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var e,o,i=[],a=[],s=0,l=0,u=0,c=0,d=0,h=this.path.length;d<h;++d){switch((e=this.path[d])[0]){case"L":u=e[1],c=e[2],o=[];break;case"M":s=u=e[1],l=c=e[2],o=[];break;case"C":o=t.util.getBoundsOfCurve(u,c,e[1],e[2],e[3],e[4],e[5],e[6]),u=e[5],c=e[6];break;case"Q":o=t.util.getBoundsOfCurve(u,c,e[1],e[2],e[1],e[2],e[3],e[4]),u=e[3],c=e[4];break;case"z":case"Z":u=s,c=l}o.forEach((function(e){i.push(e.x),a.push(e.y)})),i.push(u),a.push(c)}var f=n(i)||0,p=n(a)||0;return{left:f,top:p,width:(r(i)||0)-f,height:(r(a)||0)-p}}}),t.Path.fromObject=function(e,n){if("string"===typeof e.sourcePath){var r=e.sourcePath;t.loadSVGFromURL(r,(function(t){var r=t[0];r.setOptions(e),n&&n(r)}))}else t.Object._fromObject("Path",e,n,"path")},t.Path.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(["d"]),t.Path.fromElement=function(e,n,r){var i=t.parseAttributes(e,t.Path.ATTRIBUTE_NAMES);i.fromSVG=!0,n(new t.Path(i.d,o(i,r)))})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.array.min,r=t.util.array.max;t.Group||(t.Group=t.util.createClass(t.Object,t.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,t,n){t=t||{},this._objects=[],n&&this.callSuper("initialize",t),this._objects=e||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;if(n)this._updateObjectsACoords();else{var o=t&&t.centerPoint;void 0!==t.originX&&(this.originX=t.originX),void 0!==t.originY&&(this.originY=t.originY),o||this._calcBounds(),this._updateObjectsCoords(o),delete t.centerPoint,this.callSuper("initialize",t)}this.setCoords()},_updateObjectsACoords:function(){for(var e=this._objects.length;e--;)this._objects[e].setCoords(true)},_updateObjectsCoords:function(e){e=e||this.getCenterPoint();for(var t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],e)},_updateObjectCoords:function(e,t){var n=e.left,r=e.top;e.set({left:n-t.x,top:r-t.y}),e.group=this,e.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){var n=!!this.group;return this._restoreObjectsState(),t.util.resetObjectTransform(this),e&&(n&&t.util.removeTransformFromObject(e,this.group.calcTransformMatrix()),this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),t.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,n){var r=this._objects.length;if(this.useSetOnGroup)for(;r--;)this._objects[r].setOnGroup(e,n);if("canvas"===e)for(;r--;)this._objects[r]._set(e,n);t.Object.prototype._set.call(this,e,n)},toObject:function(e){var n=this.includeDefaultValues,r=this._objects.map((function(t){var r=t.includeDefaultValues;t.includeDefaultValues=n;var o=t.toObject(e);return t.includeDefaultValues=r,o})),o=t.Object.prototype.toObject.call(this,e);return o.objects=r,o},toDatalessObject:function(e){var n,r=this.sourcePath;if(r)n=r;else{var o=this.includeDefaultValues;n=this._objects.map((function(t){var n=t.includeDefaultValues;t.includeDefaultValues=o;var r=t.toDatalessObject(e);return t.includeDefaultValues=n,r}))}var i=t.Object.prototype.toDatalessObject.call(this,e);return i.objects=n,i},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=t.Object.prototype.shouldCache.call(this);if(e)for(var n=0,r=this._objects.length;n<r;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1;return e},willDrawShadow:function(){if(t.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var t=0,n=this._objects.length;t<n;t++)this._objects[t].render(e);this._drawClipPath(e)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t].isCacheDirty(!0)){if(this._cacheCanvas){var r=this.cacheWidth/this.zoomX,o=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-r/2,-o/2,r,o)}return!0}return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach((function(n){t.util.addTransformToObject(n,e),delete n.group,n.setCoords()})),this},realizeTransform:function(e,n){return t.util.addTransformToObject(e,n),e},destroy:function(){return this._objects.forEach((function(e){e.set("dirty",!0)})),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var e=this._objects,n=this.canvas;this._objects=[];var r=this.toObject();delete r.objects;var o=new t.ActiveSelection([]);return o.set(r),o.type="activeSelection",n.remove(this),e.forEach((function(e){e.group=o,e.dirty=!0,n.add(e)})),o.canvas=n,o._objects=e,n._activeObject=o,o.setCoords(),o}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject((function(e){e.setCoords(true)})),this},_calcBounds:function(e){for(var t,n,r,o,i=[],a=[],s=["tr","br","bl","tl"],l=0,u=this._objects.length,c=s.length;l<u;++l){for(r=(t=this._objects[l]).calcACoords(),o=0;o<c;o++)n=s[o],i.push(r[n].x),a.push(r[n].y);t.aCoords=r}this._getBounds(i,a,e)},_getBounds:function(e,o,i){var a=new t.Point(n(e),n(o)),s=new t.Point(r(e),r(o)),l=a.y||0,u=a.x||0,c=s.x-a.x||0,d=s.y-a.y||0;this.width=c,this.height=d,i||this.setPositionByOrigin({x:u,y:l},"left","top")},_toSVG:function(e){for(var t=["<g ","COMMON_PARTS"," >\n"],n=0,r=this._objects.length;n<r;n++)t.push("\t\t",this._objects[n].toSVG(e));return t.push("</g>\n"),t},getSvgStyles:function(){var e="undefined"!==typeof this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")},toClipPathSVG:function(e){for(var t=[],n=0,r=this._objects.length;n<r;n++)t.push("\t",this._objects[n].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}}),t.Group.fromObject=function(e,n){var r=e.objects,o=t.util.object.clone(e,!0);delete o.objects,"string"!==typeof r?t.util.enlivenObjects(r,(function(r){t.util.enlivenObjects([e.clipPath],(function(o){var i=t.util.object.clone(e,!0);i.clipPath=o[0],delete i.objects,n&&n(new t.Group(r,i,!0))}))})):t.loadSVGFromURL(r,(function(i){var a=t.util.groupSVGElements(i,e,r);a.set(o),n&&n(a)}))})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.ActiveSelection||(t.ActiveSelection=t.util.createClass(t.Group,{type:"activeSelection",initialize:function(e,n){n=n||{},this._objects=e||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;n.originX&&(this.originX=n.originX),n.originY&&(this.originY=n.originY),this._calcBounds(),this._updateObjectsCoords(),t.Object.prototype.initialize.call(this,n),this.setCoords()},toGroup:function(){var e=this._objects.concat();this._objects=[];var n=t.Object.prototype.toObject.call(this),r=new t.Group([]);if(delete n.type,r.set(n),e.forEach((function(e){e.canvas.remove(e),e.group=r})),r._objects=e,!this.canvas)return r;var o=this.canvas;return o.add(r),o._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",e,t),"undefined"===typeof(n=n||{}).hasControls&&(n.hasControls=!1),n.forActiveSelection=!0;for(var r=0,o=this._objects.length;r<o;r++)this._objects[r]._renderControls(e,n);e.restore()}}),t.ActiveSelection.fromObject=function(e,n){t.util.enlivenObjects(e.objects,(function(r){delete e.objects,n&&n(new t.ActiveSelection(r,e,!0))}))})}(t),function(e){"use strict";var t=o.util.object.extend;e.fabric||(e.fabric={}),e.fabric.Image?o.warn("fabric.Image is already defined."):(o.Image=o.util.createClass(o.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:o.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:o.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(e,t){t||(t={}),this.filters=[],this.cacheKey="texture"+o.Object.__uid++,this.callSuper("initialize",t),this._initElement(e,t)},getElement:function(){return this._element||{}},setElement:function(e,t){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=e,this._originalElement=e,this._initConfig(t),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(e){var t=o.filterBackend;t&&t.evictCachesForKey&&t.evictCachesForKey(e)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(e){o.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var e=this.getElement();return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}},_stroke:function(e){if(this.stroke&&0!==this.strokeWidth){var t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}},_renderDashedStroke:function(e){var t=-this.width/2,n=-this.height/2,r=this.width,i=this.height;e.save(),this._setStrokeStyles(e,this),e.beginPath(),o.util.drawDashedLine(e,t,n,t+r,n,this.strokeDashArray),o.util.drawDashedLine(e,t+r,n,t+r,n+i,this.strokeDashArray),o.util.drawDashedLine(e,t+r,n+i,t,n+i,this.strokeDashArray),o.util.drawDashedLine(e,t,n+i,t,n,this.strokeDashArray),e.closePath(),e.restore()},toObject:function(e){var n=[];this.filters.forEach((function(e){e&&n.push(e.toObject())}));var r=t(this.callSuper("toObject",["cropX","cropY"].concat(e)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:n});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var e,t=[],n=[],r=this._element,i=-this.width/2,a=-this.height/2,s="",l="";if(!r)return[];if(this.hasCrop()){var u=o.Object.__uid++;t.push('<clipPath id="imageCrop_'+u+'">\n','\t<rect x="'+i+'" y="'+a+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),s=' clip-path="url(#imageCrop_'+u+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),n.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',a-this.cropY,'" width="',r.width||r.naturalWidth,'" height="',r.height||r.height,l,'"',s,"></image>\n"),this.stroke||this.strokeDashArray){var c=this.fill;this.fill=null,e=["\t<rect ",'x="',i,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=c}return t="fill"!==this.paintFirst?t.concat(e,n):t.concat(n,e)},getSrc:function(e){var t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src"):t.src:this.src||""},setSrc:function(e,t,n){return o.util.loadImage(e,(function(e,r){this.setElement(e,n),this._setWidthHeight(),t&&t(this,r)}),this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),r=n.scaleX,i=n.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||r>t&&i>t)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=i);o.filterBackend||(o.filterBackend=o.initFilterBackend());var s=o.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,u=a.width,c=a.height;s.width=u,s.height=c,this._element=s,this._lastScaleX=e.scaleX=r,this._lastScaleY=e.scaleY=i,o.filterBackend.applyFilters([e],a,u,c,this._element,l),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(e){if(e=(e=e||this.filters||[]).filter((function(e){return e&&!e.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===e.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var t=this._originalElement,n=t.naturalWidth||t.width,r=t.naturalHeight||t.height;if(this._element===this._originalElement){var i=o.util.createCanvasElement();i.width=n,i.height=r,this._element=i,this._filteredEl=i}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,r),this._lastScaleX=1,this._lastScaleY=1;return o.filterBackend||(o.filterBackend=o.initFilterBackend()),o.filterBackend.applyFilters(e,this._originalElement,n,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(e){o.util.setImageSmoothing(e,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)},drawCacheOnCanvas:function(e){o.util.setImageSmoothing(e,this.imageSmoothing),o.Object.prototype.drawCacheOnCanvas.call(this,e)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(e){var t=this._element;if(t){var n=this._filterScalingX,r=this._filterScalingY,o=this.width,i=this.height,a=Math.min,s=Math.max,l=s(this.cropX,0),u=s(this.cropY,0),c=t.naturalWidth||t.width,d=t.naturalHeight||t.height,h=l*n,f=u*r,p=a(o*n,c-h),g=a(i*r,d-f),b=-o/2,m=-i/2,v=a(o,c/n-l),y=a(i,d/r-u);t&&e.drawImage(t,h,f,p,g,b,m,v,y)}},_needsResize:function(){var e=this.getTotalObjectScaling();return e.scaleX!==this._lastScaleX||e.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(e,t){this.setElement(o.util.getById(e),t),o.util.addClass(this.getElement(),o.Image.CSS_CANVAS)},_initConfig:function(e){e||(e={}),this.setOptions(e),this._setWidthHeight(e)},_initFilters:function(e,t){e&&e.length?o.util.enlivenObjects(e,(function(e){t&&t(e)}),"fabric.Image.filters"):t&&t()},_setWidthHeight:function(e){e||(e={});var t=this.getElement();this.width=e.width||t.naturalWidth||t.width||0,this.height=e.height||t.naturalHeight||t.height||0},parsePreserveAspectRatioAttribute:function(){var e,t=o.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),n=this._element.width,r=this._element.height,i=1,a=1,s=0,l=0,u=0,c=0,d=this.width,h=this.height,f={width:d,height:h};return!t||"none"===t.alignX&&"none"===t.alignY?(i=d/n,a=h/r):("meet"===t.meetOrSlice&&(e=(d-n*(i=a=o.util.findScaleToFit(this._element,f)))/2,"Min"===t.alignX&&(s=-e),"Max"===t.alignX&&(s=e),e=(h-r*a)/2,"Min"===t.alignY&&(l=-e),"Max"===t.alignY&&(l=e)),"slice"===t.meetOrSlice&&(e=n-d/(i=a=o.util.findScaleToCover(this._element,f)),"Mid"===t.alignX&&(u=e/2),"Max"===t.alignX&&(u=e),e=r-h/a,"Mid"===t.alignY&&(c=e/2),"Max"===t.alignY&&(c=e),n=d/i,r=h/a)),{width:n,height:r,scaleX:i,scaleY:a,offsetLeft:s,offsetTop:l,cropX:u,cropY:c}}}),o.Image.CSS_CANVAS="canvas-img",o.Image.prototype.getSvgSrc=o.Image.prototype.getSrc,o.Image.fromObject=function(e,t){var n=o.util.object.clone(e);o.util.loadImage(n.src,(function(e,r){r?t&&t(null,!0):o.Image.prototype._initFilters.call(n,n.filters,(function(r){n.filters=r||[],o.Image.prototype._initFilters.call(n,[n.resizeFilter],(function(r){n.resizeFilter=r[0],o.util.enlivenObjects([n.clipPath],(function(r){n.clipPath=r[0];var i=new o.Image(e,n);t(i,!1)}))}))}))}),null,n.crossOrigin)},o.Image.fromURL=function(e,t,n){o.util.loadImage(e,(function(e,r){t&&t(new o.Image(e,n),r)}),null,n&&n.crossOrigin)},o.Image.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),o.Image.fromElement=function(e,n,r){var i=o.parseAttributes(e,o.Image.ATTRIBUTE_NAMES);o.Image.fromURL(i["xlink:href"],n,t(r?o.util.object.clone(r):{},i))})}(t),o.util.object.extend(o.Object.prototype,{_getAngleValueForStraighten:function(){var e=this.angle%360;return e>0?90*Math.round((e-1)/90):90*Math.round(e/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(e){var t=function(){},n=(e=e||{}).onComplete||t,r=e.onChange||t,i=this;return o.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){i.rotate(e),r()},onComplete:function(){i.setCoords(),n()}}),this}}),o.util.object.extend(o.StaticCanvas.prototype,{straightenObject:function(e){return e.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(e){return e.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function e(e,t){var n="precision "+t+" float;\nvoid main(){}",r=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(r,n),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS)}function t(e){e&&e.tileSize&&(this.tileSize=e.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}o.isWebglSupported=function(t){if(o.isLikelyNode)return!1;t=t||o.WebglFilterBackend.prototype.tileSize;var n=document.createElement("canvas"),r=n.getContext("webgl")||n.getContext("experimental-webgl"),i=!1;if(r){o.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),i=o.maxTextureSize>=t;for(var a=["highp","mediump","lowp"],s=0;s<3;s++)if(e(r,a[s])){o.webGlPrecision=a[s];break}}return this.isSupported=i,i},o.WebglFilterBackend=t,t.prototype={tileSize:2048,resources:{},setupGLContext:function(e,t){this.dispose(),this.createWebGLCanvas(e,t),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(e,t)},chooseFastestCopyGLTo2DMethod:function(e,t){var n,r="undefined"!==typeof window.performance;try{new ImageData(1,1),n=!0}catch(p){n=!1}var i="undefined"!==typeof ArrayBuffer,l="undefined"!==typeof Uint8ClampedArray;if(r&&n&&i&&l){var u=o.util.createCanvasElement(),c=new ArrayBuffer(e*t*4);if(o.forceGLPutImageData)return this.imageBuffer=c,void(this.copyGLTo2D=s);var d,h,f={imageBuffer:c,destinationWidth:e,destinationHeight:t,targetCanvas:u};u.width=e,u.height=t,d=window.performance.now(),a.call(f,this.gl,f),h=window.performance.now()-d,d=window.performance.now(),s.call(f,this.gl,f),h>window.performance.now()-d?(this.imageBuffer=c,this.copyGLTo2D=s):this.copyGLTo2D=a}},createWebGLCanvas:function(e,t){var n=o.util.createCanvasElement();n.width=e,n.height=t;var r={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},i=n.getContext("webgl",r);i||(i=n.getContext("experimental-webgl",r)),i&&(i.clearColor(0,0,0,0),this.canvas=n,this.gl=i)},applyFilters:function(e,t,n,r,o,i){var a,s=this.gl;i&&(a=this.getCachedTexture(i,t));var l={originalWidth:t.width||t.originalWidth,originalHeight:t.height||t.originalHeight,sourceWidth:n,sourceHeight:r,destinationWidth:n,destinationHeight:r,context:s,sourceTexture:this.createTexture(s,n,r,!a&&t),targetTexture:this.createTexture(s,n,r),originalTexture:a||this.createTexture(s,n,r,!a&&t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},u=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,u),e.forEach((function(e){e&&e.applyTo(l)})),function(e){var t=e.targetCanvas,n=t.width,r=t.height,o=e.destinationWidth,i=e.destinationHeight;n===o&&r===i||(t.width=o,t.height=i)}(l),this.copyGLTo2D(s,l),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(l.sourceTexture),s.deleteTexture(l.targetTexture),s.deleteFramebuffer(u),o.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(e,t,n,r){var o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),o},getCachedTexture:function(e,t){if(this.textureCache[e])return this.textureCache[e];var n=this.createTexture(this.gl,t.width,t.height,t);return this.textureCache[e]=n,n},evictCachesForKey:function(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])},copyGLTo2D:a,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var e=this.gl,t={renderer:"",vendor:""};if(!e)return t;var n=e.getExtension("WEBGL_debug_renderer_info");if(n){var r=e.getParameter(n.UNMASKED_RENDERER_WEBGL),o=e.getParameter(n.UNMASKED_VENDOR_WEBGL);r&&(t.renderer=r.toLowerCase()),o&&(t.vendor=o.toLowerCase())}return this.gpuInfo=t,t}}}(),function(){"use strict";var e=function(){};function t(){}o.Canvas2dFilterBackend=t,t.prototype={evictCachesForKey:e,dispose:e,clearWebGLCaches:e,resources:{},applyFilters:function(e,t,n,r,o){var i=o.getContext("2d");i.drawImage(t,0,0,n,r);var a={sourceWidth:n,sourceHeight:r,imageData:i.getImageData(0,0,n,r),originalEl:t,originalImageData:i.getImageData(0,0,n,r),canvasEl:o,ctx:i,filterBackend:this};return e.forEach((function(e){e.applyTo(a)})),a.imageData.width===n&&a.imageData.height===r||(o.width=a.imageData.width,o.height=a.imageData.height),i.putImageData(a.imageData,0,0),a}}}(),o.Image=o.Image||{},o.Image.filters=o.Image.filters||{},o.Image.filters.BaseFilter=o.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(e){e&&this.setOptions(e)},setOptions:function(e){for(var t in e)this[t]=e[t]},createProgram:function(e,t,n){t=t||this.fragmentSource,n=n||this.vertexSource,"highp"!==o.webGlPrecision&&(t=t.replace(/precision highp float/g,"precision "+o.webGlPrecision+" float"));var r=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+e.getShaderInfoLog(r));var i=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+e.getShaderInfoLog(i));var a=e.createProgram();if(e.attachShader(a,r),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(a));var s=this.getAttributeLocations(e,a),l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:s,uniformLocations:l}},getAttributeLocations:function(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(e,t,n){var r=t.aPosition,o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)},_setupFrameBuffer:function(e){var t,n,r=e.context;e.passes>1?(t=e.destinationWidth,n=e.destinationHeight,e.sourceWidth===t&&e.sourceHeight===n||(r.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(r,t,n)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(e){e.passes--,e.pass++;var t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t},isNeutralState:function(){var e=this.mainParameter,t=o.Image.filters[this.type].prototype;if(e){if(Array.isArray(t[e])){for(var n=t[e].length;n--;)if(this[e][n]!==t[e][n])return!1;return!0}return t[e]===this[e]}return!1},applyTo:function(e){e.webgl?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},retrieveShader:function(e){return e.programCache.hasOwnProperty(this.type)||(e.programCache[this.type]=this.createProgram(e.context)),e.programCache[this.type]},applyToWebGL:function(e){var t=e.context,n=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)},unbindAdditionalTexture:function(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(e){this[this.mainParameter]=e},sendUniformData:function(){},createHelpLayer:function(e){if(!e.helpLayer){var t=document.createElement("canvas");t.width=e.sourceWidth,t.height=e.sourceHeight,e.helpLayer=t}},toObject:function(){var e={type:this.type},t=this.mainParameter;return t&&(e[t]=this[t]),e},toJSON:function(){return this.toObject()}}),o.Image.filters.BaseFilter.fromObject=function(e,t){var n=new o.Image.filters[e.type](e);return t&&t(n),n},function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.ColorMatrix=r(n.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var t,n,r,o,i,a=e.imageData.data,s=a.length,l=this.matrix,u=this.colorsOnly;for(i=0;i<s;i+=4)t=a[i],n=a[i+1],r=a[i+2],u?(a[i]=t*l[0]+n*l[1]+r*l[2]+255*l[4],a[i+1]=t*l[5]+n*l[6]+r*l[7]+255*l[9],a[i+2]=t*l[10]+n*l[11]+r*l[12]+255*l[14]):(o=a[i+3],a[i]=t*l[0]+n*l[1]+r*l[2]+o*l[3]+255*l[4],a[i+1]=t*l[5]+n*l[6]+r*l[7]+o*l[8]+255*l[9],a[i+2]=t*l[10]+n*l[11]+r*l[12]+o*l[13]+255*l[14],a[i+3]=t*l[15]+n*l[16]+r*l[17]+o*l[18]+255*l[19])},getUniformLocations:function(e,t){return{uColorMatrix:e.getUniformLocation(t,"uColorMatrix"),uConstants:e.getUniformLocation(t,"uConstants")}},sendUniformData:function(e,t){var n=this.matrix,r=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],o=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,r),e.uniform4fv(t.uConstants,o)}}),t.Image.filters.ColorMatrix.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Brightness=r(n.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(0!==this.brightness){var t,n=e.imageData.data,r=n.length,o=Math.round(255*this.brightness);for(t=0;t<r;t+=4)n[t]=n[t]+o,n[t+1]=n[t+1]+o,n[t+2]=n[t+2]+o}},getUniformLocations:function(e,t){return{uBrightness:e.getUniformLocation(t,"uBrightness")}},sendUniformData:function(e,t){e.uniform1f(t.uBrightness,this.brightness)}}),t.Image.filters.Brightness.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.Image.filters,o=t.util.createClass;r.Convolute=o(r.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var t=Math.sqrt(this.matrix.length),n=this.type+"_"+t+"_"+(this.opaque?1:0),r=this.fragmentSource[n];return e.programCache.hasOwnProperty(n)||(e.programCache[n]=this.createProgram(e.context,r)),e.programCache[n]},applyTo2d:function(e){var t,n,r,o,i,a,s,l,u,c,d,h,f,p=e.imageData,g=p.data,b=this.matrix,m=Math.round(Math.sqrt(b.length)),v=Math.floor(m/2),y=p.width,j=p.height,x=e.ctx.createImageData(y,j),w=x.data,C=this.opaque?1:0;for(d=0;d<j;d++)for(c=0;c<y;c++){for(i=4*(d*y+c),t=0,n=0,r=0,o=0,f=0;f<m;f++)for(h=0;h<m;h++)a=c+h-v,(s=d+f-v)<0||s>=j||a<0||a>=y||(l=4*(s*y+a),u=b[f*m+h],t+=g[l]*u,n+=g[l+1]*u,r+=g[l+2]*u,C||(o+=g[l+3]*u));w[i]=t,w[i+1]=n,w[i+2]=r,w[i+3]=C?g[i+3]:o}e.imageData=x},getUniformLocations:function(e,t){return{uMatrix:e.getUniformLocation(t,"uMatrix"),uOpaque:e.getUniformLocation(t,"uOpaque"),uHalfSize:e.getUniformLocation(t,"uHalfSize"),uSize:e.getUniformLocation(t,"uSize")}},sendUniformData:function(e,t){e.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),t.Image.filters.Convolute.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Grayscale=r(n.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(e){var t,n,r=e.imageData.data,o=r.length,i=this.mode;for(t=0;t<o;t+=4)"average"===i?n=(r[t]+r[t+1]+r[t+2])/3:"lightness"===i?n=(Math.min(r[t],r[t+1],r[t+2])+Math.max(r[t],r[t+1],r[t+2]))/2:"luminosity"===i&&(n=.21*r[t]+.72*r[t+1]+.07*r[t+2]),r[t]=n,r[t+1]=n,r[t+2]=n},retrieveShader:function(e){var t=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(t)){var n=this.fragmentSource[this.mode];e.programCache[t]=this.createProgram(e.context,n)}return e.programCache[t]},getUniformLocations:function(e,t){return{uMode:e.getUniformLocation(t,"uMode")}},sendUniformData:function(e,t){e.uniform1i(t.uMode,1)},isNeutralState:function(){return!1}}),t.Image.filters.Grayscale.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Invert=r(n.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(e){var t,n=e.imageData.data,r=n.length;for(t=0;t<r;t+=4)n[t]=255-n[t],n[t+1]=255-n[t+1],n[t+2]=255-n[t+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,t){return{uInvert:e.getUniformLocation(t,"uInvert")}},sendUniformData:function(e,t){e.uniform1i(t.uInvert,this.invert)}}),t.Image.filters.Invert.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.Image.filters,o=t.util.createClass;r.Noise=o(r.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var t,n,r=e.imageData.data,o=r.length,i=this.noise;for(t=0,o=r.length;t<o;t+=4)n=(.5-Math.random())*i,r[t]+=n,r[t+1]+=n,r[t+2]+=n}},getUniformLocations:function(e,t){return{uNoise:e.getUniformLocation(t,"uNoise"),uSeed:e.getUniformLocation(t,"uSeed")}},sendUniformData:function(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),t.Image.filters.Noise.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Pixelate=r(n.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(e){var t,n,r,o,i,a,s,l,u,c,d,h=e.imageData,f=h.data,p=h.height,g=h.width;for(n=0;n<p;n+=this.blocksize)for(r=0;r<g;r+=this.blocksize)for(o=f[t=4*n*g+4*r],i=f[t+1],a=f[t+2],s=f[t+3],c=Math.min(n+this.blocksize,p),d=Math.min(r+this.blocksize,g),l=n;l<c;l++)for(u=r;u<d;u++)f[t=4*l*g+4*u]=o,f[t+1]=i,f[t+2]=a,f[t+3]=s},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(e,t){return{uBlocksize:e.getUniformLocation(t,"uBlocksize"),uStepW:e.getUniformLocation(t,"uStepW"),uStepH:e.getUniformLocation(t,"uStepH")}},sendUniformData:function(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}),t.Image.filters.Pixelate.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.Image.filters,o=t.util.createClass;r.RemoveColor=o(r.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var n,r,o,i,a=e.imageData.data,s=255*this.distance,l=new t.Color(this.color).getSource(),u=[l[0]-s,l[1]-s,l[2]-s],c=[l[0]+s,l[1]+s,l[2]+s];for(n=0;n<a.length;n+=4)r=a[n],o=a[n+1],i=a[n+2],r>u[0]&&o>u[1]&&i>u[2]&&r<c[0]&&o<c[1]&&i<c[2]&&(a[n+3]=0)},getUniformLocations:function(e,t){return{uLow:e.getUniformLocation(t,"uLow"),uHigh:e.getUniformLocation(t,"uHigh")}},sendUniformData:function(e,n){var r=new t.Color(this.color).getSource(),o=parseFloat(this.distance),i=[0+r[0]/255-o,0+r[1]/255-o,0+r[2]/255-o,1],a=[r[0]/255+o,r[1]/255+o,r[2]/255+o,1];e.uniform4fv(n.uLow,i),e.uniform4fv(n.uHigh,a)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),t.Image.filters.RemoveColor.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass,o={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var i in o)n[i]=r(n.ColorMatrix,{type:i,matrix:o[i],mainParameter:!1,colorsOnly:!0}),t.Image.filters[i].fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric,n=t.Image.filters,r=t.util.createClass;n.BlendColor=r(n.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(e){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[e]+"}\n}"},retrieveShader:function(e){var t,n=this.type+"_"+this.mode;return e.programCache.hasOwnProperty(n)||(t=this.buildSource(this.mode),e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},applyTo2d:function(e){var n,r,o,i,a,s,l,u=e.imageData.data,c=u.length,d=1-this.alpha;n=(l=new t.Color(this.color).getSource())[0]*this.alpha,r=l[1]*this.alpha,o=l[2]*this.alpha;for(var h=0;h<c;h+=4)switch(i=u[h],a=u[h+1],s=u[h+2],this.mode){case"multiply":u[h]=i*n/255,u[h+1]=a*r/255,u[h+2]=s*o/255;break;case"screen":u[h]=255-(255-i)*(255-n)/255,u[h+1]=255-(255-a)*(255-r)/255,u[h+2]=255-(255-s)*(255-o)/255;break;case"add":u[h]=i+n,u[h+1]=a+r,u[h+2]=s+o;break;case"diff":case"difference":u[h]=Math.abs(i-n),u[h+1]=Math.abs(a-r),u[h+2]=Math.abs(s-o);break;case"subtract":u[h]=i-n,u[h+1]=a-r,u[h+2]=s-o;break;case"darken":u[h]=Math.min(i,n),u[h+1]=Math.min(a,r),u[h+2]=Math.min(s,o);break;case"lighten":u[h]=Math.max(i,n),u[h+1]=Math.max(a,r),u[h+2]=Math.max(s,o);break;case"overlay":u[h]=n<128?2*i*n/255:255-2*(255-i)*(255-n)/255,u[h+1]=r<128?2*a*r/255:255-2*(255-a)*(255-r)/255,u[h+2]=o<128?2*s*o/255:255-2*(255-s)*(255-o)/255;break;case"exclusion":u[h]=n+i-2*n*i/255,u[h+1]=r+a-2*r*a/255,u[h+2]=o+s-2*o*s/255;break;case"tint":u[h]=n+i*d,u[h+1]=r+a*d,u[h+2]=o+s*d}},getUniformLocations:function(e,t){return{uColor:e.getUniformLocation(t,"uColor")}},sendUniformData:function(e,n){var r=new t.Color(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(n.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendColor.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric,n=t.Image.filters,r=t.util.createClass;n.BlendImage=r(n.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(e){var t=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(t)||(e.programCache[t]=this.createProgram(e.context,n)),e.programCache[t]},applyToWebGL:function(e){var t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(t,t.TEXTURE1)},createTexture:function(e,t){return e.getCachedTexture(t.cacheKey,t._element)},calculateMatrix:function(){var e=this.image,t=e._element.width,n=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]},applyTo2d:function(e){var n,r,o,i,a,s,l,u,c,d,h,f=e.imageData,p=e.filterBackend.resources,g=f.data,b=g.length,m=f.width,v=f.height,y=this.image;p.blendImage||(p.blendImage=t.util.createCanvasElement()),d=(c=p.blendImage).getContext("2d"),c.width!==m||c.height!==v?(c.width=m,c.height=v):d.clearRect(0,0,m,v),d.setTransform(y.scaleX,0,0,y.scaleY,y.left,y.top),d.drawImage(y._element,0,0,m,v),h=d.getImageData(0,0,m,v).data;for(var j=0;j<b;j+=4)switch(a=g[j],s=g[j+1],l=g[j+2],u=g[j+3],n=h[j],r=h[j+1],o=h[j+2],i=h[j+3],this.mode){case"multiply":g[j]=a*n/255,g[j+1]=s*r/255,g[j+2]=l*o/255,g[j+3]=u*i/255;break;case"mask":g[j+3]=i}},getUniformLocations:function(e,t){return{uTransformMatrix:e.getUniformLocation(t,"uTransformMatrix"),uImage:e.getUniformLocation(t,"uImage")}},sendUniformData:function(e,t){var n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendImage.fromObject=function(e,n){t.Image.fromObject(e.image,(function(r){var o=t.util.object.clone(e);o.image=r,n(new t.Image.filters.BlendImage(o))}))}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=Math.pow,r=Math.floor,o=Math.sqrt,i=Math.abs,a=Math.round,s=Math.sin,l=Math.ceil,u=t.Image.filters,c=t.util.createClass;u.Resize=c(u.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(e,t){return{uDelta:e.getUniformLocation(t,"uDelta"),uTaps:e.getUniformLocation(t,"uTaps")}},sendUniformData:function(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)},retrieveShader:function(e){var t=this.getFilterWindow(),n=this.type+"_"+t;if(!e.programCache.hasOwnProperty(n)){var r=this.generateShader(t);e.programCache[n]=this.createProgram(e.context,r)}return e.programCache[n]},getFilterWindow:function(){var e=this.tempScale;return Math.ceil(this.lanczosLobes/e)},getTaps:function(){for(var e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),r=new Array(n),o=1;o<=n;o++)r[o-1]=e(o*t);return r},generateShader:function(e){for(var t=new Array(e),n=this.fragmentSourceTOP,r=1;r<=e;r++)t[r-1]=r+".0 * uDelta";return n+="uniform float uTaps["+e+"];\n",n+="void main() {\n",n+="  vec4 color = texture2D(uTexture, vTexCoord);\n",n+="  float sum = 1.0;\n",t.forEach((function(e,t){n+="  color += texture2D(uTexture, vTexCoord + "+e+") * uTaps["+t+"];\n",n+="  color += texture2D(uTexture, vTexCoord - "+e+") * uTaps["+t+"];\n",n+="  sum += 2.0 * uTaps["+t+"];\n"})),n+="  gl_FragColor = color / sum;\n",n+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(e){e.webgl?(e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceHeight=e.destinationHeight):this.applyTo2d(e)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(e){return function(t){if(t>=e||t<=-e)return 0;if(t<1.1920929e-7&&t>-1.1920929e-7)return 1;var n=(t*=Math.PI)/e;return s(t)/t*s(n)/n}},applyTo2d:function(e){var t=e.imageData,n=this.scaleX,r=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/r;var o,i=t.width,s=t.height,l=a(i*n),u=a(s*r);"sliceHack"===this.resizeType?o=this.sliceByTwo(e,i,s,l,u):"hermite"===this.resizeType?o=this.hermiteFastResize(e,i,s,l,u):"bilinear"===this.resizeType?o=this.bilinearFiltering(e,i,s,l,u):"lanczos"===this.resizeType&&(o=this.lanczosResize(e,i,s,l,u)),e.imageData=o},sliceByTwo:function(e,n,o,i,a){var s,l,u=e.imageData,c=.5,d=!1,h=!1,f=n*c,p=o*c,g=t.filterBackend.resources,b=0,m=0,v=n,y=0;for(g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),((s=g.sliceByTwo).width<1.5*n||s.height<o)&&(s.width=1.5*n,s.height=o),(l=s.getContext("2d")).clearRect(0,0,1.5*n,o),l.putImageData(u,0,0),i=r(i),a=r(a);!d||!h;)n=f,o=p,i<r(f*c)?f=r(f*c):(f=i,d=!0),a<r(p*c)?p=r(p*c):(p=a,h=!0),l.drawImage(s,b,m,n,o,v,y,f,p),b=v,m=y,y+=p;return l.getImageData(b,m,i,a)},lanczosResize:function(e,t,a,s,u){var c=e.imageData.data,d=e.ctx.createImageData(s,u),h=d.data,f=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,g=this.rcpScaleY,b=2/this.rcpScaleX,m=2/this.rcpScaleY,v=l(p*this.lanczosLobes/2),y=l(g*this.lanczosLobes/2),j={},x={},w={};return function e(l){var C,_,S,E,O,T,A,k,M,L,I;for(x.x=(l+.5)*p,w.x=r(x.x),C=0;C<u;C++){for(x.y=(C+.5)*g,w.y=r(x.y),O=0,T=0,A=0,k=0,M=0,_=w.x-v;_<=w.x+v;_++)if(!(_<0||_>=t)){L=r(1e3*i(_-x.x)),j[L]||(j[L]={});for(var D=w.y-y;D<=w.y+y;D++)D<0||D>=a||(I=r(1e3*i(D-x.y)),j[L][I]||(j[L][I]=f(o(n(L*b,2)+n(I*m,2))/1e3)),(S=j[L][I])>0&&(O+=S,T+=S*c[E=4*(D*t+_)],A+=S*c[E+1],k+=S*c[E+2],M+=S*c[E+3]))}h[E=4*(C*s+l)]=T/O,h[E+1]=A/O,h[E+2]=k/O,h[E+3]=M/O}return++l<s?e(l):d}(0)},bilinearFiltering:function(e,t,n,o,i){var a,s,l,u,c,d,h,f,p,g=0,b=this.rcpScaleX,m=this.rcpScaleY,v=4*(t-1),y=e.imageData.data,j=e.ctx.createImageData(o,i),x=j.data;for(l=0;l<i;l++)for(u=0;u<o;u++)for(c=b*u-(a=r(b*u)),d=m*l-(s=r(m*l)),p=4*(s*t+a),h=0;h<4;h++)f=y[p+h]*(1-c)*(1-d)+y[p+4+h]*c*(1-d)+y[p+v+h]*d*(1-c)+y[p+v+4+h]*c*d,x[g++]=f;return j},hermiteFastResize:function(e,t,n,a,s){for(var u=this.rcpScaleX,c=this.rcpScaleY,d=l(u/2),h=l(c/2),f=e.imageData.data,p=e.ctx.createImageData(a,s),g=p.data,b=0;b<s;b++)for(var m=0;m<a;m++){for(var v=4*(m+b*a),y=0,j=0,x=0,w=0,C=0,_=0,S=0,E=(b+.5)*c,O=r(b*c);O<(b+1)*c;O++)for(var T=i(E-(O+.5))/h,A=(m+.5)*u,k=T*T,M=r(m*u);M<(m+1)*u;M++){var L=i(A-(M+.5))/d,I=o(k+L*L);I>1&&I<-1||(y=2*I*I*I-3*I*I+1)>0&&(S+=y*f[(L=4*(M+O*t))+3],x+=y,f[L+3]<255&&(y=y*f[L+3]/250),w+=y*f[L],C+=y*f[L+1],_+=y*f[L+2],j+=y)}g[v]=w/j,g[v+1]=C/j,g[v+2]=_/j,g[v+3]=S/x}return p},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),t.Image.filters.Resize.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Contrast=r(n.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(0!==this.contrast){var t,n=e.imageData.data,r=n.length,o=Math.floor(255*this.contrast),i=259*(o+255)/(255*(259-o));for(t=0;t<r;t+=4)n[t]=i*(n[t]-128)+128,n[t+1]=i*(n[t+1]-128)+128,n[t+2]=i*(n[t+2]-128)+128}},getUniformLocations:function(e,t){return{uContrast:e.getUniformLocation(t,"uContrast")}},sendUniformData:function(e,t){e.uniform1f(t.uContrast,this.contrast)}}),t.Image.filters.Contrast.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Saturation=r(n.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(0!==this.saturation){var t,n,r=e.imageData.data,o=r.length,i=-this.saturation;for(t=0;t<o;t+=4)n=Math.max(r[t],r[t+1],r[t+2]),r[t]+=n!==r[t]?(n-r[t])*i:0,r[t+1]+=n!==r[t+1]?(n-r[t+1])*i:0,r[t+2]+=n!==r[t+2]?(n-r[t+2])*i:0}},getUniformLocations:function(e,t){return{uSaturation:e.getUniformLocation(t,"uSaturation")}},sendUniformData:function(e,t){e.uniform1f(t.uSaturation,-this.saturation)}}),t.Image.filters.Saturation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Blur=r(n.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var n,r,o=e.filterBackend.resources,i=e.imageData.width,a=e.imageData.height;o.blurLayer1||(o.blurLayer1=t.util.createCanvasElement(),o.blurLayer2=t.util.createCanvasElement()),n=o.blurLayer1,r=o.blurLayer2,n.width===i&&n.height===a||(r.width=n.width=i,r.height=n.height=a);var s,l,u,c,d=n.getContext("2d"),h=r.getContext("2d"),f=15,p=.06*this.blur*.5;for(d.putImageData(e.imageData,0,0),h.clearRect(0,0,i,a),c=-15;c<=f;c++)u=p*(l=c/f)*i+(s=(Math.random()-.5)/4),h.globalAlpha=1-Math.abs(l),h.drawImage(n,u,s),d.drawImage(r,0,0),h.globalAlpha=1,h.clearRect(0,0,r.width,r.height);for(c=-15;c<=f;c++)u=p*(l=c/f)*a+(s=(Math.random()-.5)/4),h.globalAlpha=1-Math.abs(l),h.drawImage(n,s,u),d.drawImage(r,0,0),h.globalAlpha=1,h.clearRect(0,0,r.width,r.height);e.ctx.drawImage(n,0,0);var g=e.ctx.getImageData(0,0,n.width,n.height);return d.globalAlpha=1,d.clearRect(0,0,n.width,n.height),g},getUniformLocations:function(e,t){return{delta:e.getUniformLocation(t,"uDelta")}},sendUniformData:function(e,t){var n=this.chooseRightDelta();e.uniform2fv(t.delta,n)},chooseRightDelta:function(){var e,t=1,n=[0,0];return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),e=t*this.blur*.12,this.horizontal?n[0]=e:n[1]=e,n}}),n.Blur.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Gamma=r(n.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],n.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var t,n=e.imageData.data,r=this.gamma,o=n.length,i=1/r[0],a=1/r[1],s=1/r[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),t=0,o=256;t<o;t++)this.rVals[t]=255*Math.pow(t/255,i),this.gVals[t]=255*Math.pow(t/255,a),this.bVals[t]=255*Math.pow(t/255,s);for(t=0,o=n.length;t<o;t+=4)n[t]=this.rVals[n[t]],n[t+1]=this.gVals[n[t+1]],n[t+2]=this.bVals[n[t+2]]},getUniformLocations:function(e,t){return{uGamma:e.getUniformLocation(t,"uGamma")}},sendUniformData:function(e,t){e.uniform3fv(t.uGamma,this.gamma)}}),t.Image.filters.Gamma.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.Composed=r(n.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach((function(t){t.applyTo(e)}))},toObject:function(){return t.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(e){return e.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(e){return!e.isNeutralState()}))}}),t.Image.filters.Composed.fromObject=function(e,n){var r=(e.subFilters||[]).map((function(e){return new t.Image.filters[e.type](e)})),o=new t.Image.filters.Composed({subFilters:r});return n&&n(o),o}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,r=t.util.createClass;n.HueRotation=r(n.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,n=t.util.cos(e),r=t.util.sin(e),o=1/3,i=Math.sqrt(o)*r,a=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+a/3,this.matrix[1]=o*a-i,this.matrix[2]=o*a+i,this.matrix[5]=o*a+i,this.matrix[6]=n+o*a,this.matrix[7]=o*a-i,this.matrix[10]=o*a-i,this.matrix[11]=o*a+i,this.matrix[12]=n+o*a},isNeutralState:function(e){return this.calculateMatrix(),n.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),n.BaseFilter.prototype.applyTo.call(this,e)}}),t.Image.filters.HueRotation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.clone;if(t.Text)t.warn("fabric.Text is already defined");else{var r="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles path".split(" ");t.Text=t.util.createClass(t.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:t.Object.prototype.stateProperties.concat(r),cacheProperties:t.Object.prototype.cacheProperties.concat(r),stroke:null,shadow:null,path:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,t){this.styles=t&&t.styles||{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",t),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var e=this.path;e&&(e.segmentsInfo=t.util.getPathSegmentsInfo(e.path))},getMeasuringContext:function(){return t._measuringContext||(t._measuringContext=this.canvas&&this.canvas.contextCache||t.util.createCanvasElement().getContext("2d")),t._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,t,n,r,o,i,a,s=0,l=this._textLines.length;s<l;s++)if(("justify"===this.textAlign||s!==l-1&&!this.isEndOfWrapping(s))&&(r=0,o=this._textLines[s],(t=this.getLineWidth(s))<this.width&&(a=this.textLines[s].match(this._reSpacesAndTabs)))){n=a.length,e=(this.width-t)/n;for(var u=0,c=o.length;u<=c;u++)i=this.__charBounds[s][u],this._reSpaceAndTab.test(o[u])?(i.width+=e,i.kernedWidth+=e,i.left+=r,r+=e):i.left+=r}},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e},_render:function(e){this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){"stroke"===this.paintFirst?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,t,n){e.textBaseline="alphabetic",e.font=this._getFontDeclaration(t,n)},calcTextWidth:function(){for(var e=this.getLineWidth(0),t=1,n=this._textLines.length;t<n;t++){var r=this.getLineWidth(t);r>e&&(e=r)}return e},_renderTextLine:function(e,t,n,r,o,i){this._renderChars(e,t,n,r,o,i)},_renderTextLinesBackground:function(e){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var t,n,r,o,i,a,s,l=e.fillStyle,u=this._getLeftOffset(),c=this._getTopOffset(),d=0,h=0,f=this.path,p=0,g=this._textLines.length;p<g;p++)if(t=this.getHeightOfLine(p),this.textBackgroundColor||this.styleHas("textBackgroundColor",p)){r=this._textLines[p],n=this._getLineLeftOffset(p),h=0,d=0,o=this.getValueOfPropertyAt(p,0,"textBackgroundColor");for(var b=0,m=r.length;b<m;b++)i=this.__charBounds[p][b],a=this.getValueOfPropertyAt(p,b,"textBackgroundColor"),f?(e.save(),e.translate(i.renderLeft,i.renderTop),e.rotate(i.angle),e.fillStyle=a,a&&e.fillRect(-i.width/2,-t/this.lineHeight*(1-this._fontSizeFraction),i.width,t/this.lineHeight),e.restore()):a!==o?(s=u+n+d,"rtl"===this.direction&&(s=this.width-s-h),e.fillStyle=o,o&&e.fillRect(s,c,h,t/this.lineHeight),d=i.left,h=i.width,o=a):h+=i.kernedWidth;a&&!f&&(s=u+n+d,"rtl"===this.direction&&(s=this.width-s-h),e.fillStyle=a,e.fillRect(s,c,h,t/this.lineHeight)),c+=t}else c+=t;e.fillStyle=l,this._removeShadow(e)}},getFontCache:function(e){var n=e.fontFamily.toLowerCase();t.charWidthsCache[n]||(t.charWidthsCache[n]={});var r=t.charWidthsCache[n],o=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase();return r[o]||(r[o]={}),r[o]},_measureChar:function(e,t,n,r){var o,i,a,s,l=this.getFontCache(t),u=n+e,c=this._getFontDeclaration(t)===this._getFontDeclaration(r),d=t.fontSize/this.CACHE_FONT_SIZE;if(n&&void 0!==l[n]&&(a=l[n]),void 0!==l[e]&&(s=o=l[e]),c&&void 0!==l[u]&&(s=(i=l[u])-a),void 0===o||void 0===a||void 0===i){var h=this.getMeasuringContext();this._setTextStyles(h,t,!0)}return void 0===o&&(s=o=h.measureText(e).width,l[e]=o),void 0===a&&c&&n&&(a=h.measureText(n).width,l[n]=a),c&&void 0===i&&(i=h.measureText(u).width,l[u]=i,s=i-a),{width:o*d,kernedWidth:s*d}},getHeightOfChar:function(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")},measureLine:function(e){var t=this._measureLine(e);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t},_measureLine:function(e){var n,r,o,i,a,s,l=0,u=this._textLines[e],c=new Array(u.length),d=0,h=this.path;for(this.__charBounds[e]=c,h&&(a=t.util.getPointOnPath(h.path,0,h.segmentsInfo),s=h.segmentsInfo[h.segmentsInfo.length-1].length,a.x+=h.pathOffset.x,a.y+=h.pathOffset.y),n=0;n<u.length;n++)r=u[n],i=this._getGraphemeBox(r,e,n,o),h&&(d>s&&(d%=s),this._setGraphemeOnPath(d,i,a)),c[n]=i,l+=i.kernedWidth,d+=i.kernedWidth,o=r;return c[n]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:l,numOfSpaces:0}},_setGraphemeOnPath:function(e,n,r){var o=e+n.kernedWidth/2,i=this.path,a=t.util.getPointOnPath(i.path,o,i.segmentsInfo);n.renderLeft=a.x-r.x,n.renderTop=a.y-r.y,n.angle=a.angle},_getGraphemeBox:function(e,t,n,r,o){var i,a=this.getCompleteStyleDeclaration(t,n),s=r?this.getCompleteStyleDeclaration(t,n-1):{},l=this._measureChar(e,a,r,s),u=l.kernedWidth,c=l.width;0!==this.charSpacing&&(c+=i=this._getWidthOfCharSpacing(),u+=i);var d={width:c,left:0,height:a.fontSize,kernedWidth:u,deltaY:a.deltaY};if(n>0&&!o){var h=this.__charBounds[t][n-1];d.left=h.left+h.width+l.kernedWidth-l.width}return d},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var t=this._textLines[e],n=this.getHeightOfChar(e,0),r=1,o=t.length;r<o;r++)n=Math.max(this.getHeightOfChar(e,r),n);return this.__lineHeights[e]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,t=0,n=0,r=this._textLines.length;n<r;n++)e=this.getHeightOfLine(n),t+=n===r-1?e/this.lineHeight:e;return t},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(e,t){e.save();for(var n=0,r=this._getLeftOffset(),o=this._getTopOffset(),i=0,a=this._textLines.length;i<a;i++){var s=this.getHeightOfLine(i),l=s/this.lineHeight,u=this._getLineLeftOffset(i);this._renderTextLine(t,e,this._textLines[i],r+u,o+n+l,i),n+=s}e.restore()},_renderTextFill:function(e){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,t,n,r,o,i){var a,s,l,u,c,d=this.getHeightOfLine(i),h=-1!==this.textAlign.indexOf("justify"),f="",p=0,g=this.path,b=!h&&0===this.charSpacing&&this.isEmptyStyles(i)&&!g,m="ltr"===this.direction,v="ltr"===this.direction?1:-1;if(t.save(),o-=d*this._fontSizeFraction/this.lineHeight,b)return t.canvas.setAttribute("dir",m?"ltr":"rtl"),t.direction=m?"ltr":"rtl",this._renderChar(e,t,i,0,n.join(""),r,o,d),void t.restore();for(var y=0,j=n.length-1;y<=j;y++)u=y===j||this.charSpacing||g,f+=n[y],l=this.__charBounds[i][y],0===p?(r+=v*(l.kernedWidth-l.width),p+=l.width):p+=l.kernedWidth,h&&!u&&this._reSpaceAndTab.test(n[y])&&(u=!0),u||(a=a||this.getCompleteStyleDeclaration(i,y),s=this.getCompleteStyleDeclaration(i,y+1),u=this._hasStyleChanged(a,s)),u&&(g?(t.save(),t.translate(l.renderLeft,l.renderTop),t.rotate(l.angle),this._renderChar(e,t,i,y,f,-p/2,0,d),t.restore()):(c=r,t.canvas.setAttribute("dir",m?"ltr":"rtl"),t.direction=m?"ltr":"rtl",this._renderChar(e,t,i,y,f,c,o,d)),f="",a=s,r+=v*p,p=0);t.restore()},_applyPatternGradientTransformText:function(e){var n,r=t.util.createCanvasElement(),o=this.width+this.strokeWidth,i=this.height+this.strokeWidth;return r.width=o,r.height=i,(n=r.getContext("2d")).beginPath(),n.moveTo(0,0),n.lineTo(o,0),n.lineTo(o,i),n.lineTo(0,i),n.closePath(),n.translate(o/2,i/2),n.fillStyle=e.toLive(n),this._applyPatternGradientTransform(n,e),n.fill(),n.createPattern(r,"no-repeat")},handleFiller:function(e,t,n){var r,o;return n.toLive?"percentage"===n.gradientUnits||n.gradientTrasnform||n.patternTransform?(r=-this.width/2,o=-this.height/2,e.translate(r,o),e[t]=this._applyPatternGradientTransformText(n),{offsetX:r,offsetY:o}):(e[t]=n.toLive(e,this),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(e,t){return e.lineWidth=t.strokeWidth,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",t.stroke)},_setFillStyles:function(e,t){return this.handleFiller(e,"fillStyle",t.fill)},_renderChar:function(e,t,n,r,o,i,a){var s,l,u=this._getStyleDeclaration(n,r),c=this.getCompleteStyleDeclaration(n,r),d="fillText"===e&&c.fill,h="strokeText"===e&&c.stroke&&c.strokeWidth;(h||d)&&(t.save(),d&&(s=this._setFillStyles(t,c)),h&&(l=this._setStrokeStyles(t,c)),t.font=this._getFontDeclaration(c),u&&u.textBackgroundColor&&this._removeShadow(t),u&&u.deltaY&&(a+=u.deltaY),d&&t.fillText(o,i-s.offsetX,a-s.offsetY),h&&t.strokeText(o,i-l.offsetX,a-l.offsetY),t.restore())},setSuperscript:function(e,t){return this._setScript(e,t,this.superscript)},setSubscript:function(e,t){return this._setScript(e,t,this.subscript)},_setScript:function(e,t,n){var r=this.get2DCursorLocation(e,!0),o=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),i=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),a={fontSize:o*n.size,deltaY:i+o*n.baseline};return this.setSelectionStyles(a,e,t),this},_hasStyleChanged:function(e,t){return e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.deltaY!==t.deltaY},_hasStyleChangedForSvg:function(e,t){return this._hasStyleChanged(e,t)||e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough},_getLineLeftOffset:function(e){var t=this.getLineWidth(e),n=this.width-t,r=this.textAlign,o=this.direction,i=0,a=this.isEndOfWrapping(e);return"justify"===r||"justify-center"===r&&!a||"justify-right"===r&&!a||"justify-left"===r&&!a?0:("center"===r&&(i=n/2),"right"===r&&(i=n),"justify-center"===r&&(i=n/2),"justify-right"===r&&(i=n),"rtl"===o&&(i-=n),i)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return e||(e=this.hasStateChanged("_dimensionAffectingProps")),e&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){return this.__lineWidths[e]?this.__lineWidths[e]:(t=""===this._textLines[e]?0:this.measureLine(e).width,this.__lineWidths[e]=t,t);var t},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(e,t,n){var r=this._getStyleDeclaration(e,t);return r&&"undefined"!==typeof r[n]?r[n]:this[n]},_renderTextDecoration:function(e,t){if(this[t]||this.styleHas(t)){for(var n,r,o,i,a,s,l,u,c,d,h,f,p,g,b,m,v=this._getLeftOffset(),y=this._getTopOffset(),j=this.path,x=this._getWidthOfCharSpacing(),w=0,C=this._textLines.length;w<C;w++)if(n=this.getHeightOfLine(w),this[t]||this.styleHas(t,w)){l=this._textLines[w],g=n/this.lineHeight,i=this._getLineLeftOffset(w),d=0,h=0,u=this.getValueOfPropertyAt(w,0,t),m=this.getValueOfPropertyAt(w,0,"fill"),c=y+g*(1-this._fontSizeFraction),r=this.getHeightOfChar(w,0),a=this.getValueOfPropertyAt(w,0,"deltaY");for(var _=0,S=l.length;_<S;_++)if(f=this.__charBounds[w][_],p=this.getValueOfPropertyAt(w,_,t),b=this.getValueOfPropertyAt(w,_,"fill"),o=this.getHeightOfChar(w,_),s=this.getValueOfPropertyAt(w,_,"deltaY"),j&&p&&b)e.save(),e.fillStyle=m,e.translate(f.renderLeft,f.renderTop),e.rotate(f.angle),e.fillRect(-f.kernedWidth/2,this.offsets[t]*o+s,f.kernedWidth,this.fontSize/15),e.restore();else if((p!==u||b!==m||o!==r||s!==a)&&h>0){var E=v+i+d;"rtl"===this.direction&&(E=this.width-E-h),u&&m&&(e.fillStyle=m,e.fillRect(E,c+this.offsets[t]*r+a,h,this.fontSize/15)),d=f.left,h=f.width,u=p,m=b,r=o,a=s}else h+=f.kernedWidth;e.fillStyle=b,p&&b&&e.fillRect(v+i+d,c+this.offsets[t]*r+a,h-x,this.fontSize/15),y+=n}else y+=n;this._removeShadow(e)}},_getFontDeclaration:function(e,n){var r=e||this,o=this.fontFamily,i=t.Text.genericFonts.indexOf(o.toLowerCase())>-1,a=void 0===o||o.indexOf("'")>-1||o.indexOf(",")>-1||o.indexOf('"')>-1||i?r.fontFamily:'"'+r.fontFamily+'"';return[t.isLikelyNode?r.fontWeight:r.fontStyle,t.isLikelyNode?r.fontStyle:r.fontWeight,n?this.CACHE_FONT_SIZE+"px":r.fontSize+"px",a].join(" ")},render:function(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e)))},_splitTextIntoLines:function(e){for(var n=e.split(this._reNewline),r=new Array(n.length),o=["\n"],i=[],a=0;a<n.length;a++)r[a]=t.util.string.graphemeSplit(n[a]),i=i.concat(r[a],o);return i.pop(),{_unwrappedLines:r,lines:n,graphemeText:i,graphemeLines:r}},toObject:function(e){var t=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing","path","direction"].concat(e),r=this.callSuper("toObject",t);return r.styles=n(this.styles,!0),r.path=this.path&&this.path.toObject(),r},set:function(e,t){this.callSuper("set",e,t);var n=!1,r=!1;if("object"===typeof e)for(var o in e)"path"===o&&this.setPathInfo(),n=n||-1!==this._dimensionAffectingProps.indexOf(o),r=r||"path"===o;else n=-1!==this._dimensionAffectingProps.indexOf(e),r="path"===e;return r&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),t.Text.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),t.Text.DEFAULT_SVG_FONT_SIZE=16,t.Text.fromElement=function(e,r,o){if(!e)return r(null);var i=t.parseAttributes(e,t.Text.ATTRIBUTE_NAMES),a=i.textAnchor||"left";if((o=t.util.object.extend(o?n(o):{},i)).top=o.top||0,o.left=o.left||0,i.textDecoration){var s=i.textDecoration;-1!==s.indexOf("underline")&&(o.underline=!0),-1!==s.indexOf("overline")&&(o.overline=!0),-1!==s.indexOf("line-through")&&(o.linethrough=!0),delete o.textDecoration}"dx"in i&&(o.left+=i.dx),"dy"in i&&(o.top+=i.dy),"fontSize"in o||(o.fontSize=t.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in e?l=e.textContent:"firstChild"in e&&null!==e.firstChild&&"data"in e.firstChild&&null!==e.firstChild.data&&(l=e.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var u=o.strokeWidth;o.strokeWidth=0;var c=new t.Text(l,o),d=c.getScaledHeight()/c.height,h=((c.height+c.strokeWidth)*c.lineHeight-c.height)*d,f=c.getScaledHeight()+h,p=0;"center"===a&&(p=c.getScaledWidth()/2),"right"===a&&(p=c.getScaledWidth()),c.set({left:c.left-p,top:c.top-(f-c.fontSize*(.07+c._fontSizeFraction))/c.lineHeight,strokeWidth:"undefined"!==typeof u?u:1}),r(c)},t.Text.fromObject=function(e,r){var o=n(e),i=e.path;return delete o.path,t.Object._fromObject("Text",o,(function(e){i?t.Object._fromObject("Path",i,(function(t){e.set("path",t),r(e)}),"path"):r(e)}),"text")},t.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],t.util.createAccessors&&t.util.createAccessors(t.Text)}}(t),o.util.object.extend(o.Text.prototype,{isEmptyStyles:function(e){if(!this.styles)return!0;if("undefined"!==typeof e&&!this.styles[e])return!0;var t="undefined"===typeof e?this.styles:{line:this.styles[e]};for(var n in t)for(var r in t[n])for(var o in t[n][r])return!1;return!0},styleHas:function(e,t){if(!this.styles||!e||""===e)return!1;if("undefined"!==typeof t&&!this.styles[t])return!1;var n="undefined"===typeof t?this.styles:{0:this.styles[t]};for(var r in n)for(var o in n[r])if("undefined"!==typeof n[r][o][e])return!0;return!1},cleanStyle:function(e){if(!this.styles||!e||""===e)return!1;var t,n,r=this.styles,o=0,i=!0,a=0;for(var s in r){for(var l in t=0,r[s]){var u;o++,(u=r[s][l]).hasOwnProperty(e)?(n?u[e]!==n&&(i=!1):n=u[e],u[e]===this[e]&&delete u[e]):i=!1,0!==Object.keys(u).length?t++:delete r[s][l]}0===t&&delete r[s]}for(var c=0;c<this._textLines.length;c++)a+=this._textLines[c].length;i&&o===a&&(this[e]=n,this.removeStyle(e))},removeStyle:function(e){if(this.styles&&e&&""!==e){var t,n,r,o=this.styles;for(n in o){for(r in t=o[n])delete t[r][e],0===Object.keys(t[r]).length&&delete t[r];0===Object.keys(t).length&&delete o[n]}}},_extendStyles:function(e,t){var n=this.get2DCursorLocation(e);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),o.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),t)},get2DCursorLocation:function(e,t){"undefined"===typeof e&&(e=this.selectionStart);for(var n=t?this._unwrappedTextLines:this._textLines,r=n.length,o=0;o<r;o++){if(e<=n[o].length)return{lineIndex:o,charIndex:e};e-=n[o].length+this.missingNewlineOffset(o)}return{lineIndex:o-1,charIndex:n[o-1].length<e?n[o-1].length:e}},getSelectionStyles:function(e,t,n){"undefined"===typeof e&&(e=this.selectionStart||0),"undefined"===typeof t&&(t=this.selectionEnd||e);for(var r=[],o=e;o<t;o++)r.push(this.getStyleAtPosition(o,n));return r},getStyleAtPosition:function(e,t){var n=this.get2DCursorLocation(e);return(t?this.getCompleteStyleDeclaration(n.lineIndex,n.charIndex):this._getStyleDeclaration(n.lineIndex,n.charIndex))||{}},setSelectionStyles:function(e,t,n){"undefined"===typeof t&&(t=this.selectionStart||0),"undefined"===typeof n&&(n=this.selectionEnd||t);for(var r=t;r<n;r++)this._extendStyles(r,e);return this._forceClearCache=!0,this},_getStyleDeclaration:function(e,t){var n=this.styles&&this.styles[e];return n?n[t]:null},getCompleteStyleDeclaration:function(e,t){for(var n,r=this._getStyleDeclaration(e,t)||{},o={},i=0;i<this._styleProperties.length;i++)o[n=this._styleProperties[i]]="undefined"===typeof r[n]?this[n]:r[n];return o},_setStyleDeclaration:function(e,t,n){this.styles[e][t]=n},_deleteStyleDeclaration:function(e,t){delete this.styles[e][t]},_getLineStyle:function(e){return!!this.styles[e]},_setLineStyle:function(e){this.styles[e]={}},_deleteLineStyle:function(e){delete this.styles[e]}}),function(){function e(e){e.textDecoration&&(e.textDecoration.indexOf("underline")>-1&&(e.underline=!0),e.textDecoration.indexOf("line-through")>-1&&(e.linethrough=!0),e.textDecoration.indexOf("overline")>-1&&(e.overline=!0),delete e.textDecoration)}o.IText=o.util.createClass(o.Text,o.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(e,t){this.callSuper("initialize",e,t),this.initBehavior()},setSelectionStart:function(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)},setSelectionEnd:function(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)},_updateAndFire:function(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(e){this.clearContextTop(),this.callSuper("render",e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(e){this.callSuper("_render",e)},clearContextTop:function(e){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop,n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t),this._clearTextArea(t),e||t.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this._getCursorBoundaries(),t=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(e,t):this.renderSelection(e,t),t.restore()}},_clearTextArea:function(e){var t=this.width+4,n=this.height+4;e.clearRect(-t/2,-n/2,t,n)},_getCursorBoundaries:function(e){"undefined"===typeof e&&(e=this.selectionStart);var t=this._getLeftOffset(),n=this._getTopOffset(),r=this._getCursorBoundariesOffsets(e);return{left:t,top:n,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var t,n,r,o,i=0,a=0,s=this.get2DCursorLocation(e);r=s.charIndex,n=s.lineIndex;for(var l=0;l<n;l++)i+=this.getHeightOfLine(l);t=this._getLineLeftOffset(n);var u=this.__charBounds[n][r];return u&&(a=u.left),0!==this.charSpacing&&r===this._textLines[n].length&&(a-=this._getWidthOfCharSpacing()),o={top:i,left:t+(a>0?a:0)},"rtl"===this.direction&&(o.left*=-1),this.cursorOffsetCache=o,this.cursorOffsetCache},renderCursor:function(e,t){var n=this.get2DCursorLocation(),r=n.lineIndex,o=n.charIndex>0?n.charIndex-1:0,i=this.getValueOfPropertyAt(r,o,"fontSize"),a=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/a,l=e.topOffset,u=this.getValueOfPropertyAt(r,o,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-i*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(e,t),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,o,"fill"),t.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-s/2,l+e.top+u,s,i)},renderSelection:function(e,t){for(var n=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,o=-1!==this.textAlign.indexOf("justify"),i=this.get2DCursorLocation(n),a=this.get2DCursorLocation(r),s=i.lineIndex,l=a.lineIndex,u=i.charIndex<0?0:i.charIndex,c=a.charIndex<0?0:a.charIndex,d=s;d<=l;d++){var h,f=this._getLineLeftOffset(d)||0,p=this.getHeightOfLine(d),g=0,b=0;if(d===s&&(g=this.__charBounds[s][u].left),d>=s&&d<l)b=o&&!this.isEndOfWrapping(d)?this.width:this.getLineWidth(d)||5;else if(d===l)if(0===c)b=this.__charBounds[l][c].left;else{var m=this._getWidthOfCharSpacing();b=this.__charBounds[l][c-1].left+this.__charBounds[l][c-1].width-m}h=p,(this.lineHeight<1||d===l&&this.lineHeight>1)&&(p/=this.lineHeight);var v=e.left+f+g,y=b-g,j=p,x=0;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",j=1,x=p):t.fillStyle=this.selectionColor,"rtl"===this.direction&&(v=this.width-v-y),t.fillRect(v,e.top+e.topOffset+x,y,j),e.topOffset+=h}},getCurrentCharFontSize:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")},getCurrentCharColor:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fill")},_getCurrentCharIndex:function(){var e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}}),o.IText.fromObject=function(t,n){if(e(t),t.styles)for(var r in t.styles)for(var i in t.styles[r])e(t.styles[r][i]);o.Object._fromObject("IText",t,n,"text")}}(),function(){var e=o.util.object.clone;o.util.object.extend(o.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var e=this;this.on("added",(function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))}))},initRemovedHandler:function(){var e=this;this.on("removed",(function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],o.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))}))},_initCanvasHandlers:function(e){e._mouseUpITextHandler=function(){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.__isMousedown=!1}))},e.on("mouse:up",e._mouseUpITextHandler)},_removeCanvasHandlers:function(e){e.off("mouse:up",e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(e,t,n,r){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},e.animate("_currentCursorOpacity",t,{duration:n,onComplete:function(){o.isAborted||e[r]()},onChange:function(){e.canvas&&e.selectionStart===e.selectionEnd&&e.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){e._currentTickCompleteState=e._animateCursor(e,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(e){var t=this,n=e?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){t._tick()}),n)},abortCursorAnimation:function(){var e=this._currentTickState||this._currentTickCompleteState,t=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,e&&t&&t.clearContext(t.contextTop||t.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(e){var t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t},findWordBoundaryRight:function(e){var t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t},findLineBoundaryLeft:function(e){for(var t=0,n=e-1;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t},findLineBoundaryRight:function(e){for(var t=0,n=e;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t},searchWordBoundary:function(e,t){for(var n=this._text,r=this._reSpace.test(n[e])?e-1:e,i=n[r],a=o.reNonWord;!a.test(i)&&r>0&&r<n.length;)i=n[r+=t];return a.test(i)&&(r+=1===t?0:1),r},selectWord:function(e){e=e||this.selectionStart;var t=this.searchWordBoundary(e,-1),n=this.searchWordBoundary(e,1);this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(e){e=e||this.selectionStart;var t=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(e){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(e),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(e){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.selected=!1,e.isEditing&&e.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(e){if(this.__isMousedown&&this.isEditing){var t=this.getSelectionStartFromPointer(e.e),n=this.selectionStart,r=this.selectionEnd;(t===this.__selectionStartOnMouseDown&&n!==r||n!==t&&r!==t)&&(t>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=t):(this.selectionStart=t,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===r||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(e,t,n){var r=n.slice(0,e),i=o.util.string.graphemeSplit(r).length;if(e===t)return{selectionStart:i,selectionEnd:i};var a=n.slice(e,t);return{selectionStart:i,selectionEnd:i+o.util.string.graphemeSplit(a).length}},fromGraphemeToStringSelection:function(e,t,n){var r=n.slice(0,e).join("").length;return e===t?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+n.slice(e,t).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),r=n.lineIndex,i=n.charIndex,a=this.getValueOfPropertyAt(r,i,"fontSize")*this.lineHeight,s=t.leftOffset,l=this.calcTransformMatrix(),u={x:t.left+s,y:t.top+t.topOffset+a},c=this.canvas.getRetinaScaling(),d=this.canvas.upperCanvasEl,h=d.width/c,f=d.height/c,p=h-a,g=f-a,b=d.clientWidth/h,m=d.clientHeight/f;return u=o.util.transformPoint(u,l),(u=o.util.transformPoint(u,this.canvas.viewportTransform)).x*=b,u.y*=m,u.x<0&&(u.x=0),u.x>p&&(u.x=p),u.y<0&&(u.y=0),u.y>g&&(u.y=g),u.x+=this.canvas._offset.left,u.y+=this.canvas._offset.top,{left:u.x+"px",top:u.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var e=this._textBeforeEdit!==this.text,t=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var e in this.styles)this._textLines[e]||delete this.styles[e]},removeStyleFromTo:function(e,t){var n,r,o=this.get2DCursorLocation(e,!0),i=this.get2DCursorLocation(t,!0),a=o.lineIndex,s=o.charIndex,l=i.lineIndex,u=i.charIndex;if(a!==l){if(this.styles[a])for(n=s;n<this._unwrappedTextLines[a].length;n++)delete this.styles[a][n];if(this.styles[l])for(n=u;n<this._unwrappedTextLines[l].length;n++)(r=this.styles[l][n])&&(this.styles[a]||(this.styles[a]={}),this.styles[a][s+n-u]=r);for(n=a+1;n<=l;n++)delete this.styles[n];this.shiftLineStyles(l,a-l)}else if(this.styles[a]){r=this.styles[a];var c,d,h=u-s;for(n=s;n<u;n++)delete r[n];for(d in this.styles[a])(c=parseInt(d,10))>=u&&(r[c-h]=r[d],delete r[d])}},shiftLineStyles:function(t,n){var r=e(this.styles);for(var o in this.styles){var i=parseInt(o,10);i>t&&(this.styles[i+n]=r[i],r[i-n]||delete this.styles[i])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,n,r,o){var i,a={},s=!1,l=this._unwrappedTextLines[t].length===n;for(var u in r||(r=1),this.shiftLineStyles(t,r),this.styles[t]&&(i=this.styles[t][0===n?n:n-1]),this.styles[t]){var c=parseInt(u,10);c>=n&&(s=!0,a[c-n]=this.styles[t][u],l&&0===n||delete this.styles[t][u])}var d=!1;for(s&&!l&&(this.styles[t+r]=a,d=!0),d&&r--;r>0;)o&&o[r-1]?this.styles[t+r]={0:e(o[r-1])}:i?this.styles[t+r]={0:e(i)}:delete this.styles[t+r],r--;this._forceClearCache=!0},insertCharStyleObject:function(t,n,r,o){this.styles||(this.styles={});var i=this.styles[t],a=i?e(i):{};for(var s in r||(r=1),a){var l=parseInt(s,10);l>=n&&(i[l+r]=a[l],a[l-r]||delete i[l])}if(this._forceClearCache=!0,o)for(;r--;)Object.keys(o[r]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][n+r]=e(o[r]));else if(i)for(var u=i[n?n-1:1];u&&r--;)this.styles[t][n+r]=e(u)},insertNewStyleBlock:function(e,t,n){for(var r=this.get2DCursorLocation(t,!0),o=[0],i=0,a=0;a<e.length;a++)"\n"===e[a]?o[++i]=0:o[i]++;o[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,o[0],n),n=n&&n.slice(o[0]+1)),i&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+o[0],i);for(a=1;a<i;a++)o[a]>0?this.insertCharStyleObject(r.lineIndex+a,0,o[a],n):n&&(this.styles[r.lineIndex+a][0]=n[0]),n=n&&n.slice(o[a]+1);o[a]>0&&this.insertCharStyleObject(r.lineIndex+a,0,o[a],n)},setSelectionStartEndWithShift:function(e,t,n){n<=e?(t===e?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?"right"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=t),this.selectionEnd=n)},setSelectionInBoundaries:function(){var e=this.text.length;this.selectionStart>e?this.selectionStart=e:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>e?this.selectionEnd=e:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),o.util.object.extend(o.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(e){if(this.canvas){this.__newClickTime=+new Date;var t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),this._stopEvent(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y},_stopEvent:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))},tripleClickHandler:function(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(e){if(this.__isMousedown=!1,!(!this.editable||this.group||e.transform&&e.transform.actionPerformed||e.e.button&&1!==e.e.button)){if(this.canvas){var t=this.canvas._activeObject;if(t&&t!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(e){var t=this.getSelectionStartFromPointer(e),n=this.selectionStart,r=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,r,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(e){for(var t,n=this.getLocalPointer(e),r=0,o=0,i=0,a=0,s=0,l=0,u=this._textLines.length;l<u&&i<=n.y;l++)i+=this.getHeightOfLine(l)*this.scaleY,s=l,l>0&&(a+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));o=this._getLineLeftOffset(s)*this.scaleX,t=this._textLines[s],"rtl"===this.direction&&(n.x=this.width*this.scaleX-n.x+o);for(var c=0,d=t.length;c<d&&(r=o,(o+=this.__charBounds[s][c].kernedWidth*this.scaleX)<=n.x);c++)a++;return this._getNewSelectionStartFromOffset(n,r,o,a,d)},_getNewSelectionStartFromOffset:function(e,t,n,r,o){var i=e.x-t,a=n-e.x,s=r+(a>i||a<0?0:1);return this.flipX&&(s=o-s),s>this._text.length&&(s=this._text.length),s}}),o.util.object.extend(o.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=o.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var e=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+e.top+"; left: "+e.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uff70top: "+e.fontSize+";",o.document.body.appendChild(this.hiddenTextarea),o.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),o.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),o.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),o.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),o.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),o.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(o.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(e){if(this.isEditing){var t="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(e){var t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),this.isEditing){var n,r,i,a,s,l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,c=l.length,d=c-u,h=this.selectionStart,f=this.selectionEnd,p=h!==f;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),b=h>g.selectionStart;p?(n=this._text.slice(h,f),d+=f-h):c<u&&(n=b?this._text.slice(f+d,f):this._text.slice(h,h-d)),r=l.slice(g.selectionEnd-d,g.selectionEnd),n&&n.length&&(r.length&&(i=this.getSelectionStyles(h,h+1,!1),i=r.map((function(){return i[0]}))),p?(a=h,s=f):b?(a=f-n.length,s=f):(a=f,s=f+n.length),this.removeStyleFromTo(a,s)),r.length&&(t&&r.join("")===o.copiedText&&!o.disableStyleCopyPaste&&(i=o.copiedTextStyle),this.insertNewStyleBlock(r,h,i)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(e){this.compositionStart=e.target.selectionStart,this.compositionEnd=e.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(o.copiedText=this.getSelectedText(),o.disableStyleCopyPaste?o.copiedTextStyle=null:o.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(e){return e&&e.clipboardData||o.window.clipboardData},_getWidthBeforeCursor:function(e,t){var n,r=this._getLineLeftOffset(e);return t>0&&(r+=(n=this.__charBounds[e][t-1]).left+n.width),r},getDownCursorOffset:function(e,t){var n=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(n),o=r.lineIndex;if(o===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-n;var i=r.charIndex,a=this._getWidthBeforeCursor(o,i),s=this._getIndexOnLine(o+1,a);return this._textLines[o].slice(i).length+s+1+this.missingNewlineOffset(o)},_getSelectionForOffset:function(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(e,t){var n=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(n),o=r.lineIndex;if(0===o||e.metaKey||33===e.keyCode)return-n;var i=r.charIndex,a=this._getWidthBeforeCursor(o,i),s=this._getIndexOnLine(o-1,a),l=this._textLines[o].slice(0,i),u=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+s-l.length+(1-u)},_getIndexOnLine:function(e,t){for(var n,r,o=this._textLines[e],i=this._getLineLeftOffset(e),a=0,s=0,l=o.length;s<l;s++)if((i+=n=this.__charBounds[e][s].width)>t){r=!0;var u=i-n,c=i,d=Math.abs(u-t);a=Math.abs(c-t)<d?s:s-1;break}return r||(a=o.length-1),a},moveCursorDown:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)},moveCursorUp:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)},_moveCursorUpOrDown:function(e,t){var n=this["get"+e+"CursorOffset"](t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(e){var t="left"===this._selectionDirection?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e},moveCursorWithoutShift:function(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e},moveCursorLeft:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)},_move:function(e,t,n){var r;if(e.altKey)r=this["findWordBoundary"+n](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===n?-1:1,!0;r=this["findLineBoundary"+n](this[t])}if(void 0!==typeof r&&this[t]!==r)return this[t]=r,!0},_moveLeft:function(e,t){return this._move(e,t,"Left")},_moveRight:function(e,t){return this._move(e,t,"Right")},moveCursorLeftWithoutShift:function(e){var t=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t},moveCursorLeftWithShift:function(e){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(e,"selectionStart")):void 0},moveCursorRight:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)},_moveCursorLeftOrRight:function(e,t){var n="moveCursor"+e+"With";this._currentCursorOpacity=1,t.shiftKey?n+="Shift":n+="outShift",this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(e){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(e,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(e){var t=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t},removeChars:function(e,t){"undefined"===typeof t&&(t=e+1),this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(e,t,n,r){"undefined"===typeof r&&(r=n),r>n&&this.removeStyleFromTo(n,r);var i=o.util.string.graphemeSplit(e);this.insertNewStyleBlock(i,n,t),this._text=[].concat(this._text.slice(0,n),i,this._text.slice(r)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var e=o.util.toFixed,t=/  +/g;o.util.object.extend(o.Text.prototype,{_toSVG:function(){var e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(e){var t=this.getSvgTextDecoration(this);return[e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(e,t){var n,r=[],o=[],i=e;this._setSVGBg(o);for(var a=0,s=this._textLines.length;a<s;a++)n=this._getLineLeftOffset(a),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(o,a,t+n,i),this._setSVGTextLineText(r,a,t+n,i),i+=this.getHeightOfLine(a);return{textSpans:r,textBgRects:o}},_createTextCharSpan:function(n,r,i,a){var s=n!==n.trim()||n.match(t),l=this.getSvgSpanStyles(r,s),u=l?'style="'+l+'"':"",c=r.deltaY,d="",h=o.Object.NUM_FRACTION_DIGITS;return c&&(d=' dy="'+e(c,h)+'" '),['<tspan x="',e(i,h),'" y="',e(a,h),'" ',d,u,">",o.util.string.escapeXml(n),"</tspan>"].join("")},_setSVGTextLineText:function(e,t,n,r){var o,i,a,s,l,u=this.getHeightOfLine(t),c=-1!==this.textAlign.indexOf("justify"),d="",h=0,f=this._textLines[t];r+=u*(1-this._fontSizeFraction)/this.lineHeight;for(var p=0,g=f.length-1;p<=g;p++)l=p===g||this.charSpacing,d+=f[p],a=this.__charBounds[t][p],0===h?(n+=a.kernedWidth-a.width,h+=a.width):h+=a.kernedWidth,c&&!l&&this._reSpaceAndTab.test(f[p])&&(l=!0),l||(o=o||this.getCompleteStyleDeclaration(t,p),i=this.getCompleteStyleDeclaration(t,p+1),l=this._hasStyleChangedForSvg(o,i)),l&&(s=this._getStyleDeclaration(t,p)||{},e.push(this._createTextCharSpan(d,s,n,r)),d="",o=i,n+=h,h=0)},_pushTextBgRect:function(t,n,r,i,a,s){var l=o.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(n),' x="',e(r,l),'" y="',e(i,l),'" width="',e(a,l),'" height="',e(s,l),'"></rect>\n')},_setSVGTextLineBg:function(e,t,n,r){for(var o,i,a=this._textLines[t],s=this.getHeightOfLine(t)/this.lineHeight,l=0,u=0,c=this.getValueOfPropertyAt(t,0,"textBackgroundColor"),d=0,h=a.length;d<h;d++)o=this.__charBounds[t][d],(i=this.getValueOfPropertyAt(t,d,"textBackgroundColor"))!==c?(c&&this._pushTextBgRect(e,c,n+u,r,l,s),u=o.left,l=o.width,c=i):l+=o.kernedWidth;i&&this._pushTextBgRect(e,i,n+u,r,l,s)},_getFillAttributes:function(e){var t=e&&"string"===typeof e?new o.Color(e):"";return t&&t.getSource()&&1!==t.getAlpha()?'opacity="'+t.getAlpha()+'" fill="'+t.setAlpha(1).toRgb()+'"':'fill="'+e+'"'},_getSVGLineTopOffset:function(e){for(var t,n=0,r=0;r<e;r++)n+=this.getHeightOfLine(r);return t=this.getHeightOfLine(r),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(e){return o.Object.prototype.getSvgStyles.call(this,e)+" white-space: pre;"}})}(),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Textbox=t.util.createClass(t.IText,t.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:t.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(e){for(var t=0,n=0,r=0,o={},i=0;i<e.graphemeLines.length;i++)"\n"===e.graphemeText[r]&&i>0?(n=0,r++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[r])&&i>0&&(n++,r++),o[i]={line:t,offset:n},r+=e.graphemeLines[i].length,n+=e.graphemeLines[i].length;return o},styleHas:function(e,n){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[n];r&&(n=r.line)}return t.Text.prototype.styleHas.call(this,e,n)},isEmptyStyles:function(e){if(!this.styles)return!0;var t,n,r=0,o=!1,i=this._styleMap[e],a=this._styleMap[e+1];for(var s in i&&(e=i.line,r=i.offset),a&&(o=a.line===e,t=a.offset),n="undefined"===typeof e?this.styles:{line:this.styles[e]})for(var l in n[s])if(l>=r&&(!o||l<t))for(var u in n[s][l])return!1;return!0},_getStyleDeclaration:function(e,t){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[e];if(!n)return null;e=n.line,t=n.offset+t}return this.callSuper("_getStyleDeclaration",e,t)},_setStyleDeclaration:function(e,t,n){var r=this._styleMap[e];e=r.line,t=r.offset+t,this.styles[e][t]=n},_deleteStyleDeclaration:function(e,t){var n=this._styleMap[e];e=n.line,t=n.offset+t,delete this.styles[e][t]},_getLineStyle:function(e){var t=this._styleMap[e];return!!this.styles[t.line]},_setLineStyle:function(e){var t=this._styleMap[e];this.styles[t.line]={}},_wrapText:function(e,t){var n,r=[];for(this.isWrapping=!0,n=0;n<e.length;n++)r=r.concat(this._wrapLine(e[n],n,t));return this.isWrapping=!1,r},_measureWord:function(e,t,n){var r,o=0;n=n||0;for(var i=0,a=e.length;i<a;i++){o+=this._getGraphemeBox(e[i],t,i+n,r,true).kernedWidth,r=e[i]}return o},_wrapLine:function(e,n,r,o){var i=0,a=this.splitByGrapheme,s=[],l=[],u=a?t.util.string.graphemeSplit(e):e.split(this._wordJoiners),c="",d=0,h=a?"":" ",f=0,p=0,g=0,b=!0,m=this._getWidthOfCharSpacing();o=o||0;0===u.length&&u.push([]),r-=o;for(var v=0;v<u.length;v++)c=a?u[v]:t.util.string.graphemeSplit(u[v]),f=this._measureWord(c,n,d),d+=c.length,(i+=p+f-m)>r&&!b?(s.push(l),l=[],i=f,b=!0):i+=m,b||a||l.push(h),l=l.concat(c),p=a?0:this._measureWord([h],n,d),d++,b=!1,f>g&&(g=f);return v&&s.push(l),g+o>this.dynamicMinWidth&&(this.dynamicMinWidth=g-m+o),s},isEndOfWrapping:function(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line},missingNewlineOffset:function(e){return this.splitByGrapheme?this.isEndOfWrapping(e)?1:0:1},_splitTextIntoLines:function(e){for(var n=t.Text.prototype._splitTextIntoLines.call(this,e),r=this._wrapText(n.lines,this.width),o=new Array(r.length),i=0;i<r.length;i++)o[i]=r[i].join("");return n.lines=o,n.graphemeLines=r,n},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var e={};for(var t in this._styleMap)this._textLines[t]&&(e[this._styleMap[t].line]=1);for(var t in this.styles)e[t]||delete this.styles[t]},toObject:function(e){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(e))}}),t.Textbox.fromObject=function(e,n){return t.Object._fromObject("Textbox",e,n,"text")}}(t),function(){var e=o.controlsUtils,t=e.scaleSkewCursorStyleHandler,n=e.scaleCursorStyleHandler,r=e.scalingEqually,i=e.scalingYOrSkewingX,a=e.scalingXOrSkewingY,s=e.scaleOrSkewActionName,l=o.Object.prototype.controls;if(l.ml=new o.Control({x:-.5,y:0,cursorStyleHandler:t,actionHandler:a,getActionName:s}),l.mr=new o.Control({x:.5,y:0,cursorStyleHandler:t,actionHandler:a,getActionName:s}),l.mb=new o.Control({x:0,y:.5,cursorStyleHandler:t,actionHandler:i,getActionName:s}),l.mt=new o.Control({x:0,y:-.5,cursorStyleHandler:t,actionHandler:i,getActionName:s}),l.tl=new o.Control({x:-.5,y:-.5,cursorStyleHandler:n,actionHandler:r}),l.tr=new o.Control({x:.5,y:-.5,cursorStyleHandler:n,actionHandler:r}),l.bl=new o.Control({x:-.5,y:.5,cursorStyleHandler:n,actionHandler:r}),l.br=new o.Control({x:.5,y:.5,cursorStyleHandler:n,actionHandler:r}),l.mtr=new o.Control({x:0,y:-.5,actionHandler:e.rotationWithSnapping,cursorStyleHandler:e.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),o.Textbox){var u=o.Textbox.prototype.controls={};u.mtr=l.mtr,u.tr=l.tr,u.br=l.br,u.tl=l.tl,u.bl=l.bl,u.mt=l.mt,u.mb=l.mb,u.mr=new o.Control({x:.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"}),u.ml=new o.Control({x:-.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"})}}()}).call(this,n(28).Buffer)},function(e,t,n){e.exports=n(18)},function(module,exports,__webpack_require__){if(!jSuites)var jSuites=__webpack_require__(26);var factory;factory=function(){"use strict";var Version=function(){var e={title:"Jspreadsheet",version:"4.7.3",type:"CE",host:"https://bossanova.uk/jspreadsheet",license:"MIT",print:function(){return[this.title+" "+this.type+" "+this.version,this.host,this.license].join("\r\n")}};return function(){return e}}(),_jexcel=function jexcel(el,options){var obj={options:{}};if(!(el instanceof Element||el instanceof HTMLDocument))return console.error("Jspreadsheet: el is not a valid DOM element"),!1;if("TABLE"==el.tagName){if(!(options=_jexcel.createFromTable(el,options)))return console.error("Jspreadsheet: el is not a valid DOM element"),!1;var div=document.createElement("div");el.parentNode.insertBefore(div,el),el.remove(),el=div}var defaults={url:null,method:"GET",requestVariables:null,data:null,sorting:null,copyCompatibility:!1,root:null,rows:[],columns:[],colHeaders:[],colWidths:[],colAlignments:[],nestedHeaders:null,defaultColWidth:50,defaultColAlign:"center",minSpareRows:0,minSpareCols:0,minDimensions:[0,0],allowExport:!0,includeHeadersOnDownload:!1,includeHeadersOnCopy:!1,columnSorting:!0,columnDrag:!1,columnResize:!0,rowResize:!1,rowDrag:!0,editable:!0,allowInsertRow:!0,allowManualInsertRow:!0,allowInsertColumn:!0,allowManualInsertColumn:!0,allowDeleteRow:!0,allowDeletingAllRows:!1,allowDeleteColumn:!0,allowRenameColumn:!0,allowComments:!1,wordWrap:!1,imageOptions:null,csv:null,csvFileName:"jspreadsheet",csvHeaders:!0,csvDelimiter:",",parseTableFirstRowAsHeader:!1,parseTableAutoCellType:!1,selectionCopy:!0,mergeCells:{},toolbar:null,search:!1,pagination:!1,paginationOptions:null,fullscreen:!1,lazyLoading:!1,loadingSpin:!1,tableOverflow:!1,tableHeight:"300px",tableWidth:null,textOverflow:!1,meta:null,style:null,classes:null,parseFormulas:!0,autoIncrement:!0,autoCasting:!0,secureFormulas:!0,stripHTML:!0,stripHTMLOnCopy:!1,filters:!1,footers:null,onundo:null,onredo:null,onload:null,onchange:null,oncomments:null,onbeforechange:null,onafterchanges:null,onbeforeinsertrow:null,oninsertrow:null,onbeforeinsertcolumn:null,oninsertcolumn:null,onbeforedeleterow:null,ondeleterow:null,onbeforedeletecolumn:null,ondeletecolumn:null,onmoverow:null,onmovecolumn:null,onresizerow:null,onresizecolumn:null,onsort:null,onselection:null,oncopy:null,onpaste:null,onbeforepaste:null,onmerge:null,onfocus:null,onblur:null,onchangeheader:null,oncreateeditor:null,oneditionstart:null,oneditionend:null,onchangestyle:null,onchangemeta:null,onchangepage:null,onbeforesave:null,onsave:null,onevent:null,persistance:!1,updateTable:null,detachForUpdates:!1,freezeColumns:null,text:{noRecordsFound:"No records found",showingPage:"Showing page {0} of {1} entries",show:"Show ",search:"Search",entries:" entries",columnName:"Column name",insertANewColumnBefore:"Insert a new column before",insertANewColumnAfter:"Insert a new column after",deleteSelectedColumns:"Delete selected columns",renameThisColumn:"Rename this column",orderAscending:"Order ascending",orderDescending:"Order descending",insertANewRowBefore:"Insert a new row before",insertANewRowAfter:"Insert a new row after",deleteSelectedRows:"Delete selected rows",editComments:"Edit comments",addComments:"Add comments",comments:"Comments",clearComments:"Clear comments",copy:"Copy...",paste:"Paste...",saveAs:"Save as...",about:"About",areYouSureToDeleteTheSelectedRows:"Are you sure to delete the selected rows?",areYouSureToDeleteTheSelectedColumns:"Are you sure to delete the selected columns?",thisActionWillDestroyAnyExistingMergedCellsAreYouSure:"This action will destroy any existing merged cells. Are you sure?",thisActionWillClearYourSearchResultsAreYouSure:"This action will clear your search results. Are you sure?",thereIsAConflictWithAnotherMergedCell:"There is a conflict with another merged cell",invalidMergeProperties:"Invalid merged properties",cellAlreadyMerged:"Cell already merged",noCellsSelected:"No cells selected"},about:!0};for(var property in defaults)if(options&&options.hasOwnProperty(property))if("text"===property)for(var textKey in obj.options[property]=defaults[property],options[property])options[property].hasOwnProperty(textKey)&&(obj.options[property][textKey]=options[property][textKey]);else obj.options[property]=options[property];else obj.options[property]=defaults[property];obj.el=el,obj.corner=null,obj.contextMenu=null,obj.textarea=null,obj.ads=null,obj.content=null,obj.table=null,obj.thead=null,obj.tbody=null,obj.rows=[],obj.results=null,obj.searchInput=null,obj.toolbar=null,obj.pagination=null,obj.pageNumber=null,obj.headerContainer=null,obj.colgroupContainer=null,obj.headers=[],obj.records=[],obj.history=[],obj.formula=[],obj.colgroup=[],obj.selection=[],obj.highlighted=[],obj.selectedCell=null,obj.selectedContainer=null,obj.style=[],obj.data=null,obj.filter=null,obj.filters=[],obj.cursor=null,obj.historyIndex=-1,obj.ignoreEvents=!1,obj.ignoreHistory=!1,obj.edition=null,obj.hashString=null,obj.resizing=null,obj.dragging=null,1==obj.options.lazyLoading&&0==obj.options.tableOverflow&&0==obj.options.fullscreen&&(console.error("Jspreadsheet: The lazyloading only works when tableOverflow = yes or fullscreen = yes"),obj.options.lazyLoading=!1),obj.fullscreen=function(e){null==e&&(e=!obj.options.fullscreen),obj.options.fullscreen!=e&&(obj.options.fullscreen=e,1==e?el.classList.add("fullscreen"):el.classList.remove("fullscreen"))},obj.dispatch=function(e){if(!obj.ignoreEvents){if("function"==typeof obj.options.onevent)var t=obj.options.onevent.apply(this,arguments);"function"==typeof obj.options[e]&&(t=obj.options[e].apply(this,Array.prototype.slice.call(arguments,1)))}if("onafterchanges"==e&&obj.options.persistance){var n=1==obj.options.persistance?obj.options.url:obj.options.persistance,r=obj.prepareJson(arguments[2]);obj.save(n,r)}return t},obj.prepareTable=function(){var e=obj.options.columns.length;if(obj.options.data&&"undefined"!==typeof obj.options.data[0]){var t=Object.keys(obj.options.data[0]);t.length>e&&(e=t.length)}obj.options.minDimensions[0]>e&&(e=obj.options.minDimensions[0]);for(var n=[],r=0;r<e;r++)obj.options.colHeaders[r]||(obj.options.colHeaders[r]=""),obj.options.colWidths[r]||(obj.options.colWidths[r]=obj.options.defaultColWidth),obj.options.colAlignments[r]||(obj.options.colAlignments[r]=obj.options.defaultColAlign),obj.options.columns[r]?obj.options.columns[r].type||(obj.options.columns[r].type="text"):obj.options.columns[r]={type:"text"},obj.options.columns[r].name||(obj.options.columns[r].name=t&&t[r]?t[r]:r),obj.options.columns[r].source||(obj.options.columns[r].source=[]),obj.options.columns[r].options||(obj.options.columns[r].options=[]),obj.options.columns[r].editor||(obj.options.columns[r].editor=null),obj.options.columns[r].allowEmpty||(obj.options.columns[r].allowEmpty=!1),obj.options.columns[r].title||(obj.options.columns[r].title=obj.options.colHeaders[r]?obj.options.colHeaders[r]:""),obj.options.columns[r].width||(obj.options.columns[r].width=obj.options.colWidths[r]?obj.options.colWidths[r]:obj.options.defaultColWidth),obj.options.columns[r].align||(obj.options.columns[r].align=obj.options.colAlignments[r]?obj.options.colAlignments[r]:"center"),"autocomplete"==obj.options.columns[r].type||"dropdown"==obj.options.columns[r].type?obj.options.columns[r].url&&n.push({url:obj.options.columns[r].url,index:r,method:"GET",dataType:"json",success:function(e){for(var t=0;t<e.length;t++)obj.options.columns[this.index].source.push(e[t])}}):"calendar"==obj.options.columns[r].type&&(obj.options.columns[r].options.format||(obj.options.columns[r].options.format="DD/MM/YYYY"));n.length?jSuites.ajax(n,(function(){obj.createTable()})):obj.createTable()},obj.createTable=function(){obj.table=document.createElement("table"),obj.thead=document.createElement("thead"),obj.tbody=document.createElement("tbody"),obj.headers=[],obj.colgroup=[],obj.content=document.createElement("div"),obj.content.classList.add("jexcel_content"),obj.content.onscroll=function(e){obj.scrollControls(e)},obj.content.onwheel=function(e){obj.wheelControls(e)},obj.toolbar=document.createElement("div"),obj.toolbar.classList.add("jexcel_toolbar");var e=document.createElement("div"),t=document.createTextNode(obj.options.text.search+": ");obj.searchInput=document.createElement("input"),obj.searchInput.classList.add("jexcel_search"),e.appendChild(t),e.appendChild(obj.searchInput),obj.searchInput.onfocus=function(){obj.resetSelection()};var n=document.createElement("div");if(obj.options.pagination>0&&obj.options.paginationOptions&&obj.options.paginationOptions.length>0){obj.paginationDropdown=document.createElement("select"),obj.paginationDropdown.classList.add("jexcel_pagination_dropdown"),obj.paginationDropdown.onchange=function(){obj.options.pagination=parseInt(this.value),obj.page(0)};for(var r=0;r<obj.options.paginationOptions.length;r++){var o=document.createElement("option");o.value=obj.options.paginationOptions[r],o.innerHTML=obj.options.paginationOptions[r],obj.paginationDropdown.appendChild(o)}obj.paginationDropdown.value=obj.options.pagination,n.appendChild(document.createTextNode(obj.options.text.show)),n.appendChild(obj.paginationDropdown),n.appendChild(document.createTextNode(obj.options.text.entries))}var i,a=document.createElement("div");if(a.classList.add("jexcel_filter"),a.appendChild(n),a.appendChild(e),obj.colgroupContainer=document.createElement("colgroup"),(i=document.createElement("col")).setAttribute("width","50"),obj.colgroupContainer.appendChild(i),obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(var s=0;s<obj.options.nestedHeaders.length;s++)obj.thead.appendChild(obj.createNestedHeader(obj.options.nestedHeaders[s]));else obj.thead.appendChild(obj.createNestedHeader(obj.options.nestedHeaders));for(obj.headerContainer=document.createElement("tr"),(i=document.createElement("td")).classList.add("jexcel_selectall"),obj.headerContainer.appendChild(i),r=0;r<obj.options.columns.length;r++)obj.createCellHeader(r),obj.headerContainer.appendChild(obj.headers[r]),obj.colgroupContainer.appendChild(obj.colgroup[r]);if(obj.thead.appendChild(obj.headerContainer),1==obj.options.filters){obj.filter=document.createElement("tr");var l=document.createElement("td");for(obj.filter.appendChild(l),r=0;r<obj.options.columns.length;r++)(l=document.createElement("td")).innerHTML="&nbsp;",l.setAttribute("data-x",r),l.className="jexcel_column_filter","hidden"==obj.options.columns[r].type&&(l.style.display="none"),obj.filter.appendChild(l);obj.thead.appendChild(obj.filter)}obj.table=document.createElement("table"),obj.table.classList.add("jexcel"),obj.table.setAttribute("cellpadding","0"),obj.table.setAttribute("cellspacing","0"),obj.table.setAttribute("unselectable","yes"),obj.table.appendChild(obj.colgroupContainer),obj.table.appendChild(obj.thead),obj.table.appendChild(obj.tbody),obj.options.textOverflow||obj.table.classList.add("jexcel_overflow"),obj.corner=document.createElement("div"),obj.corner.className="jexcel_corner",obj.corner.setAttribute("unselectable","on"),obj.corner.setAttribute("onselectstart","return false"),0==obj.options.selectionCopy&&(obj.corner.style.display="none"),obj.textarea=document.createElement("textarea"),obj.textarea.className="jexcel_textarea",obj.textarea.id="jexcel_textarea",obj.textarea.tabIndex="-1",obj.contextMenu=document.createElement("div"),obj.contextMenu.className="jexcel_contextmenu",jSuites.contextmenu(obj.contextMenu,{onclick:function(){obj.contextMenu.contextmenu.close(!1)}});var u=document.createElement("a");u.setAttribute("href","https://bossanova.uk/jspreadsheet/"),obj.ads=document.createElement("div"),obj.ads.className="jexcel_about";try{if("undefined"!==typeof sessionStorage&&!sessionStorage.getItem("jexcel")){sessionStorage.setItem("jexcel",!0);var c=document.createElement("img");c.src="//bossanova.uk/jspreadsheet/logo.png",u.appendChild(c)}}catch(b){}var d=document.createElement("span");d.innerHTML="Jspreadsheet CE",u.appendChild(d),obj.ads.appendChild(u),document.createElement("div").classList.add("jexcel_table"),obj.pagination=document.createElement("div"),obj.pagination.classList.add("jexcel_pagination");var h=document.createElement("div"),f=document.createElement("div");if(obj.pagination.appendChild(h),obj.pagination.appendChild(f),obj.options.pagination||(obj.pagination.style.display="none"),1==obj.options.search&&el.appendChild(a),obj.content.appendChild(obj.table),obj.content.appendChild(obj.corner),obj.content.appendChild(obj.textarea),el.appendChild(obj.toolbar),el.appendChild(obj.content),el.appendChild(obj.pagination),el.appendChild(obj.contextMenu),el.appendChild(obj.ads),el.classList.add("jexcel_container"),obj.options.toolbar&&obj.options.toolbar.length&&obj.createToolbar(),1==obj.options.fullscreen?el.classList.add("fullscreen"):1==obj.options.tableOverflow&&(obj.options.tableHeight&&(obj.content.style["overflow-y"]="auto",obj.content.style["box-shadow"]="rgb(221 221 221) 2px 2px 5px 0.1px",obj.content.style.maxHeight=obj.options.tableHeight),obj.options.tableWidth&&(obj.content.style["overflow-x"]="auto",obj.content.style.width=obj.options.tableWidth)),1!=obj.options.tableOverflow&&obj.options.toolbar&&el.classList.add("with-toolbar"),1==obj.options.columnDrag&&obj.thead.classList.add("draggable"),1==obj.options.columnResize&&obj.thead.classList.add("resizable"),1==obj.options.rowDrag&&obj.tbody.classList.add("draggable"),1==obj.options.rowResize&&obj.tbody.classList.add("resizable"),obj.setData(),obj.options.style&&obj.setStyle(obj.options.style,null,null,1,1),obj.options.classes){var p=Object.keys(obj.options.classes);for(r=0;r<p.length;r++){var g=_jexcel.getIdFromColumnName(p[r],!0);obj.records[g[1]][g[0]].classList.add(obj.options.classes[p[r]])}}},obj.refresh=function(){obj.options.url?(1==obj.options.loadingSpin&&jSuites.loading.show(),jSuites.ajax({url:obj.options.url,method:obj.options.method,data:obj.options.requestVariables,dataType:"json",success:function(e){obj.options.data=e.data?e.data:e,obj.setData(),1==obj.options.loadingSpin&&jSuites.loading.hide()}})):obj.setData()},obj.setData=function(e){if(e&&("string"==typeof e&&(e=JSON.parse(e)),obj.options.data=e),obj.options.data||(obj.options.data=[]),obj.options.data&&obj.options.data[0]&&!Array.isArray(obj.options.data[0])){e=[];for(var t=0;t<obj.options.data.length;t++){for(var n=[],r=0;r<obj.options.columns.length;r++)n[r]=obj.options.data[t][obj.options.columns[r].name];e.push(n)}obj.options.data=e}t=0,r=0;var o=obj.options.columns.length,i=obj.options.data.length,a=obj.options.minDimensions[0],s=obj.options.minDimensions[1],l=a>o?a:o,u=s>i?s:i;for(t=0;t<u;t++)for(r=0;r<l;r++)void 0==obj.options.data[t]&&(obj.options.data[t]=[]),void 0==obj.options.data[t][r]&&(obj.options.data[t][r]="");if(obj.rows=[],obj.results=null,obj.records=[],obj.history=[],obj.historyIndex=-1,obj.tbody.innerHTML="",1==obj.options.lazyLoading){var c=0,d=obj.options.data.length<100?obj.options.data.length:100;obj.options.pagination&&(obj.options.pagination=!1,console.error("Jspreadsheet: Pagination will be disable due the lazyLoading"))}else obj.options.pagination?(obj.pageNumber||(obj.pageNumber=0),obj.options.pagination,c=obj.options.pagination*obj.pageNumber,d=obj.options.pagination*obj.pageNumber+obj.options.pagination,obj.options.data.length<d&&(d=obj.options.data.length)):(c=0,d=obj.options.data.length);for(t=0;t<obj.options.data.length;t++){var h=obj.createRow(t,obj.options.data[t]);t>=c&&t<d&&obj.tbody.appendChild(h)}if(1==obj.options.lazyLoading||obj.options.pagination&&obj.updatePagination(),obj.options.mergeCells){var f=Object.keys(obj.options.mergeCells);for(r=0;r<f.length;r++){var p=obj.options.mergeCells[f[r]];obj.setMerge(f[r],p[0],p[1],1)}}obj.updateTable(),obj.dispatch("onload",el,obj)},obj.getData=function(e,t){for(var n=[],r=0,o=0,i=1==t||0==obj.options.copyCompatibility,a=obj.options.columns.length,s=obj.options.data.length,l=0;l<s;l++){r=0;for(var u=0;u<a;u++)e&&!obj.records[l][u].classList.contains("highlight")||(n[o]||(n[o]=[]),n[o][r]=i?obj.options.data[l][u]:obj.records[l][u].innerHTML,r++);r>0&&o++}return n},obj.getJsonRow=function(e){for(var t=obj.options.data[e],n=obj.options.columns.length,r={},o=0;o<n;o++)obj.options.columns[o].name||(obj.options.columns[o].name=o),r[obj.options.columns[o].name]=t[o];return r},obj.getJson=function(e){for(var t=[],n=obj.options.columns.length,r=obj.options.data.length,o=0;o<r;o++){for(var i=null,a=0;a<n;a++)e&&!obj.records[o][a].classList.contains("highlight")||(null==i&&(i={}),obj.options.columns[a].name||(obj.options.columns[a].name=a),i[obj.options.columns[a].name]=obj.options.data[o][a]);null!=i&&t.push(i)}return t},obj.prepareJson=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].x,o=e[n].y,i=obj.options.columns[r].name?obj.options.columns[r].name:r;t[o]||(t[o]={row:o,data:{}}),t[o].data[i]=e[n].newValue}return t.filter((function(e){return null!=e}))},obj.save=function(e,t){var n=obj.dispatch("onbeforesave",el,obj,t);if(n)t=n;else if(!1===n)return!1;jSuites.ajax({url:e,method:"POST",dataType:"json",data:{data:JSON.stringify(t)},success:function(e){obj.dispatch("onsave",el,obj,t)}})},obj.getRowData=function(e){return obj.options.data[e]},obj.setRowData=function(e,t){for(var n=0;n<obj.headers.length;n++){var r=_jexcel.getColumnNameFromId([n,e]);null!=t[n]&&obj.setValue(r,t[n])}},obj.getColumnData=function(e){for(var t=[],n=0;n<obj.options.data.length;n++)t.push(obj.options.data[n][e]);return t},obj.setColumnData=function(e,t){for(var n=0;n<obj.rows.length;n++){var r=_jexcel.getColumnNameFromId([e,n]);null!=t[n]&&obj.setValue(r,t[n])}},obj.createRow=function(e,t){obj.records[e]||(obj.records[e]=[]),t||(t=obj.options.data[e]),obj.rows[e]=document.createElement("tr"),obj.rows[e].setAttribute("data-y",e);var n=null;obj.options.rows[e]&&(obj.options.rows[e].height&&(obj.rows[e].style.height=obj.options.rows[e].height),obj.options.rows[e].title&&(n=obj.options.rows[e].title)),n||(n=parseInt(e+1));var r=document.createElement("td");r.innerHTML=n,r.setAttribute("data-y",e),r.className="jexcel_row",obj.rows[e].appendChild(r);for(var o=0;o<obj.options.columns.length;o++)obj.records[e][o]=obj.createCell(o,e,t[o]),obj.rows[e].appendChild(obj.records[e][o]);return obj.rows[e]},obj.parseValue=function(e,t,n){if("="==(""+n).substr(0,1)&&1==obj.options.parseFormulas&&(n=obj.executeFormula(n,e,t)),obj.options.columns[e].mask){var r=obj.options.columns[e].decimal||".";n=""+jSuites.mask.run(n,obj.options.columns[e].mask,r)}return n},obj.createCell=function(e,t,n){var r=document.createElement("td");if(r.setAttribute("data-x",e),r.setAttribute("data-y",t),"="==(""+n).substr(0,1)&&1==obj.options.secureFormulas){var o=secureFormula(n);o!=n&&(n=o)}if(obj.options.columns[e].editor)!1===obj.options.stripHTML||!1===obj.options.columns[e].stripHTML?r.innerHTML=n:r.innerText=n,"function"==typeof obj.options.columns[e].editor.createCell&&(r=obj.options.columns[e].editor.createCell(r));else if("hidden"==obj.options.columns[e].type)r.style.display="none",r.innerText=n;else if("checkbox"==obj.options.columns[e].type||"radio"==obj.options.columns[e].type){var i=document.createElement("input");i.type=obj.options.columns[e].type,i.name="c"+e,i.checked=1==n||1==n||"true"==n,i.onclick=function(){obj.setValue(r,this.checked)},1!=obj.options.columns[e].readOnly&&0!=obj.options.editable||i.setAttribute("disabled","disabled"),r.appendChild(i),obj.options.data[t][e]=i.checked}else if("calendar"==obj.options.columns[e].type){var a=jSuites.calendar.extractDateFromString(n,obj.options.columns[e].options.format);r.innerText=jSuites.calendar.getDateString(a||n,obj.options.columns[e].options.format)}else if("dropdown"==obj.options.columns[e].type||"autocomplete"==obj.options.columns[e].type)r.classList.add("jexcel_dropdown"),r.innerText=obj.getDropDownValue(e,n);else if("color"==obj.options.columns[e].type)if("square"==obj.options.columns[e].render){var s=document.createElement("div");s.className="color",s.style.backgroundColor=n,r.appendChild(s)}else r.style.color=n,r.innerText=n;else if("image"==obj.options.columns[e].type){if(n&&"data:image"==n.substr(0,10)){var l=document.createElement("img");l.src=n,r.appendChild(l)}}else"html"==obj.options.columns[e].type||!1===obj.options.stripHTML||!1===obj.options.columns[e].stripHTML?r.innerHTML=stripScript(obj.parseValue(e,t,n)):r.innerText=obj.parseValue(e,t,n);1==obj.options.columns[e].readOnly&&(r.className="readonly");var u=obj.options.columns[e].align?obj.options.columns[e].align:"center";return r.style.textAlign=u,0!=obj.options.columns[e].wordWrap&&(1==obj.options.wordWrap||1==obj.options.columns[e].wordWrap||r.innerHTML.length>200)&&(r.style.whiteSpace="pre-wrap"),e>0&&1==this.options.textOverflow&&(n||r.innerHTML?obj.records[t][e-1].style.overflow="hidden":e==obj.options.columns.length-1&&(r.style.overflow="hidden")),r},obj.createCellHeader=function(e){var t=obj.options.columns[e].width?obj.options.columns[e].width:obj.options.defaultColWidth,n=obj.options.columns[e].align?obj.options.columns[e].align:obj.options.defaultColAlign;obj.headers[e]=document.createElement("td"),obj.options.stripHTML?obj.headers[e].innerText=obj.options.columns[e].title?obj.options.columns[e].title:_jexcel.getColumnName(e):obj.headers[e].innerHTML=obj.options.columns[e].title?obj.options.columns[e].title:_jexcel.getColumnName(e),obj.headers[e].setAttribute("data-x",e),obj.headers[e].style.textAlign=n,obj.options.columns[e].title&&obj.headers[e].setAttribute("title",obj.options.columns[e].title),obj.options.columns[e].id&&obj.headers[e].setAttribute("id",obj.options.columns[e].id),obj.colgroup[e]=document.createElement("col"),obj.colgroup[e].setAttribute("width",t),"hidden"==obj.options.columns[e].type&&(obj.headers[e].style.display="none",obj.colgroup[e].style.display="none")},obj.updateNestedHeader=function(e,t,n){obj.options.nestedHeaders[t][e].title&&(obj.options.nestedHeaders[t][e].title=n,obj.options.nestedHeaders[t].element.children[e+1].innerText=n)},obj.createNestedHeader=function(e){var t=document.createElement("tr");t.classList.add("jexcel_nested");var n=document.createElement("td");t.appendChild(n),e.element=t;for(var r=0,o=0;o<e.length;o++){e[o].colspan||(e[o].colspan=1),e[o].align||(e[o].align="center"),e[o].title||(e[o].title="");for(var i=e[o].colspan,a=[],s=0;s<i;s++)obj.options.columns[r]&&"hidden"==obj.options.columns[r].type&&i++,a.push(r),r++;(n=document.createElement("td")).setAttribute("data-column",a.join(",")),n.setAttribute("colspan",e[o].colspan),n.setAttribute("align",e[o].align),n.innerText=e[o].title,t.appendChild(n)}return t},obj.createToolbar=function(e){e?obj.options.toolbar=e:e=obj.options.toolbar;for(var t=0;t<e.length;t++)if("i"==e[t].type)(o=document.createElement("i")).classList.add("jexcel_toolbar_item"),o.classList.add("material-icons"),o.setAttribute("data-k",e[t].k),o.setAttribute("data-v",e[t].v),o.setAttribute("id",e[t].id),e[t].tooltip&&o.setAttribute("title",e[t].tooltip),e[t].onclick&&(e[t].onclick,1)?o.onclick=function(t){var n=t;return function(){e[n].onclick(el,obj,this)}}(t):o.onclick=function(){var e=this.getAttribute("data-k"),t=this.getAttribute("data-v");obj.setStyle(obj.highlighted,e,t)},o.innerText=e[t].content,obj.toolbar.appendChild(o);else if("select"==e[t].type){(o=document.createElement("select")).classList.add("jexcel_toolbar_item"),o.setAttribute("data-k",e[t].k),e[t].tooltip&&o.setAttribute("title",e[t].tooltip),e[t].onchange&&(e[t].onchange,1)?o.onchange=e[t].onchange:o.onchange=function(){var e=this.getAttribute("data-k");obj.setStyle(obj.highlighted,e,this.value)};for(var n=0;n<e[t].v.length;n++){var r=document.createElement("option");r.value=e[t].v[n],r.innerText=e[t].v[n],o.appendChild(r)}obj.toolbar.appendChild(o)}else if("color"==e[t].type){var o;(o=document.createElement("i")).classList.add("jexcel_toolbar_item"),o.classList.add("material-icons"),o.setAttribute("data-k",e[t].k),o.setAttribute("data-v",""),e[t].tooltip&&o.setAttribute("title",e[t].tooltip),obj.toolbar.appendChild(o),o.innerText=e[t].content,jSuites.color(o,{onchange:function(e,t){var n=e.getAttribute("data-k");obj.setStyle(obj.highlighted,n,t)}})}},obj.setMerge=function(e,t,n,r){var o=!1;if(!e){if(!obj.highlighted.length)return alert(obj.options.text.noCellsSelected),null;var i=parseInt(obj.highlighted[0].getAttribute("data-x")),a=parseInt(obj.highlighted[0].getAttribute("data-y")),s=parseInt(obj.highlighted[obj.highlighted.length-1].getAttribute("data-x")),l=parseInt(obj.highlighted[obj.highlighted.length-1].getAttribute("data-y"));e=_jexcel.getColumnNameFromId([i,a]),t=s-i+1,n=l-a+1}var u=_jexcel.getIdFromColumnName(e,!0);if(obj.options.mergeCells[e])obj.records[u[1]][u[0]].getAttribute("data-merged")&&(o=obj.options.text.cellAlreadyMerged);else if((!t||t<2)&&(!n||n<2))o=obj.options.text.invalidMergeProperties;else for(var c=u[1];c<u[1]+n;c++)for(var d=u[0];d<u[0]+t;d++)_jexcel.getColumnNameFromId([d,c]),obj.records[c][d].getAttribute("data-merged")&&(o=obj.options.text.thereIsAConflictWithAnotherMergedCell);if(o)alert(o);else{t>1?obj.records[u[1]][u[0]].setAttribute("colspan",t):t=1,n>1?obj.records[u[1]][u[0]].setAttribute("rowspan",n):n=1,obj.options.mergeCells[e]=[t,n,[]],obj.records[u[1]][u[0]].setAttribute("data-merged","true"),obj.records[u[1]][u[0]].style.overflow="hidden";for(var h=[],f=u[1];f<u[1]+n;f++)for(var p=u[0];p<u[0]+t;p++)u[0]==p&&u[1]==f||(h.push(obj.options.data[f][p]),obj.updateCell(p,f,"",!0),obj.options.mergeCells[e][2].push(obj.records[f][p]),obj.records[f][p].style.display="none",obj.records[f][p]=obj.records[u[1]][u[0]]);obj.updateSelection(obj.records[u[1]][u[0]]),r||(obj.setHistory({action:"setMerge",column:e,colspan:t,rowspan:n,data:h}),obj.dispatch("onmerge",el,e,t,n))}},obj.getMerge=function(e){var t={};if(e)t=obj.options.mergeCells[e]?[obj.options.mergeCells[e][0],obj.options.mergeCells[e][1]]:null;else if(obj.options.mergeCells){obj.options.mergeCells;for(var n=Object.keys(obj.options.mergeCells),r=0;r<n.length;r++)t[n[r]]=[obj.options.mergeCells[n[r]][0],obj.options.mergeCells[n[r]][1]]}return t},obj.removeMerge=function(e,t,n){if(obj.options.mergeCells[e]){var r=_jexcel.getIdFromColumnName(e,!0);obj.records[r[1]][r[0]].removeAttribute("colspan"),obj.records[r[1]][r[0]].removeAttribute("rowspan"),obj.records[r[1]][r[0]].removeAttribute("data-merged");for(var o=obj.options.mergeCells[e],i=0,a=0;a<o[1];a++)for(var s=0;s<o[0];s++)(a>0||s>0)&&(obj.records[r[1]+a][r[0]+s]=o[2][i],obj.records[r[1]+a][r[0]+s].style.display="",t&&t[i]&&obj.updateCell(r[0]+s,r[1]+a,t[i]),i++);obj.updateSelection(obj.records[r[1]][r[0]],obj.records[r[1]+a-1][r[0]+s-1]),n||delete obj.options.mergeCells[e]}},obj.destroyMerged=function(e){if(obj.options.mergeCells){obj.options.mergeCells;for(var t=Object.keys(obj.options.mergeCells),n=0;n<t.length;n++)obj.removeMerge(t[n],null,e)}},obj.isColMerged=function(e,t){var n=[];if(obj.options.mergeCells)for(var r=Object.keys(obj.options.mergeCells),o=0;o<r.length;o++){var i=_jexcel.getIdFromColumnName(r[o],!0),a=obj.options.mergeCells[r[o]][0],s=i[0],l=i[0]+(a>1?a-1:0);null==t?s<=e&&l>=e&&n.push(r[o]):t?s<e&&l>=e&&n.push(r[o]):s<=e&&l>e&&n.push(r[o])}return n},obj.isRowMerged=function(e,t){var n=[];if(obj.options.mergeCells)for(var r=Object.keys(obj.options.mergeCells),o=0;o<r.length;o++){var i=_jexcel.getIdFromColumnName(r[o],!0),a=obj.options.mergeCells[r[o]][1],s=i[1],l=i[1]+(a>1?a-1:0);null==t?s<=e&&l>=e&&n.push(r[o]):t?s<e&&l>=e&&n.push(r[o]):s<=e&&l>e&&n.push(r[o])}return n},obj.openFilter=function(e){if(obj.options.filters){e=parseInt(e),obj.resetSelection();var t=[];if("checkbox"==obj.options.columns[e].type)t.push({id:"true",name:"True"}),t.push({id:"false",name:"False"});else{for(var n=[],r=!1,o=0;o<obj.options.data.length;o++){var i=obj.options.data[o][e],a=obj.records[o][e].innerHTML;i&&a?n[i]=a:r=!0}var s=Object.keys(n);for(t=[],o=0;o<s.length;o++)t.push({id:s[o],name:n[s[o]]});r&&t.push({value:"",id:"",name:"(Blanks)"})}var l=document.createElement("div");obj.filter.children[e+1].innerHTML="",obj.filter.children[e+1].appendChild(l),obj.filter.children[e+1].style.paddingLeft="0px",obj.filter.children[e+1].style.paddingRight="0px",obj.filter.children[e+1].style.overflow="initial";var u={data:t,multiple:!0,autocomplete:!0,opened:!0,value:void 0!==obj.filters[e]?obj.filters[e]:null,width:"100%",position:1==obj.options.tableOverflow||1==obj.options.fullscreen,onclose:function(t){obj.resetFilters(),obj.filters[e]=t.dropdown.getValue(!0),obj.filter.children[e+1].innerHTML=t.dropdown.getText(),obj.filter.children[e+1].style.paddingLeft="",obj.filter.children[e+1].style.paddingRight="",obj.filter.children[e+1].style.overflow="",obj.closeFilter(e),obj.refreshSelection()}};jSuites.dropdown(l,u)}else console.log("Jspreadsheet: filters not enabled.")},obj.resetFilters=function(){if(obj.options.filters)for(var e=0;e<obj.filter.children.length;e++)obj.filter.children[e].innerHTML="&nbsp;",obj.filters[e]=null},obj.closeFilter=function(e){if(!e)for(var t=0;t<obj.filter.children.length;t++)obj.filters[t]&&(e=t);var n=function(e,t,n){for(var r=0;r<e.length;r++)if(""==e[r]&&(!1===obj.options.data[n][t]||""+obj.options.data[n][t]=="")||""!=e[r]&&((""+obj.options.data[n][t]).search(e[r])>=0||(""+obj.records[n][t].innerHTML).search(e[r])>=0))return!0;return!1},r=obj.filters[e];obj.results=[];for(var o=0;o<obj.options.data.length;o++)n(r,e,o)&&obj.results.push(o);obj.results.length||(obj.results=null),obj.updateResult()},obj.openEditor=function(e,t,n){var r=e.getAttribute("data-y"),o=e.getAttribute("data-x");obj.dispatch("oneditionstart",el,e,o,r),o>0&&(obj.records[r][o-1].style.overflow="hidden");var i=function(t){var n=e.getBoundingClientRect(),i=document.createElement(t);return i.style.width=n.width+"px",i.style.height=n.height-2+"px",i.style.minHeight=n.height-2+"px",e.classList.add("editor"),e.innerHTML="",e.appendChild(i),obj.dispatch("oncreateeditor",el,e,o,r,i),i};if(1==e.classList.contains("readonly"));else if(obj.edition=[obj.records[r][o],obj.records[r][o].innerHTML,o,r],obj.options.columns[o].editor)obj.options.columns[o].editor.openEditor(e,el,t,n);else if("hidden"==obj.options.columns[o].type);else if("checkbox"==obj.options.columns[o].type||"radio"==obj.options.columns[o].type){var a=!e.children[0].checked;obj.setValue(e,a),obj.edition=null}else if("dropdown"==obj.options.columns[o].type||"autocomplete"==obj.options.columns[o].type){if(a=obj.options.data[r][o],obj.options.columns[o].multiple&&!Array.isArray(a)&&(a=a.split(";")),"function"==typeof obj.options.columns[o].filter)var s=obj.options.columns[o].filter(el,e,o,r,obj.options.columns[o].source);else s=obj.options.columns[o].source;for(var l=[],u=0;u<s.length;u++)l.push(s[u]);var c=i("div"),d={data:l,multiple:!!obj.options.columns[o].multiple,autocomplete:!(!obj.options.columns[o].autocomplete&&"autocomplete"!=obj.options.columns[o].type),opened:!0,value:a,width:"100%",height:c.style.minHeight,position:1==obj.options.tableOverflow||1==obj.options.fullscreen,onclose:function(){obj.closeEditor(e,!0)}};obj.options.columns[o].options&&obj.options.columns[o].options.type&&(d.type=obj.options.columns[o].options.type),jSuites.dropdown(c,d)}else if("calendar"==obj.options.columns[o].type||"color"==obj.options.columns[o].type)a=obj.options.data[r][o],(c=i("input")).value=a,1!=obj.options.tableOverflow&&1!=obj.options.fullscreen||(obj.options.columns[o].options.position=!0),obj.options.columns[o].options.value=obj.options.data[r][o],obj.options.columns[o].options.opened=!0,obj.options.columns[o].options.onclose=function(t,n){obj.closeEditor(e,!0)},"color"==obj.options.columns[o].type?jSuites.color(c,obj.options.columns[o].options):jSuites.calendar(c,obj.options.columns[o].options),c.focus();else if("html"==obj.options.columns[o].type){a=obj.options.data[r][o],(c=i("div")).style.position="relative",(p=document.createElement("div")).classList.add("jexcel_richtext"),c.appendChild(p),jSuites.editor(p,{focus:!0,value:a});var h=e.getBoundingClientRect(),f=p.getBoundingClientRect();window.innerHeight<h.bottom+f.height?p.style.top=h.top-(f.height+2)+"px":p.style.top=h.top+"px"}else if("image"==obj.options.columns[o].type){var p,g=e.children[0];(c=i("div")).style.position="relative",(p=document.createElement("div")).classList.add("jclose"),g&&g.src&&p.appendChild(g),c.appendChild(p),jSuites.image(p,obj.options.imageOptions),h=e.getBoundingClientRect(),f=p.getBoundingClientRect(),window.innerHeight<h.bottom+f.height?p.style.top=h.top-(f.height+2)+"px":p.style.top=h.top+"px"}else{if(a=1==t?"":obj.options.data[r][o],0==obj.options.columns[o].wordWrap||1!=obj.options.wordWrap&&1!=obj.options.columns[o].wordWrap)c=i("input"),obj.options.columns[o].mask&&c.setAttribute("data-mask",obj.options.columns[o].mask);else var c=i("textarea");c.onblur=function(){obj.closeEditor(e,!0)},c.focus(),c.value=a,c.scrollLeft=c.scrollWidth}},obj.closeEditor=function(e,t){var n=parseInt(e.getAttribute("data-x")),r=parseInt(e.getAttribute("data-y"));if(1==t){if(obj.options.columns[n].editor)var o=obj.options.columns[n].editor.closeEditor(e,t);else if("checkbox"==obj.options.columns[n].type||"radio"==obj.options.columns[n].type||"hidden"==obj.options.columns[n].type);else if("dropdown"==obj.options.columns[n].type||"autocomplete"==obj.options.columns[n].type)o=e.children[0].dropdown.close(!0);else if("calendar"==obj.options.columns[n].type)o=e.children[0].calendar.close(!0);else if("color"==obj.options.columns[n].type)o=e.children[0].color.close(!0);else if("html"==obj.options.columns[n].type)o=e.children[0].children[0].editor.getData();else if("image"==obj.options.columns[n].type){var i=e.children[0].children[0].children[0];o=i&&"IMG"==i.tagName?i.src:""}else"numeric"==obj.options.columns[n].type?("="!=(o=e.children[0].value).substr(0,1)&&""==o&&(o=obj.options.columns[n].allowEmpty?"":0),e.children[0].onblur=null):(o=e.children[0].value,e.children[0].onblur=null);obj.options.data[r][n]==o?e.innerHTML=obj.edition[1]:obj.setValue(e,o)}else obj.options.columns[n].editor?obj.options.columns[n].editor.closeEditor(e,t):"dropdown"==obj.options.columns[n].type||"autocomplete"==obj.options.columns[n].type?e.children[0].dropdown.close(!0):"calendar"==obj.options.columns[n].type?e.children[0].calendar.close(!0):"color"==obj.options.columns[n].type?e.children[0].color.close(!0):e.children[0].onblur=null,e.innerHTML=obj.edition&&obj.edition[1]?obj.edition[1]:"";obj.dispatch("oneditionend",el,e,n,r,o,t),e.classList.remove("editor"),obj.edition=null},obj.getCell=function(e){var t=(e=_jexcel.getIdFromColumnName(e,!0))[0],n=e[1];return obj.records[n][t]},obj.getCellFromCoords=function(e,t){return obj.records[t][e]},obj.getLabel=function(e){var t=(e=_jexcel.getIdFromColumnName(e,!0))[0],n=e[1];return obj.records[n][t].innerHTML},obj.getLabelFromCoords=function(e,t){return obj.records[t][e].innerHTML},obj.getValue=function(e,t){if("object"==typeof e)var n=e.getAttribute("data-x"),r=e.getAttribute("data-y");else n=(e=_jexcel.getIdFromColumnName(e,!0))[0],r=e[1];var o=null;return null!=n&&null!=r&&(obj.records[r]&&obj.records[r][n]&&(t||1==obj.options.copyCompatibility)?o=obj.records[r][n].innerHTML:obj.options.data[r]&&"undefined"!=obj.options.data[r][n]&&(o=obj.options.data[r][n])),o},obj.getValueFromCoords=function(e,t,n){var r=null;return null!=e&&null!=t&&(obj.records[t]&&obj.records[t][e]&&n||1==obj.options.copyCompatibility?r=obj.records[t][e].innerHTML:obj.options.data[t]&&"undefined"!=obj.options.data[t][e]&&(r=obj.options.data[t][e])),r},obj.setValue=function(e,t,n){var r=[];if("string"==typeof e){var o=(l=_jexcel.getIdFromColumnName(e,!0))[0],i=l[1];r.push(obj.updateCell(o,i,t,n)),obj.updateFormulaChain(o,i,r)}else if(o=null,i=null,e&&e.getAttribute&&(o=e.getAttribute("data-x"),i=e.getAttribute("data-y")),null!=o&&null!=i)r.push(obj.updateCell(o,i,t,n)),obj.updateFormulaChain(o,i,r);else{var a=Object.keys(e);if(a.length>0)for(var s=0;s<a.length;s++){var l;if("string"==typeof e[s])o=(l=_jexcel.getIdFromColumnName(e[s],!0))[0],i=l[1];else null!=e[s].x&&null!=e[s].y?(o=e[s].x,i=e[s].y,null!=e[s].newValue?t=e[s].newValue:null!=e[s].value&&(t=e[s].value)):(o=e[s].getAttribute("data-x"),i=e[s].getAttribute("data-y"));null!=o&&null!=i&&(r.push(obj.updateCell(o,i,t,n)),obj.updateFormulaChain(o,i,r))}}obj.setHistory({action:"setValue",records:r,selection:obj.selectedCell}),obj.updateTable(),obj.onafterchanges(el,r)},obj.setValueFromCoords=function(e,t,n,r){var o=[];o.push(obj.updateCell(e,t,n,r)),obj.updateFormulaChain(e,t,o),obj.setHistory({action:"setValue",records:o,selection:obj.selectedCell}),obj.updateTable(),obj.onafterchanges(el,o)},obj.setCheckRadioValue=function(){for(var e=[],t=Object.keys(obj.highlighted),n=0;n<t.length;n++){var r=obj.highlighted[n].getAttribute("data-x"),o=obj.highlighted[n].getAttribute("data-y");"checkbox"!=obj.options.columns[r].type&&"radio"!=obj.options.columns[r].type||e.push(obj.updateCell(r,o,!obj.options.data[o][r]))}e.length&&(obj.setHistory({action:"setValue",records:e,selection:obj.selectedCell}),obj.onafterchanges(el,e))};var stripScript=function(e){var t=new Option;t.innerHTML=e;var n=null;for(e=t.getElementsByTagName("script");n=e[0];)n.parentNode.removeChild(n);return t.innerHTML};obj.updateCell=function(e,t,n,r){if(1!=obj.records[t][e].classList.contains("readonly")||r){var o;if("="==(""+n).substr(0,1)&&1==obj.options.secureFormulas&&(o=secureFormula(n))!=n&&(n=o),void 0!=(o=obj.dispatch("onbeforechange",el,obj.records[t][e],e,t,n))&&(n=o),obj.options.columns[e].editor&&"function"==typeof obj.options.columns[e].editor.updateCell&&(n=obj.options.columns[e].editor.updateCell(obj.records[t][e],n,r)),u={x:e,y:t,col:e,row:t,newValue:n,oldValue:obj.options.data[t][e]},obj.options.columns[e].editor)obj.options.data[t][e]=n;else if("checkbox"==obj.options.columns[e].type||"radio"==obj.options.columns[e].type){if("radio"==obj.options.columns[e].type)for(var i=0;i<obj.options.data.length;i++)obj.options.data[i][e]=!1;obj.records[t][e].children[0].checked=1==n||1==n||"true"==n||"TRUE"==n,obj.options.data[t][e]=obj.records[t][e].children[0].checked}else if("dropdown"==obj.options.columns[e].type||"autocomplete"==obj.options.columns[e].type)obj.options.data[t][e]=n,obj.records[t][e].innerText=obj.getDropDownValue(e,n);else if("calendar"==obj.options.columns[e].type){var a=jSuites.calendar.extractDateFromString(n,obj.options.columns[e].options.format);obj.options.data[t][e]=n,obj.records[t][e].innerText=jSuites.calendar.getDateString(a||n,obj.options.columns[e].options.format)}else if("color"==obj.options.columns[e].type)if(obj.options.data[t][e]=n,"square"==obj.options.columns[e].render){var s=document.createElement("div");s.className="color",s.style.backgroundColor=n,obj.records[t][e].innerText="",obj.records[t][e].appendChild(s)}else obj.records[t][e].style.color=n,obj.records[t][e].innerText=n;else if("image"==obj.options.columns[e].type){if(n=""+n,obj.options.data[t][e]=n,obj.records[t][e].innerHTML="",n&&"data:image"==n.substr(0,10)){var l=document.createElement("img");l.src=n,obj.records[t][e].appendChild(l)}}else obj.options.data[t][e]=n,"html"==obj.options.columns[e].type||!1===obj.options.stripHTML||!1===obj.options.columns[e].stripHTML?obj.records[t][e].innerHTML=stripScript(obj.parseValue(e,t,n)):obj.records[t][e].innerText=obj.parseValue(e,t,n),0!=obj.options.columns[e].wordWrap&&(1==obj.options.wordWrap||1==obj.options.columns[e].wordWrap||obj.records[t][e].innerHTML.length>200)?obj.records[t][e].style.whiteSpace="pre-wrap":obj.records[t][e].style.whiteSpace="";e>0&&(obj.records[t][e-1].style.overflow=n?"hidden":""),obj.dispatch("onchange",el,obj.records[t]&&obj.records[t][e]?obj.records[t][e]:null,e,t,n,u.oldValue)}else var u={x:e,y:t,col:e,row:t};return u},obj.copyData=function(e,t){var n=obj.getData(!0,!0),r=obj.selectedContainer,o=parseInt(e.getAttribute("data-x")),i=parseInt(e.getAttribute("data-y")),a=parseInt(t.getAttribute("data-x")),s=parseInt(t.getAttribute("data-y")),l=[],u=!1;if(r[0]==o){if(i<r[1])var c=i-r[1];else c=1;var d=0}else d=o<r[0]?o-r[0]:1,c=0;for(var h=0,f=0,p=i;p<=s;p++)if(!obj.rows[p]||"none"!=obj.rows[p].style.display){void 0==n[f]&&(f=0),h=0,r[0]!=o&&(d=o<r[0]?o-r[0]:1);for(var g=o;g<=a;g++){if(obj.records[p][g]&&!obj.records[p][g].classList.contains("readonly")&&"none"!=obj.records[p][g].style.display&&0==u){if(!obj.selection.length&&""!=obj.options.data[p][g]){u=!0;continue}(void 0==n[f]||void 0==n[f][h])&&(h=0);var b=n[f][h];if(b&&!n[1]&&1==obj.options.autoIncrement)if("text"==obj.options.columns[g].type||"number"==obj.options.columns[g].type)if("="==(""+b).substr(0,1)){var m=b.match(/([A-Z]+[0-9]+)/g);if(m){for(var v=[],y=0;y<m.length;y++){var j=_jexcel.getIdFromColumnName(m[y],1);j[0]+=d,j[1]+=c,j[1]<0&&(j[1]=0);var x=_jexcel.getColumnNameFromId([j[0],j[1]]);x!=m[y]&&(v[m[y]]=x)}v&&(b=obj.updateFormula(b,v))}}else b==Number(b)&&(b=Number(b)+c);else if("calendar"==obj.options.columns[g].type){var w=new Date(b);w.setDate(w.getDate()+c),b=w.getFullYear()+"-"+_jexcel.doubleDigitFormat(parseInt(w.getMonth()+1))+"-"+_jexcel.doubleDigitFormat(w.getDate())+" 00:00:00"}l.push(obj.updateCell(g,p,b)),obj.updateFormulaChain(g,p,l)}h++,r[0]!=o&&d++}f++,c++}obj.setHistory({action:"setValue",records:l,selection:obj.selectedCell}),obj.updateTable(),obj.onafterchanges(el,l)},obj.refreshSelection=function(){obj.selectedCell&&obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3])},obj.conditionalSelectionUpdate=function(e,t,n){if(1==e){if(obj.selectedCell&&(t>=obj.selectedCell[1]&&t<=obj.selectedCell[3]||n>=obj.selectedCell[1]&&n<=obj.selectedCell[3]))return void obj.resetSelection()}else if(obj.selectedCell&&(t>=obj.selectedCell[0]&&t<=obj.selectedCell[2]||n>=obj.selectedCell[0]&&n<=obj.selectedCell[2]))return void obj.resetSelection()},obj.resetSelection=function(e){if(obj.highlighted.length){u=1;for(var t=0;t<obj.highlighted.length;t++){obj.highlighted[t].classList.remove("highlight"),obj.highlighted[t].classList.remove("highlight-left"),obj.highlighted[t].classList.remove("highlight-right"),obj.highlighted[t].classList.remove("highlight-top"),obj.highlighted[t].classList.remove("highlight-bottom"),obj.highlighted[t].classList.remove("highlight-selected");var n=parseInt(obj.highlighted[t].getAttribute("data-x")),r=parseInt(obj.highlighted[t].getAttribute("data-y"));if(obj.highlighted[t].getAttribute("data-merged"))var o=parseInt(obj.highlighted[t].getAttribute("colspan")),i=parseInt(obj.highlighted[t].getAttribute("rowspan")),a=o>0?n+(o-1):n,s=i>0?r+(i-1):r;else a=n,s=r;for(var l=n;l<=a;l++)obj.headers[l]&&obj.headers[l].classList.remove("selected");for(l=r;l<=s;l++)obj.rows[l]&&obj.rows[l].classList.remove("selected")}}else var u=0;return obj.highlighted=[],obj.selectedCell=null,obj.corner.style.top="-2000px",obj.corner.style.left="-2000px",1==e&&1==u&&obj.dispatch("onblur",el),u},obj.updateSelection=function(e,t,n){var r=e.getAttribute("data-x"),o=e.getAttribute("data-y");if(t)var i=t.getAttribute("data-x"),a=t.getAttribute("data-y");else i=r,a=o;obj.updateSelectionFromCoords(r,o,i,a,n)},obj.updateSelectionFromCoords=function(e,t,n,r,o){var i=obj.resetSelection();if(null==t&&(t=0,r=obj.rows.length-1),null==n&&(n=e),null==r&&(r=t),e>=obj.headers.length&&(e=obj.headers.length-1),t>=obj.rows.length&&(t=obj.rows.length-1),n>=obj.headers.length&&(n=obj.headers.length-1),r>=obj.rows.length&&(r=obj.rows.length-1),obj.selectedCell=[e,t,n,r],null!=e){if(obj.records[t][e]&&obj.records[t][e].classList.add("highlight-selected"),parseInt(e)<parseInt(n))var a=parseInt(e),s=parseInt(n);else a=parseInt(n),s=parseInt(e);if(parseInt(t)<parseInt(r))var l=parseInt(t),u=parseInt(r);else l=parseInt(r),u=parseInt(t);for(var c=a;c<=s;c++)for(var d=l;d<=u;d++)if(obj.records[d][c]&&obj.records[d][c].getAttribute("data-merged")){var h=parseInt(obj.records[d][c].getAttribute("data-x")),f=parseInt(obj.records[d][c].getAttribute("data-y")),p=parseInt(obj.records[d][c].getAttribute("colspan")),g=parseInt(obj.records[d][c].getAttribute("rowspan"));p>1&&(h<a&&(a=h),h+p>s&&(s=h+p-1)),g&&(f<l&&(l=f),f+g>u&&(u=f+g-1))}var b=null,m=null,v=null,y=null;for(d=l;d<=u;d++)"none"!=obj.rows[d].style.display&&(null==v&&(v=d),y=d);for(c=a;c<=s;c++){for(d=l;d<=u;d++)"none"!=obj.rows[d].style.display&&"none"!=obj.records[d][c].style.display&&(obj.records[d][c].classList.add("highlight"),obj.highlighted.push(obj.records[d][c]));"hidden"!=obj.options.columns[c].type&&(null==b&&(b=c),m=c)}for(b||(b=0),m||(m=0),c=b;c<=m;c++)"hidden"!=obj.options.columns[c].type&&(obj.records[v]&&obj.records[v][c]&&obj.records[v][c].classList.add("highlight-top"),obj.records[y]&&obj.records[y][c]&&obj.records[y][c].classList.add("highlight-bottom"),obj.headers[c].classList.add("selected"));for(d=v;d<=y;d++)obj.rows[d]&&"none"!=obj.rows[d].style.display&&(obj.records[d][b].classList.add("highlight-left"),obj.records[d][m].classList.add("highlight-right"),obj.rows[d].classList.add("selected"));obj.selectedContainer=[b,v,m,y]}0==i&&(obj.dispatch("onfocus",el),obj.removeCopyingSelection()),obj.dispatch("onselection",el,b,v,m,y,o),obj.updateCornerPosition()},obj.removeCopySelection=function(){for(var e=0;e<obj.selection.length;e++)obj.selection[e].classList.remove("selection"),obj.selection[e].classList.remove("selection-left"),obj.selection[e].classList.remove("selection-right"),obj.selection[e].classList.remove("selection-top"),obj.selection[e].classList.remove("selection-bottom");obj.selection=[]},obj.updateCopySelection=function(e,t){obj.removeCopySelection();var n=obj.selectedContainer[0],r=obj.selectedContainer[1],o=obj.selectedContainer[2],i=obj.selectedContainer[3];if(null!=e&&null!=t){if(e-o>0)var a=parseInt(o)+1,s=parseInt(e);else a=parseInt(e),s=parseInt(n)-1;if(t-i>0)var l=parseInt(i)+1,u=parseInt(t);else l=parseInt(t),u=parseInt(r)-1;s-a<=u-l?(a=parseInt(n),s=parseInt(o)):(l=parseInt(r),u=parseInt(i));for(var c=l;c<=u;c++)for(var d=a;d<=s;d++)obj.records[c][d]&&"none"!=obj.rows[c].style.display&&"none"!=obj.records[c][d].style.display&&(obj.records[c][d].classList.add("selection"),obj.records[l][d].classList.add("selection-top"),obj.records[u][d].classList.add("selection-bottom"),obj.records[c][a].classList.add("selection-left"),obj.records[c][s].classList.add("selection-right"),obj.selection.push(obj.records[c][d]))}},obj.updateCornerPosition=function(){if(obj.highlighted.length){var e=obj.highlighted[obj.highlighted.length-1],t=obj.content.getBoundingClientRect(),n=t.left,r=t.top,o=e.getBoundingClientRect(),i=o.left,a=o.top,s=o.width,l=o.height,u=i-n+obj.content.scrollLeft+s-4,c=a-r+obj.content.scrollTop+l-4;obj.corner.style.top=c+"px",obj.corner.style.left=u+"px",obj.options.freezeColumns&&i-n+s<obj.getFreezeWidth()?obj.corner.style.display="none":1==obj.options.selectionCopy&&(obj.corner.style.display="")}else obj.corner.style.top="-2000px",obj.corner.style.left="-2000px"},obj.updateScroll=function(e){var t=obj.content.getBoundingClientRect(),n=t.left,r=t.top,o=t.width,i=t.height,a=obj.records[obj.selectedCell[3]][obj.selectedCell[2]].getBoundingClientRect(),s=a.left,l=a.top,u=a.width,c=a.height;if(0==e||1==e)var d=s-n+obj.content.scrollLeft,h=l-r+obj.content.scrollTop-2;else d=s-n+obj.content.scrollLeft+u,h=l-r+obj.content.scrollTop+c;h>obj.content.scrollTop+30&&h<obj.content.scrollTop+i||(h<obj.content.scrollTop+30?obj.content.scrollTop=h-c:obj.content.scrollTop=h-(i-2));var f=obj.getFreezeWidth();d>obj.content.scrollLeft+f&&d<obj.content.scrollLeft+o||(d<obj.content.scrollLeft+30?(obj.content.scrollLeft=d,obj.content.scrollLeft<50&&(obj.content.scrollLeft=0)):d<obj.content.scrollLeft+f?obj.content.scrollLeft=d-f-1:obj.content.scrollLeft=d-(o-20))},obj.getWidth=function(e){if(e)"object"==typeof e&&(e=$(e).getAttribute("data-x")),t=obj.colgroup[e].getAttribute("width");else for(var t=[],n=0;n<obj.headers.length;n++)t.push(obj.options.columns[n].width);return t},obj.setWidth=function(e,t,n){if(t){if(Array.isArray(e)){n||(n=[]);for(var r=0;r<e.length;r++){n[r]||(n[r]=obj.colgroup[e[r]].getAttribute("width"));var o=Array.isArray(t)&&t[r]?t[r]:t;obj.colgroup[e[r]].setAttribute("width",o),obj.options.columns[e[r]].width=o}}else n||(n=obj.colgroup[e].getAttribute("width")),obj.colgroup[e].setAttribute("width",t),obj.options.columns[e].width=t;obj.setHistory({action:"setWidth",column:e,oldValue:n,newValue:t}),obj.dispatch("onresizecolumn",el,e,t,n),obj.updateCornerPosition()}},obj.setHeight=function(e,t,n){t>0&&("object"==typeof e&&(e=e.getAttribute("data-y")),n||(n=obj.rows[e].getAttribute("height"))||(n=obj.rows[e].getBoundingClientRect().height),t=parseInt(t),obj.rows[e].style.height=t+"px",obj.options.rows[e]||(obj.options.rows[e]={}),obj.options.rows[e].height=t,obj.setHistory({action:"setHeight",row:e,oldValue:n,newValue:t}),obj.dispatch("onresizerow",el,e,t,n),obj.updateCornerPosition())},obj.getHeight=function(e){if(e)"object"==typeof e&&(e=$(e).getAttribute("data-y")),t=obj.rows[e].style.height;else for(var t=[],n=0;n<obj.rows.length;n++){var r=obj.rows[n].style.height;r&&(t[n]=r)}return t},obj.setFooter=function(e){if(e&&(obj.options.footers=e),obj.options.footers){obj.tfoot||(obj.tfoot=document.createElement("tfoot"),obj.table.appendChild(obj.tfoot));for(var t=0;t<obj.options.footers.length;t++){if(obj.tfoot.children[t])var n=obj.tfoot.children[t];else{n=document.createElement("tr");var r=document.createElement("td");n.appendChild(r),obj.tfoot.appendChild(n)}for(var o=0;o<obj.headers.length;o++){if(obj.options.footers[t][o]||(obj.options.footers[t][o]=""),obj.tfoot.children[t].children[o+1])r=obj.tfoot.children[t].children[o+1];else{r=document.createElement("td"),n.appendChild(r);var i=obj.options.columns[o].align?obj.options.columns[o].align:"center";r.style.textAlign=i}r.innerText=obj.parseValue(o,t,obj.options.footers[t][o])}}}},obj.getHeader=function(e){return obj.headers[e].innerText},obj.setHeader=function(e,t){if(obj.headers[e]){var n=obj.headers[e].innerText;t||(t=prompt(obj.options.text.columnName,n)),t&&(obj.headers[e].innerText=t,obj.headers[e].setAttribute("title",t),obj.options.columns[e].title=t),obj.setHistory({action:"setHeader",column:e,oldValue:n,newValue:t}),obj.dispatch("onchangeheader",el,e,n,t)}},obj.getHeaders=function(e){for(var t=[],n=0;n<obj.headers.length;n++)t.push(obj.getHeader(n));return e?t:t.join(obj.options.csvDelimiter)},obj.getMeta=function(e,t){return e?t?obj.options.meta[e]&&obj.options.meta[e][t]?obj.options.meta[e][t]:null:obj.options.meta[e]?obj.options.meta[e]:null:obj.options.meta},obj.setMeta=function(e,t,n){if(obj.options.meta||(obj.options.meta={}),t&&n)obj.options.meta[e]||(obj.options.meta[e]={}),obj.options.meta[e][t]=n;else for(var r=Object.keys(e),o=0;o<r.length;o++){obj.options.meta[r[o]]||(obj.options.meta[r[o]]={});for(var i=Object.keys(e[r[o]]),a=0;a<i.length;a++)obj.options.meta[r[o]][i[a]]=e[r[o]][i[a]]}obj.dispatch("onchangemeta",el,e,t,n)},obj.updateMeta=function(e){if(obj.options.meta){for(var t={},n=Object.keys(obj.options.meta),r=0;r<n.length;r++)e[n[r]]?t[e[n[r]]]=obj.options.meta[n[r]]:t[n[r]]=obj.options.meta[n[r]];obj.options.meta=t}},obj.getStyle=function(e,t){if(e)return e=_jexcel.getIdFromColumnName(e,!0),t?obj.records[e[1]][e[0]].style[t]:obj.records[e[1]][e[0]].getAttribute("style");for(var n={},r=obj.options.data[0].length,o=obj.options.data.length,i=0;i<o;i++)for(var a=0;a<r;a++){var s=t?obj.records[i][a].style[t]:obj.records[i][a].getAttribute("style");s&&(n[_jexcel.getColumnNameFromId([a,i])]=s)}return n},obj.resetStyle=function(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++){var o=_jexcel.getIdFromColumnName(n[r],!0);obj.records[o[1]]&&obj.records[o[1]][o[0]]&&obj.records[o[1]][o[0]].setAttribute("style","")}obj.setStyle(e,null,null,null,t)},obj.setStyle=function(e,t,n,r,o){var i={},a={},s=function(e,t,n){var o=_jexcel.getIdFromColumnName(e,!0);if(obj.records[o[1]]&&obj.records[o[1]][o[0]]&&(0==obj.records[o[1]][o[0]].classList.contains("readonly")||r)){var s=obj.records[o[1]][o[0]].style[t];s!=n||r?obj.records[o[1]][o[0]].style[t]=n:(n="",obj.records[o[1]][o[0]].style[t]=""),a[e]||(a[e]=[]),i[e]||(i[e]=[]),a[e].push([t+":"+s]),i[e].push([t+":"+n])}};if(t&&n)if("string"==typeof e)s(e,t,n);else for(var l=[],u=0;u<e.length;u++){var c=e[u].getAttribute("data-x"),d=e[u].getAttribute("data-y"),h=_jexcel.getColumnNameFromId([c,d]);l[h]||(s(h,t,n),l[h]=!0)}else{var f=Object.keys(e);for(u=0;u<f.length;u++){var p=e[f[u]];"string"==typeof p&&(p=p.split(";"));for(var g=0;g<p.length;g++)"string"==typeof p[g]&&(p[g]=p[g].split(":")),p[g][0].trim()&&s(f[u],p[g][0].trim(),p[g][1])}}for(f=Object.keys(a),u=0;u<f.length;u++)a[f[u]]=a[f[u]].join(";");for(f=Object.keys(i),u=0;u<f.length;u++)i[f[u]]=i[f[u]].join(";");o||obj.setHistory({action:"setStyle",oldValue:a,newValue:i}),obj.dispatch("onchangestyle",el,e,t,n)},obj.getComments=function(e,t){if(e)return"string"==typeof e&&(e=_jexcel.getIdFromColumnName(e,!0)),t?[obj.records[e[1]][e[0]].getAttribute("title"),obj.records[e[1]][e[0]].getAttribute("author")]:obj.records[e[1]][e[0]].getAttribute("title")||"";for(var n={},r=0;r<obj.options.data.length;r++)for(var o=0;o<obj.options.columns.length;o++){var i=obj.records[r][o].getAttribute("title");i&&(n[e=_jexcel.getColumnNameFromId([o,r])]=i)}return n},obj.setComments=function(e,t,n){if("string"==typeof e)var r=_jexcel.getIdFromColumnName(e,!0);else r=e;var o=obj.records[r[1]][r[0]].getAttribute("title"),i=[o,n=obj.records[r[1]][r[0]].getAttribute("data-author")];obj.records[r[1]][r[0]].setAttribute("title",t||""),obj.records[r[1]][r[0]].setAttribute("data-author",n||""),t?obj.records[r[1]][r[0]].classList.add("jexcel_comments"):obj.records[r[1]][r[0]].classList.remove("jexcel_comments"),obj.setHistory({action:"setComments",column:e,newValue:[t,n],oldValue:i}),obj.dispatch("oncomments",el,t,o)},obj.getConfig=function(){var e=obj.options;return e.style=obj.getStyle(),e.mergeCells=obj.getMerge(),e.comments=obj.getComments(),e},obj.orderBy=function(e,t){if(e>=0){if(Object.keys(obj.options.mergeCells).length>0){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}t=null==t?obj.headers[e].classList.contains("arrow-down")?1:0:t?1:0;var n=[];if("number"==obj.options.columns[e].type||"percentage"==obj.options.columns[e].type||"autonumber"==obj.options.columns[e].type||"color"==obj.options.columns[e].type)for(var r=0;r<obj.options.data.length;r++)n[r]=[r,Number(obj.options.data[r][e])];else if("calendar"==obj.options.columns[e].type||"checkbox"==obj.options.columns[e].type||"radio"==obj.options.columns[e].type)for(r=0;r<obj.options.data.length;r++)n[r]=[r,obj.options.data[r][e]];else for(r=0;r<obj.options.data.length;r++)n[r]=[r,obj.records[r][e].innerText.toLowerCase()];"function"!==typeof obj.options.sorting&&(obj.options.sorting=function(e){return function(t,n){var r=t[1],o=n[1];return e?""===r&&""!==o?1:""!==r&&""===o||r>o?-1:r<o?1:0:""===r&&""!==o?1:""!==r&&""===o?-1:r>o?1:r<o?-1:0}}),n=n.sort(obj.options.sorting(t));var o=[];for(r=0;r<n.length;r++)o[r]=n[r][0];return obj.setHistory({action:"orderBy",rows:o,column:e,order:t}),obj.updateOrderArrow(e,t),obj.updateOrder(o),obj.dispatch("onsort",el,e,t),!0}},obj.updateOrderArrow=function(e,t){for(var n=0;n<obj.headers.length;n++)obj.headers[n].classList.remove("arrow-up"),obj.headers[n].classList.remove("arrow-down");t?obj.headers[e].classList.add("arrow-up"):obj.headers[e].classList.add("arrow-down")},obj.updateOrder=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=obj.options.data[e[n]];for(obj.options.data=t,t=[],n=0;n<e.length;n++)t[n]=obj.records[e[n]];for(obj.records=t,t=[],n=0;n<e.length;n++)t[n]=obj.rows[e[n]];if(obj.rows=t,obj.updateTableReferences(),obj.results&&obj.results.length)obj.searchInput.value?obj.search(obj.searchInput.value):obj.closeFilter();else if(obj.results=null,obj.pageNumber=0,obj.options.pagination>0)obj.page(0);else if(1==obj.options.lazyLoading)obj.loadPage(0);else for(n=0;n<obj.rows.length;n++)obj.tbody.appendChild(obj.rows[n])},obj.moveRow=function(e,t,n){if(Object.keys(obj.options.mergeCells).length>0){if(e>t)var r=1;else r=0;if(obj.isRowMerged(e).length||obj.isRowMerged(t,r).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}}if(1==obj.options.search){if(obj.results&&obj.results.length!=obj.rows.length){if(!confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure))return!1;obj.resetSearch()}obj.results=null}n||(Array.prototype.indexOf.call(obj.tbody.children,obj.rows[t])>=0?e>t?obj.tbody.insertBefore(obj.rows[e],obj.rows[t]):obj.tbody.insertBefore(obj.rows[e],obj.rows[t].nextSibling):obj.tbody.removeChild(obj.rows[e])),obj.rows.splice(t,0,obj.rows.splice(e,1)[0]),obj.records.splice(t,0,obj.records.splice(e,1)[0]),obj.options.data.splice(t,0,obj.options.data.splice(e,1)[0]),obj.options.pagination>0&&obj.tbody.children.length!=obj.options.pagination&&obj.page(obj.pageNumber),obj.setHistory({action:"moveRow",oldValue:e,newValue:t}),obj.updateTableReferences(),obj.dispatch("onmoverow",el,e,t)},obj.insertRow=function(e,t,n){if(1==obj.options.allowInsertRow){var r=[];if(e>0)var o=e;else o=1,e&&(r=e);n=!!n;var i=obj.options.data.length-1;if((void 0==t||t>=parseInt(i)||t<0)&&(t=i),!1===obj.dispatch("onbeforeinsertrow",el,t,o,n))return console.log("onbeforeinsertrow returned false"),!1;if(Object.keys(obj.options.mergeCells).length>0&&obj.isRowMerged(t,n).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}if(1==obj.options.search){if(obj.results&&obj.results.length!=obj.rows.length){if(!confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure))return!1;obj.resetSearch()}obj.results=null}for(var a=n?t:t+1,s=obj.records.splice(a),l=obj.options.data.splice(a),u=obj.rows.splice(a),c=[],d=[],h=[],f=a;f<o+a;f++){obj.options.data[f]=[];for(var p=0;p<obj.options.columns.length;p++)obj.options.data[f][p]=r[p]?r[p]:"";var g=obj.createRow(f,obj.options.data[f]);u[0]?Array.prototype.indexOf.call(obj.tbody.children,u[0])>=0&&obj.tbody.insertBefore(g,u[0]):Array.prototype.indexOf.call(obj.tbody.children,obj.rows[t])>=0&&obj.tbody.appendChild(g),c.push(obj.records[f]),d.push(obj.options.data[f]),h.push(g)}Array.prototype.push.apply(obj.records,s),Array.prototype.push.apply(obj.options.data,l),Array.prototype.push.apply(obj.rows,u),obj.options.pagination>0&&obj.page(obj.pageNumber),obj.setHistory({action:"insertRow",rowNumber:t,numOfRows:o,insertBefore:n,rowRecords:c,rowData:d,rowNode:h}),obj.updateTableReferences(),obj.dispatch("oninsertrow",el,t,o,c,n)}},obj.deleteRow=function(e,t){if(1==obj.options.allowDeleteRow)if(1==obj.options.allowDeletingAllRows||obj.options.data.length>1){if(void 0==e){var n=obj.getSelectedRows();n[0]?(e=parseInt(n[0].getAttribute("data-y")),t=n.length):(e=obj.options.data.length-1,t=1)}var r=obj.options.data.length-1;if((void 0==e||e>r||e<0)&&(e=r),t||(t=1),e+t>=obj.options.data.length&&(t=obj.options.data.length-e),!1===obj.dispatch("onbeforedeleterow",el,e,t))return console.log("onbeforedeleterow returned false"),!1;if(parseInt(e)>-1){var o=!1;if(Object.keys(obj.options.mergeCells).length>0)for(var i=e;i<e+t;i++)obj.isRowMerged(i,!1).length&&(o=!0);if(o){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}if(1==obj.options.search){if(obj.results&&obj.results.length!=obj.rows.length){if(!confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure))return!1;obj.resetSearch()}obj.results=null}for(0==obj.options.allowDeletingAllRows&&r+1===t&&(t--,console.error("Jspreadsheet: It is not possible to delete the last row")),i=e;i<e+t;i++)Array.prototype.indexOf.call(obj.tbody.children,obj.rows[i])>=0&&(obj.rows[i].className="",obj.rows[i].parentNode.removeChild(obj.rows[i]));var a=obj.records.splice(e,t),s=obj.options.data.splice(e,t),l=obj.rows.splice(e,t);obj.options.pagination>0&&obj.tbody.children.length!=obj.options.pagination&&obj.page(obj.pageNumber),obj.conditionalSelectionUpdate(1,e,e+t-1),obj.setHistory({action:"deleteRow",rowNumber:e,numOfRows:t,insertBefore:1,rowRecords:a,rowData:s,rowNode:l}),obj.updateTableReferences(),obj.dispatch("ondeleterow",el,e,t,a)}}else console.error("Jspreadsheet: It is not possible to delete the last row")},obj.moveColumn=function(e,t){if(Object.keys(obj.options.mergeCells).length>0){if(e>t)var n=1;else n=0;if(obj.isColMerged(e).length||obj.isColMerged(t,n).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}}if((e=parseInt(e))>(t=parseInt(t))){obj.headerContainer.insertBefore(obj.headers[e],obj.headers[t]),obj.colgroupContainer.insertBefore(obj.colgroup[e],obj.colgroup[t]);for(var r=0;r<obj.rows.length;r++)obj.rows[r].insertBefore(obj.records[r][e],obj.records[r][t])}else for(obj.headerContainer.insertBefore(obj.headers[e],obj.headers[t].nextSibling),obj.colgroupContainer.insertBefore(obj.colgroup[e],obj.colgroup[t].nextSibling),r=0;r<obj.rows.length;r++)obj.rows[r].insertBefore(obj.records[r][e],obj.records[r][t].nextSibling);for(obj.options.columns.splice(t,0,obj.options.columns.splice(e,1)[0]),obj.headers.splice(t,0,obj.headers.splice(e,1)[0]),obj.colgroup.splice(t,0,obj.colgroup.splice(e,1)[0]),r=0;r<obj.rows.length;r++)obj.options.data[r].splice(t,0,obj.options.data[r].splice(e,1)[0]),obj.records[r].splice(t,0,obj.records[r].splice(e,1)[0]);if(obj.options.footers)for(r=0;r<obj.options.footers.length;r++)obj.options.footers[r].splice(t,0,obj.options.footers[r].splice(e,1)[0]);obj.setHistory({action:"moveColumn",oldValue:e,newValue:t}),obj.updateTableReferences(),obj.dispatch("onmovecolumn",el,e,t)},obj.insertColumn=function(e,t,n,r){if(1==obj.options.allowInsertColumn){var o=[];if(e>0)var i=e;else i=1,e&&(o=e);n=!!n;var a=obj.options.columns.length-1;if((void 0==t||t>=parseInt(a)||t<0)&&(t=a),!1===obj.dispatch("onbeforeinsertcolumn",el,t,i,n))return console.log("onbeforeinsertcolumn returned false"),!1;if(Object.keys(obj.options.mergeCells).length>0&&obj.isColMerged(t,n).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}r||(r=[]);for(var s=0;s<i;s++)r[s]||(r[s]={type:"text",source:[],options:[],width:obj.options.defaultColWidth,align:obj.options.defaultColAlign});var l=n?t:t+1;obj.options.columns=_jexcel.injectArray(obj.options.columns,l,r);for(var u=obj.headers.splice(l),c=obj.colgroup.splice(l),d=[],h=[],f=[],p=[],g=[],b=l;b<i+l;b++)obj.createCellHeader(b),obj.headerContainer.insertBefore(obj.headers[b],obj.headerContainer.children[b+1]),obj.colgroupContainer.insertBefore(obj.colgroup[b],obj.colgroupContainer.children[b+1]),d.push(obj.headers[b]),h.push(obj.colgroup[b]);if(obj.options.footers)for(var m=0;m<obj.options.footers.length;m++){for(g[m]=[],s=0;s<i;s++)g[m].push("");obj.options.footers[m].splice(l,0,g[m])}for(var v=0;v<obj.options.data.length;v++){var y=obj.options.data[v].splice(l),j=obj.records[v].splice(l);for(p[v]=[],f[v]=[],b=l;b<i+l;b++){var x=o[v]?o[v]:"";obj.options.data[v][b]=x;var w=obj.createCell(b,v,obj.options.data[v][b]);obj.records[v][b]=w,obj.rows[v]&&obj.rows[v].insertBefore(w,obj.rows[v].children[b+1]),p[v].push(x),f[v].push(w)}Array.prototype.push.apply(obj.options.data[v],y),Array.prototype.push.apply(obj.records[v],j)}if(Array.prototype.push.apply(obj.headers,u),Array.prototype.push.apply(obj.colgroup,c),obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(m=0;m<obj.options.nestedHeaders.length;m++){var C=parseInt(obj.options.nestedHeaders[m][obj.options.nestedHeaders[m].length-1].colspan)+i;obj.options.nestedHeaders[m][obj.options.nestedHeaders[m].length-1].colspan=C,obj.thead.children[m].children[obj.thead.children[m].children.length-1].setAttribute("colspan",C);var _=obj.thead.children[m].children[obj.thead.children[m].children.length-1].getAttribute("data-column");for(_=_.split(","),b=l;b<i+l;b++)_.push(b);obj.thead.children[m].children[obj.thead.children[m].children.length-1].setAttribute("data-column",_)}else C=parseInt(obj.options.nestedHeaders[0].colspan)+i,obj.options.nestedHeaders[0].colspan=C,obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute("colspan",C);obj.setHistory({action:"insertColumn",columnNumber:t,numOfColumns:i,insertBefore:n,columns:r,headers:d,colgroup:h,records:f,footers:g,data:p}),obj.updateTableReferences(),obj.dispatch("oninsertcolumn",el,t,i,f,n)}},obj.deleteColumn=function(e,t){if(1==obj.options.allowDeleteColumn)if(obj.headers.length>1){if(void 0==e){var n=obj.getSelectedColumns(!0);n.length?(e=parseInt(n[0]),t=parseInt(n.length)):(e=obj.headers.length-1,t=1)}var r=obj.options.data[0].length-1;if((void 0==e||e>r||e<0)&&(e=r),t||(t=1),t>obj.options.data[0].length-e&&(t=obj.options.data[0].length-e),!1===obj.dispatch("onbeforedeletecolumn",el,e,t))return console.log("onbeforedeletecolumn returned false"),!1;if(parseInt(e)>-1){var o=!1;if(Object.keys(obj.options.mergeCells).length>0)for(var i=e;i<e+t;i++)obj.isColMerged(i,!1).length&&(o=!0);if(o){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}var a=obj.options.columns.splice(e,t);for(i=e;i<e+t;i++)obj.colgroup[i].className="",obj.headers[i].className="",obj.colgroup[i].parentNode.removeChild(obj.colgroup[i]),obj.headers[i].parentNode.removeChild(obj.headers[i]);for(var s=obj.headers.splice(e,t),l=obj.colgroup.splice(e,t),u=[],c=[],d=[],h=0;h<obj.options.data.length;h++)for(i=e;i<e+t;i++)obj.records[h][i].className="",obj.records[h][i].parentNode.removeChild(obj.records[h][i]);for(h=0;h<obj.options.data.length;h++)c[h]=obj.options.data[h].splice(e,t),u[h]=obj.records[h].splice(e,t);if(obj.options.footers)for(h=0;h<obj.options.footers.length;h++)d[h]=obj.options.footers[h].splice(e,t);if(obj.conditionalSelectionUpdate(0,e,e+t-1),obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(var f=0;f<obj.options.nestedHeaders.length;f++){var p=parseInt(obj.options.nestedHeaders[f][obj.options.nestedHeaders[f].length-1].colspan)-t;obj.options.nestedHeaders[f][obj.options.nestedHeaders[f].length-1].colspan=p,obj.thead.children[f].children[obj.thead.children[f].children.length-1].setAttribute("colspan",p)}else p=parseInt(obj.options.nestedHeaders[0].colspan)-t,obj.options.nestedHeaders[0].colspan=p,obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute("colspan",p);obj.setHistory({action:"deleteColumn",columnNumber:e,numOfColumns:t,insertBefore:1,columns:a,headers:s,colgroup:l,records:u,footers:d,data:c}),obj.updateTableReferences(),obj.dispatch("ondeletecolumn",el,e,t,u)}}else console.error("Jspreadsheet: It is not possible to delete the last column")},obj.getSelectedRows=function(e){for(var t=[],n=0;n<obj.rows.length;n++)obj.rows[n].classList.contains("selected")&&(e?t.push(n):t.push(obj.rows[n]));return t},obj.getSelectedColumns=function(){for(var e=[],t=0;t<obj.headers.length;t++)obj.headers[t].classList.contains("selected")&&e.push(t);return e},obj.getHighlighted=function(){return obj.highlighted},obj.updateTableReferences=function(){for(var e=0;e<obj.headers.length;e++)(i=obj.headers[e].getAttribute("data-x"))!=e&&(obj.headers[e].setAttribute("data-x",e),obj.headers[e].getAttribute("title")||(obj.headers[e].innerHTML=_jexcel.getColumnName(e)));for(var t=0;t<obj.rows.length;t++)obj.rows[t]&&(a=obj.rows[t].getAttribute("data-y"))!=t&&(obj.rows[t].setAttribute("data-y",t),obj.rows[t].children[0].setAttribute("data-y",t),obj.rows[t].children[0].innerHTML=t+1);var n=[],r=[],o=function(e,t,r,o){if(e!=r&&obj.records[o][r].setAttribute("data-x",r),t!=o&&obj.records[o][r].setAttribute("data-y",o),e!=r||t!=o){var i=_jexcel.getColumnNameFromId([e,t]),a=_jexcel.getColumnNameFromId([r,o]);n[i]=a}};for(t=0;t<obj.records.length;t++)for(e=0;e<obj.records[0].length;e++)if(obj.records[t][e]){var i=obj.records[t][e].getAttribute("data-x"),a=obj.records[t][e].getAttribute("data-y");if(obj.records[t][e].getAttribute("data-merged")){var s=_jexcel.getColumnNameFromId([i,a]),l=_jexcel.getColumnNameFromId([e,t]);if(null==r[s])if(s==l)r[s]=!1;else{var u=parseInt(e-i),c=parseInt(t-a);r[s]=[l,u,c]}}else o(i,a,e,t)}var d=Object.keys(r);if(d.length)for(e=0;e<d.length;e++)if(r[d[e]]){var h=_jexcel.getIdFromColumnName(d[e],!0);for(o(i=h[0],a=h[1],i+r[d[e]][1],a+r[d[e]][2]),s=d[e],l=r[d[e]][0],t=0;t<obj.options.mergeCells[s][2].length;t++)i=parseInt(obj.options.mergeCells[s][2][t].getAttribute("data-x")),a=parseInt(obj.options.mergeCells[s][2][t].getAttribute("data-y")),obj.options.mergeCells[s][2][t].setAttribute("data-x",i+r[d[e]][1]),obj.options.mergeCells[s][2][t].setAttribute("data-y",a+r[d[e]][2]);obj.options.mergeCells[l]=obj.options.mergeCells[s],delete obj.options.mergeCells[s]}obj.updateFormulas(n),obj.updateMeta(n),obj.refreshSelection(),obj.updateTable()},obj.updateTable=function(){if(obj.options.minSpareRows>0){for(var e=0,t=obj.rows.length-1;t>=0;t--){for(var n=!1,r=0;r<obj.headers.length;r++)obj.options.data[t][r]&&(n=!0);if(n)break;e++}obj.options.minSpareRows-e>0&&obj.insertRow(obj.options.minSpareRows-e)}if(obj.options.minSpareCols>0){var o=0;for(r=obj.headers.length-1;r>=0;r--){for(n=!1,t=0;t<obj.rows.length;t++)obj.options.data[t][r]&&(n=!0);if(n)break;o++}obj.options.minSpareCols-o>0&&obj.insertColumn(obj.options.minSpareCols-o)}if("function"==typeof obj.options.updateTable){for(obj.options.detachForUpdates&&el.removeChild(obj.content),t=0;t<obj.rows.length;t++)for(r=0;r<obj.headers.length;r++)obj.options.updateTable(el,obj.records[t][r],r,t,obj.options.data[t][r],obj.records[t][r].innerText,_jexcel.getColumnNameFromId([r,t]));obj.options.detachForUpdates&&el.insertBefore(obj.content,obj.pagination)}obj.options.footers&&obj.setFooter(),setTimeout((function(){obj.updateCornerPosition()}),0)},obj.isReadOnly=function(e){if(e=obj.getCell(e))return!!e.classList.contains("readonly")},obj.setReadOnly=function(e,t){(e=obj.getCell(e))&&(t?e.classList.add("readonly"):e.classList.remove("readonly"))},obj.showRow=function(e){obj.rows[e].style.display=""},obj.hideRow=function(e){obj.rows[e].style.display="none"},obj.showColumn=function(e){obj.headers[e].style.display="",obj.colgroup[e].style.display="";for(var t=0;t<obj.options.data.length;t++)obj.records[t][e].style.display=""},obj.hideColumn=function(e){obj.headers[e].style.display="none",obj.colgroup[e].style.display="none";for(var t=0;t<obj.options.data.length;t++)obj.records[t][e].style.display="none"},obj.showIndex=function(){obj.table.classList.remove("jexcel_hidden_index")},obj.hideIndex=function(){obj.table.classList.add("jexcel_hidden_index")};var chainLoopProtection=[];obj.updateFormulaChain=function(e,t,n){var r=_jexcel.getColumnNameFromId([e,t]);if(obj.formula[r]&&obj.formula[r].length>0)if(chainLoopProtection[r])obj.records[t][e].innerHTML="#ERROR",obj.formula[r]="";else{chainLoopProtection[r]=!0;for(var o=0;o<obj.formula[r].length;o++){var i=_jexcel.getIdFromColumnName(obj.formula[r][o],!0),a=""+obj.options.data[i[1]][i[0]];"="==a.substr(0,1)?n.push(obj.updateCell(i[0],i[1],a,!0)):Object.keys(obj.formula)[o]=null,obj.updateFormulaChain(i[0],i[1],n)}}chainLoopProtection=[]},obj.updateFormulas=function(e){for(var t=0;t<obj.options.data.length;t++)for(var n=0;n<obj.options.data[0].length;n++)if("="==(s=""+obj.options.data[t][n]).substr(0,1)){var r=obj.updateFormula(s,e);r!=s&&(obj.options.data[t][n]=r)}var o=[],i=Object.keys(obj.formula);for(t=0;t<i.length;t++){var a=i[t],s=obj.formula[a];for(e[a]&&(a=e[a]),o[a]=[],n=0;n<s.length;n++){var l=s[n];e[l]&&(l=e[l]),o[a].push(l)}}obj.formula=o},obj.updateFormula=function(e,t){for(var n=/[A-Z]/,r=/[0-9]/,o="",i=null,a=null,s="",l=0;l<e.length;l++)n.exec(e[l])?(i=1,a=0,s+=e[l]):r.exec(e[l])?(a=i?1:0,s+=e[l]):(i&&a&&(s=t[s]?t[s]:s),o+=s,o+=e[l],i=0,a=0,s="");return s&&(i&&a&&(s=t[s]?t[s]:s),o+=s),o};var secureFormula=function(e){for(var t="",n=0,r=0;r<e.length;r++)'"'==e[r]&&(n=0==n?1:0),t+=1==n?e[r]:e[r].toUpperCase();return t};obj.executeFormula=function(expression,x,y){var formulaResults=[],formulaLoopProtection=[],execute=function execute(expression,x,y){var parentId=_jexcel.getColumnNameFromId([x,y]);if(formulaLoopProtection[parentId])return console.error("Reference loop detected"),"#ERROR";formulaLoopProtection[parentId]=!0;var tokensUpdate=function(e){for(var t=0;t<e.length;t++){var n=[],r=e[t].split(":"),o=_jexcel.getIdFromColumnName(r[0],!0),i=_jexcel.getIdFromColumnName(r[1],!0);if(o[0]<=i[0])var a=o[0],s=i[0];else a=i[0],s=o[0];if(o[1]<=i[1])var l=o[1],u=i[1];else l=i[1],u=o[1];for(var c=l;c<=u;c++)for(var d=a;d<=s;d++)n.push(_jexcel.getColumnNameFromId([d,c]));expression=expression.replace(e[t],n.join(","))}};expression=expression.replace(/\$?([A-Z]+)\$?([0-9]+)/g,"$1$2");var tokens=expression.match(/([A-Z]+[0-9]+)\:([A-Z]+[0-9]+)/g);tokens&&tokens.length&&tokensUpdate(tokens);var evalstring="",tokens=expression.match(/([A-Z]+[0-9]+)/g);if(tokens&&tokens.indexOf(parentId)>-1)return console.error("Self Reference detected"),"#ERROR";if(tokens)for(var i=0;i<tokens.length;i++)if(obj.formula[tokens[i]]||(obj.formula[tokens[i]]=[]),obj.formula[tokens[i]].indexOf(parentId)<0&&obj.formula[tokens[i]].push(parentId),eval("typeof("+tokens[i]+') == "undefined"')){var position=_jexcel.getIdFromColumnName(tokens[i],1);if("undefined"!=typeof obj.options.data[position[1]]&&"undefined"!=typeof obj.options.data[position[1]][position[0]])var value=obj.options.data[position[1]][position[0]];else var value="";if("="==(""+value).substr(0,1)&&(formulaResults[tokens[i]]?value=formulaResults[tokens[i]]:(value=execute(value,position[0],position[1]),formulaResults[tokens[i]]=value)),""==(""+value).trim())evalstring+="var "+tokens[i]+" = null;";else if(value==Number(value)&&1==obj.options.autoCasting)evalstring+="var "+tokens[i]+" = "+Number(value)+";";else{var number=obj.parseNumber(value,position[0]);1==obj.options.autoCasting&&number?evalstring+="var "+tokens[i]+" = "+number+";":evalstring+="var "+tokens[i]+" = '"+value+"';"}}try{evalstring+="function COLUMN() { return parseInt(x) + 1; }; function ROW() { return parseInt(y) + 1; }; function CELL() { return parentId; }; function TABLE() { return obj; }; function VALUE(col, row) { return obj.records[row-1][col-1].innerHTML; }; function THISROWCELL(col) { var id = jexcel.getIdFromColumnName(col+(parseInt(y)+1), true); return obj.records[id[1]][id[0]].innerHTML; }";var res=eval(evalstring+expression.substr(1))}catch(e){var res="#ERROR"}return res};return execute(expression,x,y)},obj.parseNumber=function(e,t){var n=t&&obj.options.columns[t].decimal?obj.options.columns[t].decimal:".",r=""+e;if((r=r.split(n))[0]=r[0].match(/[+-]?[0-9]/g),r[0]&&(r[0]=r[0].join("")),r[1]&&(r[1]=r[1].match(/[0-9]*/g).join("")),r[0]&&Number(r[0])>=0)if(r[1])e=Number(r[0]+"."+r[1]);else var e=Number(r[0]+".00");else e=null;return e},obj.row=function(e){},obj.col=function(e){},obj.up=function(e,t){if(e?obj.selectedCell[3]>0&&obj.up.visible(1,t?0:1):(obj.selectedCell[1]>0&&obj.up.visible(0,t?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),1==obj.options.lazyLoading)if(0==obj.selectedCell[1]||0==obj.selectedCell[3])obj.loadPage(0),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]);else if(obj.loadValidation())obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]);else{var n=parseInt(obj.tbody.firstChild.getAttribute("data-y"));obj.selectedCell[1]-n<30&&(obj.loadUp(),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]))}else if(obj.options.pagination>0){var r=obj.whichPage(obj.selectedCell[3]);r!=obj.pageNumber&&obj.page(r)}obj.updateScroll(1)},obj.up.visible=function(e,t){if(0==e)var n=parseInt(obj.selectedCell[0]),r=parseInt(obj.selectedCell[1]);else n=parseInt(obj.selectedCell[2]),r=parseInt(obj.selectedCell[3]);if(0==t){for(var o=0;o<r;o++)if("none"!=obj.records[o][n].style.display&&"none"!=obj.rows[o].style.display){r=o;break}}else r=obj.up.get(n,r);0==e?(obj.selectedCell[0]=n,obj.selectedCell[1]=r):(obj.selectedCell[2]=n,obj.selectedCell[3]=r)},obj.up.get=function(e,t){e=parseInt(e);for(var n=(t=parseInt(t))-1;n>=0;n--)if("none"!=obj.records[n][e].style.display&&"none"!=obj.rows[n].style.display){if(obj.records[n][e].getAttribute("data-merged")&&obj.records[n][e]==obj.records[t][e])continue;t=n;break}return t},obj.down=function(e,t){if(e?obj.selectedCell[3]<obj.records.length-1&&obj.down.visible(1,t?0:1):(obj.selectedCell[1]<obj.records.length-1&&obj.down.visible(0,t?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),1==obj.options.lazyLoading)obj.selectedCell[1]==obj.records.length-1||obj.selectedCell[3]==obj.records.length-1?(obj.loadPage(-1),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3])):obj.loadValidation()?obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]):parseInt(obj.tbody.lastChild.getAttribute("data-y"))-obj.selectedCell[3]<30&&(obj.loadDown(),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]));else if(obj.options.pagination>0){var n=obj.whichPage(obj.selectedCell[3]);n!=obj.pageNumber&&obj.page(n)}obj.updateScroll(3)},obj.down.visible=function(e,t){if(0==e)var n=parseInt(obj.selectedCell[0]),r=parseInt(obj.selectedCell[1]);else n=parseInt(obj.selectedCell[2]),r=parseInt(obj.selectedCell[3]);if(0==t){for(var o=obj.rows.length-1;o>r;o--)if("none"!=obj.records[o][n].style.display&&"none"!=obj.rows[o].style.display){r=o;break}}else r=obj.down.get(n,r);0==e?(obj.selectedCell[0]=n,obj.selectedCell[1]=r):(obj.selectedCell[2]=n,obj.selectedCell[3]=r)},obj.down.get=function(e,t){e=parseInt(e);for(var n=(t=parseInt(t))+1;n<obj.rows.length;n++)if("none"!=obj.records[n][e].style.display&&"none"!=obj.rows[n].style.display){if(obj.records[n][e].getAttribute("data-merged")&&obj.records[n][e]==obj.records[t][e])continue;t=n;break}return t},obj.right=function(e,t){e?obj.selectedCell[2]<obj.headers.length-1&&obj.right.visible(1,t?0:1):(obj.selectedCell[0]<obj.headers.length-1&&obj.right.visible(0,t?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(2)},obj.right.visible=function(e,t){if(0==e)var n=parseInt(obj.selectedCell[0]),r=parseInt(obj.selectedCell[1]);else n=parseInt(obj.selectedCell[2]),r=parseInt(obj.selectedCell[3]);if(0==t){for(var o=obj.headers.length-1;o>n;o--)if("none"!=obj.records[r][o].style.display){n=o;break}}else n=obj.right.get(n,r);0==e?(obj.selectedCell[0]=n,obj.selectedCell[1]=r):(obj.selectedCell[2]=n,obj.selectedCell[3]=r)},obj.right.get=function(e,t){e=parseInt(e),t=parseInt(t);for(var n=e+1;n<obj.headers.length;n++)if("none"!=obj.records[t][n].style.display){if(obj.records[t][n].getAttribute("data-merged")&&obj.records[t][n]==obj.records[t][e])continue;e=n;break}return e},obj.left=function(e,t){e?obj.selectedCell[2]>0&&obj.left.visible(1,t?0:1):(obj.selectedCell[0]>0&&obj.left.visible(0,t?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(0)},obj.left.visible=function(e,t){if(0==e)var n=parseInt(obj.selectedCell[0]),r=parseInt(obj.selectedCell[1]);else n=parseInt(obj.selectedCell[2]),r=parseInt(obj.selectedCell[3]);if(0==t){for(var o=0;o<n;o++)if("none"!=obj.records[r][o].style.display){n=o;break}}else n=obj.left.get(n,r);0==e?(obj.selectedCell[0]=n,obj.selectedCell[1]=r):(obj.selectedCell[2]=n,obj.selectedCell[3]=r)},obj.left.get=function(e,t){e=parseInt(e),t=parseInt(t);for(var n=e-1;n>=0;n--)if("none"!=obj.records[t][n].style.display){if(obj.records[t][n].getAttribute("data-merged")&&obj.records[t][n]==obj.records[t][e])continue;e=n;break}return e},obj.first=function(e,t){if(e?t?obj.selectedCell[3]=0:obj.left.visible(1,0):(t?obj.selectedCell[1]=0:obj.left.visible(0,0),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),1!=obj.options.lazyLoading||0!=obj.selectedCell[1]&&0!=obj.selectedCell[3]){if(obj.options.pagination>0){var n=obj.whichPage(obj.selectedCell[3]);n!=obj.pageNumber&&obj.page(n)}}else obj.loadPage(0);obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(1)},obj.last=function(e,t){if(e?t?obj.selectedCell[3]=obj.records.length-1:obj.right.visible(1,0):(t?obj.selectedCell[1]=obj.records.length-1:obj.right.visible(0,0),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),1!=obj.options.lazyLoading||obj.selectedCell[1]!=obj.records.length-1&&obj.selectedCell[3]!=obj.records.length-1){if(obj.options.pagination>0){var n=obj.whichPage(obj.selectedCell[3]);n!=obj.pageNumber&&obj.page(n)}}else obj.loadPage(-1);obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(3)},obj.selectAll=function(){obj.selectedCell||(obj.selectedCell=[]),obj.selectedCell[0]=0,obj.selectedCell[1]=0,obj.selectedCell[2]=obj.headers.length-1,obj.selectedCell[3]=obj.records.length-1,obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3])},obj.loadPage=function(e){if(1==obj.options.search&&obj.results)var t=obj.results;else t=obj.rows;var n=100;null!=e&&-1!=e||(e=Math.ceil(t.length/n)-1);var r=e*n,o=e*n+n;o>t.length&&(o=t.length),(r=o-100)<0&&(r=0);for(var i=r;i<o;i++)1==obj.options.search&&obj.results?obj.tbody.appendChild(obj.rows[t[i]]):obj.tbody.appendChild(obj.rows[i]),obj.tbody.children.length>n&&obj.tbody.removeChild(obj.tbody.firstChild)},obj.loadUp=function(){if(1==obj.options.search&&obj.results)var e=obj.results;else e=obj.rows;var t=0;if(e.length>100){var n=parseInt(obj.tbody.firstChild.getAttribute("data-y"));if(1==obj.options.search&&obj.results&&(n=e.indexOf(n)),n>0)for(var r=0;r<30;r++)(n-=1)>-1&&(1==obj.options.search&&obj.results?obj.tbody.insertBefore(obj.rows[e[n]],obj.tbody.firstChild):obj.tbody.insertBefore(obj.rows[n],obj.tbody.firstChild),obj.tbody.children.length>100&&(obj.tbody.removeChild(obj.tbody.lastChild),t=1))}return t},obj.loadDown=function(){if(1==obj.options.search&&obj.results)var e=obj.results;else e=obj.rows;var t=0;if(e.length>100){var n=parseInt(obj.tbody.lastChild.getAttribute("data-y"));if(1==obj.options.search&&obj.results&&(n=e.indexOf(n)),n<obj.rows.length-1)for(var r=0;r<=30;r++)n<e.length&&(1==obj.options.search&&obj.results?obj.tbody.appendChild(obj.rows[e[n]]):obj.tbody.appendChild(obj.rows[n]),obj.tbody.children.length>100&&(obj.tbody.removeChild(obj.tbody.firstChild),t=1)),n+=1}return t},obj.loadValidation=function(){if(obj.selectedCell){var e=parseInt(obj.tbody.firstChild.getAttribute("data-y"))/100,t=parseInt(obj.selectedCell[3]/100),n=parseInt(obj.rows.length/100);if(e!=t&&t<=n&&!Array.prototype.indexOf.call(obj.tbody.children,obj.rows[obj.selectedCell[3]]))return obj.loadPage(t),!0}return!1},obj.resetSearch=function(){obj.searchInput.value="",obj.search(""),obj.results=null},obj.search=function(e){if(e&&(e=e.toLowerCase()),obj.options.filters&&obj.resetFilters(),obj.resetSelection(),obj.pageNumber=0,obj.results=[],e){var t=function(e){-1==obj.results.indexOf(e)&&obj.results.push(e)};obj.options.data.filter((function(n,r){if(function(e,t,n){for(var r=0;r<e.length;r++)if((""+e[r]).toLowerCase().search(t)>=0||(""+obj.records[n][r].innerHTML).toLowerCase().search(t)>=0)return!0;return!1}(n,e,r)){var o=obj.isRowMerged(r);if(o.length)for(var i=0;i<o.length;i++)for(var a=_jexcel.getIdFromColumnName(o[i],!0),s=0;s<obj.options.mergeCells[o[i]][1];s++)t(a[1]+s);else t(r);return!0}return!1}))}else obj.results=null;return obj.updateResult()},obj.updateResult=function(){var e=0,t=0;for(e=1==obj.options.lazyLoading?100:obj.options.pagination>0?obj.options.pagination:obj.results?obj.results.length:obj.rows.length;obj.tbody.firstChild;)obj.tbody.removeChild(obj.tbody.firstChild);for(var n=0;n<obj.rows.length;n++)!obj.results||obj.results.indexOf(n)>-1?(t<e&&(obj.tbody.appendChild(obj.rows[n]),t++),obj.rows[n].style.display=""):obj.rows[n].style.display="none";return obj.options.pagination>0&&obj.updatePagination(),obj.updateCornerPosition(),e},obj.whichPage=function(e){return 1==obj.options.search&&obj.results&&(e=obj.results.indexOf(e)),Math.ceil((parseInt(e)+1)/parseInt(obj.options.pagination))-1},obj.page=function(e){var t=obj.pageNumber;if(1==obj.options.search&&obj.results)var n=obj.results;else n=obj.rows;var r=parseInt(obj.options.pagination);null!=e&&-1!=e||(e=Math.ceil(n.length/r)-1),obj.pageNumber=e;var o=e*r,i=e*r+r;for(i>n.length&&(i=n.length),o<0&&(o=0);obj.tbody.firstChild;)obj.tbody.removeChild(obj.tbody.firstChild);for(var a=o;a<i;a++)1==obj.options.search&&obj.results?obj.tbody.appendChild(obj.rows[n[a]]):obj.tbody.appendChild(obj.rows[a]);obj.options.pagination>0&&obj.updatePagination(),obj.updateCornerPosition(),obj.dispatch("onchangepage",el,e,t)},obj.updatePagination=function(){if(obj.pagination.children[0].innerHTML="",obj.pagination.children[1].innerHTML="",obj.options.pagination){if(1==obj.options.search&&obj.results)var e=obj.results.length;else e=obj.rows.length;if(e){var t=Math.ceil(e/obj.options.pagination);if(obj.pageNumber<6)var n=1,r=t<10?t:10;else t-obj.pageNumber<5?(r=t,(n=t-9)<1&&(n=1)):(n=obj.pageNumber-4,r=obj.pageNumber+5);n>1&&((i=document.createElement("div")).className="jexcel_page",i.innerHTML="<",i.title=1,obj.pagination.children[1].appendChild(i));for(var o=n;o<=r;o++){var i;(i=document.createElement("div")).className="jexcel_page",i.innerHTML=o,obj.pagination.children[1].appendChild(i),obj.pageNumber==o-1&&i.classList.add("jexcel_page_selected")}r<t&&((i=document.createElement("div")).className="jexcel_page",i.innerHTML=">",i.title=t,obj.pagination.children[1].appendChild(i)),obj.pagination.children[0].innerHTML=function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,(function(e,n){return"undefined"!=typeof t[n]?t[n]:e}))}(obj.options.text.showingPage,obj.pageNumber+1,t)}else obj.pagination.children[0].innerHTML=obj.options.text.noRecordsFound}},obj.download=function(e){if(0==obj.options.allowExport)console.error("Export not allowed");else{var t="";t+=obj.copy(!1,obj.options.csvDelimiter,!0,e,!0);var n=new Blob(["\ufeff"+t],{type:"text/csv;charset=utf-8;"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,obj.options.csvFileName+".csv");else{var r=document.createElement("a"),o=URL.createObjectURL(n);r.href=o,r.setAttribute("download",obj.options.csvFileName+".csv"),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r)}}},obj.setHistory=function(e){if(1!=obj.ignoreHistory){var t=++obj.historyIndex;obj.history=obj.history=obj.history.slice(0,t+1),obj.history[t]=e}},obj.copy=function(e,t,n,r,o){t||(t="\t");var i=new RegExp(t,"ig"),a=[],s=[],l=[],u=[],c=[],d=obj.options.data[0].length,h=obj.options.data.length,f="",p=!1,g="",b="",m=0,v=0;if(o&&1==obj.options.includeHeadersOnDownload||!o&&1==obj.options.includeHeadersOnCopy||r){if(obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0){f=obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0]?obj.options.nestedHeaders:[obj.options.nestedHeaders];for(var y=0;y<f.length;y++){for(var j=[],x=0;x<f[y].length;x++){var w=parseInt(f[y][x].colspan);j.push(f[y][x].title);for(var C=0;C<w-1;C++)j.push("")}b+=j.join(t)+"\r\n"}}p=!0}for(obj.style=[],y=0;y<h;y++){for(s=[],l=[],x=0;x<d;x++)if(!e||obj.records[y][x].classList.contains("highlight")){1==p&&a.push(obj.headers[x].innerText);var _=obj.options.data[y][x];if(_.match&&(_.match(i)||_.match(/,/g)||_.match(/\n/)||_.match(/\"/))&&(_='"'+(_=_.replace(new RegExp('"',"g"),'""'))+'"'),s.push(_),"checkbox"==obj.options.columns[x].type||"radio"==obj.options.columns[x].type)var S=_;else(S=1==obj.options.stripHTMLOnCopy?obj.records[y][x].innerText:obj.records[y][x].innerHTML).match&&(S.match(i)||S.match(/,/g)||S.match(/\n/)||S.match(/\"/))&&(S='"'+(S=S.replace(new RegExp('"',"g"),'""'))+'"');l.push(S),f=(f=obj.records[y][x].getAttribute("style")).replace("display: none;",""),obj.style.push(f||"")}s.length&&(p&&(m=s.length,u.push(a.join(t))),u.push(s.join(t))),l.length&&(v++,p&&(c.push(a.join(t)),p=!1),c.push(l.join(t)))}d==m&&h==v&&(g=b);var E=g+u.join("\r\n"),O=g+c.join("\r\n");if(n||(1==obj.options.copyCompatibility?obj.textarea.value=O:obj.textarea.value=E,obj.textarea.select(),document.execCommand("copy")),1==obj.options.copyCompatibility?obj.data=O:obj.data=E,obj.hashString=obj.hash(obj.data),!n){if(obj.removeCopyingSelection(),obj.highlighted)for(x=0;x<obj.highlighted.length;x++)obj.highlighted[x].classList.add("copying"),obj.highlighted[x].classList.contains("highlight-left")&&obj.highlighted[x].classList.add("copying-left"),obj.highlighted[x].classList.contains("highlight-right")&&obj.highlighted[x].classList.add("copying-right"),obj.highlighted[x].classList.contains("highlight-top")&&obj.highlighted[x].classList.add("copying-top"),obj.highlighted[x].classList.contains("highlight-bottom")&&obj.highlighted[x].classList.add("copying-bottom");obj.dispatch("oncopy",el,1==obj.options.copyCompatibility?c:u,obj.hashString)}return obj.data},obj.paste=function(e,t,n){var r=obj.dispatch("onbeforepaste",el,n,e,t);if(!1===r)return!1;r&&(n=r);var o=obj.hash(n),i=o==obj.hashString?obj.style:null;if(1==obj.options.copyCompatibility&&o==obj.hashString&&(n=obj.data),n=obj.parseCSV(n,"\t"),null!=e&&null!=t&&n){for(var a=0,s=0,l=[],u={},c={},d=0,h=parseInt(e),f=parseInt(t),p=null;p=n[s];){for(a=0,h=parseInt(e);null!=p[a];){var g=obj.updateCell(h,f,p[a]);if(l.push(g),obj.updateFormulaChain(h,f,l),i&&i[d]){var b=_jexcel.getColumnNameFromId([h,f]);u[b]=i[d],c[b]=obj.getStyle(b),obj.records[f][h].setAttribute("style",i[d]),d++}null!=p[++a]&&(h>=obj.headers.length-1&&obj.insertColumn(),h=obj.right.get(h,f))}n[++s]&&(f>=obj.rows.length-1&&obj.insertRow(),f=obj.down.get(e,f))}obj.updateSelectionFromCoords(e,t,h,f),obj.setHistory({action:"setValue",records:l,selection:obj.selectedCell,newStyle:u,oldStyle:c}),obj.updateTable(),obj.dispatch("onpaste",el,n),obj.onafterchanges(el,l)}obj.removeCopyingSelection()},obj.removeCopyingSelection=function(){for(var e=document.querySelectorAll(".jexcel .copying"),t=0;t<e.length;t++)e[t].classList.remove("copying"),e[t].classList.remove("copying-left"),e[t].classList.remove("copying-right"),e[t].classList.remove("copying-top"),e[t].classList.remove("copying-bottom")},obj.historyProcessRow=function(e,t){var n=t.insertBefore?t.rowNumber:t.rowNumber+1;if(1==obj.options.search&&obj.results&&obj.results.length!=obj.rows.length&&obj.resetSearch(),1==e){for(var r=t.numOfRows,o=n;o<r+n;o++)obj.rows[o].parentNode.removeChild(obj.rows[o]);obj.records.splice(n,r),obj.options.data.splice(n,r),obj.rows.splice(n,r),obj.conditionalSelectionUpdate(1,n,r+n-1)}else{obj.records=_jexcel.injectArray(obj.records,n,t.rowRecords),obj.options.data=_jexcel.injectArray(obj.options.data,n,t.rowData),obj.rows=_jexcel.injectArray(obj.rows,n,t.rowNode);var i=0;for(o=n;o<t.numOfRows+n;o++)obj.tbody.insertBefore(t.rowNode[i],obj.tbody.children[o]),i++}obj.options.pagination>0&&obj.page(obj.pageNumber),obj.updateTableReferences()},obj.historyProcessColumn=function(e,t){var n=t.insertBefore?t.columnNumber:t.columnNumber+1;if(1==e){var r=t.numOfColumns;obj.options.columns.splice(n,r);for(var o=n;o<r+n;o++)obj.headers[o].parentNode.removeChild(obj.headers[o]),obj.colgroup[o].parentNode.removeChild(obj.colgroup[o]);obj.headers.splice(n,r),obj.colgroup.splice(n,r);for(var i=0;i<t.data.length;i++){for(o=n;o<r+n;o++)obj.records[i][o].parentNode.removeChild(obj.records[i][o]);obj.records[i].splice(n,r),obj.options.data[i].splice(n,r)}if(obj.options.footers)for(i=0;i<obj.options.footers.length;i++)obj.options.footers[i].splice(n,r)}else{obj.options.columns=_jexcel.injectArray(obj.options.columns,n,t.columns),obj.headers=_jexcel.injectArray(obj.headers,n,t.headers),obj.colgroup=_jexcel.injectArray(obj.colgroup,n,t.colgroup);var a=0;for(o=n;o<t.numOfColumns+n;o++)obj.headerContainer.insertBefore(t.headers[a],obj.headerContainer.children[o+1]),obj.colgroupContainer.insertBefore(t.colgroup[a],obj.colgroupContainer.children[o+1]),a++;for(i=0;i<t.data.length;i++)for(obj.options.data[i]=_jexcel.injectArray(obj.options.data[i],n,t.data[i]),obj.records[i]=_jexcel.injectArray(obj.records[i],n,t.records[i]),a=0,o=n;o<t.numOfColumns+n;o++)obj.rows[i].insertBefore(t.records[i][a],obj.rows[i].children[o+1]),a++;if(obj.options.footers)for(i=0;i<obj.options.footers.length;i++)obj.options.footers[i]=_jexcel.injectArray(obj.options.footers[i],n,t.footers[i])}if(obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(i=0;i<obj.options.nestedHeaders.length;i++){if(1==e)var s=parseInt(obj.options.nestedHeaders[i][obj.options.nestedHeaders[i].length-1].colspan)-t.numOfColumns;else s=parseInt(obj.options.nestedHeaders[i][obj.options.nestedHeaders[i].length-1].colspan)+t.numOfColumns;obj.options.nestedHeaders[i][obj.options.nestedHeaders[i].length-1].colspan=s,obj.thead.children[i].children[obj.thead.children[i].children.length-1].setAttribute("colspan",s)}else s=1==e?parseInt(obj.options.nestedHeaders[0].colspan)-t.numOfColumns:parseInt(obj.options.nestedHeaders[0].colspan)+t.numOfColumns,obj.options.nestedHeaders[0].colspan=s,obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute("colspan",s);obj.updateTableReferences()},obj.undo=function(){var e=!!obj.ignoreEvents,t=!!obj.ignoreHistory;obj.ignoreEvents=!0,obj.ignoreHistory=!0;var n=[];if(obj.historyIndex>=0){var r=obj.history[obj.historyIndex--];if("insertRow"==r.action)obj.historyProcessRow(1,r);else if("deleteRow"==r.action)obj.historyProcessRow(0,r);else if("insertColumn"==r.action)obj.historyProcessColumn(1,r);else if("deleteColumn"==r.action)obj.historyProcessColumn(0,r);else if("moveRow"==r.action)obj.moveRow(r.newValue,r.oldValue);else if("moveColumn"==r.action)obj.moveColumn(r.newValue,r.oldValue);else if("setMerge"==r.action)obj.removeMerge(r.column,r.data);else if("setStyle"==r.action)obj.setStyle(r.oldValue,null,null,1);else if("setWidth"==r.action)obj.setWidth(r.column,r.oldValue);else if("setHeight"==r.action)obj.setHeight(r.row,r.oldValue);else if("setHeader"==r.action)obj.setHeader(r.column,r.oldValue);else if("setComments"==r.action)obj.setComments(r.column,r.oldValue[0],r.oldValue[1]);else if("orderBy"==r.action){for(var o=[],i=0;i<r.rows.length;i++)o[r.rows[i]]=i;obj.updateOrderArrow(r.column,r.order?0:1),obj.updateOrder(o)}else if("setValue"==r.action){for(var a=0;a<r.records.length;a++)n.push({x:r.records[a].x,y:r.records[a].y,newValue:r.records[a].oldValue}),r.oldStyle&&obj.resetStyle(r.oldStyle);obj.setValue(n),r.selection&&obj.updateSelectionFromCoords(r.selection[0],r.selection[1],r.selection[2],r.selection[3])}}obj.ignoreEvents=e,obj.ignoreHistory=t,obj.dispatch("onundo",el,r)},obj.redo=function(){var e=!!obj.ignoreEvents,t=!!obj.ignoreHistory;if(obj.ignoreEvents=!0,obj.ignoreHistory=!0,obj.historyIndex<obj.history.length-1){var n=obj.history[++obj.historyIndex];if("insertRow"==n.action)obj.historyProcessRow(0,n);else if("deleteRow"==n.action)obj.historyProcessRow(1,n);else if("insertColumn"==n.action)obj.historyProcessColumn(0,n);else if("deleteColumn"==n.action)obj.historyProcessColumn(1,n);else if("moveRow"==n.action)obj.moveRow(n.oldValue,n.newValue);else if("moveColumn"==n.action)obj.moveColumn(n.oldValue,n.newValue);else if("setMerge"==n.action)obj.setMerge(n.column,n.colspan,n.rowspan,1);else if("setStyle"==n.action)obj.setStyle(n.newValue,null,null,1);else if("setWidth"==n.action)obj.setWidth(n.column,n.newValue);else if("setHeight"==n.action)obj.setHeight(n.row,n.newValue);else if("setHeader"==n.action)obj.setHeader(n.column,n.newValue);else if("setComments"==n.action)obj.setComments(n.column,n.newValue[0],n.newValue[1]);else if("orderBy"==n.action)obj.updateOrderArrow(n.column,n.order),obj.updateOrder(n.rows);else if("setValue"==n.action){obj.setValue(n.records);for(var r=0;r<n.records.length;r++)n.oldStyle&&obj.resetStyle(n.newStyle);n.selection&&obj.updateSelectionFromCoords(n.selection[0],n.selection[1],n.selection[2],n.selection[3])}}obj.ignoreEvents=e,obj.ignoreHistory=t,obj.dispatch("onredo",el,n)},obj.getDropDownValue=function(e,t){var n=[];if(obj.options.columns[e]&&obj.options.columns[e].source){for(var r=[],o=obj.options.columns[e].source,i=0;i<o.length;i++)"object"==typeof o[i]?r[o[i].id]=o[i].name:r[o[i]]=o[i];var a=Array.isArray(t)?t:(""+t).split(";");for(i=0;i<a.length;i++)"object"===typeof a[i]?n.push(r[a[i].id]):r[a[i]]&&n.push(r[a[i]])}else console.error("Invalid column");return n.length>0?n.join("; "):""},obj.parseCSV=function(e,t){9==(e=e.replace(/\r?\n$|\r$|\n$/g,"")).charCodeAt(e.length-1)&&(e+="\0"),t=t||",";for(var n=[],r=!1,o=0,i=0,a=0;a<e.length;a++){var s=e[a],l=e[a+1];n[o]=n[o]||[],n[o][i]=n[o][i]||"",'"'==s&&r&&'"'==l?(n[o][i]+=s,++a):'"'!=s?s!=t||r?"\r"!=s||"\n"!=l||r?"\n"==s&&!r||"\r"==s&&!r?(++o,i=0):n[o][i]+=s:(++o,i=0,++a):++i:r=!r}return n},obj.hash=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n},obj.onafterchanges=function(e,t){obj.dispatch("onafterchanges",e,t)},obj.destroy=function(){_jexcel.destroy(el)},obj.init=function(){_jexcel.current=obj,"function"==typeof _jexcel.build&&(obj.options.root?_jexcel.build(obj.options.root):(_jexcel.build(document),_jexcel.build=null)),el.setAttribute("tabindex",1),el.addEventListener("focus",(function(e){_jexcel.current&&!obj.selectedCell&&(obj.updateSelectionFromCoords(0,0,0,0),obj.left())})),obj.options.csv?(1==obj.options.loadingSpin&&jSuites.loading.show(),jSuites.ajax({url:obj.options.csv,method:obj.options.method,data:obj.options.requestVariables,dataType:"text",success:function(e){var t=obj.parseCSV(e,obj.options.csvDelimiter);if(1==obj.options.csvHeaders&&t.length>0)for(var n=t.shift(),r=0;r<n.length;r++)obj.options.columns[r]||(obj.options.columns[r]={type:"text",align:obj.options.defaultColAlign,width:obj.options.defaultColWidth}),"undefined"===typeof obj.options.columns[r].title&&(obj.options.columns[r].title=n[r]);obj.options.data=t,obj.prepareTable(),1==obj.options.loadingSpin&&jSuites.loading.hide()}})):obj.options.url?(1==obj.options.loadingSpin&&jSuites.loading.show(),jSuites.ajax({url:obj.options.url,method:obj.options.method,data:obj.options.requestVariables,dataType:"json",success:function(e){obj.options.data=e.data?e.data:e,obj.prepareTable(),1==obj.options.loadingSpin&&jSuites.loading.hide()}})):obj.prepareTable()},options&&null!=options.contextMenu?obj.options.contextMenu=options.contextMenu:obj.options.contextMenu=function(e,t,n,r){var o=[];if(null==n)1==obj.options.allowInsertColumn&&o.push({title:obj.options.text.insertANewColumnBefore,onclick:function(){obj.insertColumn(1,parseInt(t),1)}}),1==obj.options.allowInsertColumn&&o.push({title:obj.options.text.insertANewColumnAfter,onclick:function(){obj.insertColumn(1,parseInt(t),0)}}),1==obj.options.allowDeleteColumn&&o.push({title:obj.options.text.deleteSelectedColumns,onclick:function(){obj.deleteColumn(obj.getSelectedColumns().length?void 0:parseInt(t))}}),1==obj.options.allowRenameColumn&&o.push({title:obj.options.text.renameThisColumn,onclick:function(){obj.setHeader(t)}}),1==obj.options.columnSorting&&(o.push({type:"line"}),o.push({title:obj.options.text.orderAscending,onclick:function(){obj.orderBy(t,0)}}),o.push({title:obj.options.text.orderDescending,onclick:function(){obj.orderBy(t,1)}}));else if(1==obj.options.allowInsertRow&&(o.push({title:obj.options.text.insertANewRowBefore,onclick:function(){obj.insertRow(1,parseInt(n),1)}}),o.push({title:obj.options.text.insertANewRowAfter,onclick:function(){obj.insertRow(1,parseInt(n))}})),1==obj.options.allowDeleteRow&&o.push({title:obj.options.text.deleteSelectedRows,onclick:function(){obj.deleteRow(obj.getSelectedRows().length?void 0:parseInt(n))}}),t&&1==obj.options.allowComments){o.push({type:"line"});var i=obj.records[n][t].getAttribute("title")||"";o.push({title:i?obj.options.text.editComments:obj.options.text.addComments,onclick:function(){var e=prompt(obj.options.text.comments,i);e&&obj.setComments([t,n],e)}}),i&&o.push({title:obj.options.text.clearComments,onclick:function(){obj.setComments([t,n],"")}})}return o.push({type:"line"}),o.push({title:obj.options.text.copy,shortcut:"Ctrl + C",onclick:function(){obj.copy(!0)}}),navigator&&navigator.clipboard&&o.push({title:obj.options.text.paste,shortcut:"Ctrl + V",onclick:function(){obj.selectedCell&&navigator.clipboard.readText().then((function(e){e&&_jexcel.current.paste(obj.selectedCell[0],obj.selectedCell[1],e)}))}}),obj.options.allowExport&&o.push({title:obj.options.text.saveAs,shortcut:"Ctrl + S",onclick:function(){obj.download()}}),obj.options.about&&o.push({title:obj.options.text.about,onclick:function(){!0===obj.options.about?alert(Version().print()):alert(obj.options.about)}}),o},obj.scrollControls=function(e){obj.wheelControls(),obj.options.freezeColumns>0&&obj.content.scrollLeft!=scrollLeft&&obj.updateFreezePosition(),1!=obj.options.lazyLoading&&1!=obj.options.tableOverflow||obj.edition&&"jdropdown"!=e.target.className.substr(0,9)&&obj.closeEditor(obj.edition[0],!0)},obj.wheelControls=function(e){1==obj.options.lazyLoading&&null==_jexcel.timeControlLoading&&(_jexcel.timeControlLoading=setTimeout((function(){obj.content.scrollTop+obj.content.clientHeight>=obj.content.scrollHeight-10?obj.loadDown()&&(obj.content.scrollTop+obj.content.clientHeight>obj.content.scrollHeight-10&&(obj.content.scrollTop=obj.content.scrollTop-obj.content.clientHeight),obj.updateCornerPosition()):obj.content.scrollTop<=obj.content.clientHeight&&obj.loadUp()&&(obj.content.scrollTop<10&&(obj.content.scrollTop=obj.content.scrollTop+obj.content.clientHeight),obj.updateCornerPosition()),_jexcel.timeControlLoading=null}),100))},obj.getFreezeWidth=function(){var e=0;if(obj.options.freezeColumns>0)for(var t=0;t<obj.options.freezeColumns;t++)e+=parseInt(obj.options.columns[t].width);return e};var scrollLeft=0;return obj.updateFreezePosition=function(){var e=0;if((scrollLeft=obj.content.scrollLeft)>50)for(var t=0;t<obj.options.freezeColumns;t++){t>0&&(e+=parseInt(obj.options.columns[t-1].width)),obj.headers[t].classList.add("jexcel_freezed"),obj.headers[t].style.left=e+"px";for(var n=0;n<obj.rows.length;n++)if(obj.rows[n]&&obj.records[n][t]){var r=scrollLeft+(t>0?obj.records[n][t-1].style.width:0)-51+"px";obj.records[n][t].classList.add("jexcel_freezed"),obj.records[n][t].style.left=r}}else for(t=0;t<obj.options.freezeColumns;t++)for(obj.headers[t].classList.remove("jexcel_freezed"),obj.headers[t].style.left="",n=0;n<obj.rows.length;n++)obj.records[n][t]&&(obj.records[n][t].classList.remove("jexcel_freezed"),obj.records[n][t].style.left="");obj.updateCornerPosition()},el.addEventListener("DOMMouseScroll",obj.wheelControls),el.addEventListener("mousewheel",obj.wheelControls),el.jexcel=obj,el.jspreadsheet=obj,obj.init(),obj};_jexcel.version=Version,_jexcel.current=null,_jexcel.timeControl=null,_jexcel.timeControlLoading=null,_jexcel.destroy=function(e,t){if(e.jexcel){var n=e.jexcel.options.root?e.jexcel.options.root:document;e.removeEventListener("DOMMouseScroll",e.jexcel.scrollControls),e.removeEventListener("mousewheel",e.jexcel.scrollControls),e.jexcel=null,e.innerHTML="",t&&(n.removeEventListener("mouseup",_jexcel.mouseUpControls),n.removeEventListener("mousedown",_jexcel.mouseDownControls),n.removeEventListener("mousemove",_jexcel.mouseMoveControls),n.removeEventListener("mouseover",_jexcel.mouseOverControls),n.removeEventListener("dblclick",_jexcel.doubleClickControls),n.removeEventListener("paste",_jexcel.pasteControls),n.removeEventListener("contextmenu",_jexcel.contextMenuControls),n.removeEventListener("touchstart",_jexcel.touchStartControls),n.removeEventListener("touchend",_jexcel.touchEndControls),n.removeEventListener("touchcancel",_jexcel.touchEndControls),document.removeEventListener("keydown",_jexcel.keyDownControls),_jexcel=null)}},_jexcel.build=function(e){e.addEventListener("mouseup",_jexcel.mouseUpControls),e.addEventListener("mousedown",_jexcel.mouseDownControls),e.addEventListener("mousemove",_jexcel.mouseMoveControls),e.addEventListener("mouseover",_jexcel.mouseOverControls),e.addEventListener("dblclick",_jexcel.doubleClickControls),e.addEventListener("paste",_jexcel.pasteControls),e.addEventListener("contextmenu",_jexcel.contextMenuControls),e.addEventListener("touchstart",_jexcel.touchStartControls),e.addEventListener("touchend",_jexcel.touchEndControls),e.addEventListener("touchcancel",_jexcel.touchEndControls),e.addEventListener("touchmove",_jexcel.touchEndControls),document.addEventListener("keydown",_jexcel.keyDownControls)},_jexcel.keyDownControls=function(e){if(_jexcel.current){if(_jexcel.current.edition)if(27==e.which)_jexcel.current.edition&&_jexcel.current.closeEditor(_jexcel.current.edition[0],!1),e.preventDefault();else if(13==e.which)if("calendar"==_jexcel.current.options.columns[_jexcel.current.edition[2]].type)_jexcel.current.closeEditor(_jexcel.current.edition[0],!0);else if("dropdown"==_jexcel.current.options.columns[_jexcel.current.edition[2]].type||"autocomplete"==_jexcel.current.options.columns[_jexcel.current.edition[2]].type);else if((1==_jexcel.current.options.wordWrap||1==_jexcel.current.options.columns[_jexcel.current.edition[2]].wordWrap||_jexcel.current.options.data[_jexcel.current.edition[3]][_jexcel.current.edition[2]].length>200)&&e.altKey){var t=_jexcel.current.edition[0].children[0],n=_jexcel.current.edition[0].children[0].value,r=t.selectionStart;n=n.slice(0,r)+"\n"+n.slice(r),t.value=n,t.focus(),t.selectionStart=r+1,t.selectionEnd=r+1}else _jexcel.current.edition[0].children[0].blur();else 9==e.which&&("calendar"==_jexcel.current.options.columns[_jexcel.current.edition[2]].type?_jexcel.current.closeEditor(_jexcel.current.edition[0],!0):_jexcel.current.edition[0].children[0].blur());if(!_jexcel.current.edition&&_jexcel.current.selectedCell)if(37==e.which)_jexcel.current.left(e.shiftKey,e.ctrlKey),e.preventDefault();else if(39==e.which)_jexcel.current.right(e.shiftKey,e.ctrlKey),e.preventDefault();else if(38==e.which)_jexcel.current.up(e.shiftKey,e.ctrlKey),e.preventDefault();else if(40==e.which)_jexcel.current.down(e.shiftKey,e.ctrlKey),e.preventDefault();else if(36==e.which)_jexcel.current.first(e.shiftKey,e.ctrlKey),e.preventDefault();else if(35==e.which)_jexcel.current.last(e.shiftKey,e.ctrlKey),e.preventDefault();else if(32==e.which)1==_jexcel.current.options.editable&&_jexcel.current.setCheckRadioValue(),e.preventDefault();else if(46==e.which)1==_jexcel.current.options.editable&&(_jexcel.current.selectedRow?1==_jexcel.current.options.allowDeleteRow&&confirm(_jexcel.current.options.text.areYouSureToDeleteTheSelectedRows)&&_jexcel.current.deleteRow():_jexcel.current.selectedHeader?1==_jexcel.current.options.allowDeleteColumn&&confirm(_jexcel.current.options.text.areYouSureToDeleteTheSelectedColumns)&&_jexcel.current.deleteColumn():_jexcel.current.setValue(_jexcel.current.highlighted,""));else if(13==e.which)e.shiftKey?_jexcel.current.up():(1==_jexcel.current.options.allowInsertRow&&1==_jexcel.current.options.allowManualInsertRow&&_jexcel.current.selectedCell[1]==_jexcel.current.options.data.length-1&&_jexcel.current.insertRow(),_jexcel.current.down()),e.preventDefault();else if(9==e.which)e.shiftKey?_jexcel.current.left():(1==_jexcel.current.options.allowInsertColumn&&1==_jexcel.current.options.allowManualInsertColumn&&_jexcel.current.selectedCell[0]==_jexcel.current.options.data[0].length-1&&_jexcel.current.insertColumn(),_jexcel.current.right()),e.preventDefault();else if(!e.ctrlKey&&!e.metaKey||e.shiftKey){if(_jexcel.current.selectedCell&&1==_jexcel.current.options.editable){var o=_jexcel.current.selectedCell[1],i=_jexcel.current.selectedCell[0];"readonly"!=_jexcel.current.options.columns[i].type&&(32==e.keyCode?"checkbox"==_jexcel.current.options.columns[i].type||"radio"==_jexcel.current.options.columns[i].type?e.preventDefault():_jexcel.current.openEditor(_jexcel.current.records[o][i],!0):113==e.keyCode?_jexcel.current.openEditor(_jexcel.current.records[o][i],!1):(8==e.keyCode||e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=111||e.keyCode>=187&&e.keyCode<=190||(String.fromCharCode(e.keyCode)==e.key||String.fromCharCode(e.keyCode).toLowerCase()==e.key.toLowerCase())&&_jexcel.validLetter(String.fromCharCode(e.keyCode)))&&(_jexcel.current.openEditor(_jexcel.current.records[o][i],!0),"calendar"==_jexcel.current.options.columns[i].type&&e.preventDefault()))}}else 65==e.which?(_jexcel.current.selectAll(),e.preventDefault()):83==e.which?(_jexcel.current.download(),e.preventDefault()):89==e.which?(_jexcel.current.redo(),e.preventDefault()):90==e.which?(_jexcel.current.undo(),e.preventDefault()):67==e.which?(_jexcel.current.copy(!0),e.preventDefault()):88==e.which?(1==_jexcel.current.options.editable?_jexcel.cutControls():_jexcel.copyControls(),e.preventDefault()):86==e.which&&_jexcel.pasteControls();else e.target.classList.contains("jexcel_search")&&(_jexcel.timeControl&&clearTimeout(_jexcel.timeControl),_jexcel.timeControl=setTimeout((function(){_jexcel.current.search(e.target.value)}),200))}},_jexcel.isMouseAction=!1,_jexcel.mouseDownControls=function(e){if((e=e||window.event).buttons)var t=e.buttons;else t=e.button?e.button:e.which;var n=_jexcel.getElement(e.target);if(n[0]?_jexcel.current!=n[0].jexcel&&(_jexcel.current&&(_jexcel.current.edition&&_jexcel.current.closeEditor(_jexcel.current.edition[0],!0),_jexcel.current.resetSelection()),_jexcel.current=n[0].jexcel):_jexcel.current&&(_jexcel.current.edition&&_jexcel.current.closeEditor(_jexcel.current.edition[0],!0),_jexcel.current.resetSelection(!0),_jexcel.current=null),_jexcel.current&&1==t){if(e.target.classList.contains("jexcel_selectall"))_jexcel.current&&_jexcel.current.selectAll();else if(e.target.classList.contains("jexcel_corner"))1==_jexcel.current.options.editable&&(_jexcel.current.selectedCorner=!0);else{if(1==n[1]){if(h=e.target.getAttribute("data-x")){var r=e.target.getBoundingClientRect();if(1==_jexcel.current.options.columnResize&&r.width-e.offsetX<6){_jexcel.current.resizing={mousePosition:e.pageX,column:h,width:r.width},_jexcel.current.headers[h].classList.add("resizing");for(var o=0;o<_jexcel.current.records.length;o++)_jexcel.current.records[o][h]&&_jexcel.current.records[o][h].classList.add("resizing")}else if(1==_jexcel.current.options.columnDrag&&r.height-e.offsetY<6)if(_jexcel.current.isColMerged(h).length)console.error("Jspreadsheet: This column is part of a merged cell.");else for(_jexcel.current.resetSelection(),_jexcel.current.dragging={element:e.target,column:h,destination:h},_jexcel.current.headers[h].classList.add("dragging"),o=0;o<_jexcel.current.records.length;o++)_jexcel.current.records[o][h]&&_jexcel.current.records[o][h].classList.add("dragging");else{if(_jexcel.current.selectedHeader&&(e.shiftKey||e.ctrlKey))var i=_jexcel.current.selectedHeader,a=h;else _jexcel.current.selectedHeader==h&&1==_jexcel.current.options.allowRenameColumn&&(_jexcel.timeControl=setTimeout((function(){_jexcel.current.setHeader(h)}),800)),_jexcel.current.selectedHeader=h,i=h,a=h;_jexcel.current.updateSelectionFromCoords(i,0,a,_jexcel.current.options.data.length-1)}}else if(e.target.parentNode.classList.contains("jexcel_nested")){if(e.target.getAttribute("data-column"))var s=e.target.getAttribute("data-column").split(","),l=parseInt(s[0]),u=parseInt(s[s.length-1]);else l=0,u=_jexcel.current.options.columns.length-1;_jexcel.current.updateSelectionFromCoords(l,0,u,_jexcel.current.options.data.length-1)}}else _jexcel.current.selectedHeader=!1;if(2==n[1]){var c=e.target.getAttribute("data-y");if(e.target.classList.contains("jexcel_row"))r=e.target.getBoundingClientRect(),1==_jexcel.current.options.rowResize&&r.height-e.offsetY<6?(_jexcel.current.resizing={element:e.target.parentNode,mousePosition:e.pageY,row:c,height:r.height},e.target.parentNode.classList.add("resizing")):1==_jexcel.current.options.rowDrag&&r.width-e.offsetX<6?_jexcel.current.isRowMerged(c).length?console.error("Jspreadsheet: This row is part of a merged cell"):1==_jexcel.current.options.search&&_jexcel.current.results?console.error("Jspreadsheet: Please clear your search before perform this action"):(_jexcel.current.resetSelection(),_jexcel.current.dragging={element:e.target.parentNode,row:c,destination:c},e.target.parentNode.classList.add("dragging")):(_jexcel.current.selectedRow&&(e.shiftKey||e.ctrlKey)?(i=_jexcel.current.selectedRow,a=c):(_jexcel.current.selectedRow=c,i=c,a=c),_jexcel.current.updateSelectionFromCoords(0,i,_jexcel.current.options.data[0].length-1,a));else if(e.target.classList.contains("jclose")&&e.target.clientWidth-e.offsetX<50&&e.offsetY<50)_jexcel.current.closeEditor(_jexcel.current.edition[0],!0);else{var d=function e(t){var n=t.getAttribute("data-x"),r=t.getAttribute("data-y");return n&&r?[n,r]:t.parentNode?e(t.parentNode):void 0}(e.target);if(d){var h=d[0];c=d[1],_jexcel.current.edition&&(_jexcel.current.edition[2]==h&&_jexcel.current.edition[3]==c||_jexcel.current.closeEditor(_jexcel.current.edition[0],!0)),_jexcel.current.edition||(e.shiftKey?_jexcel.current.updateSelectionFromCoords(_jexcel.current.selectedCell[0],_jexcel.current.selectedCell[1],h,c):_jexcel.current.updateSelectionFromCoords(h,c)),_jexcel.current.selectedHeader=null,_jexcel.current.selectedRow=null}}}else _jexcel.current.selectedRow=!1;e.target.classList.contains("jexcel_page")&&("<"==e.target.innerText?_jexcel.current.page(0):">"==e.target.innerText?_jexcel.current.page(e.target.getAttribute("title")-1):_jexcel.current.page(e.target.innerText-1))}_jexcel.current.edition?_jexcel.isMouseAction=!1:_jexcel.isMouseAction=!0}else _jexcel.isMouseAction=!1},_jexcel.mouseUpControls=function(e){if(_jexcel.current)if(_jexcel.current.resizing){if(_jexcel.current.resizing.column){var t=_jexcel.current.colgroup[_jexcel.current.resizing.column].getAttribute("width"),n=_jexcel.current.getSelectedColumns();if(n.length>1){for(var r=[],o=0;o<n.length;o++)r.push(parseInt(_jexcel.current.colgroup[n[o]].getAttribute("width")));r[n.indexOf(parseInt(_jexcel.current.resizing.column))]=_jexcel.current.resizing.width,_jexcel.current.setWidth(n,t,r)}else _jexcel.current.setWidth(_jexcel.current.resizing.column,t,_jexcel.current.resizing.width);_jexcel.current.headers[_jexcel.current.resizing.column].classList.remove("resizing");for(var i=0;i<_jexcel.current.records.length;i++)_jexcel.current.records[i][_jexcel.current.resizing.column]&&_jexcel.current.records[i][_jexcel.current.resizing.column].classList.remove("resizing")}else{_jexcel.current.rows[_jexcel.current.resizing.row].children[0].classList.remove("resizing");var a=_jexcel.current.rows[_jexcel.current.resizing.row].getAttribute("height");_jexcel.current.setHeight(_jexcel.current.resizing.row,a,_jexcel.current.resizing.height),_jexcel.current.resizing.element.classList.remove("resizing")}_jexcel.current.resizing=null}else if(_jexcel.current.dragging){if(_jexcel.current.dragging){if(_jexcel.current.dragging.column){var s=e.target.getAttribute("data-x");for(_jexcel.current.headers[_jexcel.current.dragging.column].classList.remove("dragging"),i=0;i<_jexcel.current.rows.length;i++)_jexcel.current.records[i][_jexcel.current.dragging.column]&&_jexcel.current.records[i][_jexcel.current.dragging.column].classList.remove("dragging");for(o=0;o<_jexcel.current.headers.length;o++)_jexcel.current.headers[o].classList.remove("dragging-left"),_jexcel.current.headers[o].classList.remove("dragging-right");s&&_jexcel.current.dragging.column!=_jexcel.current.dragging.destination&&_jexcel.current.moveColumn(_jexcel.current.dragging.column,_jexcel.current.dragging.destination)}else{if(_jexcel.current.dragging.element.nextSibling){var l=parseInt(_jexcel.current.dragging.element.nextSibling.getAttribute("data-y"));_jexcel.current.dragging.row<l&&(l-=1)}else l=parseInt(_jexcel.current.dragging.element.previousSibling.getAttribute("data-y"));_jexcel.current.dragging.row!=_jexcel.current.dragging.destination&&_jexcel.current.moveRow(_jexcel.current.dragging.row,l,!0),_jexcel.current.dragging.element.classList.remove("dragging")}_jexcel.current.dragging=null}}else _jexcel.current.selectedCorner&&(_jexcel.current.selectedCorner=!1,_jexcel.current.selection.length>0&&(_jexcel.current.copyData(_jexcel.current.selection[0],_jexcel.current.selection[_jexcel.current.selection.length-1]),_jexcel.current.removeCopySelection()));_jexcel.timeControl&&(clearTimeout(_jexcel.timeControl),_jexcel.timeControl=null),_jexcel.isMouseAction=!1},_jexcel.mouseMoveControls=function(e){if((e=e||window.event).buttons)var t=e.buttons;else t=e.button?e.button:e.which;if(t||(_jexcel.isMouseAction=!1),_jexcel.current)if(1==_jexcel.isMouseAction){if(_jexcel.current.resizing)if(_jexcel.current.resizing.column){var n=e.pageX-_jexcel.current.resizing.mousePosition;if(_jexcel.current.resizing.width+n>0){var r=_jexcel.current.resizing.width+n;_jexcel.current.colgroup[_jexcel.current.resizing.column].setAttribute("width",r),_jexcel.current.updateCornerPosition()}}else{var o=e.pageY-_jexcel.current.resizing.mousePosition;if(_jexcel.current.resizing.height+o>0){var i=_jexcel.current.resizing.height+o;_jexcel.current.rows[_jexcel.current.resizing.row].setAttribute("height",i),_jexcel.current.updateCornerPosition()}}}else{var a=e.target.getAttribute("data-x"),s=e.target.getAttribute("data-y"),l=e.target.getBoundingClientRect();_jexcel.current.cursor&&(_jexcel.current.cursor.style.cursor="",_jexcel.current.cursor=null),e.target.parentNode.parentNode&&e.target.parentNode.parentNode.className&&(e.target.parentNode.parentNode.classList.contains("resizable")&&(e.target&&a&&!s&&l.width-(e.clientX-l.left)<6?(_jexcel.current.cursor=e.target,_jexcel.current.cursor.style.cursor="col-resize"):e.target&&!a&&s&&l.height-(e.clientY-l.top)<6&&(_jexcel.current.cursor=e.target,_jexcel.current.cursor.style.cursor="row-resize")),e.target.parentNode.parentNode.classList.contains("draggable")&&(e.target&&!a&&s&&l.width-(e.clientX-l.left)<6||e.target&&a&&!s&&l.height-(e.clientY-l.top)<6)&&(_jexcel.current.cursor=e.target,_jexcel.current.cursor.style.cursor="move"))}},_jexcel.mouseOverControls=function(e){if((e=e||window.event).buttons)var t=e.buttons;else t=e.button?e.button:e.which;if(t||(_jexcel.isMouseAction=!1),_jexcel.current&&1==_jexcel.isMouseAction){var n=_jexcel.getElement(e.target);if(n[0]){if(_jexcel.current!=n[0].jexcel&&_jexcel.current)return!1;var r=e.target.getAttribute("data-x"),o=e.target.getAttribute("data-y");if(_jexcel.current.dragging){if(_jexcel.current.dragging.column){if(r)if(_jexcel.current.isColMerged(r).length)console.error("Jspreadsheet: This column is part of a merged cell.");else{for(var i=0;i<_jexcel.current.headers.length;i++)_jexcel.current.headers[i].classList.remove("dragging-left"),_jexcel.current.headers[i].classList.remove("dragging-right");_jexcel.current.dragging.column==r?_jexcel.current.dragging.destination=parseInt(r):e.target.clientWidth/2>e.offsetX?(_jexcel.current.dragging.column<r?_jexcel.current.dragging.destination=parseInt(r)-1:_jexcel.current.dragging.destination=parseInt(r),_jexcel.current.headers[r].classList.add("dragging-left")):(_jexcel.current.dragging.column<r?_jexcel.current.dragging.destination=parseInt(r):_jexcel.current.dragging.destination=parseInt(r)+1,_jexcel.current.headers[r].classList.add("dragging-right"))}}else if(o)if(_jexcel.current.isRowMerged(o).length)console.error("Jspreadsheet: This row is part of a merged cell.");else{var a=e.target.clientHeight/2>e.offsetY?e.target.parentNode.nextSibling:e.target.parentNode;_jexcel.current.dragging.element!=a&&(e.target.parentNode.parentNode.insertBefore(_jexcel.current.dragging.element,a),_jexcel.current.dragging.destination=Array.prototype.indexOf.call(_jexcel.current.dragging.element.parentNode.children,_jexcel.current.dragging.element))}}else if(_jexcel.current.resizing);else{if(1==n[1]&&_jexcel.current.selectedHeader){r=e.target.getAttribute("data-x");var s=_jexcel.current.selectedHeader,l=r;_jexcel.current.updateSelectionFromCoords(s,0,l,_jexcel.current.options.data.length-1)}2==n[1]&&(e.target.classList.contains("jexcel_row")?_jexcel.current.selectedRow&&(s=_jexcel.current.selectedRow,l=o,_jexcel.current.updateSelectionFromCoords(0,s,_jexcel.current.options.data[0].length-1,l)):_jexcel.current.edition||r&&o&&(_jexcel.current.selectedCorner?_jexcel.current.updateCopySelection(r,o):_jexcel.current.selectedCell&&_jexcel.current.updateSelectionFromCoords(_jexcel.current.selectedCell[0],_jexcel.current.selectedCell[1],r,o)))}}}_jexcel.timeControl&&(clearTimeout(_jexcel.timeControl),_jexcel.timeControl=null)},_jexcel.doubleClickControls=function(e){if(_jexcel.current)if(e.target.classList.contains("jexcel_corner")){if(_jexcel.current.highlighted.length>0){var t=_jexcel.current.highlighted[0].getAttribute("data-x"),n=parseInt(_jexcel.current.highlighted[_jexcel.current.highlighted.length-1].getAttribute("data-y"))+1,r=_jexcel.current.highlighted[_jexcel.current.highlighted.length-1].getAttribute("data-x"),o=_jexcel.current.records.length-1;_jexcel.current.copyData(_jexcel.current.records[n][t],_jexcel.current.records[o][r])}}else if(e.target.classList.contains("jexcel_column_filter")){var i=e.target.getAttribute("data-x");_jexcel.current.openFilter(i)}else{var a=_jexcel.getElement(e.target);if(1==a[1]&&1==_jexcel.current.options.columnSorting&&(i=e.target.getAttribute("data-x"))&&_jexcel.current.orderBy(i),2==a[1]&&1==_jexcel.current.options.editable&&!_jexcel.current.edition){var s=function e(t){if(t.parentNode){var n=t.getAttribute("data-x"),r=t.getAttribute("data-y");return n&&r?t:e(t.parentNode)}}(e.target);s&&s.classList.contains("highlight")&&_jexcel.current.openEditor(s)}}},_jexcel.copyControls=function(e){_jexcel.current&&_jexcel.copyControls.enabled&&(_jexcel.current.edition||_jexcel.current.copy(!0))},_jexcel.cutControls=function(e){_jexcel.current&&(_jexcel.current.edition||(_jexcel.current.copy(!0),1==_jexcel.current.options.editable&&_jexcel.current.setValue(_jexcel.current.highlighted,"")))},_jexcel.pasteControls=function(e){_jexcel.current&&_jexcel.current.selectedCell&&(_jexcel.current.edition||1==_jexcel.current.options.editable&&(e&&e.clipboardData?(_jexcel.current.paste(_jexcel.current.selectedCell[0],_jexcel.current.selectedCell[1],e.clipboardData.getData("text")),e.preventDefault()):window.clipboardData&&_jexcel.current.paste(_jexcel.current.selectedCell[0],_jexcel.current.selectedCell[1],window.clipboardData.getData("text"))))},_jexcel.contextMenuControls=function(e){if("buttons"in(e=e||window.event)?e.buttons:e.which||e.button,_jexcel.current)if(_jexcel.current.edition)e.preventDefault();else if(_jexcel.current.options.contextMenu&&(_jexcel.current.contextMenu.contextmenu.close(),_jexcel.current)){var t=e.target.getAttribute("data-x"),n=e.target.getAttribute("data-y");if(t||n){(t<parseInt(_jexcel.current.selectedCell[0])||t>parseInt(_jexcel.current.selectedCell[2])||n<parseInt(_jexcel.current.selectedCell[1])||n>parseInt(_jexcel.current.selectedCell[3]))&&_jexcel.current.updateSelectionFromCoords(t,n,t,n);var r=_jexcel.current.options.contextMenu(_jexcel.current,t,n,e);_jexcel.current.contextMenu.contextmenu.open(e,r),e.preventDefault()}}},_jexcel.touchStartControls=function(e){var t=_jexcel.getElement(e.target);if(t[0]?_jexcel.current!=t[0].jexcel&&(_jexcel.current&&_jexcel.current.resetSelection(),_jexcel.current=t[0].jexcel):_jexcel.current&&(_jexcel.current.resetSelection(),_jexcel.current=null),_jexcel.current&&!_jexcel.current.edition){var n=e.target.getAttribute("data-x"),r=e.target.getAttribute("data-y");n&&r&&(_jexcel.current.updateSelectionFromCoords(n,r),_jexcel.timeControl=setTimeout((function(){"color"==_jexcel.current.options.columns[n].type?_jexcel.tmpElement=null:_jexcel.tmpElement=e.target,_jexcel.current.openEditor(e.target,!1,e)}),500))}},_jexcel.touchEndControls=function(e){_jexcel.timeControl&&(clearTimeout(_jexcel.timeControl),_jexcel.timeControl=null,_jexcel.tmpElement&&"INPUT"==_jexcel.tmpElement.children[0].tagName&&_jexcel.tmpElement.children[0].focus(),_jexcel.tmpElement=null)},_jexcel.tabs=function(e,t){var n=[];if(e.classList.contains("jexcel_tabs"))o=e.children[0],i=e.children[1];else{e.innerHTML="",e.classList.add("jexcel_tabs"),e.jexcel=[];var r=document.createElement("div"),o=e.appendChild(r),i=(r=document.createElement("div"),e.appendChild(r))}for(var a=[],s=[],l=0;l<t.length;l++){a[l]=document.createElement("div"),a[l].classList.add("jexcel_tab");var u=_jexcel(a[l],t[l]);i.appendChild(a[l]),n[l]=e.jexcel.push(u),s[l]=document.createElement("div"),s[l].classList.add("jexcel_tab_link"),s[l].setAttribute("data-spreadsheet",e.jexcel.length-1),s[l].innerHTML=t[l].sheetName,s[l].onclick=function(){for(var e=0;e<o.children.length;e++)o.children[e].classList.remove("selected"),i.children[e].style.display="none";var t=this.getAttribute("data-spreadsheet");i.children[t].style.display="block",o.children[t].classList.add("selected")},o.appendChild(s[l])}for(var c=0;c<o.children.length;c++)o.children[c].classList.remove("selected"),i.children[c].style.display="none";return o.children[o.children.length-1].classList.add("selected"),i.children[o.children.length-1].style.display="block",n},_jexcel.createTabs=_jexcel.tabs,_jexcel.fromSpreadsheet=function(e,t){var n,r=function(e){var t=[];return e.SheetNames.forEach((function(n){var r={rows:[],columns:[],data:[],style:{}};if(r.sheetName=n,(h=e.Sheets[n]["!cols"])&&h.length)for(var o=0;o<h.length;o++)r.columns[o]={},h[o]&&h[o].wpx&&(r.columns[o].width=h[o].wpx+"px");if((h=e.Sheets[n]["!rows"])&&h.length)for(o=0;o<h.length;o++)h[o]&&h[o].hpx&&(r.rows[o]={},r.rows[o].height=h[o].hpx+"px");if((h=e.Sheets[n]["!merges"])&&h.length>0)for(r.mergeCells=[],o=0;o<h.length;o++){var i=h[o].s.c,a=h[o].s.r,s=h[o].e.c,l=h[o].e.r,u=_jexcel.getColumnNameFromId([i,a]);r.mergeCells[u]=[s-i+1,l-a+1]}var c=0,d=0,h=Object.keys(e.Sheets[n]);for(o=0;o<h.length;o++)if("!"!=h[o].substr(0,1)){var f=e.Sheets[n][h[o]],p=_jexcel.getIdFromColumnName(h[o],!0);r.data[p[1]]||(r.data[p[1]]=[]),r.data[p[1]][p[0]]=f.f?"="+f.f:f.w,c<p[0]&&(c=p[0]),d<p[1]&&(d=p[1]),f.style&&Object.keys(f.style).length>0&&(r.style[h[o]]=f.style),f.s&&f.s.fgColor&&(r.style[h[o]]&&(r.style[h[o]]+=";"),r.style[h[o]]+="background-color:#"+f.s.fgColor.rgb)}for(var g=r.columns,b=0;b<=d;b++)for(o=0;o<=c;o++)r.data[b]||(r.data[b]=[]),r.data[b][o]||g<o&&(r.data[b][o]="");t.push(r)})),t};(n=new XMLHttpRequest).open("GET",e,!0),"undefined"!==typeof Uint8Array?(n.responseType="arraybuffer",n.onload=function(e){var o=n.response,i=new Uint8Array(o),a=XLSX.read(i,{type:"array",cellFormula:!0,cellStyles:!0});t(r(a))}):(n.setRequestHeader("Accept-Charset","x-user-defined"),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=convertResponseBodyToText(n.responseBody),o=XLSX.read(e,{type:"binary",cellFormula:!0,cellStyles:!0});t(r(o))}}),n.send()},_jexcel.validLetter=function(e){return e.match(/([\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC-\u0400-\u04FF']+)/g)?1:0},_jexcel.injectArray=function(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))},_jexcel.getColumnName=function(e){var t="";return e>701?(t+=String.fromCharCode(64+parseInt(e/676)),t+=String.fromCharCode(64+parseInt(e%676/26))):e>25&&(t+=String.fromCharCode(64+parseInt(e/26))),t+=String.fromCharCode(65+e%26)},_jexcel.getIdFromColumnName=function(e,t){var n=/^[a-zA-Z]+/.exec(e);if(n){for(var r=0,o=0;o<n[0].length;o++)r+=parseInt(n[0].charCodeAt(o)-64)*Math.pow(26,n[0].length-1-o);--r<0&&(r=0);var i=parseInt(/[0-9]+$/.exec(e));i>0&&i--,e=1==t?[r,i]:r+"-"+i}return e},_jexcel.getColumnNameFromId=function(e){return Array.isArray(e)||(e=e.split("-")),_jexcel.getColumnName(parseInt(e[0]))+(parseInt(e[1])+1)},_jexcel.getElement=function(e){var t=0,n=0;return function e(r){r.className&&r.classList.contains("jexcel_container")&&(n=r),"THEAD"==r.tagName?t=1:"TBODY"==r.tagName&&(t=2),r.parentNode&&(n||e(r.parentNode))}(e),[n,t]},_jexcel.doubleDigitFormat=function(e){return 1==(e=""+e).length&&(e="0"+e),e},_jexcel.createFromTable=function(e,t){if("TABLE"==e.tagName){t||(t={}),t.columns=[],t.data=[];var n=e.querySelectorAll("colgroup > col");if(n.length)for(var r=0;r<n.length;r++){if(!(o=n[r].style.width))var o=n[r].getAttribute("width");o&&(t.columns[r]||(t.columns[r]={}),t.columns[r].width=o)}var i=function(e){var n=e.getBoundingClientRect(),o=n.width>50?n.width:50;t.columns[r]||(t.columns[r]={}),e.getAttribute("data-celltype")?t.columns[r].type=e.getAttribute("data-celltype"):t.columns[r].type="text",t.columns[r].width=o+"px",t.columns[r].title=e.innerHTML,t.columns[r].align=e.style.textAlign||"center",(n=e.getAttribute("name"))&&(t.columns[r].name=n),(n=e.getAttribute("id"))&&(t.columns[r].id=n)},a=[],s=e.querySelectorAll(":scope > thead > tr");if(s.length){for(var l=0;l<s.length-1;l++){var u=[];for(r=0;r<s[l].children.length;r++){var c={title:s[l].children[r].innerText,colspan:s[l].children[r].getAttribute("colspan")||1};u.push(c)}a.push(u)}for(s=s[s.length-1].children,r=0;r<s.length;r++)i(s[r])}var d=0,h={},f={},p={},g={},b=e.querySelectorAll(":scope > tr, :scope > tbody > tr");for(l=0;l<b.length;l++)if(t.data[d]=[],1!=t.parseTableFirstRowAsHeader||s.length||0!=l){for(r=0;r<b[l].children.length;r++){if(m=b[l].children[r].getAttribute("data-formula"))"="!=m.substr(0,1)&&(m="="+m);else var m=b[l].children[r].innerHTML;t.data[d].push(m);var v=_jexcel.getColumnNameFromId([r,l]),y=b[l].children[r].getAttribute("class");y&&(g[v]=y);var j=parseInt(b[l].children[r].getAttribute("colspan"))||0,x=parseInt(b[l].children[r].getAttribute("rowspan"))||0;(j||x)&&(h[v]=[j||1,x||1]),b[l].children[r].style&&"none"==b[l].children[r].style.display&&(b[l].children[r].style.display="");var w=b[l].children[r].getAttribute("style");w&&(p[v]=w),b[l].children[r].classList.contains("styleBold")&&(p[v]?p[v]+="; font-weight:bold;":p[v]="font-weight:bold;")}b[l].style&&b[l].style.height&&(f[l]={height:b[l].style.height}),d++}else for(var r=0;r<b[l].children.length;r++)i(b[l].children[r]);if(Object.keys(a).length>0&&(t.nestedHeaders=a),Object.keys(p).length>0&&(t.style=p),Object.keys(h).length>0&&(t.mergeCells=h),Object.keys(f).length>0&&(t.rows=f),Object.keys(g).length>0&&(t.classes=g),(b=e.querySelectorAll("tfoot tr")).length){var C=[];for(l=0;l<b.length;l++){var _=[];for(r=0;r<b[l].children.length;r++)_.push(b[l].children[r].innerText);C.push(_)}Object.keys(C).length>0&&(t.footers=C)}if(1==t.parseTableAutoCellType){var S=[];for(r=0;r<t.columns.length;r++){var E=!0,O=!0;for(S[r]=[],l=0;l<t.data.length;l++)m=t.data[l][r],S[r][m]||(S[r][m]=0),S[r][m]++,m.length>25&&(E=!1),10==m.length&&"-"==m.substr(4,1)&&"-"==m.substr(7,1)||(O=!1);var T=Object.keys(S[r]).length;O?t.columns[r].type="calendar":1==E&&T>1&&T<=parseInt(.1*t.data.length)&&(t.columns[r].type="dropdown",t.columns[r].source=Object.keys(S[r]))}}return t}console.log("Element is not a table")},"undefined"!=typeof jQuery&&function(e){e.fn.jspreadsheet=e.fn.jexcel=function(t){var n=e(this).get(0);return n.jexcel?Array.isArray(n.jexcel)?n.jexcel[t][arguments[1]].apply(this,Array.prototype.slice.call(arguments,2)):n.jexcel[t].apply(this,Array.prototype.slice.call(arguments,1)):_jexcel(e(this).get(0),arguments[0])}}(jQuery);var error=function(){var e={};return e.nil=new Error("#NULL!"),e.div0=new Error("#DIV/0!"),e.value=new Error("#VALUE!"),e.ref=new Error("#REF!"),e.name=new Error("#NAME?"),e.num=new Error("#NUM!"),e.na=new Error("#N/A"),e.error=new Error("#ERROR!"),e.data=new Error("#GETTING_DATA"),e}(),utils=function(){var e={flattenShallow:function(e){return e&&e.reduce?e.reduce((function(e,t){var n=Array.isArray(e),r=Array.isArray(t);return n&&r?e.concat(t):n?(e.push(t),e):r?[e].concat(t):[e,t]})):e},isFlat:function(e){if(!e)return!1;for(var t=0;t<e.length;++t)if(Array.isArray(e[t]))return!1;return!0},flatten:function(){for(var t=e.argsToArray.apply(null,arguments);!e.isFlat(t);)t=e.flattenShallow(t);return t},argsToArray:function(t){var n=[];return e.arrayEach(t,(function(e){n.push(e)})),n},numbers:function(){var e=this.flatten.apply(null,arguments);return e.filter((function(e){return"number"===typeof e}))},cleanFloat:function(e){var t=1e14;return Math.round(e*t)/t},parseBool:function(e){if("boolean"===typeof e)return e;if(e instanceof Error)return e;if("number"===typeof e)return 0!==e;if("string"===typeof e){var t=e.toUpperCase();if("TRUE"===t)return!0;if("FALSE"===t)return!1}return e instanceof Date&&!isNaN(e)||error.value},parseNumber:function(e){return void 0===e||""===e||isNaN(e)?error.value:parseFloat(e)},parseNumberArray:function(t){var n,r;if(!t||0===(n=t.length))return error.value;for(;n--;){if((r=e.parseNumber(t[n]))===error.value)return r;t[n]=r}return t},parseMatrix:function(t){var n;if(!t||0===t.length)return error.value;for(var r=0;r<t.length;r++)if(n=e.parseNumberArray(t[r]),t[r]=n,n instanceof Error)return n;return t}},t=new Date(Date.UTC(1900,0,1));return e.parseDate=function(e){if(!isNaN(e)){if(e instanceof Date)return new Date(e);var n=parseInt(e,10);return n<0?error.num:n<=60?new Date(t.getTime()+864e5*(n-1)):new Date(t.getTime()+864e5*(n-2))}return"string"!==typeof e||(e=new Date(e),isNaN(e))?error.value:e},e.parseDateArray=function(e){for(var t,n=e.length;n--;){if((t=this.parseDate(e[n]))===error.value)return t;e[n]=t}return e},e.anyIsError=function(){for(var e=arguments.length;e--;)if(arguments[e]instanceof Error)return!0;return!1},e.arrayValuesToNumbers=function(e){for(var t,n=e.length;n--;)if("number"!==typeof(t=e[n]))if(!0!==t)if(!1!==t){if("string"===typeof t){var r=this.parseNumber(t);r instanceof Error?e[n]=0:e[n]=r}}else e[n]=0;else e[n]=1;return e},e.rest=function(e,t){return t=t||1,e&&"function"===typeof e.slice?e.slice(t):e},e.initial=function(e,t){return t=t||1,e&&"function"===typeof e.slice?e.slice(0,e.length-t):e},e.arrayEach=function(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e},e.transpose=function(e){return e?e[0].map((function(t,n){return e.map((function(e){return e[n]}))})):error.value},e}();_jexcel.methods={},_jexcel.methods.datetime=function(){var e={},t=new Date(1900,0,1),n=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]];function r(e){return(e-t)/864e5+(e>-22038912e5?2:1)}return e.DATE=function(e,t,n){return e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:e<0||t<0||n<0?error.num:new Date(e,t-1,n)},e.DATEVALUE=function(e){if("string"!==typeof e)return error.value;var n=Date.parse(e);return isNaN(n)?error.value:n<=-22038912e5?(n-t)/864e5+1:(n-t)/864e5+2},e.DAY=function(e){var t=utils.parseDate(e);return t instanceof Error?t:t.getDate()},e.DAYS=function(e,t){return e=utils.parseDate(e),t=utils.parseDate(t),e instanceof Error?e:t instanceof Error?t:r(e)-r(t)},e.DAYS360=function(e,t,n){},e.EDATE=function(e,t){return(e=utils.parseDate(e))instanceof Error?e:isNaN(t)?error.value:(t=parseInt(t,10),e.setMonth(e.getMonth()+t),r(e))},e.EOMONTH=function(e,t){return(e=utils.parseDate(e))instanceof Error?e:isNaN(t)?error.value:(t=parseInt(t,10),r(new Date(e.getFullYear(),e.getMonth()+t+1,0)))},e.HOUR=function(e){return(e=utils.parseDate(e))instanceof Error?e:e.getHours()},e.INTERVAL=function(e){if("number"!==typeof e&&"string"!==typeof e)return error.value;e=parseInt(e,10);var t=Math.floor(e/94608e4);e%=94608e4;var n=Math.floor(e/2592e3);e%=2592e3;var r=Math.floor(e/86400);e%=86400;var o=Math.floor(e/3600);e%=3600;var i=Math.floor(e/60),a=e%=60;return"P"+(t=t>0?t+"Y":"")+(n=n>0?n+"M":"")+(r=r>0?r+"D":"")+"T"+(o=o>0?o+"H":"")+(i=i>0?i+"M":"")+(a=a>0?a+"S":"")},e.ISOWEEKNUM=function(e){if((e=utils.parseDate(e))instanceof Error)return e;e.setHours(0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7));var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+1)/7)},e.MINUTE=function(e){return(e=utils.parseDate(e))instanceof Error?e:e.getMinutes()},e.MONTH=function(e){return(e=utils.parseDate(e))instanceof Error?e:e.getMonth()+1},e.NETWORKDAYS=function(e,t,n){},e.NETWORKDAYS.INTL=function(e,t,n,r){},e.NOW=function(){return new Date},e.SECOND=function(e){return(e=utils.parseDate(e))instanceof Error?e:e.getSeconds()},e.TIME=function(e,t,n){return e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:e<0||t<0||n<0?error.num:(3600*e+60*t+n)/86400},e.TIMEVALUE=function(e){return(e=utils.parseDate(e))instanceof Error?e:(3600*e.getHours()+60*e.getMinutes()+e.getSeconds())/86400},e.TODAY=function(){return new Date},e.WEEKDAY=function(e,t){if((e=utils.parseDate(e))instanceof Error)return e;void 0===t&&(t=1);var r=e.getDay();return n[t][r]},e.WEEKNUM=function(e,t){},e.WORKDAY=function(e,t,n){},e.WORKDAY.INTL=function(e,t,n,r){},e.YEAR=function(e){return(e=utils.parseDate(e))instanceof Error?e:e.getFullYear()},e.YEARFRAC=function(e,t,n){},e}(),_jexcel.methods.database=function(){var exports={};function compact(e){if(!e)return e;for(var t=[],n=0;n<e.length;++n)e[n]&&t.push(e[n]);return t}function findResultIndex(database,criterias){for(var matches={},i=1;i<database[0].length;++i)matches[i]=!0;var maxCriteriaLength=criterias[0].length;for(i=1;i<criterias.length;++i)criterias[i].length>maxCriteriaLength&&(maxCriteriaLength=criterias[i].length);for(var k=1;k<database.length;++k)for(var l=1;l<database[k].length;++l){for(var currentCriteriaResult=!1,hasMatchingCriteria=!1,j=0;j<criterias.length;++j){var criteria=criterias[j];if(!(criteria.length<maxCriteriaLength)){var criteriaField=criteria[0];if(database[k][0]===criteriaField){hasMatchingCriteria=!0;for(var p=1;p<criteria.length;++p)currentCriteriaResult=currentCriteriaResult||eval(database[k][l]+criteria[p])}}}hasMatchingCriteria&&(matches[l]=matches[l]&&currentCriteriaResult)}for(var result=[],n=0;n<database[0].length;++n)matches[n]&&result.push(n-1);return result}return exports.FINDFIELD=function(e,t){for(var n=null,r=0;r<e.length;r++)if(e[r][0]===t){n=r;break}return null==n?error.value:n},exports.DAVERAGE=function(e,t,n){if(isNaN(t)&&"string"!==typeof t)return error.value;var r=findResultIndex(e,n),o=[];if("string"===typeof t){var i=exports.FINDFIELD(e,t);o=utils.rest(e[i])}else o=utils.rest(e[t]);for(var a=0,s=0;s<r.length;s++)a+=o[r[s]];return 0===r.length?error.div0:a/r.length},exports.DCOUNT=function(e,t,n){},exports.DCOUNTA=function(e,t,n){},exports.DGET=function(e,t,n){if(isNaN(t)&&"string"!==typeof t)return error.value;var r=findResultIndex(e,n),o=[];if("string"===typeof t){var i=exports.FINDFIELD(e,t);o=utils.rest(e[i])}else o=utils.rest(e[t]);return 0===r.length?error.value:r.length>1?error.num:o[r[0]]},exports.DMAX=function(e,t,n){if(isNaN(t)&&"string"!==typeof t)return error.value;var r=findResultIndex(e,n),o=[];if("string"===typeof t){var i=exports.FINDFIELD(e,t);o=utils.rest(e[i])}else o=utils.rest(e[t]);for(var a=o[r[0]],s=1;s<r.length;s++)a<o[r[s]]&&(a=o[r[s]]);return a},exports.DMIN=function(e,t,n){if(isNaN(t)&&"string"!==typeof t)return error.value;var r=findResultIndex(e,n),o=[];if("string"===typeof t){var i=exports.FINDFIELD(e,t);o=utils.rest(e[i])}else o=utils.rest(e[t]);for(var a=o[r[0]],s=1;s<r.length;s++)a>o[r[s]]&&(a=o[r[s]]);return a},exports.DPRODUCT=function(e,t,n){if(isNaN(t)&&"string"!==typeof t)return error.value;var r=findResultIndex(e,n),o=[];if("string"===typeof t){var i=exports.FINDFIELD(e,t);o=utils.rest(e[i])}else o=utils.rest(e[t]);for(var a=[],s=0;s<r.length;s++)a[s]=o[r[s]];a=compact(a);var l=1;for(s=0;s<a.length;s++)l*=a[s];return l},exports.DSTDEV=function(e,t,n){},exports.DSTDEVP=function(e,t,n){},exports.DSUM=function(e,t,n){},exports.DVAR=function(e,t,n){},exports.DVARP=function(e,t,n){},exports.MATCH=function(e,t,n){if(!e&&!t)return error.na;if(2===arguments.length&&(n=1),!(t instanceof Array))return error.na;if(-1!==n&&0!==n&&1!==n)return error.na;for(var r,o,i=0;i<t.length;i++)if(1===n){if(t[i]===e)return i+1;t[i]<e&&(o?t[i]>o&&(r=i+1,o=t[i]):(r=i+1,o=t[i]))}else if(0===n){if("string"===typeof e){if(e=e.replace(/\?/g,"."),t[i].toLowerCase().match(e.toLowerCase()))return i+1}else if(t[i]===e)return i+1}else if(-1===n){if(t[i]===e)return i+1;t[i]>e&&(o?t[i]<o&&(r=i+1,o=t[i]):(r=i+1,o=t[i]))}return r||error.na},exports}(),_jexcel.methods.engineering=function(){var e={};function t(e){return/^[01]{1,10}$/.test(e)}return e.BESSELI=function(e,t){},e.BESSELJ=function(e,t){},e.BESSELK=function(e,t){},e.BESSELY=function(e,t){},e.BIN2DEC=function(e){if(!t(e))return error.num;var n=parseInt(e,2),r=e.toString();return 10===r.length&&"1"===r.substring(0,1)?parseInt(r.substring(1),2)-512:n},e.BIN2HEX=function(e,n){if(!t(e))return error.num;var r=e.toString();if(10===r.length&&"1"===r.substring(0,1))return(0xfffffffe00+parseInt(r.substring(1),2)).toString(16);var o=parseInt(e,2).toString(16);return void 0===n?o:isNaN(n)?error.value:n<0?error.num:(n=Math.floor(n))>=o.length?REPT("0",n-o.length)+o:error.num},e.BIN2OCT=function(e,n){if(!t(e))return error.num;var r=e.toString();if(10===r.length&&"1"===r.substring(0,1))return(1073741312+parseInt(r.substring(1),2)).toString(8);var o=parseInt(e,2).toString(8);return void 0===n?o:isNaN(n)?error.value:n<0?error.num:(n=Math.floor(n))>=o.length?REPT("0",n-o.length)+o:error.num},e.BITAND=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?error.num:e&t},e.BITLSHIFT=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e<0||Math.floor(e)!==e||e>0xffffffffffff||Math.abs(t)>53?error.num:t>=0?e<<t:e>>-t},e.BITOR=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?error.num:e|t},e.BITRSHIFT=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e<0||Math.floor(e)!==e||e>0xffffffffffff||Math.abs(t)>53?error.num:t>=0?e>>t:e<<-t},e.BITXOR=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?error.num:e^t},e.COMPLEX=function(e,t,n){if(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t))return e;if("i"!==(n=void 0===n?"i":n)&&"j"!==n)return error.value;if(0===e&&0===t)return 0;if(0===e)return 1===t?n:t.toString()+n;if(0===t)return e.toString();var r=t>0?"+":"";return e.toString()+r+(1===t?n:t.toString()+n)},e.CONVERT=function(e,t,n){if((e=utils.parseNumber(e))instanceof Error)return e;for(var r,o=[["a.u. of action","?",null,"action",!1,!1,105457168181818e-48],["a.u. of charge","e",null,"electric_charge",!1,!1,160217653141414e-33],["a.u. of energy","Eh",null,"energy",!1,!1,435974417757576e-32],["a.u. of length","a?",null,"length",!1,!1,529177210818182e-25],["a.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["a.u. of time","?/Eh",null,"time",!1,!1,241888432650516e-31],["admiralty knot","admkn",null,"speed",!1,!0,.514773333],["ampere","A",null,"electric_current",!0,!1,1],["ampere per meter","A/m",null,"magnetic_field_intensity",!0,!1,1],["\xe5ngstr\xf6m","\xc5",["ang"],"length",!1,!0,1e-10],["are","ar",null,"area",!1,!0,100],["astronomical unit","ua",null,"length",!1,!1,149597870691667e-25],["bar","bar",null,"pressure",!1,!1,1e5],["barn","b",null,"area",!1,!1,1e-28],["becquerel","Bq",null,"radioactivity",!0,!1,1],["bit","bit",["b"],"information",!1,!0,1],["btu","BTU",["btu"],"energy",!1,!0,1055.05585262],["byte","byte",null,"information",!1,!0,8],["candela","cd",null,"luminous_intensity",!0,!1,1],["candela per square metre","cd/m?",null,"luminance",!0,!1,1],["coulomb","C",null,"electric_charge",!0,!1,1],["cubic \xe5ngstr\xf6m","ang3",["ang^3"],"volume",!1,!0,1e-30],["cubic foot","ft3",["ft^3"],"volume",!1,!0,.028316846592],["cubic inch","in3",["in^3"],"volume",!1,!0,16387064e-12],["cubic light-year","ly3",["ly^3"],"volume",!1,!0,846786664623715e-61],["cubic metre","m?",null,"volume",!0,!0,1],["cubic mile","mi3",["mi^3"],"volume",!1,!0,4168181825.44058],["cubic nautical mile","Nmi3",["Nmi^3"],"volume",!1,!0,6352182208],["cubic Pica","Pica3",["Picapt3","Pica^3","Picapt^3"],"volume",!1,!0,7.58660370370369e-8],["cubic yard","yd3",["yd^3"],"volume",!1,!0,.764554857984],["cup","cup",null,"volume",!1,!0,.0002365882365],["dalton","Da",["u"],"mass",!1,!1,166053886282828e-41],["day","d",["day"],"time",!1,!0,86400],["degree","\xb0",null,"angle",!1,!1,.0174532925199433],["degrees Rankine","Rank",null,"temperature",!1,!0,.555555555555556],["dyne","dyn",["dy"],"force",!1,!0,1e-5],["electronvolt","eV",["ev"],"energy",!1,!0,1.60217656514141],["ell","ell",null,"length",!1,!0,1.143],["erg","erg",["e"],"energy",!1,!0,1e-7],["farad","F",null,"electric_capacitance",!0,!1,1],["fluid ounce","oz",null,"volume",!1,!0,295735295625e-16],["foot","ft",null,"length",!1,!0,.3048],["foot-pound","flb",null,"energy",!1,!0,1.3558179483314],["gal","Gal",null,"acceleration",!1,!1,.01],["gallon","gal",null,"volume",!1,!0,.003785411784],["gauss","G",["ga"],"magnetic_flux_density",!1,!0,1],["grain","grain",null,"mass",!1,!0,647989e-10],["gram","g",null,"mass",!1,!0,.001],["gray","Gy",null,"absorbed_dose",!0,!1,1],["gross registered ton","GRT",["regton"],"volume",!1,!0,2.8316846592],["hectare","ha",null,"area",!1,!0,1e4],["henry","H",null,"inductance",!0,!1,1],["hertz","Hz",null,"frequency",!0,!1,1],["horsepower","HP",["h"],"power",!1,!0,745.69987158227],["horsepower-hour","HPh",["hh","hph"],"energy",!1,!0,2684519.538],["hour","h",["hr"],"time",!1,!0,3600],["imperial gallon (U.K.)","uk_gal",null,"volume",!1,!0,.00454609],["imperial hundredweight","lcwt",["uk_cwt","hweight"],"mass",!1,!0,50.802345],["imperial quart (U.K)","uk_qt",null,"volume",!1,!0,.0011365225],["imperial ton","brton",["uk_ton","LTON"],"mass",!1,!0,1016.046909],["inch","in",null,"length",!1,!0,.0254],["international acre","uk_acre",null,"area",!1,!0,4046.8564224],["IT calorie","cal",null,"energy",!1,!0,4.1868],["joule","J",null,"energy",!0,!0,1],["katal","kat",null,"catalytic_activity",!0,!1,1],["kelvin","K",["kel"],"temperature",!0,!0,1],["kilogram","kg",null,"mass",!0,!0,1],["knot","kn",null,"speed",!1,!0,.514444444444444],["light-year","ly",null,"length",!1,!0,9460730472580800],["litre","L",["l","lt"],"volume",!1,!0,.001],["lumen","lm",null,"luminous_flux",!0,!1,1],["lux","lx",null,"illuminance",!0,!1,1],["maxwell","Mx",null,"magnetic_flux",!1,!1,1e-18],["measurement ton","MTON",null,"volume",!1,!0,1.13267386368],["meter per hour","m/h",["m/hr"],"speed",!1,!0,.00027777777777778],["meter per second","m/s",["m/sec"],"speed",!0,!0,1],["meter per second squared","m?s??",null,"acceleration",!0,!1,1],["parsec","pc",["parsec"],"length",!1,!0,0x6da012f958ee1c],["meter squared per second","m?/s",null,"kinematic_viscosity",!0,!1,1],["metre","m",null,"length",!0,!0,1],["miles per hour","mph",null,"speed",!1,!0,.44704],["millimetre of mercury","mmHg",null,"pressure",!1,!1,133.322],["minute","?",null,"angle",!1,!1,.000290888208665722],["minute","min",["mn"],"time",!1,!0,60],["modern teaspoon","tspm",null,"volume",!1,!0,5e-6],["mole","mol",null,"amount_of_substance",!0,!1,1],["morgen","Morgen",null,"area",!1,!0,2500],["n.u. of action","?",null,"action",!1,!1,105457168181818e-48],["n.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["n.u. of speed","c?",null,"speed",!1,!1,299792458],["n.u. of time","?/(me?c??)",null,"time",!1,!1,128808866778687e-35],["nautical mile","M",["Nmi"],"length",!1,!0,1852],["newton","N",null,"force",!0,!0,1],["\u0153rsted","Oe ",null,"magnetic_field_intensity",!1,!1,79.5774715459477],["ohm","\u03a9",null,"electric_resistance",!0,!1,1],["ounce mass","ozm",null,"mass",!1,!0,.028349523125],["pascal","Pa",null,"pressure",!0,!1,1],["pascal second","Pa?s",null,"dynamic_viscosity",!0,!1,1],["pferdest\xe4rke","PS",null,"power",!1,!0,735.49875],["phot","ph",null,"illuminance",!1,!1,1e-4],["pica (1/6 inch)","pica",null,"length",!1,!0,.00035277777777778],["pica (1/72 inch)","Pica",["Picapt"],"length",!1,!0,.00423333333333333],["poise","P",null,"dynamic_viscosity",!1,!1,.1],["pond","pond",null,"force",!1,!0,.00980665],["pound force","lbf",null,"force",!1,!0,4.4482216152605],["pound mass","lbm",null,"mass",!1,!0,.45359237],["quart","qt",null,"volume",!1,!0,.000946352946],["radian","rad",null,"angle",!0,!1,1],["second","?",null,"angle",!1,!1,484813681109536e-20],["second","s",["sec"],"time",!0,!0,1],["short hundredweight","cwt",["shweight"],"mass",!1,!0,45.359237],["siemens","S",null,"electrical_conductance",!0,!1,1],["sievert","Sv",null,"equivalent_dose",!0,!1,1],["slug","sg",null,"mass",!1,!0,14.59390294],["square \xe5ngstr\xf6m","ang2",["ang^2"],"area",!1,!0,1e-20],["square foot","ft2",["ft^2"],"area",!1,!0,.09290304],["square inch","in2",["in^2"],"area",!1,!0,64516e-8],["square light-year","ly2",["ly^2"],"area",!1,!0,895054210748189e17],["square meter","m?",null,"area",!0,!0,1],["square mile","mi2",["mi^2"],"area",!1,!0,2589988.110336],["square nautical mile","Nmi2",["Nmi^2"],"area",!1,!0,3429904],["square Pica","Pica2",["Picapt2","Pica^2","Picapt^2"],"area",!1,!0,1792111111111e-17],["square yard","yd2",["yd^2"],"area",!1,!0,.83612736],["statute mile","mi",null,"length",!1,!0,1609.344],["steradian","sr",null,"solid_angle",!0,!1,1],["stilb","sb",null,"luminance",!1,!1,1e-4],["stokes","St",null,"kinematic_viscosity",!1,!1,1e-4],["stone","stone",null,"mass",!1,!0,6.35029318],["tablespoon","tbs",null,"volume",!1,!0,147868e-10],["teaspoon","tsp",null,"volume",!1,!0,492892e-11],["tesla","T",null,"magnetic_flux_density",!0,!0,1],["thermodynamic calorie","c",null,"energy",!1,!0,4.184],["ton","ton",null,"mass",!1,!0,907.18474],["tonne","t",null,"mass",!1,!1,1e3],["U.K. pint","uk_pt",null,"volume",!1,!0,.00056826125],["U.S. bushel","bushel",null,"volume",!1,!0,.03523907],["U.S. oil barrel","barrel",null,"volume",!1,!0,.158987295],["U.S. pint","pt",["us_pt"],"volume",!1,!0,.000473176473],["U.S. survey mile","survey_mi",null,"length",!1,!0,1609.347219],["U.S. survey/statute acre","us_acre",null,"area",!1,!0,4046.87261],["volt","V",null,"voltage",!0,!1,1],["watt","W",null,"power",!0,!0,1],["watt-hour","Wh",["wh"],"energy",!1,!0,3600],["weber","Wb",null,"magnetic_flux",!0,!1,1],["yard","yd",null,"length",!1,!0,.9144],["year","yr",null,"time",!1,!0,31557600]],i={Yi:["yobi",80,12089258196146292e8,"Yi","yotta"],Zi:["zebi",70,11805916207174113e5,"Zi","zetta"],Ei:["exbi",60,0x1000000000000000,"Ei","exa"],Pi:["pebi",50,0x4000000000000,"Pi","peta"],Ti:["tebi",40,1099511627776,"Ti","tera"],Gi:["gibi",30,1073741824,"Gi","giga"],Mi:["mebi",20,1048576,"Mi","mega"],ki:["kibi",10,1024,"ki","kilo"]},a={Y:["yotta",1e24,"Y"],Z:["zetta",1e21,"Z"],E:["exa",1e18,"E"],P:["peta",1e15,"P"],T:["tera",1e12,"T"],G:["giga",1e9,"G"],M:["mega",1e6,"M"],k:["kilo",1e3,"k"],h:["hecto",100,"h"],e:["dekao",10,"e"],d:["deci",.1,"d"],c:["centi",.01,"c"],m:["milli",.001,"m"],u:["micro",1e-6,"u"],n:["nano",1e-9,"n"],p:["pico",1e-12,"p"],f:["femto",1e-15,"f"],a:["atto",1e-18,"a"],z:["zepto",1e-21,"z"],y:["yocto",1e-24,"y"]},s=null,l=null,u=t,c=n,d=1,h=1,f=0;f<o.length;f++)r=null===o[f][2]?[]:o[f][2],(o[f][1]===u||r.indexOf(u)>=0)&&(s=o[f]),(o[f][1]===c||r.indexOf(c)>=0)&&(l=o[f]);if(null===s){var p=i[t.substring(0,2)],g=a[t.substring(0,1)];"da"===t.substring(0,2)&&(g=["dekao",10,"da"]),p?(d=p[2],u=t.substring(2)):g&&(d=g[1],u=t.substring(g[2].length));for(var b=0;b<o.length;b++)r=null===o[b][2]?[]:o[b][2],(o[b][1]===u||r.indexOf(u)>=0)&&(s=o[b])}if(null===l){var m=i[n.substring(0,2)],v=a[n.substring(0,1)];"da"===n.substring(0,2)&&(v=["dekao",10,"da"]),m?(h=m[2],c=n.substring(2)):v&&(h=v[1],c=n.substring(v[2].length));for(var y=0;y<o.length;y++)r=null===o[y][2]?[]:o[y][2],(o[y][1]===c||r.indexOf(c)>=0)&&(l=o[y])}return null===s||null===l||s[3]!==l[3]?error.na:e*s[6]*d/(l[6]*h)},e.DEC2BIN=function(e,t){if((e=utils.parseNumber(e))instanceof Error)return e;if(!/^-?[0-9]{1,3}$/.test(e)||e<-512||e>511)return error.num;if(e<0)return"1"+REPT("0",9-(512+e).toString(2).length)+(512+e).toString(2);var n=parseInt(e,10).toString(2);return"undefined"===typeof t?n:isNaN(t)?error.value:t<0?error.num:(t=Math.floor(t))>=n.length?REPT("0",t-n.length)+n:error.num},e.DEC2HEX=function(e,t){if((e=utils.parseNumber(e))instanceof Error)return e;if(!/^-?[0-9]{1,12}$/.test(e)||e<-549755813888||e>549755813887)return error.num;if(e<0)return(1099511627776+e).toString(16);var n=parseInt(e,10).toString(16);return"undefined"===typeof t?n:isNaN(t)?error.value:t<0?error.num:(t=Math.floor(t))>=n.length?REPT("0",t-n.length)+n:error.num},e.DEC2OCT=function(e,t){if((e=utils.parseNumber(e))instanceof Error)return e;if(!/^-?[0-9]{1,9}$/.test(e)||e<-536870912||e>536870911)return error.num;if(e<0)return(1073741824+e).toString(8);var n=parseInt(e,10).toString(8);return"undefined"===typeof t?n:isNaN(t)?error.value:t<0?error.num:(t=Math.floor(t))>=n.length?REPT("0",t-n.length)+n:error.num},e.DELTA=function(e,t){return t=void 0===t?0:t,e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e===t?1:0},e.ERF=function(e,t){},e.ERF.PRECISE=function(){},e.ERFC=function(e){},e.ERFC.PRECISE=function(){},e.GESTEP=function(e,t){return t=t||0,e=utils.parseNumber(e),utils.anyIsError(t,e)?e:e>=t?1:0},e.HEX2BIN=function(e,t){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return error.num;var n=10===e.length&&"f"===e.substring(0,1).toLowerCase(),r=n?parseInt(e,16)-1099511627776:parseInt(e,16);if(r<-512||r>511)return error.num;if(n)return"1"+REPT("0",9-(512+r).toString(2).length)+(512+r).toString(2);var o=r.toString(2);return void 0===t?o:isNaN(t)?error.value:t<0?error.num:(t=Math.floor(t))>=o.length?REPT("0",t-o.length)+o:error.num},e.HEX2DEC=function(e){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return error.num;var t=parseInt(e,16);return t>=549755813888?t-1099511627776:t},e.HEX2OCT=function(e,t){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return error.num;var n=parseInt(e,16);if(n>536870911&&n<0xffe0000000)return error.num;if(n>=0xffe0000000)return(n-0xffc0000000).toString(8);var r=n.toString(8);return void 0===t?r:isNaN(t)?error.value:t<0?error.num:(t=Math.floor(t))>=r.length?REPT("0",t-r.length)+r:error.num},e.IMABS=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);return utils.anyIsError(n,r)?error.value:Math.sqrt(Math.pow(n,2)+Math.pow(r,2))},e.IMAGINARY=function(e){if(void 0===e||!0===e||!1===e)return error.value;if(0===e||"0"===e)return 0;if(["i","j"].indexOf(e)>=0)return 1;var t=(e=e.replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j")).indexOf("+"),n=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===n&&(n=e.indexOf("-",1));var r=e.substring(e.length-1,e.length),o="i"===r||"j"===r;return t>=0||n>=0?o?t>=0?isNaN(e.substring(0,t))||isNaN(e.substring(t+1,e.length-1))?error.num:Number(e.substring(t+1,e.length-1)):isNaN(e.substring(0,n))||isNaN(e.substring(n+1,e.length-1))?error.num:-Number(e.substring(n+1,e.length-1)):error.num:o?isNaN(e.substring(0,e.length-1))?error.num:e.substring(0,e.length-1):isNaN(e)?error.num:0},e.IMARGUMENT=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);return utils.anyIsError(n,r)?error.value:0===n&&0===r?error.div0:0===n&&r>0?Math.PI/2:0===n&&r<0?-Math.PI/2:0===r&&n>0?0:0===r&&n<0?-Math.PI:n>0?Math.atan(r/n):n<0&&r>=0?Math.atan(r/n)+Math.PI:Math.atan(r/n)-Math.PI},e.IMCONJUGATE=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);if(utils.anyIsError(n,r))return error.value;var o=t.substring(t.length-1);return o="i"===o||"j"===o?o:"i",0!==r?e.COMPLEX(n,-r,o):t},e.IMCOS=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);if(utils.anyIsError(n,r))return error.value;var o=t.substring(t.length-1);return o="i"===o||"j"===o?o:"i",e.COMPLEX(Math.cos(n)*(Math.exp(r)+Math.exp(-r))/2,-Math.sin(n)*(Math.exp(r)-Math.exp(-r))/2,o)},e.IMCOSH=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);if(utils.anyIsError(n,r))return error.value;var o=t.substring(t.length-1);return o="i"===o||"j"===o?o:"i",e.COMPLEX(Math.cos(r)*(Math.exp(n)+Math.exp(-n))/2,Math.sin(r)*(Math.exp(n)-Math.exp(-n))/2,o)},e.IMCOT=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);return utils.anyIsError(n,r)?error.value:e.IMDIV(e.IMCOS(t),e.IMSIN(t))},e.IMDIV=function(t,n){var r=e.IMREAL(t),o=e.IMAGINARY(t),i=e.IMREAL(n),a=e.IMAGINARY(n);if(utils.anyIsError(r,o,i,a))return error.value;var s=t.substring(t.length-1),l=n.substring(n.length-1),u="i";if(("j"===s||"j"===l)&&(u="j"),0===i&&0===a)return error.num;var c=i*i+a*a;return e.COMPLEX((r*i+o*a)/c,(o*i-r*a)/c,u)},e.IMEXP=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);if(utils.anyIsError(n,r))return error.value;var o=t.substring(t.length-1);o="i"===o||"j"===o?o:"i";var i=Math.exp(n);return e.COMPLEX(i*Math.cos(r),i*Math.sin(r),o)},e.IMLN=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);if(utils.anyIsError(n,r))return error.value;var o=t.substring(t.length-1);return o="i"===o||"j"===o?o:"i",e.COMPLEX(Math.log(Math.sqrt(n*n+r*r)),Math.atan(r/n),o)},e.IMLOG10=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);if(utils.anyIsError(n,r))return error.value;var o=t.substring(t.length-1);return o="i"===o||"j"===o?o:"i",e.COMPLEX(Math.log(Math.sqrt(n*n+r*r))/Math.log(10),Math.atan(r/n)/Math.log(10),o)},e.IMLOG2=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);if(utils.anyIsError(n,r))return error.value;var o=t.substring(t.length-1);return o="i"===o||"j"===o?o:"i",e.COMPLEX(Math.log(Math.sqrt(n*n+r*r))/Math.log(2),Math.atan(r/n)/Math.log(2),o)},e.IMPOWER=function(t,n){n=utils.parseNumber(n);var r=e.IMREAL(t),o=e.IMAGINARY(t);if(utils.anyIsError(n,r,o))return error.value;var i=t.substring(t.length-1);i="i"===i||"j"===i?i:"i";var a=Math.pow(e.IMABS(t),n),s=e.IMARGUMENT(t);return e.COMPLEX(a*Math.cos(n*s),a*Math.sin(n*s),i)},e.IMPRODUCT=function(){for(var t=arguments[0],n=1;n<arguments.length;n++){var r=e.IMREAL(t),o=e.IMAGINARY(t),i=e.IMREAL(arguments[n]),a=e.IMAGINARY(arguments[n]);if(utils.anyIsError(r,o,i,a))return error.value;t=e.COMPLEX(r*i-o*a,r*a+o*i)}return t},e.IMREAL=function(e){if(void 0===e||!0===e||!1===e)return error.value;if(0===e||"0"===e)return 0;if(["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(e)>=0)return 0;var t=e.indexOf("+"),n=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===n&&(n=e.indexOf("-",1));var r=e.substring(e.length-1,e.length),o="i"===r||"j"===r;return t>=0||n>=0?o?t>=0?isNaN(e.substring(0,t))||isNaN(e.substring(t+1,e.length-1))?error.num:Number(e.substring(0,t)):isNaN(e.substring(0,n))||isNaN(e.substring(n+1,e.length-1))?error.num:Number(e.substring(0,n)):error.num:o?isNaN(e.substring(0,e.length-1))?error.num:0:isNaN(e)?error.num:e},e.IMSEC=function(t){if(!0===t||!1===t)return error.value;var n=e.IMREAL(t),r=e.IMAGINARY(t);return utils.anyIsError(n,r)?error.value:e.IMDIV("1",e.IMCOS(t))},e.IMSECH=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);return utils.anyIsError(n,r)?error.value:e.IMDIV("1",e.IMCOSH(t))},e.IMSIN=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);if(utils.anyIsError(n,r))return error.value;var o=t.substring(t.length-1);return o="i"===o||"j"===o?o:"i",e.COMPLEX(Math.sin(n)*(Math.exp(r)+Math.exp(-r))/2,Math.cos(n)*(Math.exp(r)-Math.exp(-r))/2,o)},e.IMSINH=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);if(utils.anyIsError(n,r))return error.value;var o=t.substring(t.length-1);return o="i"===o||"j"===o?o:"i",e.COMPLEX(Math.cos(r)*(Math.exp(n)-Math.exp(-n))/2,Math.sin(r)*(Math.exp(n)+Math.exp(-n))/2,o)},e.IMSQRT=function(t){var n=e.IMREAL(t),r=e.IMAGINARY(t);if(utils.anyIsError(n,r))return error.value;var o=t.substring(t.length-1);o="i"===o||"j"===o?o:"i";var i=Math.sqrt(e.IMABS(t)),a=e.IMARGUMENT(t);return e.COMPLEX(i*Math.cos(a/2),i*Math.sin(a/2),o)},e.IMCSC=function(t){if(!0===t||!1===t)return error.value;var n=e.IMREAL(t),r=e.IMAGINARY(t);return utils.anyIsError(n,r)?error.num:e.IMDIV("1",e.IMSIN(t))},e.IMCSCH=function(t){if(!0===t||!1===t)return error.value;var n=e.IMREAL(t),r=e.IMAGINARY(t);return utils.anyIsError(n,r)?error.num:e.IMDIV("1",e.IMSINH(t))},e.IMSUB=function(e,t){var n=this.IMREAL(e),r=this.IMAGINARY(e),o=this.IMREAL(t),i=this.IMAGINARY(t);if(utils.anyIsError(n,r,o,i))return error.value;var a=e.substring(e.length-1),s=t.substring(t.length-1),l="i";return("j"===a||"j"===s)&&(l="j"),this.COMPLEX(n-o,r-i,l)},e.IMSUM=function(){for(var e=utils.flatten(arguments),t=e[0],n=1;n<e.length;n++){var r=this.IMREAL(t),o=this.IMAGINARY(t),i=this.IMREAL(e[n]),a=this.IMAGINARY(e[n]);if(utils.anyIsError(r,o,i,a))return error.value;t=this.COMPLEX(r+i,o+a)}return t},e.IMTAN=function(t){if(!0===t||!1===t)return error.value;var n=e.IMREAL(t),r=e.IMAGINARY(t);return utils.anyIsError(n,r)?error.value:this.IMDIV(this.IMSIN(t),this.IMCOS(t))},e.OCT2BIN=function(e,t){if(!/^[0-7]{1,10}$/.test(e))return error.num;var n=10===e.length&&"7"===e.substring(0,1),r=n?parseInt(e,8)-1073741824:parseInt(e,8);if(r<-512||r>511)return error.num;if(n)return"1"+REPT("0",9-(512+r).toString(2).length)+(512+r).toString(2);var o=r.toString(2);return"undefined"===typeof t?o:isNaN(t)?error.value:t<0?error.num:(t=Math.floor(t))>=o.length?REPT("0",t-o.length)+o:error.num},e.OCT2DEC=function(e){if(!/^[0-7]{1,10}$/.test(e))return error.num;var t=parseInt(e,8);return t>=536870912?t-1073741824:t},e.OCT2HEX=function(e,t){if(!/^[0-7]{1,10}$/.test(e))return error.num;var n=parseInt(e,8);if(n>=536870912)return"ff"+(n+3221225472).toString(16);var r=n.toString(16);return void 0===t?r:isNaN(t)?error.value:t<0?error.num:(t=Math.floor(t))>=r.length?REPT("0",t-r.length)+r:error.num},e}(),_jexcel.methods.financial=function(){var e={};function t(e){return e&&e.getTime&&!isNaN(e.getTime())}function n(e){return e instanceof Date?e:new Date(e)}return e.ACCRINT=function(e,r,o,i,a,s,l){return e=n(e),r=n(r),o=n(o),t(e)&&t(r)&&t(o)?i<=0||a<=0||-1===[1,2,4].indexOf(s)||-1===[0,1,2,3,4].indexOf(l)||o<=e?"#NUM!":(l=l||0,(a=a||0)*i*YEARFRAC(e,o,l)):"#VALUE!"},e.ACCRINTM=null,e.AMORDEGRC=null,e.AMORLINC=null,e.COUPDAYBS=null,e.COUPDAYS=null,e.COUPDAYSNC=null,e.COUPNCD=null,e.COUPNUM=null,e.COUPPCD=null,e.CUMIPMT=function(t,n,r,o,i,a){if(t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),utils.anyIsError(t,n,r))return error.value;if(t<=0||n<=0||r<=0)return error.num;if(o<1||i<1||o>i)return error.num;if(0!==a&&1!==a)return error.num;var s=e.PMT(t,n,r,0,a),l=0;1===o&&0===a&&(l=-r,o++);for(var u=o;u<=i;u++)l+=1===a?e.FV(t,u-2,s,r,1)-s:e.FV(t,u-1,s,r,0);return l*=t},e.CUMPRINC=function(t,n,r,o,i,a){if(t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),utils.anyIsError(t,n,r))return error.value;if(t<=0||n<=0||r<=0)return error.num;if(o<1||i<1||o>i)return error.num;if(0!==a&&1!==a)return error.num;var s=e.PMT(t,n,r,0,a),l=0;1===o&&(l=0===a?s+r*t:s,o++);for(var u=o;u<=i;u++)l+=a>0?s-(e.FV(t,u-2,s,r,1)-s)*t:s-e.FV(t,u-1,s,r,0)*t;return l},e.DB=function(e,t,n,r,o){if(o=void 0===o?12:o,e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),o=utils.parseNumber(o),utils.anyIsError(e,t,n,r,o))return error.value;if(e<0||t<0||n<0||r<0)return error.num;if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(o))return error.num;if(r>n)return error.num;if(t>=e)return 0;for(var i=(1-Math.pow(t/e,1/n)).toFixed(3),a=e*i*o/12,s=a,l=0,u=r===n?n-1:r,c=2;c<=u;c++)s+=l=(e-s)*i;return 1===r?a:r===n?(e-s)*i:l},e.DDB=function(e,t,n,r,o){if(o=void 0===o?2:o,e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),o=utils.parseNumber(o),utils.anyIsError(e,t,n,r,o))return error.value;if(e<0||t<0||n<0||r<0||o<=0)return error.num;if(r>n)return error.num;if(t>=e)return 0;for(var i=0,a=0,s=1;s<=r;s++)i+=a=Math.min(o/n*(e-i),e-t-i);return a},e.DISC=null,e.DOLLARDE=function(e,t){if(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t))return error.value;if(t<0)return error.num;if(t>=0&&t<1)return error.div0;t=parseInt(t,10);var n=parseInt(e,10);n+=e%1*Math.pow(10,Math.ceil(Math.log(t)/Math.LN10))/t;var r=Math.pow(10,Math.ceil(Math.log(t)/Math.LN2)+1);return n=Math.round(n*r)/r},e.DOLLARFR=function(e,t){if(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t))return error.value;if(t<0)return error.num;if(t>=0&&t<1)return error.div0;t=parseInt(t,10);var n=parseInt(e,10);return n+=e%1*Math.pow(10,-Math.ceil(Math.log(t)/Math.LN10))*t},e.DURATION=null,e.EFFECT=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e<=0||t<1?error.num:(t=parseInt(t,10),Math.pow(1+e/t,t)-1)},e.FV=function(e,t,n,r,o){if(r=r||0,o=o||0,e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),o=utils.parseNumber(o),utils.anyIsError(e,t,n,r,o))return error.value;var i;if(0===e)i=r+n*t;else{var a=Math.pow(1+e,t);i=1===o?r*a+n*(1+e)*(a-1)/e:r*a+n*(a-1)/e}return-i},e.FVSCHEDULE=function(e,t){if(e=utils.parseNumber(e),t=utils.parseNumberArray(utils.flatten(t)),utils.anyIsError(e,t))return error.value;for(var n=t.length,r=e,o=0;o<n;o++)r*=1+t[o];return r},e.INTRATE=null,e.IPMT=function(t,n,r,o,i,a){if(i=i||0,a=a||0,t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),o=utils.parseNumber(o),i=utils.parseNumber(i),a=utils.parseNumber(a),utils.anyIsError(t,n,r,o,i,a))return error.value;var s=e.PMT(t,r,o,i,a);return(1===n?1===a?0:-o:1===a?e.FV(t,n-2,s,o,1)-s:e.FV(t,n-1,s,o,0))*t},e.IRR=function(e,t){if(t=t||0,e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumber(t),utils.anyIsError(e,t))return error.value;for(var n=function(e,t,n){for(var r=n+1,o=e[0],i=1;i<e.length;i++)o+=e[i]/Math.pow(r,(t[i]-t[0])/365);return o},r=function(e,t,n){for(var r=n+1,o=0,i=1;i<e.length;i++){var a=(t[i]-t[0])/365;o-=a*e[i]/Math.pow(r,a+1)}return o},o=[],i=!1,a=!1,s=0;s<e.length;s++)o[s]=0===s?0:o[s-1]+365,e[s]>0&&(i=!0),e[s]<0&&(a=!0);if(!i||!a)return error.num;var l,u,c,d=t=void 0===t?.1:t,h=!0;do{l=d-(c=n(e,o,d))/r(e,o,d),u=Math.abs(l-d),d=l,h=u>1e-10&&Math.abs(c)>1e-10}while(h);return d},e.ISPMT=function(e,t,n,r){return e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),utils.anyIsError(e,t,n,r)?error.value:r*e*(t/n-1)},e.MDURATION=null,e.MIRR=function(t,n,r){if(t=utils.parseNumberArray(utils.flatten(t)),n=utils.parseNumber(n),r=utils.parseNumber(r),utils.anyIsError(t,n,r))return error.value;for(var o=t.length,i=[],a=[],s=0;s<o;s++)t[s]<0?i.push(t[s]):a.push(t[s]);var l=-e.NPV(r,a)*Math.pow(1+r,o-1),u=e.NPV(n,i)*(1+n);return Math.pow(l/u,1/(o-1))-1},e.NOMINAL=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e<=0||t<1?error.num:(t=parseInt(t,10),(Math.pow(e+1,1/t)-1)*t)},e.NPER=function(e,t,n,r,o){if(o=void 0===o?0:o,r=void 0===r?0:r,e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),o=utils.parseNumber(o),utils.anyIsError(e,t,n,r,o))return error.value;var i=t*(1+e*o)-r*e,a=n*e+t*(1+e*o);return Math.log(i/a)/Math.log(1+e)},e.NPV=function(){var e=utils.parseNumberArray(utils.flatten(arguments));if(e instanceof Error)return e;for(var t=e[0],n=0,r=1;r<e.length;r++)n+=e[r]/Math.pow(1+t,r);return n},e.ODDFPRICE=null,e.ODDFYIELD=null,e.ODDLPRICE=null,e.ODDLYIELD=null,e.PDURATION=function(e,t,n){return e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:e<=0?error.num:(Math.log(n)-Math.log(t))/Math.log(1+e)},e.PMT=function(e,t,n,r,o){if(r=r||0,o=o||0,e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),o=utils.parseNumber(o),utils.anyIsError(e,t,n,r,o))return error.value;var i;if(0===e)i=(n+r)/t;else{var a=Math.pow(1+e,t);i=1===o?(r*e/(a-1)+n*e/(1-1/a))/(1+e):r*e/(a-1)+n*e/(1-1/a)}return-i},e.PPMT=function(t,n,r,o,i,a){return i=i||0,a=a||0,t=utils.parseNumber(t),r=utils.parseNumber(r),o=utils.parseNumber(o),i=utils.parseNumber(i),a=utils.parseNumber(a),utils.anyIsError(t,r,o,i,a)?error.value:e.PMT(t,r,o,i,a)-e.IPMT(t,n,r,o,i,a)},e.PRICE=null,e.PRICEDISC=null,e.PRICEMAT=null,e.PV=function(e,t,n,r,o){return r=r||0,o=o||0,e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),o=utils.parseNumber(o),utils.anyIsError(e,t,n,r,o)?error.value:0===e?-n*t-r:((1-Math.pow(1+e,t))/e*n*(1+e*o)-r)/Math.pow(1+e,t)},e.RATE=function(e,t,n,r,o,i){if(i=void 0===i?.01:i,r=void 0===r?0:r,o=void 0===o?0:o,e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),o=utils.parseNumber(o),i=utils.parseNumber(i),utils.anyIsError(e,t,n,r,o,i))return error.value;for(var a=0,s=!1,l=i;a<100&&!s;){var u=Math.pow(l+1,e),c=Math.pow(l+1,e-1),d=l-(r+u*n+t*(u-1)*(l*o+1)/l)/(e*c*n-t*(u-1)*(l*o+1)/Math.pow(l,2)+(e*t*c*(l*o+1)/l+t*(u-1)*o/l));Math.abs(d-l)<1e-6&&(s=!0),a++,l=d}return s?l:Number.NaN+l},e.RECEIVED=null,e.RRI=function(e,t,n){return e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:0===e||0===t?error.num:Math.pow(n/t,1/e)-1},e.SLN=function(e,t,n){return e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:0===n?error.num:(e-t)/n},e.SYD=function(e,t,n,r){return e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumber(r),utils.anyIsError(e,t,n,r)?error.value:0===n||r<1||r>n?error.num:(e-t)*(n-(r=parseInt(r,10))+1)*2/(n*(n+1))},e.TBILLEQ=function(e,t,n){return e=utils.parseDate(e),t=utils.parseDate(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:n<=0||e>t||t-e>31536e6?error.num:365*n/(360-n*DAYS360(e,t,!1))},e.TBILLPRICE=function(e,t,n){return e=utils.parseDate(e),t=utils.parseDate(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:n<=0||e>t||t-e>31536e6?error.num:100*(1-n*DAYS360(e,t,!1)/360)},e.TBILLYIELD=function(e,t,n){return e=utils.parseDate(e),t=utils.parseDate(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:n<=0||e>t||t-e>31536e6?error.num:360*(100-n)/(n*DAYS360(e,t,!1))},e.VDB=null,e.XIRR=function(e,t,n){if(e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseDateArray(utils.flatten(t)),n=utils.parseNumber(n),utils.anyIsError(e,t,n))return error.value;for(var r=function(e,t,n){for(var r=n+1,o=e[0],i=1;i<e.length;i++)o+=e[i]/Math.pow(r,DAYS(t[i],t[0])/365);return o},o=function(e,t,n){for(var r=n+1,o=0,i=1;i<e.length;i++){var a=DAYS(t[i],t[0])/365;o-=a*e[i]/Math.pow(r,a+1)}return o},i=!1,a=!1,s=0;s<e.length;s++)e[s]>0&&(i=!0),e[s]<0&&(a=!0);if(!i||!a)return error.num;var l,u,c,d=n=n||.1,h=!0;do{l=d-(c=r(e,t,d))/o(e,t,d),u=Math.abs(l-d),d=l,h=u>1e-10&&Math.abs(c)>1e-10}while(h);return d},e.XNPV=function(e,t,n){if(e=utils.parseNumber(e),t=utils.parseNumberArray(utils.flatten(t)),n=utils.parseDateArray(utils.flatten(n)),utils.anyIsError(e,t,n))return error.value;for(var r=0,o=0;o<t.length;o++)r+=t[o]/Math.pow(1+e,DAYS(n[o],n[0])/365);return r},e.YIELD=null,e.YIELDDISC=null,e.YIELDMAT=null,e}(),_jexcel.methods.information=function(){var e={CELL:null,ERROR:{}};return e.ERROR.TYPE=function(e){switch(e){case error.nil:return 1;case error.div0:return 2;case error.value:return 3;case error.ref:return 4;case error.name:return 5;case error.num:return 6;case error.na:return 7;case error.data:return 8}return error.na},e.INFO=null,e.ISBLANK=function(e){return null===e},e.ISBINARY=function(e){return/^[01]{1,10}$/.test(e)},e.ISERR=function(e){return[error.value,error.ref,error.div0,error.num,error.name,error.nil].indexOf(e)>=0||"number"===typeof e&&(isNaN(e)||!isFinite(e))},e.ISERROR=function(t){return e.ISERR(t)||t===error.na},e.ISEVEN=function(e){return!(1&Math.floor(Math.abs(e)))},e.ISFORMULA=null,e.ISLOGICAL=function(e){return!0===e||!1===e},e.ISNA=function(e){return e===error.na},e.ISNONTEXT=function(e){return"string"!==typeof e},e.ISNUMBER=function(e){return"number"===typeof e&&!isNaN(e)&&isFinite(e)},e.ISODD=function(e){return!!(1&Math.floor(Math.abs(e)))},e.ISREF=null,e.ISTEXT=function(e){return"string"===typeof e},e.N=function(e){return this.ISNUMBER(e)?e:e instanceof Date?e.getTime():!0===e?1:!1===e?0:this.ISERROR(e)?e:0},e.NA=function(){return error.na},e.SHEET=null,e.SHEETS=null,e.TYPE=function(e){return this.ISNUMBER(e)?1:this.ISTEXT(e)?2:this.ISLOGICAL(e)?4:this.ISERROR(e)?16:Array.isArray(e)?64:void 0},e}(),_jexcel.methods.logical=function(){var e={AND:function(){for(var e=utils.flatten(arguments),t=!0,n=0;n<e.length;n++)e[n]||(t=!1);return t},CHOOSE:function(){if(arguments.length<2)return error.na;var e=arguments[0];return e<1||e>254||arguments.length<e+1?error.value:arguments[e]},FALSE:function(){return!1},IF:function(e,t,n){return e?t:n},IFERROR:function(e,t){return ISERROR(e)?t:e},IFNA:function(e,t){return e===error.na?t:e},NOT:function(e){return!e},OR:function(){for(var e=utils.flatten(arguments),t=!1,n=0;n<e.length;n++)e[n]&&(t=!0);return t},TRUE:function(){return!0},XOR:function(){for(var e=utils.flatten(arguments),t=0,n=0;n<e.length;n++)e[n]&&t++;return!!(1&Math.floor(Math.abs(t)))},SWITCH:function(){var e;if(arguments.length>0){var t=arguments[0],n=arguments.length-1,r=Math.floor(n/2),o=!1,i=n%2===0?null:arguments[arguments.length-1];if(r)for(var a=0;a<r;a++)if(t===arguments[2*a+1]){e=arguments[2*a+2],o=!0;break}!o&&i&&(e=i)}return e}};return e}(),_jexcel.methods.math=function(){var exports={ABS:function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.abs(utils.parseNumber(e))},ACOS:function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.acos(e)},ACOSH:function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.log(e+Math.sqrt(e*e-1))},ACOT:function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.atan(1/e)},ACOTH:function(e){return(e=utils.parseNumber(e))instanceof Error?e:.5*Math.log((e+1)/(e-1))},AGGREGATE:null,ARABIC:function(e){if(!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(e))return error.value;var t=0;return e.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(e){t+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[e]})),t},ASIN:function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.asin(e)},ASINH:function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.log(e+Math.sqrt(e*e+1))},ATAN:function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.atan(e)},ATAN2:function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:Math.atan2(e,t)},ATANH:function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.log((1+e)/(1-e))/2},BASE:function(e,t,n){if(n=n||0,e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n))return error.value;n=void 0===n?0:n;var r=e.toString(t);return new Array(Math.max(n+1-r.length,0)).join("0")+r},CEILING:function(e,t,n){return t=void 0===t?1:t,n=void 0===n?0:n,e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:0===t?0:(t=Math.abs(t),e>=0?Math.ceil(e/t)*t:0===n?-1*Math.floor(Math.abs(e)/t)*t:-1*Math.ceil(Math.abs(e)/t)*t)}};exports.CEILING.MATH=exports.CEILING,exports.CEILING.PRECISE=exports.CEILING,exports.COMBIN=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:exports.FACT(e)/(exports.FACT(t)*exports.FACT(e-t))},exports.COMBINA=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:0===e&&0===t?1:exports.COMBIN(e+t-1,e-1)},exports.COS=function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.cos(e)},exports.COSH=function(e){return(e=utils.parseNumber(e))instanceof Error?e:(Math.exp(e)+Math.exp(-e))/2},exports.COT=function(e){return(e=utils.parseNumber(e))instanceof Error?e:1/Math.tan(e)},exports.COTH=function(e){if((e=utils.parseNumber(e))instanceof Error)return e;var t=Math.exp(2*e);return(t+1)/(t-1)},exports.CSC=function(e){return(e=utils.parseNumber(e))instanceof Error?e:1/Math.sin(e)},exports.CSCH=function(e){return(e=utils.parseNumber(e))instanceof Error?e:2/(Math.exp(e)-Math.exp(-e))},exports.DECIMAL=function(e,t){return arguments.length<1?error.value:parseInt(e,t)},exports.DEGREES=function(e){return(e=utils.parseNumber(e))instanceof Error?e:180*e/Math.PI},exports.EVEN=function(e){return(e=utils.parseNumber(e))instanceof Error?e:exports.CEILING(e,-2,-1)},exports.EXP=Math.exp;var MEMOIZED_FACT=[];return exports.FACT=function(e){if((e=utils.parseNumber(e))instanceof Error)return e;var t=Math.floor(e);return 0===t||1===t?1:(MEMOIZED_FACT[t]>0||(MEMOIZED_FACT[t]=exports.FACT(t-1)*t),MEMOIZED_FACT[t])},exports.FACTDOUBLE=function(e){if((e=utils.parseNumber(e))instanceof Error)return e;var t=Math.floor(e);return t<=0?1:t*exports.FACTDOUBLE(t-2)},exports.FLOOR=function(e,t,n){return t=void 0===t?1:t,n=void 0===n?0:n,e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:0===t?0:(t=Math.abs(t),e>=0?Math.floor(e/t)*t:0===n?-1*Math.ceil(Math.abs(e)/t)*t:-1*Math.floor(Math.abs(e)/t)*t)},exports.FLOOR.MATH=exports.FLOOR,exports.GCD=null,exports.INT=function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.floor(e)},exports.LCM=function(){var e=utils.parseNumberArray(utils.flatten(arguments));if(e instanceof Error)return e;for(var t,n,r,o,i=1;void 0!==(r=e.pop());)for(;r>1;){if(r%2){for(t=3,n=Math.floor(Math.sqrt(r));t<=n&&r%t;t+=2);o=t<=n?t:r}else o=2;for(r/=o,i*=o,t=e.length;t;e[--t]%o===0&&1===(e[t]/=o)&&e.splice(t,1));}return i},exports.LN=function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.log(e)},exports.LOG=function(e,t){return e=utils.parseNumber(e),t=void 0===t?10:utils.parseNumber(t),utils.anyIsError(e,t)?error.value:Math.log(e)/Math.log(t)},exports.LOG10=function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.log(e)/Math.log(10)},exports.MDETERM=null,exports.MINVERSE=null,exports.MMULT=null,exports.MOD=function(e,t){if(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t))return error.value;if(0===t)return error.div0;var n=Math.abs(e%t);return t>0?n:-n},exports.MROUND=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e*t<0?error.num:Math.round(e/t)*t},exports.MULTINOMIAL=function(){var e=utils.parseNumberArray(utils.flatten(arguments));if(e instanceof Error)return e;for(var t=0,n=1,r=0;r<e.length;r++)t+=e[r],n*=exports.FACT(e[r]);return exports.FACT(t)/n},exports.MUNIT=null,exports.ODD=function(e){if((e=utils.parseNumber(e))instanceof Error)return e;var t=Math.ceil(Math.abs(e));return t=1&t?t:t+1,e>0?t:-t},exports.PI=function(){return Math.PI},exports.POWER=function(e,t){if(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t))return error.value;var n=Math.pow(e,t);return isNaN(n)?error.num:n},exports.PRODUCT=function(){var e=utils.parseNumberArray(utils.flatten(arguments));if(e instanceof Error)return e;for(var t=1,n=0;n<e.length;n++)t*=e[n];return t},exports.QUOTIENT=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:parseInt(e/t,10)},exports.RADIANS=function(e){return(e=utils.parseNumber(e))instanceof Error?e:e*Math.PI/180},exports.RAND=function(){return Math.random()},exports.RANDBETWEEN=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e+Math.ceil((t-e+1)*Math.random())-1},exports.ROMAN=null,exports.ROUND=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:Math.round(e*Math.pow(10,t))/Math.pow(10,t)},exports.ROUNDDOWN=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:(e>0?1:-1)*Math.floor(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)},exports.ROUNDUP=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:(e>0?1:-1)*Math.ceil(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)},exports.SEC=function(e){return(e=utils.parseNumber(e))instanceof Error?e:1/Math.cos(e)},exports.SECH=function(e){return(e=utils.parseNumber(e))instanceof Error?e:2/(Math.exp(e)+Math.exp(-e))},exports.SERIESSUM=function(e,t,n,r){if(e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),r=utils.parseNumberArray(r),utils.anyIsError(e,t,n,r))return error.value;for(var o=r[0]*Math.pow(e,t),i=1;i<r.length;i++)o+=r[i]*Math.pow(e,t+i*n);return o},exports.SIGN=function(e){return(e=utils.parseNumber(e))instanceof Error?e:e<0?-1:0===e?0:1},exports.SIN=function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.sin(e)},exports.SINH=function(e){return(e=utils.parseNumber(e))instanceof Error?e:(Math.exp(e)-Math.exp(-e))/2},exports.SQRT=function(e){return(e=utils.parseNumber(e))instanceof Error?e:e<0?error.num:Math.sqrt(e)},exports.SQRTPI=function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.sqrt(e*Math.PI)},exports.SUBTOTAL=null,exports.ADD=function(e,t){return 2!==arguments.length?error.na:(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e+t)},exports.MINUS=function(e,t){return 2!==arguments.length?error.na:(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e-t)},exports.DIVIDE=function(e,t){return 2!==arguments.length?error.na:(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:0===t?error.div0:e/t)},exports.MULTIPLY=function(e,t){return 2!==arguments.length?error.na:(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:e*t)},exports.GTE=function(e,t){return 2!==arguments.length?error.na:(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.error:e>=t)},exports.LT=function(e,t){return 2!==arguments.length?error.na:(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.error:e<t)},exports.LTE=function(e,t){return 2!==arguments.length?error.na:(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.error:e<=t)},exports.EQ=function(e,t){return 2!==arguments.length?error.na:e===t},exports.NE=function(e,t){return 2!==arguments.length?error.na:e!==t},exports.POW=function(e,t){return 2!==arguments.length?error.na:(e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.error:exports.POWER(e,t))},exports.SUM=function(){for(var e=0,t=Object.keys(arguments),n=0;n<t.length;++n){var r=arguments[t[n]];if("number"===typeof r)e+=r;else if("string"===typeof r){var o=parseFloat(r);!isNaN(o)&&(e+=o)}else Array.isArray(r)&&(e+=exports.SUM.apply(null,r))}return e},exports.SUMIF=function(range,criteria){if(range=utils.parseNumberArray(utils.flatten(range)),range instanceof Error)return range;for(var result=0,i=0;i<range.length;i++)result+=eval(range[i]+criteria)?range[i]:0;return result},exports.SUMIFS=function(){var args=utils.argsToArray(arguments),range=utils.parseNumberArray(utils.flatten(args.shift()));if(range instanceof Error)return range;for(var criteria=args,n_range_elements=range.length,n_criterias=criteria.length,result=0,i=0;i<n_range_elements;i++){for(var el=range[i],condition="",c=0;c<n_criterias;c++)condition+=el+criteria[c],c!==n_criterias-1&&(condition+="&&");eval(condition)&&(result+=el)}return result},exports.SUMPRODUCT=null,exports.SUMSQ=function(){var e=utils.parseNumberArray(utils.flatten(arguments));if(e instanceof Error)return e;for(var t=0,n=e.length,r=0;r<n;r++)t+=ISNUMBER(e[r])?e[r]*e[r]:0;return t},exports.SUMX2MY2=function(e,t){if(e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumberArray(utils.flatten(t)),utils.anyIsError(e,t))return error.value;for(var n=0,r=0;r<e.length;r++)n+=e[r]*e[r]-t[r]*t[r];return n},exports.SUMX2PY2=function(e,t){if(e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumberArray(utils.flatten(t)),utils.anyIsError(e,t))return error.value;var n=0;e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumberArray(utils.flatten(t));for(var r=0;r<e.length;r++)n+=e[r]*e[r]+t[r]*t[r];return n},exports.SUMXMY2=function(e,t){if(e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumberArray(utils.flatten(t)),utils.anyIsError(e,t))return error.value;var n=0;e=utils.flatten(e),t=utils.flatten(t);for(var r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return n},exports.TAN=function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.tan(e)},exports.TANH=function(e){if((e=utils.parseNumber(e))instanceof Error)return e;var t=Math.exp(2*e);return(t-1)/(t+1)},exports.TRUNC=function(e,t){return t=void 0===t?0:t,e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:(e>0?1:-1)*Math.floor(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)},exports}(),_jexcel.methods.misc=function(){var e={UNIQUE:function(){for(var e=[],t=0;t<arguments.length;++t){for(var n=!1,r=arguments[t],o=0;o<e.length&&!(n=e[o]===r);++o);n||e.push(r)}return e}};return e.FLATTEN=utils.flatten,e.ARGS2ARRAY=function(){return Array.prototype.slice.call(arguments,0)},e.REFERENCE=function(e,t){try{for(var n=t.split("."),r=e,o=0;o<n.length;++o){var i=n[o];if("]"===i[i.length-1]){var a=i.indexOf("["),s=i.substring(a+1,i.length-1);r=r[i.substring(0,a)][s]}else r=r[i]}return r}catch(error){}},e.JOIN=function(e,t){return e.join(t)},e.NUMBERS=function(){var e=utils.flatten(arguments);return e.filter((function(e){return"number"===typeof e}))},e.NUMERAL=null,e}(),_jexcel.methods.text=function(){var e={ASC:null,BAHTTEXT:null,CHAR:function(e){return(e=utils.parseNumber(e))instanceof Error?e:String.fromCharCode(e)},CLEAN:function(e){return(e=e||"").replace(/[\0-\x1F]/g,"")},CODE:function(e){return(e=e||"").charCodeAt(0)},CONCATENATE:function(){for(var e=utils.flatten(arguments),t=0;(t=e.indexOf(!0))>-1;)e[t]="TRUE";for(var n=0;(n=e.indexOf(!1))>-1;)e[n]="FALSE";return e.join("")},DBCS:null,DOLLAR:null,EXACT:function(e,t){return e===t},FIND:function(e,t,n){return n=void 0===n?0:n,t?t.indexOf(e,n-1)+1:null},FIXED:null,HTML2TEXT:function(e){var t="";return e&&(e instanceof Array?e.forEach((function(e){""!==t&&(t+="\n"),t+=e.replace(/<(?:.|\n)*?>/gm,"")})):t=e.replace(/<(?:.|\n)*?>/gm,"")),t},LEFT:function(e,t){return t=void 0===t?1:t,(t=utils.parseNumber(t))instanceof Error||"string"!==typeof e?error.value:e?e.substring(0,t):null},LEN:function(e){return 0===arguments.length?error.error:"string"===typeof e?e?e.length:0:e.length?e.length:error.value},LOWER:function(e){return"string"!==typeof e?error.value:e?e.toLowerCase():e},MID:function(e,t,n){if(t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(t,n)||"string"!==typeof e)return n;var r=t-1,o=r+n;return e.substring(r,o)},NUMBERVALUE:null,PRONETIC:null,PROPER:function(e){return void 0===e||0===e.length?error.value:(!0===e&&(e="TRUE"),!1===e&&(e="FALSE"),isNaN(e)&&"number"===typeof e?error.value:("number"===typeof e&&(e=""+e),e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))))},REGEXEXTRACT:function(e,t){var n=e.match(new RegExp(t));return n?n[n.length>1?n.length-1:0]:null},REGEXMATCH:function(e,t,n){var r=e.match(new RegExp(t));return n?r:!!r},REGEXREPLACE:function(e,t,n){return e.replace(new RegExp(t),n)},REPLACE:function(e,t,n,r){return t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(t,n)||"string"!==typeof e||"string"!==typeof r?error.value:e.substr(0,t-1)+r+e.substr(t-1+n)},REPT:function(e,t){return(t=utils.parseNumber(t))instanceof Error?t:new Array(t+1).join(e)},RIGHT:function(e,t){return t=void 0===t?1:t,(t=utils.parseNumber(t))instanceof Error?t:e?e.substring(e.length-t):null},SEARCH:function(e,t,n){var r;return"string"!==typeof e||"string"!==typeof t?error.value:(n=void 0===n?0:n,0===(r=t.toLowerCase().indexOf(e.toLowerCase(),n-1)+1)?error.value:r)},SPLIT:function(e,t){return e.split(t)},SUBSTITUTE:function(e,t,n,r){if(!(e&&t&&n))return e;if(void 0===r)return e.replace(new RegExp(t,"g"),n);for(var o=0,i=0;e.indexOf(t,o)>0;)if(o=e.indexOf(t,o+1),++i===r)return e.substring(0,o)+n+e.substring(o+t.length)},T:function(e){return"string"===typeof e?e:""},TEXT:null,TRIM:function(e){return"string"!==typeof e?error.value:e.replace(/ +/g," ").trim()}};return e.UNICHAR=e.CHAR,e.UNICODE=e.CODE,e.UPPER=function(e){return"string"!==typeof e?error.value:e.toUpperCase()},e.VALUE=null,e}(),_jexcel.methods.stats=function(){var exports={},SQRT2PI=2.5066282746310002;return exports.AVEDEV=null,exports.AVERAGE=function(){for(var e=utils.numbers(utils.flatten(arguments)),t=e.length,n=0,r=0,o=0;o<t;o++)n+=e[o],r+=1;return n/r},exports.AVERAGEA=function(){for(var e=utils.flatten(arguments),t=e.length,n=0,r=0,o=0;o<t;o++){var i=e[o];"number"===typeof i&&(n+=i),!0===i&&n++,null!==i&&r++}return n/r},exports.AVERAGEIF=function(range,criteria,average_range){if(average_range=average_range||range,range=utils.flatten(range),average_range=utils.parseNumberArray(utils.flatten(average_range)),average_range instanceof Error)return average_range;for(var average_count=0,result=0,i=0;i<range.length;i++)eval(range[i]+criteria)&&(result+=average_range[i],average_count++);return result/average_count},exports.AVERAGEIFS=null,exports.COUNT=function(){return utils.numbers(utils.flatten(arguments)).length},exports.COUNTA=function(){var e=utils.flatten(arguments);return e.length-exports.COUNTBLANK(e)},exports.COUNTIN=function(e,t){for(var n=0,r=0;r<e.length;r++)e[r]===t&&n++;return n},exports.COUNTBLANK=function(){for(var e,t=utils.flatten(arguments),n=0,r=0;r<t.length;r++)null!==(e=t[r])&&""!==e||n++;return n},exports.COUNTIF=function(range,criteria){range=utils.flatten(range),/[<>=!]/.test(criteria)||(criteria='=="'+criteria+'"');for(var matches=0,i=0;i<range.length;i++)"string"!==typeof range[i]?eval(range[i]+criteria)&&matches++:eval('"'+range[i]+'"'+criteria)&&matches++;return matches},exports.COUNTIFS=function(){for(var args=utils.argsToArray(arguments),results=new Array(utils.flatten(args[0]).length),i=0;i<results.length;i++)results[i]=!0;for(i=0;i<args.length;i+=2){var range=utils.flatten(args[i]),criteria=args[i+1];/[<>=!]/.test(criteria)||(criteria='=="'+criteria+'"');for(var j=0;j<range.length;j++)"string"!==typeof range[j]?results[j]=results[j]&&eval(range[j]+criteria):results[j]=results[j]&&eval('"'+range[j]+'"'+criteria)}var result=0;for(i=0;i<results.length;i++)results[i]&&result++;return result},exports.COUNTUNIQUE=function(){return UNIQUE.apply(null,utils.flatten(arguments)).length},exports.FISHER=function(e){return(e=utils.parseNumber(e))instanceof Error?e:Math.log((1+e)/(1-e))/2},exports.FISHERINV=function(e){if((e=utils.parseNumber(e))instanceof Error)return e;var t=Math.exp(2*e);return(t-1)/(t+1)},exports.FREQUENCY=function(e,t){if(e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumberArray(utils.flatten(t)),utils.anyIsError(e,t))return error.value;for(var n=e.length,r=t.length,o=[],i=0;i<=r;i++){o[i]=0;for(var a=0;a<n;a++)0===i?e[a]<=t[0]&&(o[0]+=1):i<r?e[a]>t[i-1]&&e[a]<=t[i]&&(o[i]+=1):i===r&&e[a]>t[r-1]&&(o[r]+=1)}return o},exports.LARGE=function(e,t){return e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumber(t),utils.anyIsError(e,t)?e:e.sort((function(e,t){return t-e}))[t-1]},exports.MAX=function(){var e=utils.numbers(utils.flatten(arguments));return 0===e.length?0:Math.max.apply(Math,e)},exports.MAXA=function(){var e=utils.arrayValuesToNumbers(utils.flatten(arguments));return 0===e.length?0:Math.max.apply(Math,e)},exports.MIN=function(){var e=utils.numbers(utils.flatten(arguments));return 0===e.length?0:Math.min.apply(Math,e)},exports.MINA=function(){var e=utils.arrayValuesToNumbers(utils.flatten(arguments));return 0===e.length?0:Math.min.apply(Math,e)},exports.MODE={},exports.MODE.MULT=function(){var e=utils.parseNumberArray(utils.flatten(arguments));if(e instanceof Error)return e;for(var t,n=e.length,r={},o=[],i=0,a=0;a<n;a++)r[t=e[a]]=r[t]?r[t]+1:1,r[t]>i&&(i=r[t],o=[]),r[t]===i&&(o[o.length]=t);return o},exports.MODE.SNGL=function(){var e=utils.parseNumberArray(utils.flatten(arguments));return e instanceof Error?e:exports.MODE.MULT(e).sort((function(e,t){return e-t}))[0]},exports.PERCENTILE={},exports.PERCENTILE.EXC=function(e,t){if(e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumber(t),utils.anyIsError(e,t))return error.value;var n=(e=e.sort((function(e,t){return e-t}))).length;if(t<1/(n+1)||t>1-1/(n+1))return error.num;var r=t*(n+1)-1,o=Math.floor(r);return utils.cleanFloat(r===o?e[r]:e[o]+(r-o)*(e[o+1]-e[o]))},exports.PERCENTILE.INC=function(e,t){if(e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumber(t),utils.anyIsError(e,t))return error.value;var n=t*((e=e.sort((function(e,t){return e-t}))).length-1),r=Math.floor(n);return utils.cleanFloat(n===r?e[n]:e[r]+(n-r)*(e[r+1]-e[r]))},exports.PERCENTRANK={},exports.PERCENTRANK.EXC=function(e,t,n){if(n=void 0===n?3:n,e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n))return error.value;e=e.sort((function(e,t){return e-t}));for(var r=UNIQUE.apply(null,e),o=e.length,i=r.length,a=Math.pow(10,n),s=0,l=!1,u=0;!l&&u<i;)t===r[u]?(s=(e.indexOf(r[u])+1)/(o+1),l=!0):t>=r[u]&&(t<r[u+1]||u===i-1)&&(s=(e.indexOf(r[u])+1+(t-r[u])/(r[u+1]-r[u]))/(o+1),l=!0),u++;return Math.floor(s*a)/a},exports.PERCENTRANK.INC=function(e,t,n){if(n=void 0===n?3:n,e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n))return error.value;e=e.sort((function(e,t){return e-t}));for(var r=UNIQUE.apply(null,e),o=e.length,i=r.length,a=Math.pow(10,n),s=0,l=!1,u=0;!l&&u<i;)t===r[u]?(s=e.indexOf(r[u])/(o-1),l=!0):t>=r[u]&&(t<r[u+1]||u===i-1)&&(s=(e.indexOf(r[u])+(t-r[u])/(r[u+1]-r[u]))/(o-1),l=!0),u++;return Math.floor(s*a)/a},exports.PERMUT=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:FACT(e)/FACT(e-t)},exports.PERMUTATIONA=function(e,t){return e=utils.parseNumber(e),t=utils.parseNumber(t),utils.anyIsError(e,t)?error.value:Math.pow(e,t)},exports.PHI=function(e){return(e=utils.parseNumber(e))instanceof Error?error.value:Math.exp(-.5*e*e)/SQRT2PI},exports.PROB=function(e,t,n,r){if(void 0===n)return 0;if(r=void 0===r?n:r,e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumberArray(utils.flatten(t)),n=utils.parseNumber(n),r=utils.parseNumber(r),utils.anyIsError(e,t,n,r))return error.value;if(n===r)return e.indexOf(n)>=0?t[e.indexOf(n)]:0;for(var o=e.sort((function(e,t){return e-t})),i=o.length,a=0,s=0;s<i;s++)o[s]>=n&&o[s]<=r&&(a+=t[e.indexOf(o[s])]);return a},exports.QUARTILE={},exports.QUARTILE.EXC=function(e,t){if(e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumber(t),utils.anyIsError(e,t))return error.value;switch(t){case 1:return exports.PERCENTILE.EXC(e,.25);case 2:return exports.PERCENTILE.EXC(e,.5);case 3:return exports.PERCENTILE.EXC(e,.75);default:return error.num}},exports.QUARTILE.INC=function(e,t){if(e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumber(t),utils.anyIsError(e,t))return error.value;switch(t){case 1:return exports.PERCENTILE.INC(e,.25);case 2:return exports.PERCENTILE.INC(e,.5);case 3:return exports.PERCENTILE.INC(e,.75);default:return error.num}},exports.RANK={},exports.RANK.AVG=function(e,t,n){if(e=utils.parseNumber(e),t=utils.parseNumberArray(utils.flatten(t)),utils.anyIsError(e,t))return error.value;for(var r=(n=n||!1)?function(e,t){return e-t}:function(e,t){return t-e},o=(t=(t=utils.flatten(t)).sort(r)).length,i=0,a=0;a<o;a++)t[a]===e&&i++;return i>1?(2*t.indexOf(e)+i+1)/2:t.indexOf(e)+1},exports.RANK.EQ=function(e,t,n){if(e=utils.parseNumber(e),t=utils.parseNumberArray(utils.flatten(t)),utils.anyIsError(e,t))return error.value;var r=(n=n||!1)?function(e,t){return e-t}:function(e,t){return t-e};return(t=t.sort(r)).indexOf(e)+1},exports.RSQ=function(e,t){return e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumberArray(utils.flatten(t)),utils.anyIsError(e,t)?error.value:Math.pow(exports.PEARSON(e,t),2)},exports.SMALL=function(e,t){return e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumber(t),utils.anyIsError(e,t)?e:e.sort((function(e,t){return e-t}))[t-1]},exports.STANDARDIZE=function(e,t,n){return e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:(e-t)/n},exports.STDEV={},exports.STDEV.P=function(){var e=exports.VAR.P.apply(this,arguments);return Math.sqrt(e)},exports.STDEV.S=function(){var e=exports.VAR.S.apply(this,arguments);return Math.sqrt(e)},exports.STDEVA=function(){var e=exports.VARA.apply(this,arguments);return Math.sqrt(e)},exports.STDEVPA=function(){var e=exports.VARPA.apply(this,arguments);return Math.sqrt(e)},exports.VAR={},exports.VAR.P=function(){for(var e=utils.numbers(utils.flatten(arguments)),t=e.length,n=0,r=exports.AVERAGE(e),o=0;o<t;o++)n+=Math.pow(e[o]-r,2);return n/t},exports.VAR.S=function(){for(var e=utils.numbers(utils.flatten(arguments)),t=e.length,n=0,r=exports.AVERAGE(e),o=0;o<t;o++)n+=Math.pow(e[o]-r,2);return n/(t-1)},exports.VARA=function(){for(var e=utils.flatten(arguments),t=e.length,n=0,r=0,o=exports.AVERAGEA(e),i=0;i<t;i++){var a=e[i];n+="number"===typeof a?Math.pow(a-o,2):!0===a?Math.pow(1-o,2):Math.pow(0-o,2),null!==a&&r++}return n/(r-1)},exports.VARPA=function(){for(var e=utils.flatten(arguments),t=e.length,n=0,r=0,o=exports.AVERAGEA(e),i=0;i<t;i++){var a=e[i];n+="number"===typeof a?Math.pow(a-o,2):!0===a?Math.pow(1-o,2):Math.pow(0-o,2),null!==a&&r++}return n/r},exports.WEIBULL={},exports.WEIBULL.DIST=function(e,t,n,r){return e=utils.parseNumber(e),t=utils.parseNumber(t),n=utils.parseNumber(n),utils.anyIsError(e,t,n)?error.value:r?1-Math.exp(-Math.pow(e/n,t)):Math.pow(e,t-1)*Math.exp(-Math.pow(e/n,t))*t/Math.pow(n,t)},exports.Z={},exports.Z.TEST=function(e,t,n){if(e=utils.parseNumberArray(utils.flatten(e)),t=utils.parseNumber(t),utils.anyIsError(e,t))return error.value;n=n||exports.STDEV.S(e);var r=e.length;return 1-exports.NORM.S.DIST((exports.AVERAGE(e)-t)/(n/Math.sqrt(r)),!0)},exports}(),_jexcel.methods.utils=function(){var e={PROGRESS:function(e,t){return'<div style="width:'+(e||"0")+"%;height:4px;background-color:"+(t||"red")+';margin-top:1px;"></div>'},RATING:function(e){for(var t='<div class="jrating">',n=0;n<5;n++)t+=n<e?'<div class="jrating-selected"></div>':"<div></div>";return t+="</div>"}};return e}();for(var i=0;i<Object.keys(_jexcel.methods).length;i++)for(var methods=_jexcel.methods[Object.keys(_jexcel.methods)[i]],j=0;j<Object.keys(methods).length;j++)"function"==typeof methods[Object.keys(methods)[j]]?window[Object.keys(methods)[j]]=methods[Object.keys(methods)[j]]:window[Object.keys(methods)[j]]=function(){return Object.keys(methods)[j]+"Not implemented"};return _jexcel},module.exports=factory()},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,t){for(var n,s,l=a(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))o.call(n,c)&&(l[c]=n[c]);if(r){s=r(n);for(var d=0;d<s.length;d++)i.call(n,s[d])&&(l[s[d]]=n[s[d]])}}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(1)),o=u(n(2)),i=u(n(13)),a=u(n(37)),s=u(n(12)),l=u(n(38));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t,n){var o=e.nodeType,i=e.data,u=e.collectionLimit,c=e.circularCache,d=e.keyPath,h=e.postprocessValue,f=e.sortObjectKeys,p=[];return(0,a.default)(o,i,f,u,t,n).forEach((function(t){if(void 0!==t.to)p.push(r.default.createElement(l.default,w({},e,{key:"ItemRange--".concat(t.from,"-").concat(t.to),from:t.from,to:t.to,renderChildNodes:C})));else{var n=t.key,o=t.value,i=-1!==c.indexOf(o);p.push(r.default.createElement(s.default,w({},e,{postprocessValue:h,collectionLimit:u},{key:"Node--".concat(n),keyPath:[n].concat(j(d)),value:h(o),circularCache:[].concat(j(c),[o]),isCircular:i,hideRoot:!1})))}})),p}function _(e){return{expanded:!(!e.shouldExpandNode||e.isCircular)&&e.shouldExpandNode(e.keyPath,e.data,e.level)}}var S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,e);var t,n,o,a=g(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),y(m(t=a.call(this,e)),"handleClick",(function(){t.props.expandable&&t.setState({expanded:!t.state.expanded})})),t.state=_(e),t}return t=s,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=_(e);_(this.props).expanded!==t.expanded&&this.setState(t)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this;return!!Object.keys(e).find((function(t){return"circularCache"!==t&&("keyPath"===t?e[t].join("/")!==n.props[t].join("/"):e[t]!==n.props[t])}))||t.expanded!==this.state.expanded}},{key:"render",value:function(){var e=this.props,t=e.getItemString,n=e.nodeTypeIndicator,o=e.nodeType,a=e.data,s=e.hideRoot,l=e.createItemString,u=e.styling,c=e.collectionLimit,d=e.keyPath,f=e.labelRenderer,p=e.expandable,g=this.state.expanded,b=g||s&&0===this.props.level?C(h(h({},this.props),{},{level:this.props.level+1})):null,m=t(o,a,r.default.createElement("span",u("nestedNodeItemType",g),n),l(a,c),d),v=[d,o,g,p];return s?r.default.createElement("li",u.apply(void 0,["rootNode"].concat(v)),r.default.createElement("ul",u.apply(void 0,["rootNodeChildren"].concat(v)),b)):r.default.createElement("li",u.apply(void 0,["nestedNode"].concat(v)),p&&r.default.createElement(i.default,{styling:u,nodeType:o,expanded:g,onClick:this.handleClick}),r.default.createElement("label",w({},u.apply(void 0,[["label","nestedNodeLabel"]].concat(v)),{onClick:this.handleClick}),f.apply(void 0,v)),r.default.createElement("span",w({},u.apply(void 0,["nestedNodeItemString"].concat(v)),{onClick:this.handleClick}),m),r.default.createElement("ul",u.apply(void 0,["nestedNodeChildren"].concat(v)),b))}}])&&f(t.prototype,n),o&&f(t,o),s}(r.default.Component);t.default=S,y(S,"propTypes",{getItemString:o.default.func.isRequired,nodeTypeIndicator:o.default.any,nodeType:o.default.string.isRequired,data:o.default.any,hideRoot:o.default.bool.isRequired,createItemString:o.default.func.isRequired,styling:o.default.func.isRequired,collectionLimit:o.default.number,keyPath:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.number])).isRequired,labelRenderer:o.default.func.isRequired,shouldExpandNode:o.default.func,level:o.default.number.isRequired,sortObjectKeys:o.default.oneOfType([o.default.func,o.default.bool]),isCircular:o.default.bool,expandable:o.default.bool}),y(S,"defaultProps",{data:[],circularCache:[],level:0,expandable:!0})},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(20)},function(e,t,n){},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(1)),o=c(n(2)),i=c(n(35)),a=c(n(36)),s=c(n(39)),l=c(n(40)),u=c(n(41));function c(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var b=function(e){var t=e.getItemString,n=e.keyPath,o=e.labelRenderer,c=e.styling,h=e.value,p=e.valueRenderer,b=e.isCustomNode,m=g(e,["getItemString","keyPath","labelRenderer","styling","value","valueRenderer","isCustomNode"]),v=b(h)?"Custom":(0,i.default)(h),y={getItemString:t,key:n[0],keyPath:n,labelRenderer:o,nodeType:v,styling:c,value:h,valueRenderer:p},j=f(f(f({},m),y),{},{data:h,isCustomNode:b});switch(v){case"Object":case"Error":case"WeakMap":case"WeakSet":return r.default.createElement(a.default,j);case"Array":return r.default.createElement(s.default,j);case"Iterable":case"Map":case"Set":return r.default.createElement(l.default,j);case"String":return r.default.createElement(u.default,d({},y,{valueGetter:function(e){return'"'.concat(e,'"')}}));case"Number":return r.default.createElement(u.default,y);case"Boolean":return r.default.createElement(u.default,d({},y,{valueGetter:function(e){return e?"true":"false"}}));case"Date":return r.default.createElement(u.default,d({},y,{valueGetter:function(e){return e.toISOString()}}));case"Null":return r.default.createElement(u.default,d({},y,{valueGetter:function(){return"null"}}));case"Undefined":return r.default.createElement(u.default,d({},y,{valueGetter:function(){return"undefined"}}));case"Function":case"Symbol":return r.default.createElement(u.default,d({},y,{valueGetter:function(e){return e.toString()}}));case"Custom":return r.default.createElement(u.default,y);default:return r.default.createElement(u.default,d({},y,{valueGetter:function(){return"<".concat(v,">")}}))}};b.propTypes={getItemString:o.default.func.isRequired,keyPath:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.number]).isRequired).isRequired,labelRenderer:o.default.func.isRequired,styling:o.default.func.isRequired,value:o.default.any,valueRenderer:o.default.func.isRequired,isCustomNode:o.default.func.isRequired};var m=b;t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(1)),o=i(n(2));function i(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e){var t=e.styling,n=e.arrowStyle,o=e.expanded,i=e.nodeType,s=e.onClick;return r.default.createElement("div",a({},t("arrowContainer",n),{onClick:s}),r.default.createElement("div",t(["arrow","arrowSign"],i,o,n),"\u25b6","double"===n&&r.default.createElement("div",t(["arrowSign","arrowSignInner"]),"\u25b6")))};s.propTypes={styling:o.default.func.isRequired,arrowStyle:o.default.oneOf(["single","double"]),expanded:o.default.bool.isRequired,nodeType:o.default.string.isRequired,onClick:o.default.func.isRequired},s.defaultProps={arrowStyle:"single"};var l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={invertBase16Theme:!0,createStyling:!0,getBase16Theme:!0,invertTheme:!0,Base16Theme:!0};Object.defineProperty(t,"Base16Theme",{enumerable:!0,get:function(){return o.Base16Theme}}),t.invertTheme=t.getBase16Theme=t.createStyling=t.invertBase16Theme=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(43)),i=u(n(81)),a=u(n(89)),s=n(90),l=n(91);function u(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var m=o.default,v=Object.keys(m),y=function(e){return function(t){return{className:[t.className,e.className].filter(Boolean).join(" "),style:f(f({},t.style||{}),e.style||{})}}},j=function(e,t){var n=Object.keys(t);for(var r in e)-1===n.indexOf(r)&&n.push(r);return n.reduce((function(n,r){return n[r]=function(e,t){if(void 0===e)return t;if(void 0===t)return e;var n=d(e),r=d(t);switch(n){case"string":switch(r){case"string":return[t,e].filter(Boolean).join(" ");case"object":return y({className:e,style:t});case"function":return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return y({className:e})(t.apply(void 0,[n].concat(o)))}}break;case"object":switch(r){case"string":return y({className:t,style:e});case"object":return f(f({},t),e);case"function":return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return y({style:e})(t.apply(void 0,[n].concat(o)))}}break;case"function":switch(r){case"string":return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return e.apply(void 0,[y(n)({className:t})].concat(o))};case"object":return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return e.apply(void 0,[y(n)({style:t})].concat(o))};case"function":return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return e.apply(void 0,[t.apply(void 0,[n].concat(o))].concat(o))}}}}(e[r],t[r]),n}),{})},x=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(null===t)return e;Array.isArray(t)||(t=[t]);var i=t.map((function(t){return e[t]})).filter(Boolean),a=i.reduce((function(e,t){return"string"===typeof t?e.className=[e.className,t].filter(Boolean).join(" "):"object"===d(t)?e.style=f(f({},e.style),t):"function"===typeof t&&(e=f(f({},e),t.apply(void 0,[e].concat(r)))),e}),{className:"",style:{}});return a.className||delete a.className,0===Object.keys(a.style).length&&delete a.style,a},w=function(e){return Object.keys(e).reduce((function(t,n){return t[n]=/^base/.test(n)?function(e){var t,n=(0,i.default)(e),r=g((0,s.rgb2yuv)(n.array()),3),o=r[0],a=r[1],l=r[2],u=[(t=o,t<.25?1:t<.5?.9-t:1.1-t),a,l],c=(0,s.yuv2rgb)(u);return i.default.rgb(c).hex()}(e[n]):"scheme"===n?e[n]+":inverted":e[n],t}),{})};t.invertBase16Theme=w;var C=(0,a.default)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.defaultBase16,o=void 0===r?m:r,i=t.base16Themes,s=void 0===i?null:i,l=S(n,s);l&&(n=f(f({},l),n));for(var u=v.reduce((function(e,t){return e[t]=n[t]||o[t],e}),{}),c=Object.keys(n).reduce((function(e,t){return-1===v.indexOf(t)?(e[t]=n[t],e):e}),{}),d=e(u),h=j(c,d),p=arguments.length,g=new Array(p>3?p-3:0),b=3;b<p;b++)g[b-3]=arguments[b];return(0,a.default)(x,2).apply(void 0,[h].concat(g))}),3);t.createStyling=C;var _=function(e){return!!e.extend},S=function(e,t){if(e&&_(e)&&e.extend&&(e=e.extend),"string"===typeof e){var n=g(e.split(":"),2),r=n[0],i=n[1];e=t?t[r]:o[r],"inverted"===i&&(e=w(e))}return e&&Object.prototype.hasOwnProperty.call(e,"base00")?e:void 0};t.getBase16Theme=S;t.invertTheme=function(e){return"string"===typeof e?"".concat(e,":inverted"):e&&_(e)&&e.extend?"string"===typeof e.extend?f(f({},e),{},{extend:"".concat(e.extend,":inverted")}):f(f({},e),{},{extend:w(e.extend)}):e?w(e):e}},function(e,t,n){var r=n(87),o={};for(var i in r)r.hasOwnProperty(i)&&(o[r[i]]=i);var a=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var l=a[s].channels,u=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:l}),Object.defineProperty(a[s],"labels",{value:u})}a.rgb.hsl=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(r,o,i),s=Math.max(r,o,i),l=s-a;return s===a?t=0:r===s?t=(o-i)/l:o===s?t=2+(i-r)/l:i===s&&(t=4+(r-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s===a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]},a.rgb.hsv=function(e){var t,n,r,o,i,a=e[0]/255,s=e[1]/255,l=e[2]/255,u=Math.max(a,s,l),c=u-Math.min(a,s,l),d=function(e){return(u-e)/6/c+.5};return 0===c?o=i=0:(i=c/u,t=d(a),n=d(s),r=d(l),a===u?o=r-n:s===u?o=1/3+t-r:l===u&&(o=2/3+n-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*i,100*u]},a.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[a.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},a.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,o=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-o)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-o-t)/(1-t)||0),100*t]},a.rgb.keyword=function(e){var t=o[e];if(t)return t;var n,i,a,s=1/0;for(var l in r)if(r.hasOwnProperty(l)){var u=r[l],c=(i=e,a=u,Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)+Math.pow(i[2]-a[2],2));c<s&&(s=c,n=l)}return n},a.keyword.rgb=function(e){return r[e]},a.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},a.rgb.lab=function(e){var t=a.rgb.xyz(e),n=t[0],r=t[1],o=t[2];return r/=100,o/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},a.hsl.rgb=function(e){var t,n,r,o,i,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[i=255*l,i,i];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),o=[0,0,0];for(var u=0;u<3;u++)(r=a+1/3*-(u-1))<0&&r++,r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,o[u]=255*i;return o},a.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,o=n,i=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,o*=i<=1?i:2-i,[t,100*(0===r?2*o/(i+o):2*n/(r+n)),100*((r+n)/2)]},a.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,o=Math.floor(t)%6,i=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*i),l=255*r*(1-n*(1-i));switch(r*=255,o){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}},a.hsv.hsl=function(e){var t,n,r,o=e[0],i=e[1]/100,a=e[2]/100,s=Math.max(a,.01);return r=(2-i)*a,n=i*s,[o,100*(n=(n/=(t=(2-i)*s)<=1?t:2-t)||0),100*(r/=2)]},a.hwb.rgb=function(e){var t,n,r,o,i,a,s,l=e[0]/360,u=e[1]/100,c=e[2]/100,d=u+c;switch(d>1&&(u/=d,c/=d),r=6*l-(t=Math.floor(6*l)),0!==(1&t)&&(r=1-r),o=u+r*((n=1-c)-u),t){default:case 6:case 0:i=n,a=o,s=u;break;case 1:i=o,a=n,s=u;break;case 2:i=u,a=n,s=o;break;case 3:i=u,a=o,s=n;break;case 4:i=o,a=u,s=n;break;case 5:i=n,a=u,s=o}return[255*i,255*a,255*s]},a.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o))]},a.xyz.rgb=function(e){var t,n,r,o=e[0]/100,i=e[1]/100,a=e[2]/100;return n=-.9689*o+1.8758*i+.0415*a,r=.0557*o+-.204*i+1.057*a,t=(t=3.2406*o+-1.5372*i+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},a.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},a.lab.xyz=function(e){var t,n,r,o=e[0];t=e[1]/500+(n=(o+16)/116),r=n-e[2]/200;var i=Math.pow(n,3),a=Math.pow(t,3),s=Math.pow(r,3);return n=i>.008856?i:(n-16/116)/7.787,t=a>.008856?a:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},a.lab.lch=function(e){var t,n=e[0],r=e[1],o=e[2];return(t=360*Math.atan2(o,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+o*o),t]},a.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},a.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],o=1 in arguments?arguments[1]:a.rgb.hsv(e)[2];if(0===(o=Math.round(o/50)))return 30;var i=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===o&&(i+=60),i},a.hsv.ansi16=function(e){return a.rgb.ansi16(a.hsv.rgb(e),e[2])},a.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},a.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},a.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},a.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},a.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map((function(e){return e+e})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},a.rgb.hcg=function(e){var t,n=e[0]/255,r=e[1]/255,o=e[2]/255,i=Math.max(Math.max(n,r),o),a=Math.min(Math.min(n,r),o),s=i-a;return t=s<=0?0:i===n?(r-o)/s%6:i===r?2+(o-n)/s:4+(n-r)/s+4,t/=6,[360*(t%=1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,o=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(o=(n-.5*r)/(1-r)),[e[0],100*r,100*o]},a.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},a.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var o,i=[0,0,0],a=t%1*6,s=a%1,l=1-s;switch(Math.floor(a)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=l,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=l,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=l}return o=(1-n)*r,[255*(n*i[0]+o),255*(n*i[1]+o),255*(n*i[2]+o)]},a.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},a.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},a.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},a.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},a.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},a.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},a.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},a.gray.hsl=a.gray.hsv=function(e){return[0,0,e[0]]},a.gray.hwb=function(e){return[0,100,e[0]]},a.gray.cmyk=function(e){return[0,0,0,e[0]]},a.gray.lab=function(e){return[e[0],0,0]},a.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),o=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var l=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.unmounted=!1,n.state={hasUserMedia:!1},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;s()?e.hasUserMedia||this.requestUserMedia():t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),o=e.minScreenshotWidth!==t.minScreenshotWidth,i=e.minScreenshotHeight!==t.minScreenshotHeight;(r||o||i)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(e){return e.stop()})),e.getAudioTracks().map((function(e){return e.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,o=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var i=r/o;o=(r=n.minScreenshotWidth||this.video.clientWidth)/i,n.minScreenshotHeight&&o<n.minScreenshotHeight&&(r=(o=n.minScreenshotHeight)*i)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||o,this.ctx=this.canvas.getContext("2d")}var a=this.ctx,s=this.canvas;return a&&s&&(n.mirrored&&(a.translate(s.width,0),a.scale(-1,1)),a.imageSmoothingEnabled=n.imageSmoothing,a.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(a.scale(-1,1),a.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,o){var i={video:"undefined"===typeof o||o};n.audio&&(i.audio="undefined"===typeof r||r),navigator.mediaDevices.getUserMedia(i).then((function(n){e.unmounted?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var o=function(e){return{optional:[{sourceId:e}]}},i=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,a=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(a=e.id)}));var s=i(n.audioConstraints);s&&(t=s);var l=i(n.videoConstraints);l&&(a=l),r(o(t),o(a))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,o=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),l=n.style,u=void 0===l?{}:l,c=a(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style"]),d=s?i(i({},u),{transform:(u.transform||"")+" scaleX(-1)"}):u;return r.createElement("video",i({autoPlay:!0,src:t.src,muted:o,playsInline:!0,ref:function(t){e.video=t},style:d},c))},t.defaultProps={audio:!0,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=l},react:function(t,n){t.exports=e}}).default},e.exports=r(n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"StylingValue",{enumerable:!0,get:function(){return s.StylingValue}}),t.default=void 0;var r=l(n(1)),o=l(n(2)),i=l(n(12)),a=l(n(42)),s=n(14);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){return e};function C(e){var t=function(e,t){var n={getArrowStyle:"arrow",getListStyle:"nestedNodeChildren",getItemStringStyle:"nestedNodeItemString",getLabelStyle:"label",getValueStyle:"valueText"},r=Object.keys(n).filter((function(e){return t[e]}));return r.length>0&&(e="string"===typeof e?{extend:e}:v({},e),r.forEach((function(r){console.error('Styling method "'.concat(r,'" is deprecated, use "theme" property instead')),e[n[r]]=function(e){for(var n=e.style,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return{style:v(v({},n),t[r].apply(t,i))}}}))),e}(e.theme,e);return e.invertTheme&&(t=(0,s.invertTheme)(t)),{styling:(0,a.default)(t)}}var _=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,n,o,a=p(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).state=C(e),t}return t=s,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;["theme","invertTheme"].find((function(n){return e[n]!==t.props[n]}))&&this.setState(C(e))}},{key:"shouldComponentUpdate",value:function(e){var t=this;return!!Object.keys(e).find((function(n){return"keyPath"===n?e[n].join("/")!==t.props[n].join("/"):e[n]!==t.props[n]}))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.keyPath,o=e.postprocessValue,a=e.hideRoot,s=(e.theme,e.invertTheme,d(e,["data","keyPath","postprocessValue","hideRoot","theme","invertTheme"])),l=this.state.styling;return r.default.createElement("ul",l("tree"),r.default.createElement(i.default,c({},v({postprocessValue:o,hideRoot:a,styling:l},s),{keyPath:a?[]:n,value:o(t)})))}}])&&h(t.prototype,n),o&&h(t,o),s}(r.default.Component);t.default=_,y(_,"propTypes",{data:o.default.any,hideRoot:o.default.bool,theme:o.default.oneOfType([o.default.object,o.default.string]),invertTheme:o.default.bool,keyPath:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.number])),postprocessValue:o.default.func,sortObjectKeys:o.default.oneOfType([o.default.func,o.default.bool])}),y(_,"defaultProps",{shouldExpandNode:function(e,t,n){return 0===n},hideRoot:!1,keyPath:["root"],getItemString:function(e,t,n,o){return r.default.createElement("span",null,n," ",o)},labelRenderer:function(e){var t=j(e,1)[0];return r.default.createElement("span",null,t,":")},valueRenderer:w,postprocessValue:w,isCustomNode:function(){return!1},collectionLimit:50,invertTheme:!0})},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(M){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),a=new T(r||[]);return i._invoke=function(e,t,n){var r=d;return function(o,i){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=c(e,t,n);if("normal"===l.type){if(r=n.done?p:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(e,n,a),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=u;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",g={};function b(){}function m(){}function v(){}var y={};y[i]=function(){return this};var j=Object.getPrototypeOf,x=j&&j(j(A([])));x&&x!==n&&r.call(x,i)&&(y=x);var w=v.prototype=b.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,i,a,s){var l=c(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=c(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:t,done:!0}}return m.prototype=w.constructor=v,v.constructor=m,m.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},C(_.prototype),_.prototype[a]=function(){return this},e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(w),l(w,s,"Generator"),w[i]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";var r=n(7),o=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;o=d("react.element"),i=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),a=d("react.provider"),s=d("react.context"),l=d("react.forward_ref"),t.Suspense=d("react.suspense"),u=d("react.memo"),c=d("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function m(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=b.prototype;var y=v.prototype=new m;y.constructor=v,r(y,b.prototype),y.isPureReactComponent=!0;var j={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,r)&&!w.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:j.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var S=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case o:case i:l=!0}}if(l)return a=a(l=e),e=""===r?"."+E(l,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),O(a,t,n,"",(function(e){return e}))):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+E(s=e[u],u);l+=O(s,t,n,c,a)}else if("function"===typeof(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e)))for(e=c.call(e),u=0;!(s=e.next()).done;)l+=O(s=s.value,t,n,c=r+E(s,u++),a);else if("object"===s)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function T(e,t,n){if(null==e)return e;var r=[],o=0;return O(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var k={current:null};function M(){var e=k.current;if(null===e)throw Error(f(321));return e}var L={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:j,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error(f(143));return e}},t.Component=b,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var i=r({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=j.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!w.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return M().useCallback(e,t)},t.useContext=function(e,t){return M().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return M().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return M().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return M().useLayoutEffect(e,t)},t.useMemo=function(e,t){return M().useMemo(e,t)},t.useReducer=function(e,t,n){return M().useReducer(e,t,n)},t.useRef=function(e){return M().useRef(e)},t.useState=function(e){return M().useState(e)},t.version="17.0.2"},function(e,t,n){"use strict";var r=n(1),o=n(7),i=n(21);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},g={};function b(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new b(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new b(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new b(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new b(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new b(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new b(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new b(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new b(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new b(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function j(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0===o.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!f.call(g,e)||!f.call(p,e)&&(h.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new b(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new b(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new b(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new b(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new b(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,C=60106,_=60107,S=60108,E=60114,O=60109,T=60110,A=60112,k=60113,M=60120,L=60115,I=60116,D=60121,N=60128,P=60129,R=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;w=B("react.element"),C=B("react.portal"),_=B("react.fragment"),S=B("react.strict_mode"),E=B("react.profiler"),O=B("react.provider"),T=B("react.context"),A=B("react.forward_ref"),k=B("react.suspense"),M=B("react.suspense_list"),L=B("react.memo"),I=B("react.lazy"),D=B("react.block"),B("react.scope"),N=B("react.opaque.id"),P=B("react.debug_trace_mode"),R=B("react.offscreen"),F=B("react.legacy_hidden")}var H,U="function"===typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=U&&e[U]||e["@@iterator"])?e:null}function Y(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||""}return"\n"+H+e}var W=!1;function V(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var o=l.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s])return"\n"+o[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Y(e):""}function X(e){switch(e.tag){case 5:return Y(e.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 22:return e=V(e.type._render,!1);case 1:return e=V(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case C:return"Portal";case E:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case O:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case L:return G(e.type);case D:return G(e._render);case I:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&j(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&oe(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function oe(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ue(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ge,be,me=(be=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ge=ge||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ge.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return be(e,t)}))}:be);function ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},je=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=xe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(ye).forEach((function(e){je.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var Ce=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(Ce[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Oe=null,Te=null,Ae=null;function ke(e){if(e=eo(e)){if("function"!==typeof Oe)throw Error(a(280));var t=e.stateNode;t&&(t=no(t),Oe(e.stateNode,e.type,t))}}function Me(e){Te?Ae?Ae.push(e):Ae=[e]:Te=e}function Le(){if(Te){var e=Te,t=Ae;if(Ae=Te=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ie(e,t){return e(t)}function De(e,t,n,r,o){return e(t,n,r,o)}function Ne(){}var Pe=Ie,Re=!1,Fe=!1;function Be(){null===Te&&null===Ae||(Ne(),Le())}function He(e,t){var n=e.stateNode;if(null===n)return null;var r=no(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ue=!1;if(d)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(be){Ue=!1}function Ye(e,t,n,r,o,i,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var We=!1,Ve=null,Xe=!1,Ge=null,qe={onError:function(e){We=!0,Ve=e}};function Ke(e,t,n,r,o,i,a,s,l){We=!1,Ve=null,Ye.apply(qe,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Je(e)!==e)throw Error(a(188))}function $e(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Ze(o),e;if(i===r)return Ze(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,ot,it=!1,at=[],st=null,lt=null,ut=null,ct=new Map,dt=new Map,ht=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,o){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:o,targetContainers:[r]}}function gt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function bt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e=pt(t,n,r,o,i),null!==t&&(null!==(t=eo(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function mt(e){var t=$r(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void ot(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=eo(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){vt(e)&&n.delete(t)}function jt(){for(it=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=eo(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&vt(st)&&(st=null),null!==lt&&vt(lt)&&(lt=null),null!==ut&&vt(ut)&&(ut=null),ct.forEach(yt),dt.forEach(yt)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function wt(e){function t(t){return xt(t,e)}if(0<at.length){xt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&xt(st,e),null!==lt&&xt(lt,e),null!==ut&&xt(ut,e),ct.forEach(t),dt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function Ct(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _t={animationend:Ct("Animation","AnimationEnd"),animationiteration:Ct("Animation","AnimationIteration"),animationstart:Ct("Animation","AnimationStart"),transitionend:Ct("Transition","TransitionEnd")},St={},Et={};function Ot(e){if(St[e])return St[e];if(!_t[e])return e;var t,n=_t[e];for(t in n)if(n.hasOwnProperty(t)&&t in Et)return St[e]=n[t];return e}d&&(Et=document.createElement("div").style,"AnimationEvent"in window||(delete _t.animationend.animation,delete _t.animationiteration.animation,delete _t.animationstart.animation),"TransitionEvent"in window||delete _t.transitionend.transition);var Tt=Ot("animationend"),At=Ot("animationiteration"),kt=Ot("animationstart"),Mt=Ot("transitionend"),Lt=new Map,It=new Map,Dt=["abort","abort",Tt,"animationEnd",At,"animationIteration",kt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Mt,"transitionEnd","waiting","waiting"];function Nt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],o=e[n+1];o="on"+(o[0].toUpperCase()+o.slice(1)),It.set(r,t),Lt.set(r,o),u(o,[r])}}(0,i.unstable_now)();var Pt=8;function Rt(e){if(0!==(1&e))return Pt=15,1;if(0!==(2&e))return Pt=14,2;if(0!==(4&e))return Pt=13,4;var t=24&e;return 0!==t?(Pt=12,t):0!==(32&e)?(Pt=11,32):0!==(t=192&e)?(Pt=10,t):0!==(256&e)?(Pt=9,256):0!==(t=3584&e)?(Pt=8,t):0!==(4096&e)?(Pt=7,4096):0!==(t=4186112&e)?(Pt=6,t):0!==(t=62914560&e)?(Pt=5,t):67108864&e?(Pt=4,67108864):0!==(134217728&e)?(Pt=3,134217728):0!==(t=805306368&e)?(Pt=2,t):0!==(1073741824&e)?(Pt=1,1073741824):(Pt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Pt=0;var r=0,o=0,i=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==i)r=i,o=Pt=15;else if(0!==(i=134217727&n)){var l=i&~a;0!==l?(r=Rt(l),o=Pt):0!==(s&=i)&&(r=Rt(s),o=Pt)}else 0!==(i=n&~a)?(r=Rt(i),o=Pt):0!==s&&(r=Rt(s),o=Pt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(Rt(t),o<=Pt)return t;Pt=o}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-Wt(t)),r|=e[n],t&=~o;return r}function Bt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ht(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Ht(10,t):e;case 10:return 0===(e=Ut(192&~t))?Ht(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Ut(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Vt(e)/Xt|0)|0},Vt=Math.log,Xt=Math.LN2;var Gt=i.unstable_UserBlockingPriority,qt=i.unstable_runWithPriority,Kt=!0;function Jt(e,t,n,r){Re||Ne();var o=Zt,i=Re;Re=!0;try{De(o,e,t,n,r)}finally{(Re=i)||Be()}}function Qt(e,t,n,r){qt(Gt,Zt.bind(null,e,t,n,r))}function Zt(e,t,n,r){var o;if(Kt)if((o=0===(4&t))&&0<at.length&&-1<ft.indexOf(e))e=pt(null,e,t,n,r),at.push(e);else{var i=$t(e,t,n,r);if(null===i)o&&gt(e,r);else{if(o){if(-1<ft.indexOf(e))return e=pt(i,e,t,n,r),void at.push(e);if(function(e,t,n,r,o){switch(t){case"focusin":return st=bt(st,e,t,n,r,o),!0;case"dragenter":return lt=bt(lt,e,t,n,r,o),!0;case"mouseover":return ut=bt(ut,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return ct.set(i,bt(ct.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,dt.set(i,bt(dt.get(i)||null,e,t,n,r,o)),!0}return!1}(i,e,t,n,r))return;gt(e,r)}Lr(e,t,r,null,n)}}}function $t(e,t,n,r){var o=Ee(r);if(null!==(o=$r(o))){var i=Je(o);if(null===i)o=null;else{var a=i.tag;if(13===a){if(null!==(o=Qe(i)))return o;o=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return Lr(e,t,r,o,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,o="value"in en?en.value:en.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return nn=o.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function ln(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?an:sn,this.isPropagationStopped=sn,this}return o(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var un,cn,dn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=ln(hn),pn=o({},hn,{view:0,detail:0}),gn=ln(pn),bn=o({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(un=e.screenX-dn.screenX,cn=e.screenY-dn.screenY):cn=un=0,dn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),mn=ln(bn),vn=ln(o({},bn,{dataTransfer:0})),yn=ln(o({},pn,{relatedTarget:0})),jn=ln(o({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=ln(o({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),wn=ln(o({},hn,{data:0})),Cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function On(){return En}var Tn=ln(o({},pn,{key:function(e){if(e.key){var t=Cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),An=ln(o({},bn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=ln(o({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On})),Mn=ln(o({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=ln(o({},bn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),In=[9,13,27,32],Dn=d&&"CompositionEvent"in window,Nn=null;d&&"documentMode"in document&&(Nn=document.documentMode);var Pn=d&&"TextEvent"in window&&!Nn,Rn=d&&(!Dn||Nn&&8<Nn&&11>=Nn),Fn=String.fromCharCode(32),Bn=!1;function Hn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Yn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Yn[e.type]:"textarea"===t}function Vn(e,t,n,r){Me(r),0<(t=Dr(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Gn=null;function qn(e){Er(e,0)}function Kn(e){if(Q(to(e)))return e}function Jn(e,t){if("change"===e)return t}var Qn=!1;if(d){var Zn;if(d){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Xn&&(Xn.detachEvent("onpropertychange",nr),Gn=Xn=null)}function nr(e){if("value"===e.propertyName&&Kn(Gn)){var t=[];if(Vn(t,Gn,e,Ee(e)),e=qn,Re)e(t);else{Re=!0;try{Ie(e,t)}finally{Re=!1,Be()}}}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Xn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Gn)}function ir(e,t){if("click"===e)return Kn(t)}function ar(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},lr=Object.prototype.hasOwnProperty;function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(t,n[r])||!sr(e[n[r]],t[n[r]]))return!1;return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=d&&"documentMode"in document&&11>=document.documentMode,br=null,mr=null,vr=null,yr=!1;function jr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==br||br!==Z(r)||("selectionStart"in(r=br)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&ur(vr,r)||(vr=r,0<(r=Dr(mr,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Nt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Nt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Nt(Dt,2);for(var xr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wr=0;wr<xr.length;wr++)It.set(xr[wr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_r=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cr));function Sr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,s,l,u){if(Ke.apply(this,arguments),We){if(!We)throw Error(a(198));var c=Ve;We=!1,Ve=null,Xe||(Xe=!0,Ge=c)}}(r,t,void 0,e),e.currentTarget=null}function Er(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;Sr(o,s,u),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;Sr(o,s,u),i=l}}}if(Xe)throw e=Ge,Xe=!1,Ge=null,e}function Or(e,t){var n=ro(t),r=e+"__bubble";n.has(r)||(Mr(t,e,2,!1),n.add(r))}var Tr="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Tr]||(e[Tr]=!0,s.forEach((function(t){_r.has(t)||kr(t,!1,e,null),kr(t,!0,e,null)})))}function kr(e,t,n,r){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&_r.has(e)){if("scroll"!==e)return;o|=2,i=r}var a=ro(i),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(o|=4),Mr(i,e,o,t),a.add(s))}function Mr(e,t,n,r){var o=It.get(t);switch(void 0===o?2:o){case 0:o=Jt;break;case 1:o=Qt;break;default:o=Zt}n=o.bind(null,t,n,e),o=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=$r(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Pe(e,t,n)}finally{Fe=!1,Be()}}((function(){var r=i,o=Ee(n),a=[];e:{var s=Lt.get(e);if(void 0!==s){var l=fn,u=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":u="focus",l=yn;break;case"focusout":u="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kn;break;case Tt:case At:case kt:l=jn;break;case Mt:l=Mn;break;case"scroll":l=gn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=He(p,h))&&c.push(Ir(p,g,f)))),d)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,o),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=n.relatedTarget||n.fromElement)||!$r(u)&&!u[Qr])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?$r(u):null)&&(u!==(d=Je(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=mn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:to(l),f=null==u?s:to(u),(s=new c(g,p+"leave",l,n,o)).target=d,s.relatedTarget=f,g=null,$r(o)===r&&((c=new c(h,p+"enter",u,n,o)).target=f,c.relatedTarget=d,g=c),d=g,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Nr(f))p++;for(f=0,g=h;g;g=Nr(g))f++;for(;0<p-f;)c=Nr(c),p--;for(;0<f-p;)h=Nr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Nr(c),h=Nr(h)}c=null}else c=null;null!==l&&Pr(a,s,l,c,!1),null!==u&&null!==d&&Pr(a,d,u,c,!0)}if("select"===(l=(s=r?to(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var b=Jn;else if(Wn(s))if(Qn)b=ar;else{b=or;var m=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(b=ir);switch(b&&(b=b(e,r))?Vn(a,b,n,o):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&oe(s,"number",s.value)),m=r?to(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(br=m,mr=r,vr=null);break;case"focusout":vr=mr=br=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,jr(a,n,o);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":jr(a,n,o)}var v;if(Dn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zn?Hn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Rn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&zn&&(v=rn()):(tn="value"in(en=o)?en.value:en.textContent,zn=!0)),0<(m=Dr(r,y)).length&&(y=new wn(y,e,null,n,o),a.push({event:y,listeners:m}),v?y.data=v:null!==(v=Un(n))&&(y.data=v))),(v=Pn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Hn(e,t)?(e=rn(),nn=tn=en=null,zn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Dr(r,"onBeforeInput")).length&&(o=new wn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=v))}Er(a,t)}))}function Ir(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=He(e,n))&&r.unshift(Ir(e,i,o)),null!=(i=He(e,t))&&r.push(Ir(e,i,o))),e=e.return}return r}function Nr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Pr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,o?null!=(l=He(n,i))&&a.unshift(Ir(n,l,s)):o||null!=(l=He(n,i))&&a.push(Ir(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Rr(){}var Fr=null,Br=null;function Hr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ur(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var zr="function"===typeof setTimeout?setTimeout:void 0,Yr="function"===typeof clearTimeout?clearTimeout:void 0;function Wr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Vr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Gr=0;var qr=Math.random().toString(36).slice(2),Kr="__reactFiber$"+qr,Jr="__reactProps$"+qr,Qr="__reactContainer$"+qr,Zr="__reactEvents$"+qr;function $r(e){var t=e[Kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qr]||n[Kr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Xr(e);null!==e;){if(n=e[Kr])return n;e=Xr(e)}return t}n=(e=n).parentNode}return null}function eo(e){return!(e=e[Kr]||e[Qr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function to(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function no(e){return e[Jr]||null}function ro(e){var t=e[Zr];return void 0===t&&(t=e[Zr]=new Set),t}var oo=[],io=-1;function ao(e){return{current:e}}function so(e){0>io||(e.current=oo[io],oo[io]=null,io--)}function lo(e,t){io++,oo[io]=e.current,e.current=t}var uo={},co=ao(uo),ho=ao(!1),fo=uo;function po(e,t){var n=e.type.contextTypes;if(!n)return uo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function go(e){return null!==(e=e.childContextTypes)&&void 0!==e}function bo(){so(ho),so(co)}function mo(e,t,n){if(co.current!==uo)throw Error(a(168));lo(co,t),lo(ho,n)}function vo(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(a(108,G(t)||"Unknown",i));return o({},n,r)}function yo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||uo,fo=co.current,lo(co,e),lo(ho,ho.current),!0}function jo(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=vo(e,t,fo),r.__reactInternalMemoizedMergedChildContext=e,so(ho),so(co),lo(co,e)):so(ho),lo(ho,n)}var xo=null,wo=null,Co=i.unstable_runWithPriority,_o=i.unstable_scheduleCallback,So=i.unstable_cancelCallback,Eo=i.unstable_shouldYield,Oo=i.unstable_requestPaint,To=i.unstable_now,Ao=i.unstable_getCurrentPriorityLevel,ko=i.unstable_ImmediatePriority,Mo=i.unstable_UserBlockingPriority,Lo=i.unstable_NormalPriority,Io=i.unstable_LowPriority,Do=i.unstable_IdlePriority,No={},Po=void 0!==Oo?Oo:function(){},Ro=null,Fo=null,Bo=!1,Ho=To(),Uo=1e4>Ho?To:function(){return To()-Ho};function zo(){switch(Ao()){case ko:return 99;case Mo:return 98;case Lo:return 97;case Io:return 96;case Do:return 95;default:throw Error(a(332))}}function Yo(e){switch(e){case 99:return ko;case 98:return Mo;case 97:return Lo;case 96:return Io;case 95:return Do;default:throw Error(a(332))}}function Wo(e,t){return e=Yo(e),Co(e,t)}function Vo(e,t,n){return e=Yo(e),_o(e,t,n)}function Xo(){if(null!==Fo){var e=Fo;Fo=null,So(e)}Go()}function Go(){if(!Bo&&null!==Ro){Bo=!0;var e=0;try{var t=Ro;Wo(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ro=null}catch(n){throw null!==Ro&&(Ro=Ro.slice(e+1)),_o(ko,Xo),n}finally{Bo=!1}}}var qo=x.ReactCurrentBatchConfig;function Ko(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Jo=ao(null),Qo=null,Zo=null,$o=null;function ei(){$o=Zo=Qo=null}function ti(e){var t=Jo.current;so(Jo),e.type._context._currentValue=t}function ni(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ri(e,t){Qo=e,$o=Zo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Da=!0),e.firstContext=null)}function oi(e,t){if($o!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||($o=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zo){if(null===Qo)throw Error(a(308));Zo=t,Qo.dependencies={lanes:0,firstContext:t,responders:null}}else Zo=Zo.next=t;return e._currentValue}var ii=!1;function ai(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function si(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ui(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ci(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function di(e,t,n,r){var i=e.updateQueue;ii=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?a=c:s.next=c,s=u;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==s&&(null===h?d.firstBaseUpdate=c:h.next=c,d.lastBaseUpdate=u)}}if(null!==a){for(h=i.baseState,s=0,d=c=u=null;;){l=a.lane;var f=a.eventTime;if((r&l)===l){null!==d&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(l=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,l);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(l="function"===typeof(p=g.payload)?p.call(f,h,l):p)||void 0===l)break e;h=o({},h,l);break e;case 2:ii=!0}}null!==a.callback&&(e.flags|=32,null===(l=i.effects)?i.effects=[a]:l.push(a))}else f={eventTime:f,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(c=d=f,u=h):d=d.next=f,s|=l;if(null===(a=a.next)){if(null===(l=i.shared.pending))break;a=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}null===d&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,Fs|=s,e.lanes=s,e.memoizedState=h}}function hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var fi=(new r.Component).refs;function pi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gi={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ul(),o=cl(e),i=li(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ui(e,i),dl(e,o,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ul(),o=cl(e),i=li(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ui(e,i),dl(e,o,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ul(),r=cl(e),o=li(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),ui(e,o),dl(e,r,n)}};function bi(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(o,i))}function mi(e,t,n){var r=!1,o=uo,i=t.contextType;return"object"===typeof i&&null!==i?i=oi(i):(o=go(t)?fo:co.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?po(e,o):uo),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function vi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gi.enqueueReplaceState(t,t.state,null)}function yi(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=fi,ai(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=oi(i):(i=go(t)?fo:co.current,o.context=po(e,i)),di(e,n,o,r),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(pi(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&gi.enqueueReplaceState(o,o.state,null),di(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4)}var ji=Array.isArray;function xi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=r.refs;t===fi&&(t=r.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function wi(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ci(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Yl(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Gl(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=o(t,n.props)).ref=xi(e,t,n),r.return=e,r):((r=Wl(n.type,n.key,n.props,null,e.mode,r)).ref=xi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ql(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Vl(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Gl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Wl(t.type,t.key,t.props,null,e.mode,n)).ref=xi(e,null,t),n.return=e,n;case C:return(t=ql(t,e.mode,n)).return=e,t}if(ji(t)||z(t))return(t=Vl(t,e.mode,n,null)).return=e,t;wi(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?n.type===_?d(e,t,n.props.children,r,o):u(e,t,n,r):null;case C:return n.key===o?c(e,t,n,r):null}if(ji(n)||z(n))return null!==o?null:d(e,t,n,r,null);wi(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===_?d(t,e,r.props.children,o,r.key):u(t,e,r,o);case C:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(ji(r)||z(r))return d(t,e=e.get(n)||null,r,o,null);wi(t,r)}return null}function g(o,a,s,l){for(var u=null,c=null,d=a,g=a=0,b=null;null!==d&&g<s.length;g++){d.index>g?(b=d,d=null):b=d.sibling;var m=f(o,d,s[g],l);if(null===m){null===d&&(d=b);break}e&&d&&null===m.alternate&&t(o,d),a=i(m,a,g),null===c?u=m:c.sibling=m,c=m,d=b}if(g===s.length)return n(o,d),u;if(null===d){for(;g<s.length;g++)null!==(d=h(o,s[g],l))&&(a=i(d,a,g),null===c?u=d:c.sibling=d,c=d);return u}for(d=r(o,d);g<s.length;g++)null!==(b=p(d,o,g,s[g],l))&&(e&&null!==b.alternate&&d.delete(null===b.key?g:b.key),a=i(b,a,g),null===c?u=b:c.sibling=b,c=b);return e&&d.forEach((function(e){return t(o,e)})),u}function b(o,s,l,u){var c=z(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,g=s,b=s=0,m=null,v=l.next();null!==g&&!v.done;b++,v=l.next()){g.index>b?(m=g,g=null):m=g.sibling;var y=f(o,g,v.value,u);if(null===y){null===g&&(g=m);break}e&&g&&null===y.alternate&&t(o,g),s=i(y,s,b),null===d?c=y:d.sibling=y,d=y,g=m}if(v.done)return n(o,g),c;if(null===g){for(;!v.done;b++,v=l.next())null!==(v=h(o,v.value,u))&&(s=i(v,s,b),null===d?c=v:d.sibling=v,d=v);return c}for(g=r(o,g);!v.done;b++,v=l.next())null!==(v=p(g,o,b,v.value,u))&&(e&&null!==v.alternate&&g.delete(null===v.key?b:v.key),s=i(v,s,b),null===d?c=v:d.sibling=v,d=v);return e&&g.forEach((function(e){return t(o,e)})),c}return function(e,r,i,l){var u="object"===typeof i&&null!==i&&i.type===_&&null===i.key;u&&(i=i.props.children);var c="object"===typeof i&&null!==i;if(c)switch(i.$$typeof){case w:e:{for(c=i.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(i.type===_){n(e,u.sibling),(r=o(u,i.props.children)).return=e,e=r;break e}break;default:if(u.elementType===i.type){n(e,u.sibling),(r=o(u,i.props)).ref=xi(e,u,i),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}i.type===_?((r=Vl(i.props.children,e.mode,l,i.key)).return=e,e=r):((l=Wl(i.type,i.key,i.props,null,e.mode,l)).ref=xi(e,r,i),l.return=e,e=l)}return s(e);case C:e:{for(u=i.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=o(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=ql(i,e.mode,l)).return=e,e=r}return s(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=o(r,i)).return=e,e=r):(n(e,r),(r=Gl(i,e.mode,l)).return=e,e=r),s(e);if(ji(i))return g(e,r,i,l);if(z(i))return b(e,r,i,l);if(c&&wi(e,i),"undefined"===typeof i&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,G(e.type)||"Component"))}return n(e,r)}}var _i=Ci(!0),Si=Ci(!1),Ei={},Oi=ao(Ei),Ti=ao(Ei),Ai=ao(Ei);function ki(e){if(e===Ei)throw Error(a(174));return e}function Mi(e,t){switch(lo(Ai,t),lo(Ti,e),lo(Oi,Ei),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}so(Oi),lo(Oi,t)}function Li(){so(Oi),so(Ti),so(Ai)}function Ii(e){ki(Ai.current);var t=ki(Oi.current),n=pe(t,e.type);t!==n&&(lo(Ti,e),lo(Oi,n))}function Di(e){Ti.current===e&&(so(Oi),so(Ti))}var Ni=ao(0);function Pi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ri=null,Fi=null,Bi=!1;function Hi(e,t){var n=Ul(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ui(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function zi(e){if(Bi){var t=Fi;if(t){var n=t;if(!Ui(e,t)){if(!(t=Vr(n.nextSibling))||!Ui(e,t))return e.flags=-1025&e.flags|2,Bi=!1,void(Ri=e);Hi(Ri,n)}Ri=e,Fi=Vr(t.firstChild)}else e.flags=-1025&e.flags|2,Bi=!1,Ri=e}}function Yi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ri=e}function Wi(e){if(e!==Ri)return!1;if(!Bi)return Yi(e),Bi=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ur(t,e.memoizedProps))for(t=Fi;t;)Hi(e,t),t=Vr(t.nextSibling);if(Yi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Fi=Vr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Fi=null}}else Fi=Ri?Vr(e.stateNode.nextSibling):null;return!0}function Vi(){Fi=Ri=null,Bi=!1}var Xi=[];function Gi(){for(var e=0;e<Xi.length;e++)Xi[e]._workInProgressVersionPrimary=null;Xi.length=0}var qi=x.ReactCurrentDispatcher,Ki=x.ReactCurrentBatchConfig,Ji=0,Qi=null,Zi=null,$i=null,ea=!1,ta=!1;function na(){throw Error(a(321))}function ra(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function oa(e,t,n,r,o,i){if(Ji=i,Qi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qi.current=null===e||null===e.memoizedState?ka:Ma,e=n(r,o),ta){i=0;do{if(ta=!1,!(25>i))throw Error(a(301));i+=1,$i=Zi=null,t.updateQueue=null,qi.current=La,e=n(r,o)}while(ta)}if(qi.current=Aa,t=null!==Zi&&null!==Zi.next,Ji=0,$i=Zi=Qi=null,ea=!1,t)throw Error(a(300));return e}function ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$i?Qi.memoizedState=$i=e:$i=$i.next=e,$i}function aa(){if(null===Zi){var e=Qi.alternate;e=null!==e?e.memoizedState:null}else e=Zi.next;var t=null===$i?Qi.memoizedState:$i.next;if(null!==t)$i=t,Zi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Zi=e).memoizedState,baseState:Zi.baseState,baseQueue:Zi.baseQueue,queue:Zi.queue,next:null},null===$i?Qi.memoizedState=$i=e:$i=$i.next=e}return $i}function sa(e,t){return"function"===typeof t?t(e):t}function la(e){var t=aa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Zi,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(null!==o){o=o.next,r=r.baseState;var l=s=i=null,u=o;do{var c=u.lane;if((Ji&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=d,i=r):l=l.next=d,Qi.lanes|=c,Fs|=c}u=u.next}while(null!==u&&u!==o);null===l?i=r:l.next=s,sr(r,t.memoizedState)||(Da=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ua(e){var t=aa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);sr(i,t.memoizedState)||(Da=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ca(e,t,n){var r=t._getVersion;r=r(t._source);var o=t._workInProgressVersionPrimary;if(null!==o?e=o===r:(e=e.mutableReadLanes,(e=(Ji&e)===e)&&(t._workInProgressVersionPrimary=r,Xi.push(t))),e)return n(t._source);throw Xi.push(t),Error(a(350))}function da(e,t,n,r){var o=ks;if(null===o)throw Error(a(349));var i=t._getVersion,s=i(t._source),l=qi.current,u=l.useState((function(){return ca(o,t,n)})),c=u[1],d=u[0];u=$i;var h=e.memoizedState,f=h.refs,p=f.getSnapshot,g=h.source;h=h.subscribe;var b=Qi;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var e=i(t._source);if(!sr(s,e)){e=n(t._source),sr(d,e)||(c(e),e=cl(b),o.mutableReadLanes|=e&o.pendingLanes),e=o.mutableReadLanes,o.entangledLanes|=e;for(var r=o.entanglements,a=e;0<a;){var l=31-Wt(a),u=1<<l;r[l]|=e,a&=~u}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=cl(b);o.mutableReadLanes|=r&o.pendingLanes}catch(i){n((function(){throw i}))}}))}),[t,r]),sr(p,n)&&sr(g,t)&&sr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:d}).dispatch=c=Ta.bind(null,Qi,e),u.queue=e,u.baseQueue=null,d=ca(o,t,n),u.memoizedState=u.baseState=d),d}function ha(e,t,n){return da(aa(),e,t,n)}function fa(e){var t=ia();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:e}).dispatch=Ta.bind(null,Qi,e),[t.memoizedState,e]}function pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qi.updateQueue)?(t={lastEffect:null},Qi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ga(e){return e={current:e},ia().memoizedState=e}function ba(){return aa().memoizedState}function ma(e,t,n,r){var o=ia();Qi.flags|=e,o.memoizedState=pa(1|t,n,void 0,void 0===r?null:r)}function va(e,t,n,r){var o=aa();r=void 0===r?null:r;var i=void 0;if(null!==Zi){var a=Zi.memoizedState;if(i=a.destroy,null!==r&&ra(r,a.deps))return void pa(t,n,i,r)}Qi.flags|=e,o.memoizedState=pa(1|t,n,i,r)}function ya(e,t){return ma(516,4,e,t)}function ja(e,t){return va(516,4,e,t)}function xa(e,t){return va(4,2,e,t)}function wa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ca(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,va(4,2,wa.bind(null,t,e),n)}function _a(){}function Sa(e,t){var n=aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ra(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ea(e,t){var n=aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ra(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Oa(e,t){var n=zo();Wo(98>n?98:n,(function(){e(!0)})),Wo(97<n?97:n,(function(){var n=Ki.transition;Ki.transition=1;try{e(!1),t()}finally{Ki.transition=n}}))}function Ta(e,t,n){var r=ul(),o=cl(e),i={lane:o,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Qi||null!==a&&a===Qi)ta=ea=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=a(s,n);if(i.eagerReducer=a,i.eagerState=l,sr(l,s))return}catch(u){}dl(e,o,r)}}var Aa={readContext:oi,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useMutableSource:na,useOpaqueIdentifier:na,unstable_isNewReconciler:!1},ka={readContext:oi,useCallback:function(e,t){return ia().memoizedState=[e,void 0===t?null:t],e},useContext:oi,useEffect:ya,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ma(4,2,wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4,2,e,t)},useMemo:function(e,t){var n=ia();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ia();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ta.bind(null,Qi,e),[r.memoizedState,e]},useRef:ga,useState:fa,useDebugValue:_a,useDeferredValue:function(e){var t=fa(e),n=t[0],r=t[1];return ya((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=fa(!1),t=e[0];return ga(e=Oa.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ia();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},da(r,e,t,n)},useOpaqueIdentifier:function(){if(Bi){var e=!1,t=function(e){return{$$typeof:N,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Gr++).toString(36))),Error(a(355))})),n=fa(t)[1];return 0===(2&Qi.mode)&&(Qi.flags|=516,pa(5,(function(){n("r:"+(Gr++).toString(36))}),void 0,null)),t}return fa(t="r:"+(Gr++).toString(36)),t},unstable_isNewReconciler:!1},Ma={readContext:oi,useCallback:Sa,useContext:oi,useEffect:ja,useImperativeHandle:Ca,useLayoutEffect:xa,useMemo:Ea,useReducer:la,useRef:ba,useState:function(){return la(sa)},useDebugValue:_a,useDeferredValue:function(e){var t=la(sa),n=t[0],r=t[1];return ja((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=la(sa)[0];return[ba().current,e]},useMutableSource:ha,useOpaqueIdentifier:function(){return la(sa)[0]},unstable_isNewReconciler:!1},La={readContext:oi,useCallback:Sa,useContext:oi,useEffect:ja,useImperativeHandle:Ca,useLayoutEffect:xa,useMemo:Ea,useReducer:ua,useRef:ba,useState:function(){return ua(sa)},useDebugValue:_a,useDeferredValue:function(e){var t=ua(sa),n=t[0],r=t[1];return ja((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=ua(sa)[0];return[ba().current,e]},useMutableSource:ha,useOpaqueIdentifier:function(){return ua(sa)[0]},unstable_isNewReconciler:!1},Ia=x.ReactCurrentOwner,Da=!1;function Na(e,t,n,r){t.child=null===e?Si(t,null,n,r):_i(t,e.child,n,r)}function Pa(e,t,n,r,o){n=n.render;var i=t.ref;return ri(t,o),r=oa(e,t,n,r,i,o),null===e||Da?(t.flags|=1,Na(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,ns(e,t,o))}function Ra(e,t,n,r,o,i){if(null===e){var a=n.type;return"function"!==typeof a||zl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Wl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Fa(e,t,a,r,o,i))}return a=e.child,0===(o&i)&&(o=a.memoizedProps,(n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)?ns(e,t,i):(t.flags|=1,(e=Yl(a,r)).ref=t.ref,e.return=t,t.child=e)}function Fa(e,t,n,r,o,i){if(null!==e&&ur(e.memoizedProps,r)&&e.ref===t.ref){if(Da=!1,0===(i&o))return t.lanes=e.lanes,ns(e,t,i);0!==(16384&e.flags)&&(Da=!0)}return Ua(e,t,n,r,i)}function Ba(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},yl(t,n);else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},yl(t,e),null;t.memoizedState={baseLanes:0},yl(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,yl(t,r);return Na(e,t,o,n),t.child}function Ha(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ua(e,t,n,r,o){var i=go(n)?fo:co.current;return i=po(t,i),ri(t,o),n=oa(e,t,n,r,i,o),null===e||Da?(t.flags|=1,Na(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,ns(e,t,o))}function za(e,t,n,r,o){if(go(n)){var i=!0;yo(t)}else i=!1;if(ri(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),mi(t,n,r),yi(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=oi(u):u=po(t,u=go(n)?fo:co.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&vi(t,a,r,u),ii=!1;var h=t.memoizedState;a.state=h,di(t,r,a,o),l=t.memoizedState,s!==r||h!==l||ho.current||ii?("function"===typeof c&&(pi(t,n,c,r),l=t.memoizedState),(s=ii||bi(t,n,s,r,h,l,u))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,si(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ko(t.type,s),a.props=u,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=oi(l):l=po(t,l=go(n)?fo:co.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&vi(t,a,r,l),ii=!1,h=t.memoizedState,a.state=h,di(t,r,a,o);var p=t.memoizedState;s!==d||h!==p||ho.current||ii?("function"===typeof f&&(pi(t,n,f,r),p=t.memoizedState),(u=ii||bi(t,n,u,r,h,p,l))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ya(e,t,n,r,i,o)}function Ya(e,t,n,r,o,i){Ha(e,t);var a=0!==(64&t.flags);if(!r&&!a)return o&&jo(t,n,!1),ns(e,t,i);r=t.stateNode,Ia.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=_i(t,e.child,null,i),t.child=_i(t,null,s,i)):Na(e,t,s,i),t.memoizedState=r.state,o&&jo(t,n,!0),t.child}function Wa(e){var t=e.stateNode;t.pendingContext?mo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mo(0,t.context,!1),Mi(e,t.containerInfo)}var Va,Xa,Ga,qa={dehydrated:null,retryLane:0};function Ka(e,t,n){var r,o=t.pendingProps,i=Ni.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(i|=1),lo(Ni,1&i),null===e?(void 0!==o.fallback&&zi(t),e=o.children,i=o.fallback,a?(e=Ja(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=qa,e):"number"===typeof o.unstable_expectedLoadTime?(e=Ja(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=qa,t.lanes=33554432,e):((n=Xl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(o=Za(e,t,o.children,o.fallback,n),a=t.child,i=e.child.memoizedState,a.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=qa,o):(n=Qa(e,t,o.children,n),t.memoizedState=null,n))}function Ja(e,t,n,r){var o=e.mode,i=e.child;return t={mode:"hidden",children:t},0===(2&o)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Xl(t,o,0,null),n=Vl(n,o,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function Qa(e,t,n,r){var o=e.child;return e=o.sibling,n=Yl(o,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Za(e,t,n,r,o){var i=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&i)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Yl(a,s),null!==e?r=Yl(e,r):(r=Vl(r,i,o,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function $a(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ni(e.return,t)}function es(e,t,n,r,o,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,lastEffect:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o,a.lastEffect=i)}function ts(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Na(e,t,r.children,n),0!==(2&(r=Ni.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$a(e,n);else if(19===e.tag)$a(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lo(Ni,r),0===(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Pi(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),es(t,!1,o,n,i,t.lastEffect);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Pi(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}es(t,!0,n,null,i,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ns(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Yl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Yl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function rs(e,t){if(!Bi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function os(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return go(t.type)&&bo(),null;case 3:return Li(),so(ho),so(co),Gi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wi(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Di(t);var i=ki(Ai.current);if(n=t.type,null!==e&&null!=t.stateNode)Xa(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=ki(Oi.current),Wi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Kr]=t,r[Jr]=s,n){case"dialog":Or("cancel",r),Or("close",r);break;case"iframe":case"object":case"embed":Or("load",r);break;case"video":case"audio":for(e=0;e<Cr.length;e++)Or(Cr[e],r);break;case"source":Or("error",r);break;case"img":case"image":case"link":Or("error",r),Or("load",r);break;case"details":Or("toggle",r);break;case"input":ee(r,s),Or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Or("invalid",r);break;case"textarea":le(r,s),Or("invalid",r)}for(var u in _e(n,s),e=null,s)s.hasOwnProperty(u)&&(i=s[u],"children"===u?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):l.hasOwnProperty(u)&&null!=i&&"onScroll"===u&&Or("scroll",r));switch(n){case"input":J(r),re(r,s,!0);break;case"textarea":J(r),ce(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Rr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===i.nodeType?i:i.ownerDocument,e===de&&(e=fe(n)),e===de?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Kr]=t,e[Jr]=r,Va(e,t),t.stateNode=e,u=Se(n,r),n){case"dialog":Or("cancel",e),Or("close",e),i=r;break;case"iframe":case"object":case"embed":Or("load",e),i=r;break;case"video":case"audio":for(i=0;i<Cr.length;i++)Or(Cr[i],e);i=r;break;case"source":Or("error",e),i=r;break;case"img":case"image":case"link":Or("error",e),Or("load",e),i=r;break;case"details":Or("toggle",e),i=r;break;case"input":ee(e,r),i=$(e,r),Or("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=o({},r,{value:void 0}),Or("invalid",e);break;case"textarea":le(e,r),i=se(e,r),Or("invalid",e);break;default:i=r}_e(n,i);var c=i;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?we(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&me(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&ve(e,d):"number"===typeof d&&ve(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Or("scroll",e):null!=d&&j(e,s,d,u))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Rr)}Hr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ga(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=ki(Ai.current),ki(Oi.current),Wi(t)?(r=t.stateNode,n=t.memoizedProps,r[Kr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Kr]=t,t.stateNode=r)}return null;case 13:return so(Ni),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wi(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ni.current)?0===Ns&&(Ns=3):(0!==Ns&&3!==Ns||(Ns=4),null===ks||0===(134217727&Fs)&&0===(134217727&Bs)||gl(ks,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Li(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return ti(t),null;case 17:return go(t.type)&&bo(),null;case 19:if(so(Ni),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(u=r.rendering))if(s)rs(r,!1);else{if(0!==Ns||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Pi(e))){for(t.flags|=64,rs(r,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return lo(Ni,1&Ni.current|2),t.child}e=e.sibling}null!==r.tail&&Uo()>Ys&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Pi(u))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),rs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Bi)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Uo()-r.renderingStartTime>Ys&&1073741824!==n&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Uo(),n.sibling=null,t=Ni.current,lo(Ni,s?1&t|2:1&t),n):null;case 23:case 24:return jl(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function is(e){switch(e.tag){case 1:go(e.type)&&bo();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Li(),so(ho),so(co),Gi(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Di(e),null;case 13:return so(Ni),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return so(Ni),null;case 4:return Li(),null;case 10:return ti(e),null;case 23:case 24:return jl(),null;default:return null}}function as(e,t){try{var n="",r=t;do{n+=X(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Va=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ki(Oi.current);var a,s=null;switch(n){case"input":i=$(e,i),r=$(e,r),s=[];break;case"option":i=ie(e,i),r=ie(e,r),s=[];break;case"select":i=o({},i,{value:void 0}),r=o({},r,{value:void 0}),s=[];break;case"textarea":i=se(e,i),r=se(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Rr)}for(d in _e(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var u=i[d];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(u=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(null!=c||null!=u))if("style"===d)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Or("scroll",e),s||u===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===N?c.toString():(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Ga=function(e,t,n,r){n!==r&&(t.flags|=4)};var ls="function"===typeof WeakMap?WeakMap:Map;function us(e,t,n){(n=li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,qs=r),ss(0,t)},n}function cs(e,t,n){(n=li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return ss(0,t),r(o)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this),ss(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ds="function"===typeof WeakSet?WeakSet:Set;function hs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Rl(e,n)}else t.current=null}function fs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ko(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Wr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ps(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var o=e;r=o.next,0!==(4&(o=o.tag))&&0!==(1&o)&&(Dl(n,e),Il(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ko(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&hi(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}hi(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Hr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var o=n.memoizedProps.style;o=void 0!==o&&null!==o&&o.hasOwnProperty("display")?o.display:null,r.style.display=xe("display",o)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(wo&&"function"===typeof wo.onCommitFiberUnmount)try{wo.onCommitFiberUnmount(xo,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,o=r.destroy;if(r=r.tag,void 0!==o)if(0!==(4&r))Dl(t,n);else{r=t;try{o()}catch(i){Rl(r,i)}}n=n.next}while(n!==e)}break;case 1:if(hs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Rl(t,i)}break;case 5:hs(t);break;case 4:ws(e,t)}}function ms(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function vs(e){return 5===e.tag||3===e.tag||4===e.tag}function ys(e){e:{for(var t=e.return;null!==t;){if(vs(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ve(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||vs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?js(e,n,t):xs(e,n,t)}function js(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Rr));else if(4!==r&&null!==(e=e.child))for(js(e,t,n),e=e.sibling;null!==e;)js(e,t,n),e=e.sibling}function xs(e,t,n){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function ws(e,t){for(var n,r,o=t,i=!1;;){if(!i){i=o.return;e:for(;;){if(null===i)throw Error(a(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===o.tag||6===o.tag){e:for(var s=e,l=o,u=l;;)if(bs(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(s=n,l=o.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(bs(e,o),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(i=!1)}o.sibling.return=o.return,o=o.sibling}}function Cs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var o=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,o),t=Se(e,r),o=0;o<i.length;o+=2){var s=i[o],l=i[o+1];"style"===s?we(n,l):"dangerouslySetInnerHTML"===s?me(n,l):"children"===s?ve(n,l):j(n,s,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?ae(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(zs=Uo(),gs(t.child,!0)),void _s(t);case 19:return void _s(t);case 17:return;case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(a(163))}function _s(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ds),t.forEach((function(t){var r=Bl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ss(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Es=Math.ceil,Os=x.ReactCurrentDispatcher,Ts=x.ReactCurrentOwner,As=0,ks=null,Ms=null,Ls=0,Is=0,Ds=ao(0),Ns=0,Ps=null,Rs=0,Fs=0,Bs=0,Hs=0,Us=null,zs=0,Ys=1/0;function Ws(){Ys=Uo()+500}var Vs,Xs=null,Gs=!1,qs=null,Ks=null,Js=!1,Qs=null,Zs=90,$s=[],el=[],tl=null,nl=0,rl=null,ol=-1,il=0,al=0,sl=null,ll=!1;function ul(){return 0!==(48&As)?Uo():-1!==ol?ol:ol=Uo()}function cl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===zo()?1:2;if(0===il&&(il=Rs),0!==qo.transition){0!==al&&(al=null!==Us?Us.pendingLanes:0),e=il;var t=4186112&~al;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=zo(),0!==(4&As)&&98===e?e=Ht(12,il):e=Ht(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),il),e}function dl(e,t,n){if(50<nl)throw nl=0,rl=null,Error(a(185));if(null===(e=hl(e,t)))return null;Yt(e,t,n),e===ks&&(Bs|=t,4===Ns&&gl(e,Ls));var r=zo();1===t?0!==(8&As)&&0===(48&As)?bl(e):(fl(e,n),0===As&&(Ws(),Xo())):(0===(4&As)||98!==r&&99!==r||(null===tl?tl=new Set([e]):tl.add(e)),fl(e,n)),Us=e}function hl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function fl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Wt(s),u=1<<l,c=i[l];if(-1===c){if(0===(u&r)||0!==(u&o)){c=t,Rt(u);var d=Pt;i[l]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);s&=~u}if(r=Ft(e,e===ks?Ls:0),t=Pt,0===r)null!==n&&(n!==No&&So(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==No&&So(n)}15===t?(n=bl.bind(null,e),null===Ro?(Ro=[n],Fo=_o(ko,Go)):Ro.push(n),n=No):14===t?n=Vo(99,bl.bind(null,e)):n=Vo(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),pl.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function pl(e){if(ol=-1,al=il=0,0!==(48&As))throw Error(a(327));var t=e.callbackNode;if(Ll()&&e.callbackNode!==t)return null;var n=Ft(e,e===ks?Ls:0);if(0===n)return null;var r=n,o=As;As|=16;var i=Cl();for(ks===e&&Ls===r||(Ws(),xl(e,r));;)try{El();break}catch(l){wl(e,l)}if(ei(),Os.current=i,As=o,null!==Ms?r=0:(ks=null,Ls=0,r=Ns),0!==(Rs&Bs))xl(e,0);else if(0!==r){if(2===r&&(As|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(n=Bt(e))&&(r=_l(e,n))),1===r)throw t=Ps,xl(e,0),gl(e,n),fl(e,Uo()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:Al(e);break;case 3:if(gl(e,n),(62914560&n)===n&&10<(r=zs+500-Uo())){if(0!==Ft(e,0))break;if(((o=e.suspendedLanes)&n)!==n){ul(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=zr(Al.bind(null,e),r);break}Al(e);break;case 4:if(gl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,o=-1;0<n;){var s=31-Wt(n);i=1<<s,(s=r[s])>o&&(o=s),n&=~i}if(n=o,10<(n=(120>(n=Uo()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Es(n/1960))-n)){e.timeoutHandle=zr(Al.bind(null,e),n);break}Al(e);break;case 5:Al(e);break;default:throw Error(a(329))}}return fl(e,Uo()),e.callbackNode===t?pl.bind(null,e):null}function gl(e,t){for(t&=~Hs,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function bl(e){if(0!==(48&As))throw Error(a(327));if(Ll(),e===ks&&0!==(e.expiredLanes&Ls)){var t=Ls,n=_l(e,t);0!==(Rs&Bs)&&(n=_l(e,t=Ft(e,t)))}else n=_l(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(t=Bt(e))&&(n=_l(e,t))),1===n)throw n=Ps,xl(e,0),gl(e,t),fl(e,Uo()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Al(e),fl(e,Uo()),null}function ml(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Ws(),Xo())}}function vl(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Ws(),Xo())}}function yl(e,t){lo(Ds,Is),Is|=t,Rs|=t}function jl(){Is=Ds.current,so(Ds)}function xl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Yr(n)),null!==Ms)for(n=Ms.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&bo();break;case 3:Li(),so(ho),so(co),Gi();break;case 5:Di(r);break;case 4:Li();break;case 13:case 19:so(Ni);break;case 10:ti(r);break;case 23:case 24:jl()}n=n.return}ks=e,Ms=Yl(e.current,null),Ls=Is=Rs=t,Ns=0,Ps=null,Hs=Bs=Fs=0}function wl(e,t){for(;;){var n=Ms;try{if(ei(),qi.current=Aa,ea){for(var r=Qi.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ea=!1}if(Ji=0,$i=Zi=Qi=null,ta=!1,Ts.current=null,null===n||null===n.return){Ns=1,Ps=t,Ms=null;break}e:{var i=e,a=n.return,s=n,l=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!==(1&Ni.current),h=a;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var g=h.memoizedProps;f=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!d)}}if(f){var b=h.updateQueue;if(null===b){var m=new Set;m.add(u),h.updateQueue=m}else b.add(u);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=li(-1,1);v.tag=2,ui(s,v)}s.lanes|=1;break e}l=void 0,s=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new ls,l=new Set,y.set(u,l)):void 0===(l=y.get(u))&&(l=new Set,y.set(u,l)),!l.has(s)){l.add(s);var j=Fl.bind(null,i,u,s);u.then(j,j)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);l=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ns&&(Ns=2),l=as(l,s),h=a;do{switch(h.tag){case 3:i=l,h.flags|=4096,t&=-t,h.lanes|=t,ci(h,us(0,i,t));break e;case 1:i=l;var x=h.type,w=h.stateNode;if(0===(64&h.flags)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Ks||!Ks.has(w)))){h.flags|=4096,t&=-t,h.lanes|=t,ci(h,cs(h,i,t));break e}}h=h.return}while(null!==h)}Tl(n)}catch(C){t=C,Ms===n&&null!==n&&(Ms=n=n.return);continue}break}}function Cl(){var e=Os.current;return Os.current=Aa,null===e?Aa:e}function _l(e,t){var n=As;As|=16;var r=Cl();for(ks===e&&Ls===t||xl(e,t);;)try{Sl();break}catch(o){wl(e,o)}if(ei(),As=n,Os.current=r,null!==Ms)throw Error(a(261));return ks=null,Ls=0,Ns}function Sl(){for(;null!==Ms;)Ol(Ms)}function El(){for(;null!==Ms&&!Eo();)Ol(Ms)}function Ol(e){var t=Vs(e.alternate,e,Is);e.memoizedProps=e.pendingProps,null===t?Tl(e):Ms=t,Ts.current=null}function Tl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=os(n,t,Is)))return void(Ms=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Is)||0===(4&n.mode)){for(var r=0,o=n.child;null!==o;)r|=o.lanes|o.childLanes,o=o.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=is(t)))return n.flags&=2047,void(Ms=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ms=t);Ms=t=e}while(null!==t);0===Ns&&(Ns=5)}function Al(e){var t=zo();return Wo(99,kl.bind(null,e,t)),null}function kl(e,t){do{Ll()}while(null!==Qs);if(0!==(48&As))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,o=r,i=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<i;){var u=31-Wt(i),c=1<<u;o[u]=0,s[u]=-1,l[u]=-1,i&=~c}if(null!==tl&&0===(24&r)&&tl.has(e)&&tl.delete(e),e===ks&&(Ms=ks=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(o=As,As|=32,Ts.current=null,Fr=Kt,pr(s=fr())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,i=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(E){l=null;break e}var d=0,h=-1,f=-1,p=0,g=0,b=s,m=null;t:for(;;){for(var v;b!==l||0!==i&&3!==b.nodeType||(h=d+i),b!==u||0!==c&&3!==b.nodeType||(f=d+c),3===b.nodeType&&(d+=b.nodeValue.length),null!==(v=b.firstChild);)m=b,b=v;for(;;){if(b===s)break t;if(m===l&&++p===i&&(h=d),m===u&&++g===c&&(f=d),null!==(v=b.nextSibling))break;m=(b=m).parentNode}b=v}l=-1===h||-1===f?null:{start:h,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;Br={focusedElem:s,selectionRange:l},Kt=!1,sl=null,ll=!1,Xs=r;do{try{Ml()}catch(E){if(null===Xs)throw Error(a(330));Rl(Xs,E),Xs=Xs.nextEffect}}while(null!==Xs);sl=null,Xs=r;do{try{for(s=e;null!==Xs;){var y=Xs.flags;if(16&y&&ve(Xs.stateNode,""),128&y){var j=Xs.alternate;if(null!==j){var x=j.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&y){case 2:ys(Xs),Xs.flags&=-3;break;case 6:ys(Xs),Xs.flags&=-3,Cs(Xs.alternate,Xs);break;case 1024:Xs.flags&=-1025;break;case 1028:Xs.flags&=-1025,Cs(Xs.alternate,Xs);break;case 4:Cs(Xs.alternate,Xs);break;case 8:ws(s,l=Xs);var w=l.alternate;ms(l),null!==w&&ms(w)}Xs=Xs.nextEffect}}catch(E){if(null===Xs)throw Error(a(330));Rl(Xs,E),Xs=Xs.nextEffect}}while(null!==Xs);if(x=Br,j=fr(),y=x.focusedElem,s=x.selectionRange,j!==y&&y&&y.ownerDocument&&hr(y.ownerDocument.documentElement,y)){null!==s&&pr(y)&&(j=s.start,void 0===(x=s.end)&&(x=j),"selectionStart"in y?(y.selectionStart=j,y.selectionEnd=Math.min(x,y.value.length)):(x=(j=y.ownerDocument||document)&&j.defaultView||window).getSelection&&(x=x.getSelection(),l=y.textContent.length,w=Math.min(s.start,l),s=void 0===s.end?w:Math.min(s.end,l),!x.extend&&w>s&&(l=s,s=w,w=l),l=dr(y,w),i=dr(y,s),l&&i&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==i.node||x.focusOffset!==i.offset)&&((j=j.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),w>s?(x.addRange(j),x.extend(i.node,i.offset)):(j.setEnd(i.node,i.offset),x.addRange(j))))),j=[];for(x=y;x=x.parentNode;)1===x.nodeType&&j.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof y.focus&&y.focus(),y=0;y<j.length;y++)(x=j[y]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Kt=!!Fr,Br=Fr=null,e.current=n,Xs=r;do{try{for(y=e;null!==Xs;){var C=Xs.flags;if(36&C&&ps(y,Xs.alternate,Xs),128&C){j=void 0;var _=Xs.ref;if(null!==_){var S=Xs.stateNode;switch(Xs.tag){case 5:j=S;break;default:j=S}"function"===typeof _?_(j):_.current=j}}Xs=Xs.nextEffect}}catch(E){if(null===Xs)throw Error(a(330));Rl(Xs,E),Xs=Xs.nextEffect}}while(null!==Xs);Xs=null,Po(),As=o}else e.current=n;if(Js)Js=!1,Qs=e,Zs=t;else for(Xs=r;null!==Xs;)t=Xs.nextEffect,Xs.nextEffect=null,8&Xs.flags&&((C=Xs).sibling=null,C.stateNode=null),Xs=t;if(0===(r=e.pendingLanes)&&(Ks=null),1===r?e===rl?nl++:(nl=0,rl=e):nl=0,n=n.stateNode,wo&&"function"===typeof wo.onCommitFiberRoot)try{wo.onCommitFiberRoot(xo,n,void 0,64===(64&n.current.flags))}catch(E){}if(fl(e,Uo()),Gs)throw Gs=!1,e=qs,qs=null,e;return 0!==(8&As)||Xo(),null}function Ml(){for(;null!==Xs;){var e=Xs.alternate;ll||null===sl||(0!==(8&Xs.flags)?et(Xs,sl)&&(ll=!0):13===Xs.tag&&Ss(e,Xs)&&et(Xs,sl)&&(ll=!0));var t=Xs.flags;0!==(256&t)&&fs(e,Xs),0===(512&t)||Js||(Js=!0,Vo(97,(function(){return Ll(),null}))),Xs=Xs.nextEffect}}function Ll(){if(90!==Zs){var e=97<Zs?97:Zs;return Zs=90,Wo(e,Nl)}return!1}function Il(e,t){$s.push(t,e),Js||(Js=!0,Vo(97,(function(){return Ll(),null})))}function Dl(e,t){el.push(t,e),Js||(Js=!0,Vo(97,(function(){return Ll(),null})))}function Nl(){if(null===Qs)return!1;var e=Qs;if(Qs=null,0!==(48&As))throw Error(a(331));var t=As;As|=32;var n=el;el=[];for(var r=0;r<n.length;r+=2){var o=n[r],i=n[r+1],s=o.destroy;if(o.destroy=void 0,"function"===typeof s)try{s()}catch(u){if(null===i)throw Error(a(330));Rl(i,u)}}for(n=$s,$s=[],r=0;r<n.length;r+=2){o=n[r],i=n[r+1];try{var l=o.create;o.destroy=l()}catch(u){if(null===i)throw Error(a(330));Rl(i,u)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return As=t,Xo(),!0}function Pl(e,t,n){ui(e,t=us(0,t=as(n,t),1)),t=ul(),null!==(e=hl(e,1))&&(Yt(e,1,t),fl(e,t))}function Rl(e,t){if(3===e.tag)Pl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Pl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r))){var o=cs(n,e=as(t,e),1);if(ui(n,o),o=ul(),null!==(n=hl(n,1)))Yt(n,1,o),fl(n,o);else if("function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r)))try{r.componentDidCatch(t,e)}catch(i){}break}}n=n.return}}function Fl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ul(),e.pingedLanes|=e.suspendedLanes&n,ks===e&&(Ls&n)===n&&(4===Ns||3===Ns&&(62914560&Ls)===Ls&&500>Uo()-zs?xl(e,0):Hs|=n),fl(e,t)}function Bl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===zo()?1:2:(0===il&&(il=Rs),0===(t=Ut(62914560&~il))&&(t=4194304))),n=ul(),null!==(e=hl(e,t))&&(Yt(e,t,n),fl(e,n))}function Hl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ul(e,t,n,r){return new Hl(e,t,n,r)}function zl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Yl(e,t){var n=e.alternate;return null===n?((n=Ul(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wl(e,t,n,r,o,i){var s=2;if(r=e,"function"===typeof e)zl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Vl(n.children,o,i,t);case P:s=8,o|=16;break;case S:s=8,o|=1;break;case E:return(e=Ul(12,n,t,8|o)).elementType=E,e.type=E,e.lanes=i,e;case k:return(e=Ul(13,n,t,o)).type=k,e.elementType=k,e.lanes=i,e;case M:return(e=Ul(19,n,t,o)).elementType=M,e.lanes=i,e;case R:return Xl(n,o,i,t);case F:return(e=Ul(24,n,t,o)).elementType=F,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case O:s=10;break e;case T:s=9;break e;case A:s=11;break e;case L:s=14;break e;case I:s=16,r=null;break e;case D:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ul(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Vl(e,t,n,r){return(e=Ul(7,e,r,t)).lanes=n,e}function Xl(e,t,n,r){return(e=Ul(23,e,r,t)).elementType=R,e.lanes=n,e}function Gl(e,t,n){return(e=Ul(6,e,null,t)).lanes=n,e}function ql(e,t,n){return(t=Ul(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Jl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Ql(e,t,n,r){var o=t.current,i=ul(),s=cl(o);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(go(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(go(u)){n=vo(n,u,l);break e}}n=l}else n=uo;return null===t.context?t.context=n:t.pendingContext=n,(t=li(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ui(o,t),dl(o,s,i),s}function Zl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function $l(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eu(e,t){$l(e,t),(e=e.alternate)&&$l(e,t)}function tu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Kl(e,t,null!=n&&!0===n.hydrate),t=Ul(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ai(t),e[Qr]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var o=(t=r[e])._getVersion;o=o(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,o]:n.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=n}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ru(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i._internalRoot;if("function"===typeof o){var s=o;o=function(){var e=Zl(a);s.call(e)}}Ql(t,a,e,o)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=i._internalRoot,"function"===typeof o){var l=o;o=function(){var e=Zl(a);l.call(e)}}vl((function(){Ql(t,a,e,o)}))}return Zl(a)}function ou(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(a(200));return Jl(e,t,null,n)}Vs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ho.current)Da=!0;else{if(0===(n&r)){switch(Da=!1,t.tag){case 3:Wa(t),Vi();break;case 5:Ii(t);break;case 1:go(t.type)&&yo(t);break;case 4:Mi(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var o=t.type._context;lo(Jo,o._currentValue),o._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ka(e,t,n):(lo(Ni,1&Ni.current),null!==(t=ns(e,t,n))?t.sibling:null);lo(Ni,1&Ni.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ts(e,t,n);t.flags|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),lo(Ni,Ni.current),r)break;return null;case 23:case 24:return t.lanes=0,Ba(e,t,n)}return ns(e,t,n)}Da=0!==(16384&e.flags)}else Da=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=po(t,co.current),ri(t,n),o=oa(null,t,r,e,o,n),t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,go(r)){var i=!0;yo(t)}else i=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,ai(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&pi(t,r,s,e),o.updater=gi,t.stateNode=o,o._reactInternals=t,yi(t,r,e,n),t=Ya(null,t,r,!0,i,n)}else t.tag=0,Na(null,t,o,n),t=t.child;return t;case 16:o=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=(i=o._init)(o._payload),t.type=o,i=t.tag=function(e){if("function"===typeof e)return zl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===L)return 14}return 2}(o),e=Ko(o,e),i){case 0:t=Ua(null,t,o,e,n);break e;case 1:t=za(null,t,o,e,n);break e;case 11:t=Pa(null,t,o,e,n);break e;case 14:t=Ra(null,t,o,Ko(o.type,e),r,n);break e}throw Error(a(306,o,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ua(e,t,r,o=t.elementType===r?o:Ko(r,o),n);case 1:return r=t.type,o=t.pendingProps,za(e,t,r,o=t.elementType===r?o:Ko(r,o),n);case 3:if(Wa(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,si(e,t),di(t,r,null,n),(r=t.memoizedState.element)===o)Vi(),t=ns(e,t,n);else{if((i=(o=t.stateNode).hydrate)&&(Fi=Vr(t.stateNode.containerInfo.firstChild),Ri=t,i=Bi=!0),i){if(null!=(e=o.mutableSourceEagerHydrationData))for(o=0;o<e.length;o+=2)(i=e[o])._workInProgressVersionPrimary=e[o+1],Xi.push(i);for(n=Si(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Na(e,t,r,n),Vi();t=t.child}return t;case 5:return Ii(t),null===e&&zi(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,s=o.children,Ur(r,o)?s=null:null!==i&&Ur(r,i)&&(t.flags|=16),Ha(e,t),Na(e,t,s,n),t.child;case 6:return null===e&&zi(t),null;case 13:return Ka(e,t,n);case 4:return Mi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_i(t,null,r,n):Na(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Pa(e,t,r,o=t.elementType===r?o:Ko(r,o),n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value;var l=t.type._context;if(lo(Jo,l._currentValue),l._currentValue=i,null!==s)if(l=s.value,0===(i=sr(l,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,i):1073741823))){if(s.children===o.children&&!ho.current){t=ns(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&i)){1===l.tag&&((c=li(-1,n&-n)).tag=2,ui(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),ni(l.return,n),u.lanes|=n;break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Na(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(i=t.pendingProps).children,ri(t,n),r=r(o=oi(o,i.unstable_observedBits)),t.flags|=1,Na(e,t,r,n),t.child;case 14:return i=Ko(o=t.type,t.pendingProps),Ra(e,t,o,i=Ko(o.type,i),r,n);case 15:return Fa(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ko(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,go(r)?(e=!0,yo(t)):e=!1,ri(t,n),mi(t,r,o),yi(t,r,o,n),Ya(null,t,r,!0,e,n);case 19:return ts(e,t,n);case 23:case 24:return Ba(e,t,n)}throw Error(a(156,t.tag))},tu.prototype.render=function(e){Ql(e,this._internalRoot,null,null)},tu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ql(null,e,null,(function(){t[Qr]=null}))},tt=function(e){13===e.tag&&(dl(e,4,ul()),eu(e,4))},nt=function(e){13===e.tag&&(dl(e,67108864,ul()),eu(e,67108864))},rt=function(e){if(13===e.tag){var t=ul(),n=cl(e);dl(e,n,t),eu(e,n)}},ot=function(e,t){return t()},Oe=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=no(r);if(!o)throw Error(a(90));Q(r),ne(r,o)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Ie=ml,De=function(e,t,n,r,o){var i=As;As|=4;try{return Wo(98,e.bind(null,t,n,r,o))}finally{0===(As=i)&&(Ws(),Xo())}},Ne=function(){0===(49&As)&&(function(){if(null!==tl){var e=tl;tl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,fl(e,Uo())}))}Xo()}(),Ll())},Pe=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Ws(),Xo())}};var iu={Events:[eo,to,no,Me,Le,Ll,{current:!1}]},au={findFiberByHostInstance:$r,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},su={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{xo=lu.inject(su),wo=lu}catch(be){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iu,t.createPortal=ou,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!==(48&n))return e(t);As|=1;try{if(e)return Wo(99,e.bind(null,t))}finally{As=n,Xo()}},t.hydrate=function(e,t,n){if(!nu(t))throw Error(a(200));return ru(null,e,t,!0,n)},t.render=function(e,t,n){if(!nu(t))throw Error(a(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(a(40));return!!e._reactRootContainer&&(vl((function(){ru(null,null,e,!1,(function(){e._reactRootContainer=null,e[Qr]=null}))})),!0)},t.unstable_batchedUpdates=ml,t.unstable_createPortal=function(e,t){return ou(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ru(e,t,n,!1,r)},t.version="17.0.2"},function(e,t,n){"use strict";e.exports=n(22)},function(e,t,n){"use strict";var r,o,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,d=null,h=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==c?setTimeout(r,0,e):(c=e,setTimeout(h,0))},o=function(e,t){d=setTimeout(e,t)},i=function(){clearTimeout(d)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var b=!1,m=null,v=-1,y=5,j=0;t.unstable_shouldYield=function(){return t.unstable_now()>=j},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,w=x.port2;x.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();j=e+y;try{m(!0,e)?w.postMessage(null):(b=!1,m=null)}catch(n){throw w.postMessage(null),n}}else b=!1},r=function(e){m=e,b||(b=!0,w.postMessage(null))},o=function(e,n){v=f((function(){e(t.unstable_now())}),n)},i=function(){p(v),v=-1}}function C(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,o=e[r];if(!(void 0!==o&&0<E(o,t)))break e;e[r]=t,e[n]=o,n=r}}function _(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length;r<o;){var i=2*(r+1)-1,a=e[i],s=i+1,l=e[s];if(void 0!==a&&0>E(a,n))void 0!==l&&0>E(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[i]=n,r=i);else{if(!(void 0!==l&&0>E(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var O=[],T=[],A=1,k=null,M=3,L=!1,I=!1,D=!1;function N(e){for(var t=_(T);null!==t;){if(null===t.callback)S(T);else{if(!(t.startTime<=e))break;S(T),t.sortIndex=t.expirationTime,C(O,t)}t=_(T)}}function P(e){if(D=!1,N(e),!I)if(null!==_(O))I=!0,r(R);else{var t=_(T);null!==t&&o(P,t.startTime-e)}}function R(e,n){I=!1,D&&(D=!1,i()),L=!0;var r=M;try{for(N(n),k=_(O);null!==k&&(!(k.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=k.callback;if("function"===typeof a){k.callback=null,M=k.priorityLevel;var s=a(k.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?k.callback=s:k===_(O)&&S(O),N(n)}else S(O);k=_(O)}if(null!==k)var l=!0;else{var u=_(T);null!==u&&o(P,u.startTime-n),l=!1}return l}finally{k=null,M=r,L=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){I||L||(I=!0,r(R))},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return _(O)},t.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:A++,callback:n,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(e.sortIndex=a,C(T,e),null===_(O)&&e===_(T)&&(D?i():D=!0,o(P,a-s))):(e.sortIndex=l,C(O,e),I||L||(I=!0,r(R))),e},t.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}},function(e,t,n){"use strict";n(7);var r=n(1),o=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),t.Fragment=i("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,i={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:u,ref:c,props:i,_owner:a.current}}t.jsx=u,t.jsxs=u},function(e,t,n){"use strict";var r=n(25);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){e.exports=function(){"use strict";var e=function(t){var n={},r="4.6.6",o=function e(t,n){return!(!t[n.type]||t[n.type]!=n)||!!t.parentNode&&e(t.parentNode,n)},i=function(t){if(e.current.length>0)for(var n=0;n<e.current.length;n++)e.current[n]&&!o(t.target,e.current[n])&&e.current[n].close()};return n.init=function(){document.addEventListener("click",i),n.version=r},n.tracking=function(t,n){if(1==n)e.current=e.current.filter((function(e){return null!==e})),setTimeout((function(){e.current.push(t)}),0);else{var r=e.current.indexOf(t);r>=0&&(e.current[r]=null)}},n.path=function(e){if((e=e.split(".")).length){for(var t=this,n=null;n=e.shift();){if(!t.hasOwnProperty(n))return;t=t[n]}return t}return!1},n.current=[],n}();return"undefined"!==typeof document&&e.init(),e.ajax=function(t,n){if(Array.isArray(t)){var r={instance:[],complete:n};if(t.length>0)for(var o=0;o<t.length;o++)t[o].multiple=r,r.instance.push(e.ajax(t[o]));return r}if(t.data||(t.data={}),t.type&&(t.method=t.type),t.method||(t.method="GET"),t.dataType||(t.dataType="json"),t.data){var i=[],a=function e(t,n){var r=[],o=Object.keys(t);if(o.length)for(var i=0;i<o.length;i++){if(n)var a=n+"["+o[i]+"]";else a=o[i];if("object"==typeof t[o[i]])for(var s=e(t[o[i]],a),l=Object.keys(s),u=0;u<l.length;u++)r[l[u]]=s[l[u]];else r[a]=t[o[i]]}return r}(t.data),s=Object.keys(a);for(o=0;o<s.length;o++)i.push(s[o]+"="+encodeURIComponent(a[s[o]]));"GET"==t.method&&i.length>0&&(t.url.indexOf("?")<0&&(t.url+="?"),t.url+=i.join("&"))}var l=new XMLHttpRequest;return l.open(t.method,t.url,!0),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"==t.method?(l.setRequestHeader("Accept","application/json"),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):"json"==t.dataType?l.setRequestHeader("Content-Type","text/json"):"blob"==t.dataType?l.responseType="blob":"html"==t.dataType&&l.setRequestHeader("Content-Type","text/html"),1!=t.cache&&(l.setRequestHeader("pragma","no-cache"),l.setRequestHeader("cache-control","no-cache")),1==t.withCredentials&&(l.withCredentials=!0),"function"==typeof t.beforeSend&&t.beforeSend(l),l.onload=function(){if(200===l.status)if("json"==t.dataType)try{var n=JSON.parse(l.responseText);t.success&&"function"==typeof t.success&&t.success(n)}catch(o){t.error&&"function"==typeof t.error&&t.error(o,n)}else n="blob"==t.dataType?l.response:l.responseText,t.success&&"function"==typeof t.success&&t.success(n);else t.error&&"function"==typeof t.error&&t.error(l.responseText,l.status);if(e.ajax.queue&&e.ajax.queue.length>0&&e.ajax.send(e.ajax.queue.shift()),e.ajax.requests&&e.ajax.requests.length){var r=e.ajax.requests.indexOf(l);e.ajax.requests.splice(r,1),e.ajax.requests.length||(t.complete&&"function"==typeof t.complete&&t.complete(n),"function"==typeof e.ajax.oncomplete[t.group]&&(e.ajax.oncomplete[t.group](),e.ajax.oncomplete[t.group]=null)),t.multiple&&t.multiple.instance&&(r=t.multiple.instance.indexOf(l),t.multiple.instance.splice(r,1),t.multiple.instance.length||t.multiple.complete&&"function"==typeof t.multiple.complete&&t.multiple.complete(n))}},l.options=t,l.data=i,1==t.queue&&e.ajax.requests.length>0?e.ajax.queue.push(l):e.ajax.send(l),l},e.ajax.send=function(t){t.data?t.send(t.data.join("&")):t.send(),e.ajax.requests.push(t)},e.ajax.exists=function(e,t){var n=new XMLHttpRequest;n.open("HEAD",e,!1),n.send(),n.status&&t(n.status)},e.ajax.pending=function(t){var n=0,r=e.ajax.requests;if(r&&r.length)for(var o=0;o<r.length;o++)t&&t!=r[o].options.group||n++;return n},e.ajax.oncomplete={},e.ajax.requests=[],e.ajax.queue=[],e.alert=function(t){e.getWindowWidth()<800&&e.dialog?e.dialog.open({title:"Alert",message:t}):alert(t)},e.animation={},e.animation.slideLeft=function(e,t,n){1==t?(e.classList.add("slide-left-in"),setTimeout((function(){e.classList.remove("slide-left-in"),"function"==typeof n&&n()}),400)):(e.classList.add("slide-left-out"),setTimeout((function(){e.classList.remove("slide-left-out"),"function"==typeof n&&n()}),400))},e.animation.slideRight=function(e,t,n){1==t?(e.classList.add("slide-right-in"),setTimeout((function(){e.classList.remove("slide-right-in"),"function"==typeof n&&n()}),400)):(e.classList.add("slide-right-out"),setTimeout((function(){e.classList.remove("slide-right-out"),"function"==typeof n&&n()}),400))},e.animation.slideTop=function(e,t,n){1==t?(e.classList.add("slide-top-in"),setTimeout((function(){e.classList.remove("slide-top-in"),"function"==typeof n&&n()}),400)):(e.classList.add("slide-top-out"),setTimeout((function(){e.classList.remove("slide-top-out"),"function"==typeof n&&n()}),400))},e.animation.slideBottom=function(e,t,n){1==t?(e.classList.add("slide-bottom-in"),setTimeout((function(){e.classList.remove("slide-bottom-in"),"function"==typeof n&&n()}),400)):(e.classList.add("slide-bottom-out"),setTimeout((function(){e.classList.remove("slide-bottom-out"),"function"==typeof n&&n()}),100))},e.animation.fadeIn=function(e,t){e.style.display="",e.classList.add("fade-in"),setTimeout((function(){e.classList.remove("fade-in"),"function"==typeof t&&t()}),2e3)},e.animation.fadeOut=function(e,t){e.classList.add("fade-out"),setTimeout((function(){e.style.display="none",e.classList.remove("fade-out"),"function"==typeof t&&t()}),1e3)},e.calendar=function(t,n){if(t.calendar)return t.calendar.setOptions(n,!0);var r={type:"calendar",options:{},date:null,setOptions:function(n,o){var i={type:"default",validRange:null,startingDay:null,format:"DD/MM/YYYY",readonly:!0,today:!1,time:!1,resetButton:!0,placeholder:"",months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays_short:["S","M","T","W","T","F","S"],textDone:"Done",textReset:"Reset",textUpdate:"Update",value:null,fullscreen:!1,opened:!1,onopen:null,onclose:null,onchange:null,onupdate:null,mode:null,position:null};for(var a in i)n&&n.hasOwnProperty(a)?r.options[a]=n[a]:"undefined"!=typeof r.options[a]&&!0!==o||(r.options[a]=i[a]);if(0==r.options.resetButton?l.style.display="none":l.style.display="",r.options.readonly?t.setAttribute("readonly","readonly"):t.removeAttribute("readonly"),r.options.placeholder?t.setAttribute("placeholder",r.options.placeholder):t.removeAttribute("placeholder"),l.innerHTML=r.options.textReset,u.innerHTML=r.options.textDone,y.innerHTML=r.options.textUpdate,t.setAttribute("data-mask",r.options.format.toLowerCase()),!r.options.value&&r.options.today)var s=e.calendar.now();else s=r.options.value;return s&&(r.options.value=null,r.setValue(s)),r},open:function(n){if(!s.classList.contains("jcalendar-focus")&&!s.classList.contains("jcalendar-inline")){if(e.calendar.current=r,e.tracking(r,!0),r.getDays(),"year-month-picker"==r.options.type&&r.getMonths(),r.options.time&&(j.value=r.date[3],x.value=r.date[4]),s.classList.add("jcalendar-focus"),e.getWindowWidth()<800||r.options.fullscreen)s.classList.add("jcalendar-fullsize"),e.animation.slideBottom(d,1);else{s.classList.remove("jcalendar-fullsize");var o=t.getBoundingClientRect(),i=d.getBoundingClientRect();if(r.options.position)c.style.position="fixed",window.innerHeight<o.bottom+i.height?c.style.top=o.top-(i.height+2)+"px":c.style.top=o.top+o.height+2+"px",c.style.left=o.left+"px";else if(window.innerHeight<o.bottom+i.height?((a=-1*(o.height+i.height+2))+o.top<0&&(a=-1*(o.top+o.height)),c.style.top=a+"px"):c.style.top="2px",window.innerWidth<o.left+i.width){var a=window.innerWidth-(o.left+i.width+20);c.style.left=a+"px"}else c.style.left="0px"}"function"==typeof r.options.onopen&&r.options.onopen(t)}},close:function(n,o){if(s.classList.contains("jcalendar-focus")){if(!1!==o){var i=s.querySelector(".jcalendar-selected");if("string"==typeof o)var a=o;else a=!i||i.classList.contains("jcalendar-disabled")?r.options.value:r.getValue();r.setValue(a)}n||"function"!=typeof r.options.onclose||r.options.onclose(t),s.classList.remove("jcalendar-focus"),e.tracking(r,!1),e.calendar.current=null}return r.options.value},prev:function(){"years"==r.options.mode?(r.date[0]=r.date[0]-12,r.getYears()):"months"==r.options.mode?(r.date[0]=parseInt(r.date[0])-1,r.getMonths()):(r.date[1]<2?(r.date[0]=r.date[0]-1,r.date[1]=12):r.date[1]=r.date[1]-1,r.getDays())},next:function(){"years"==r.options.mode?(r.date[0]=parseInt(r.date[0])+12,r.getYears()):"months"==r.options.mode?(r.date[0]=parseInt(r.date[0])+1,r.getMonths()):(r.date[1]>11?(r.date[0]=parseInt(r.date[0])+1,r.date[1]=1):r.date[1]=parseInt(r.date[1])+1,r.getDays())},setToday:function(){var e=(new Date).toISOString().substr(0,10);return r.setValue(e),e},setValue:function(e){e||(e=""+e);var n=e,o=r.options.value;if(o!=n){if(n){r.setLabel(n,r.options),(a=n.split(" "))[1]||(a[1]="00:00:00");var i=a[1].split(":"),a=a[0].split("-"),s=parseInt(a[0]),l=parseInt(a[1]),u=parseInt(a[2]),c=parseInt(i[0]),d=parseInt(i[1]);r.date=[s,l,u,c,d,0],e=r.setLabel(n,r.options)}else{r.date=null;var e=""}r.options.value=n,"function"==typeof r.options.onchange&&r.options.onchange(t,n,o),t.value!=e&&(t.value=e,"function"==typeof t.onchange&&t.onchange({type:"change",target:t,value:t.value}))}r.getDays()},getValue:function(){return r.date?r.options.time?e.two(r.date[0])+"-"+e.two(r.date[1])+"-"+e.two(r.date[2])+" "+e.two(r.date[3])+":"+e.two(r.date[4])+":"+e.two(0):e.two(r.date[0])+"-"+e.two(r.date[1])+"-"+e.two(r.date[2])+" "+e.two(0)+":"+e.two(0)+":"+e.two(0):""},update:function(e,t){if(e.classList.contains("jcalendar-disabled"));else{var n=s.querySelector(".jcalendar-selected");n&&n.classList.remove("jcalendar-selected"),e.classList.add("jcalendar-selected"),e.classList.contains("jcalendar-set-month")?r.date[1]=t:r.date[2]=e.innerText,r.options.time?(r.date[3]=j.value,r.date[4]=x.value):r.close()}a()},reset:function(){r.setValue(""),r.date=null,r.close(!1,!1)},getDays:function(){r.options.mode="days";var t=new Date,n=r.date&&e.isNumeric(r.date[0])?r.date[0]:parseInt(t.getFullYear()),o=r.date&&e.isNumeric(r.date[1])?r.date[1]:parseInt(t.getMonth())+1,i=r.date&&e.isNumeric(r.date[2])?r.date[2]:parseInt(t.getDate()),s=r.date&&e.isNumeric(r.date[3])?r.date[3]:parseInt(t.getHours()),l=r.date&&e.isNumeric(r.date[4])?r.date[4]:parseInt(t.getMinutes());r.date=[n,o,i,s,l,0],h.innerHTML=n,f.innerHTML=r.options.months[o-1];var u=t.getMonth()==o-1&&t.getFullYear()==n,c=t.getDate(),d=(t=new Date(n,o,0,0,0)).getDate(),p=(t=new Date(n,o-1,0,0,0)).getDay()+1;p-=v=r.options.startingDay||0,g.innerHTML="",(x=document.createElement("tr")).setAttribute("align","center"),g.appendChild(x);for(var b=0;b<7;b++)(C=document.createElement("td")).classList.add("jcalendar-weekday"),C.innerHTML=r.options.weekdays_short[v],x.appendChild(C),++v>6&&(v=0);for(var v=0,y=0,j=0;j<6;j++){var x;(x=document.createElement("tr")).setAttribute("align","center");var w=!0;for(b=0;b<7;b++){var C;if((C=document.createElement("td")).classList.add("jcalendar-set-day"),v>=p&&v<p+d){y++,C.innerHTML=y,y==i&&C.classList.add("jcalendar-selected"),u&&c==y&&(C.style.fontWeight="bold");var _=e.calendar.now(new Date(n,o-1,y),!0);if(r.options.validRange){if(!r.options.validRange[0]||_>=r.options.validRange[0])var S=!0;else S=!1;if(!r.options.validRange[1]||_<=r.options.validRange[1])var E=!0;else E=!1;S&&E||C.classList.add("jcalendar-disabled")}w=!1}x.appendChild(C),v++}0==w&&g.appendChild(x)}r.options.time?m.style.display="":m.style.display="none",a()},getMonths:function(){r.options.mode="months";var t=r.options.months,n=(r.options.value,new Date),o=parseInt(n.getFullYear()),i=parseInt(n.getMonth())+1,s=r.date&&e.isNumeric(r.date[0])?r.date[0]:o,l=r.date&&e.isNumeric(r.date[1])?r.date[1]:i;h.innerHTML=r.date[0],f.innerHTML=t[l-1];var u=document.createElement("table");u.setAttribute("width","100%");for(var c=null,d=0;d<12;d++){d%4||((c=document.createElement("tr")).setAttribute("align","center"),u.appendChild(c));var p=document.createElement("td");if(p.classList.add("jcalendar-set-month"),p.setAttribute("data-value",d+1),p.innerText=t[d],r.options.validRange){var b=s+"-"+e.two(d+1);if(!r.options.validRange[0]||b>=r.options.validRange[0].substr(0,7))var m=!0;else m=!1;if(!r.options.validRange[1]||b<=r.options.validRange[1].substr(0,7))var v=!0;else v=!1;m&&v||p.classList.add("jcalendar-disabled")}d+1==l&&p.classList.add("jcalendar-selected"),o==s&&d+1==i&&(p.style.fontWeight="bold"),c.appendChild(p)}g.innerHTML='<tr><td colspan="7"></td></tr>',g.children[0].children[0].appendChild(u),a()},getYears:function(){r.options.mode="years";for(var t=new Date,n=t.getFullYear(),o=r.date&&e.isNumeric(r.date[0])?r.date[0]:parseInt(t.getFullYear()),i=[],s=0;s<25;s++)i[s]=parseInt(r.date[0])+(s-12);var l=document.createElement("table");for(l.setAttribute("width","100%"),s=0;s<25;s++){if(!(s%5)){var u=document.createElement("tr");u.setAttribute("align","center"),l.appendChild(u)}var c=document.createElement("td");c.classList.add("jcalendar-set-year"),c.innerText=i[s],o==i[s]&&c.classList.add("jcalendar-selected"),n==i[s]&&(c.style.fontWeight="bold"),u.appendChild(c)}g.innerHTML='<tr><td colspan="7"></td></tr>',g.firstChild.firstChild.appendChild(l),a()},setLabel:function(t,n){return e.calendar.getDateString(t,n)},fromFormatted:function(t,n){return e.calendar.extractDateFromString(t,n)}},o=function(t){if(e.findElement(t.target,"jcalendar-container")){var n=t.target.className;if("jcalendar-prev"==n)r.prev();else if("jcalendar-next"==n)r.next();else if("jcalendar-month"==n)r.getMonths();else if("jcalendar-year"==n)r.getYears();else if("jcalendar-set-year"==n)r.date[0]=t.target.innerText,"year-month-picker"==r.options.type?r.getMonths():r.getDays();else if(t.target.classList.contains("jcalendar-set-month")){var o=parseInt(t.target.getAttribute("data-value"));"year-month-picker"==r.options.type?r.update(t.target,o):(r.date[1]=o,r.getDays())}else"jcalendar-confirm"==n||"jcalendar-update"==n||"jcalendar-close"==n?r.close():"jcalendar-backdrop"==n?r.close(!1,!1):"jcalendar-reset"==n?r.reset():t.target.classList.contains("jcalendar-set-day")&&t.target.innerText&&r.update(t.target)}else r.close()},i=function(t){if(t.target.value&&t.target.value.length>3){var n=e.calendar.extractDateFromString(t.target.value,r.options.format);n&&"true"==t.target.getAttribute("data-completed")&&r.setValue(n)}},a=function(){var e=s.querySelector(".jcalendar-selected");e&&e.classList.contains("jcalendar-disabled")?(y.setAttribute("disabled","disabled"),j.setAttribute("disabled","disabled"),x.setAttribute("disabled","disabled")):(y.removeAttribute("disabled"),j.removeAttribute("disabled"),x.removeAttribute("disabled")),"function"==typeof r.options.onupdate&&r.options.onupdate(t,r.getValue())},s=null,l=null,u=null,c=null,d=null,h=null,f=null,p=null,g=null,b=null,m=null,v=null,y=null,j=null,x=null;return function(){"INPUT"==t.tagName&&t.value&&(n.value=t.value),(l=document.createElement("div")).className="jcalendar-reset",(u=document.createElement("div")).className="jcalendar-confirm",(b=document.createElement("div")).className="jcalendar-controls",b.style.borderBottom="1px solid #ddd",b.appendChild(l),b.appendChild(u),(c=document.createElement("div")).className="jcalendar-container",(d=document.createElement("div")).className="jcalendar-content",c.appendChild(d),"DIV"==t.tagName?(s=t).classList.add("jcalendar-inline"):(d.appendChild(b),(s=document.createElement("div")).className="jcalendar"),s.classList.add("jcalendar-container"),s.appendChild(c);var a=document.createElement("div");a.className="jcalendar-table",d.appendChild(a);var w=document.createElement("td");w.setAttribute("colspan","2"),w.className="jcalendar-prev",(h=document.createElement("span")).className="jcalendar-year",(f=document.createElement("span")).className="jcalendar-month";var C=document.createElement("td");C.className="jcalendar-header",C.setAttribute("colspan","3"),C.appendChild(f),C.appendChild(h);var _=document.createElement("td");_.setAttribute("colspan","2"),_.className="jcalendar-next";var S=document.createElement("thead"),E=document.createElement("tr");E.appendChild(w),E.appendChild(C),E.appendChild(_),S.appendChild(E),p=document.createElement("table"),g=document.createElement("tbody"),p.setAttribute("cellpadding","0"),p.setAttribute("cellspacing","0"),p.appendChild(S),p.appendChild(g),a.appendChild(p),(j=document.createElement("select")).className="jcalendar-select",j.onchange=function(){r.date[3]=this.value,"function"==typeof r.options.onupdate&&r.options.onupdate(t,r.getValue())};for(var O=0;O<24;O++)(T=document.createElement("option")).value=O,T.innerHTML=e.two(O),j.appendChild(T);for((x=document.createElement("select")).className="jcalendar-select",x.onchange=function(){r.date[4]=this.value,"function"==typeof r.options.onupdate&&r.options.onupdate(t,r.getValue())},O=0;O<60;O++){var T;(T=document.createElement("option")).value=O,T.innerHTML=e.two(O),x.appendChild(T)}var A=document.createElement("div");A.className="jcalendar-controls",(m=document.createElement("div")).className="jcalendar-time",m.style.maxWidth="140px",m.appendChild(j),m.appendChild(x),(y=document.createElement("button")).setAttribute("type","button"),y.className="jcalendar-update",(v=document.createElement("div")).style.flexGrow="10",v.appendChild(y),A.appendChild(m),"INPUT"==t.tagName&&A.appendChild(v),d.appendChild(A);var k=document.createElement("div");k.className="jcalendar-backdrop",s.appendChild(k),t.addEventListener("keyup",i),s.addEventListener("swipeleft",(function(t){e.animation.slideLeft(p,0,(function(){r.next(),e.animation.slideRight(p,1)})),t.preventDefault(),t.stopPropagation()})),s.addEventListener("swiperight",(function(t){e.animation.slideRight(p,0,(function(){r.prev(),e.animation.slideLeft(p,1)})),t.preventDefault(),t.stopPropagation()})),t.onmouseup=function(){r.open()},"ontouchend"in document.documentElement===!0?s.addEventListener("touchend",o):s.addEventListener("mouseup",o),e.calendar.hasEvents||(e.calendar.hasEvents=!0,document.addEventListener("keydown",e.calendar.keydown)),r.setOptions(n),"INPUT"==t.tagName?(t.parentNode.insertBefore(s,t.nextSibling),t.setAttribute("autocomplete","off"),t.classList.add("jcalendar-input"),t.value=r.setLabel(r.getValue(),r.options)):(r.getDays(),r.options.time&&(j.value=r.date[3],x.value=r.date[4])),1==r.options.opened&&r.open(),t.change=r.setValue,t.val=function(e){if(void 0===e)return r.getValue();r.setValue(e)},t.calendar=s.calendar=r}(),r},e.calendar.keydown=function(t){var n=null;(n=e.calendar.current)&&(13==t.which?n.close(!1,!0):27==t.which&&n.close(!1,!1))},e.calendar.prettify=function(e,t){t||(t={justNow:"Just now",xMinutesAgo:"{0}m ago",xHoursAgo:"{0}h ago",xDaysAgo:"{0}d ago",xWeeksAgo:"{0}w ago",xMonthsAgo:"{0} mon ago",xYearsAgo:"{0}y ago"});var n=new Date,r=new Date(e),o=parseInt((n-r)/1e3/60);if(String.prototype.format=function(e){return this.replace("{0}",e)},0==o)var i=t.justNow;else i=o<90?t.xMinutesAgo.format(o):o<1440?t.xHoursAgo.format(Math.round(o/60)):o<20160?t.xDaysAgo.format(Math.round(o/1440)):o<43200?t.xWeeksAgo.format(Math.round(o/10080)):o<1036800?t.xMonthsAgo.format(Math.round(o/43200)):t.xYearsAgo.format(Math.round(o/525600));return i},e.calendar.prettifyAll=function(){for(var t=document.querySelectorAll(".prettydate"),n=0;n<t.length;n++)t[n].getAttribute("data-date")?t[n].innerHTML=e.calendar.prettify(t[n].getAttribute("data-date")):(t[n].setAttribute("data-date",t[n].innerHTML),t[n].innerHTML=e.calendar.prettify(t[n].innerHTML))},e.calendar.now=function(t,n){t||(t=new Date);var r=t.getFullYear(),o=t.getMonth()+1,i=t.getDate(),a=t.getHours(),s=t.getMinutes(),l=t.getSeconds();return 1==n?e.two(r)+"-"+e.two(o)+"-"+e.two(i):e.two(r)+"-"+e.two(o)+"-"+e.two(i)+" "+e.two(a)+":"+e.two(s)+":"+e.two(l)},e.calendar.toArray=function(e){var t=(n=e.split(-1!==e.indexOf("T")?"T":" "))[1],n=n[0].split("-"),r=parseInt(n[0]),o=parseInt(n[1]),i=parseInt(n[2]);if(t){t=t.split(":");var a=parseInt(t[0]),s=parseInt(t[1])}else a=0,s=0;return[r,o,i,a,s,0]},e.calendar.extractDateFromString=function(t,n){if(t>0&&Number(t)==t)return(l=new Date(Math.round(86400*(t-25569)*1e3))).getFullYear()+"-"+e.two(l.getMonth())+"-"+e.two(l.getDate())+" 00:00:00";var r=""+t,o=n.replace(/[0-9]/g,""),i=1,a=o.search("YYYY");a=r.substr(a,4),parseInt(a)!=a&&(i=0);var s=o.search("MM");s=r.substr(s,2),(parseInt(s)!=s||s>12)&&(i=0);var l=o.search("DD");l=r.substr(l,2),(parseInt(l)!=l||l>31)&&(i=0);var u=o.search("HH");u>=0?(u=r.substr(u,2),(!parseInt(u)||u>23)&&(u="00")):u="00";var c=o.search("MI");c>=0?(c=r.substr(c,2),(!parseInt(c)||c>59)&&(c="00")):c="00";var d=o.search("SS");return d>=0?(d=r.substr(d,2),(!parseInt(d)||d>59)&&(d="00")):d="00",1==i&&t.length==o.length?a+"-"+s+"-"+l+" "+u+":"+c+":"+d:""},e.calendar.getDateString=function(e,t){if(t||(t={}),"string"==typeof t)var n=t;else n=t.format;if(t&&t.weekdays)var r=t.weekdays;else r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if(t&&t.months)var o=t.months;else o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(t&&t.months)var i=t.monthsFull;else i=["January","February","March","April","May","June","July","August","September","October","November","December"];if(n||(n="DD/MM/YYYY"),e){var a=""+e,s=-1!==a.indexOf("T")?"T":" ",l="",u="",c="";if((a=a.split(s))[1]?(u=(l=a[1].split(":"))[1]?l[1]:"00",c=l[2]?l[2]:"00",l=l[0]?l[0]:"00"):(l="00",u="00",c="00"),(a=a[0].split("-"))[0]&&a[1]&&a[2]&&a[0]>0&&a[1]>0&&a[1]<13&&a[2]>0&&a[2]<32){var d=new Date(a[0],a[1]-1,a[2]);a[1]=(a[1].length<2?"0":"")+a[1],a[2]=(a[2].length<2?"0":"")+a[2],l=(l.length<2?"0":"")+l,u=(u.length<2?"0":"")+u,c=(c.length<2?"0":"")+c,e=(e=n).replace("MMM","MON");for(var h=["YYYY","YYY","YY","Y","MM","DD","DY","DAY","WD","D","Q","HH24","HH12","HH","PM","AM","MI","SS","MS","MONTH","MON"],f=[],p=e;p;){for(var g=0,b=0;b<h.length;b++)0==g&&0===p.toUpperCase().indexOf(h[b])&&(g=h[b].length);0==g?(f.push(p.substr(0,1)),p=p.substr(1)):(f.push(p.substr(0,g)),p=p.substr(g))}var m=function(e,t,n){if(1==n)for(var r=0;r<f.length;r++)f[r].toUpperCase()==e&&(f[r]=t);else for(r=0;r<f.length;r++)f[r]==e&&(f[r]=t)};m("YYYY",a[0],!0),m("YYY",a[0].substring(1,4),!0),m("YY",a[0].substring(2,4),!0),m("Y",a[0].substring(3,4),!0),m("MM",a[1],!0),m("DD",a[2],!0),m("Q",Math.floor((d.getMonth()+3)/3),!0),l&&m("HH24",l),l>12?(m("HH12",l-12,!0),m("HH",l-12,!0),m("AM","pm",!0),m("PM","pm",!0)):(m("HH12",l,!0),m("HH",l,!0),m("AM","am",!0),m("PM","am",!0)),m("MI",u,!0),m("SS",c,!0),m("MS",d.getMilliseconds(),!0),m("MONTH",i[d.getMonth()].toUpperCase()),m("Month",i[d.getMonth()]),m("month",i[d.getMonth()].toLowerCase()),m("MON",o[d.getMonth()].toUpperCase()),m("MMM",o[d.getMonth()].toUpperCase()),m("Mon",o[d.getMonth()]),m("mon",o[d.getMonth()].toLowerCase()),m("DAY",r[d.getDay()].toUpperCase()),m("Day",r[d.getDay()]),m("day",r[d.getDay()].toLowerCase()),m("DY",r[d.getDay()].substr(0,3).toUpperCase()),m("Dy",r[d.getDay()].substr(0,3)),m("dy",r[d.getDay()].substr(0,3).toLowerCase()),m("D",r[d.getDay()]),m("WD",r[d.getDay()]),e=f.join("")}else e=""}return e},e.color=function(t,n){if(t.color)return t.color.setOptions(n,!0);var r={type:"color",options:{}},o=null,i=null,a=null,s=null,l=null,u=null,c=null;r.setOptions=function(n,o){var i={placeholder:"",value:null,onopen:null,onclose:null,onchange:null,closeOnChange:!0,palette:null,position:null,doneLabel:"Done",resetLabel:"Reset",fullscreen:!1,opened:!1};for(var a in n||(n={}),n&&!n.palette&&(n.palette=e.palette()),i)n&&n.hasOwnProperty(a)?r.options[a]=n[a]:"undefined"!=typeof r.options[a]&&!0!==o||(r.options[a]=i[a]);return s&&(s.innerHTML=r.options.resetLabel),l&&(l.innerHTML=r.options.doneLabel),r.options.palette&&c&&c.updateContent(0,b()),"string"===typeof r.options.value&&(t.value=r.options.value),r.options.placeholder?t.setAttribute("placeholder",r.options.placeholder):t.getAttribute("placeholder")&&t.removeAttribute("placeholder"),r},r.open=function(){if(!o.classList.contains("jcolor-focus")){e.tracking(r,!0),o.classList.add("jcolor-focus");var n=a.getBoundingClientRect();if(e.getWindowWidth()<800||1==r.options.fullscreen)a.style.top="",a.classList.add("jcolor-fullscreen"),e.animation.slideBottom(a,1),i.style.display="block";else{a.classList.contains("jcolor-fullscreen")&&(a.classList.remove("jcolor-fullscreen"),i.style.display="");var s=t.getBoundingClientRect();r.options.position?(a.style.position="fixed",window.innerHeight<s.bottom+n.height?a.style.top=s.top-(n.height+2)+"px":a.style.top=s.top+s.height+2+"px",a.style.left=s.left+"px"):window.innerHeight<s.bottom+n.height?a.style.top=-1*(n.height+s.height+2)+"px":a.style.top="2px"}if("function"==typeof r.options.onopen&&r.options.onopen(t),c.setBorder(c.getActive()),r.options.value){var l=g(r.options.value);C.forEach((function(e,t){e.value=l[t],e.dispatchEvent(new Event("input"))}))}}},r.close=function(n){return o.classList.contains("jcolor-focus")&&(o.classList.remove("jcolor-focus"),i.style.display="",n||"function"!=typeof r.options.onclose||r.options.onclose(t),e.tracking(r,!1)),r.options.value},r.setValue=function(e){if(e||(e=""),e!=r.options.value){r.options.value=e,w=e;var n=o.querySelector(".jcolor-selected");n&&n.classList.remove("jcolor-selected"),r.values[e]&&r.values[e].classList.add("jcolor-selected"),"function"==typeof r.options.onchange&&r.options.onchange(t,e),t.value!=r.options.value&&(t.value=r.options.value,"function"==typeof t.onchange&&t.onchange({type:"change",target:t,value:t.value})),1==r.options.closeOnChange&&r.close()}},r.getValue=function(){return r.options.value};var d=!1,h=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},f=function(e,t,n){return"#"+h(e)+h(t)+h(n)},p=function(e){return parseInt("0x"+e)},g=function(e){return[p(e.substr(1,2)),p(e.substr(3,2)),p(e.substr(5,2))]},b=function(){var e=document.createElement("div");e.className="jcolor-grid",r.values=[];var t=document.createElement("table");t.setAttribute("cellpadding","7"),t.setAttribute("cellspacing","0");for(var n=0;n<r.options.palette.length;n++){for(var o=document.createElement("tr"),i=0;i<r.options.palette[n].length;i++){var a=document.createElement("td"),s=r.options.palette[n][i];s.length<7&&"#"!==s.substr(0,1)&&(s="#"+s),a.style.backgroundColor=s,a.setAttribute("data-value",s),a.innerHTML="",o.appendChild(a),r.options.value==s&&a.classList.add("jcolor-selected"),r.values[s]=a}t.appendChild(o)}return e.appendChild(t),e.addEventListener("mouseup",(function(e){if("TD"==e.target.tagName){var t=e.target.getAttribute("data-value");t&&r.setValue(t)}})),e},m=document.createElement("canvas");m.width=200,m.height=160;var v=m.getContext("2d"),y=function(){var e=u.firstChild.getBoundingClientRect();m.width=e.width-14,j()},j=function(){var e=v.createLinearGradient(0,0,m.width,0);e.addColorStop(0,"rgb(255,0,0)"),e.addColorStop(.15,"rgb(255,0,255)"),e.addColorStop(.33,"rgb(0,0,255)"),e.addColorStop(.49,"rgb(0,255,255)"),e.addColorStop(.67,"rgb(0,255,0)"),e.addColorStop(.84,"rgb(255,255,0)"),e.addColorStop(1,"rgb(255,0,0)"),v.fillStyle=e,v.fillRect(0,0,m.width,m.height),(e=v.createLinearGradient(0,0,0,m.height)).addColorStop(0,"rgba(255,255,255,1)"),e.addColorStop(.5,"rgba(255,255,255,0)"),e.addColorStop(.5,"rgba(0,0,0,0)"),e.addColorStop(1,"rgba(0,0,0,1)"),v.fillStyle=e,v.fillRect(0,0,m.width,m.height)},x=function(){var e=document.createElement("div");e.className="jcolor-hsl";var t=document.createElement("div");t.className="jcolor-point";var n=document.createElement("div");n.appendChild(m),n.appendChild(t),e.appendChild(n);var r=function(n,r,o){if(1===n){var i=e.getBoundingClientRect(),a=r-i.left,s=o-i.top;a<0&&(a=0),s<0&&(s=0),a>i.width&&(a=i.width),s>i.height&&(s=i.height),t.style.left=a+"px",t.style.top=s+"px";var l=v.getImageData(a,s,1,1).data;w=f(l[0],l[1],l[2])}};return e.addEventListener("mousedown",(function(e){r(e.buttons,e.clientX,e.clientY)})),e.addEventListener("mousemove",(function(e){r(e.buttons,e.clientX,e.clientY)})),e.addEventListener("touchmove",(function(e){r(1,e.changedTouches[0].clientX,e.changedTouches[0].clientY)})),e},w="",C=[],_=function(){if(""!==w)for(var e=0;e<C.length;e++){var t=g(w);t[e]=0;var n="linear-gradient(90deg, rgb(";n+=t.join(", "),n+="), rgb(",t[e]=255,n+=t.join(", "),n+="))",C[e].style.backgroundImage=n}},S=function(){var e=document.createElement("div");e.className="jcolor-sliders";var t=document.createElement("div"),n=function(e){var n=document.createElement("div");n.className="jcolor-sliders-input-container";var r=document.createElement("label");r.innerText=e;var o=document.createElement("div");o.className="jcolor-sliders-input-subcontainer";var i=document.createElement("input");i.type="range",i.min=0,i.max=255,i.value=0,n.appendChild(r),o.appendChild(i);var a=document.createElement("div");return a.innerText=i.value,i.addEventListener("input",(function(){a.innerText=i.value})),o.appendChild(a),n.appendChild(o),t.appendChild(n),i};C=[n("Red"),n("Green"),n("Blue")],e.appendChild(t);var r=document.createElement("div");r.className="jcolor-sliders-final-color";var o=document.createElement("div");o.style.visibility="hidden",o.innerText="a",r.appendChild(o);var i=function(){var e=f(parseInt(C[0].value),parseInt(C[1].value),parseInt(C[2].value));o.innerText=e,o.style.color=e,o.style.removeProperty("visibility"),w=e};return C.forEach((function(e){e.addEventListener("input",(function(){i(),_()}))})),e.appendChild(r),e};return function(){r.setOptions(n),"INPUT"==t.tagName&&(t.classList.add("jcolor-input"),t.readOnly=!0),(o=document.createElement("div")).className="jcolor",(i=document.createElement("div")).className="jcolor-backdrop",o.appendChild(i),(a=document.createElement("div")).className="jcolor-content";var h=document.createElement("div");h.className="jcolor-controls",a.appendChild(h),(s=document.createElement("div")).className="jcolor-reset",s.innerHTML=r.options.resetLabel,s.onclick=function(e){r.setValue(""),r.close()},h.appendChild(s),(l=document.createElement("div")).className="jcolor-close",l.innerHTML=r.options.doneLabel,l.onclick=function(e){c.getActive()>0&&r.setValue(w),r.close()},h.appendChild(l),u=document.createElement("div"),a.appendChild(u),c=e.tabs(u,{animation:!0,data:[{title:"Grid",contentElement:b()},{title:"Spectrum",contentElement:x()},{title:"Sliders",contentElement:S()}],onchange:function(e,t,n){if(1===n)y();else{var o=""!==w?w:r.getValue();if(2===n&&o){var i=g(o);C.forEach((function(e,t){e.value=i[t],e.dispatchEvent(new Event("input"))}))}}},palette:"modern"}),o.appendChild(a),"INPUT"==t.tagName?t.parentNode.insertBefore(o,t.nextSibling):t.appendChild(o),t.addEventListener("mouseup",(function(e){r.open()})),i.addEventListener("mousedown",(function(e){d=!0})),i.addEventListener("mouseup",(function(e){d&&(r.close(),d=!1)})),window.addEventListener("resize",(function(){o.classList.contains("jcolor-focus")&&1==c.getActive()&&y()})),1==r.options.opened&&r.open(),t.change=r.setValue,t.val=function(e){if(void 0===e)return r.getValue();r.setValue(e)},t.color=r,o.color=r}(),r},e.contextmenu=function(t,n){var r={options:{}},o={items:null,onclick:null};for(var i in o)n&&n.hasOwnProperty(i)?r.options[i]=n[i]:r.options[i]=o[i];function a(e){if(!e.type||"line"!=e.type&&"divisor"!=e.type){u=document.createElement("div");var t=document.createElement("a");if(t.innerHTML=e.title,e.tooltip&&u.setAttribute("title",e.tooltip),e.icon&&u.setAttribute("data-icon",e.icon),e.id&&(u.id=e.id),e.disabled?u.className="jcontextmenu-disabled":e.onclick&&(u.method=e.onclick,u.addEventListener("mousedown",(function(e){e.preventDefault()})),u.addEventListener("mouseup",(function(){this.method(this)}))),u.appendChild(t),e.submenu){var n=document.createElement("span");n.innerHTML="&#9658;",u.appendChild(n),u.classList.add("jcontexthassubmenu");var r=document.createElement("div");r.classList.add("jcontextmenu"),r.setAttribute("tabindex","900");for(var o=e.submenu,i=0;i<o.length;i++){var s=a(o[i]);r.appendChild(s)}u.appendChild(r)}else if(e.shortcut){var l=document.createElement("span");l.innerHTML=e.shortcut,u.appendChild(l)}}else var u=document.createElement("hr");return u}return t.classList.add("jcontextmenu"),t.setAttribute("tabindex","900"),r.open=function(e,n){if(n&&(r.options.items=n,r.create(n)),r.options.items&&r.options.items.length>0||t.children.length){if(e.target)var o=e.clientX,i=e.clientY;else o=e.x,i=e.y;t.classList.add("jcontextmenu-focus"),t.focus();var a=t.getBoundingClientRect();if(window.innerHeight<i+a.height){var s=i-a.height;s<0&&(s=0),t.style.top=s+"px"}else t.style.top=i+"px";window.innerWidth<o+a.width?o-a.width>0?t.style.left=o-a.width+"px":t.style.left="10px":t.style.left=o+"px"}},r.close=function(){t.classList.contains("jcontextmenu-focus")&&t.classList.remove("jcontextmenu-focus")},r.create=function(e){t.innerHTML="";for(var n=0;n<e.length;n++){var r=a(e[n]);t.appendChild(r)}},"function"==typeof r.options.onclick&&t.addEventListener("click",(function(e){r.options.onclick(r,e)})),r.options.items&&r.create(r.options.items),t.addEventListener("blur",(function(e){r.close()})),e.contextmenu.hasEvents||(window.addEventListener("mousewheel",(function(){r.close()})),document.addEventListener("contextmenu",(function(t){var n=e.contextmenu.getElement(t.target);if(n){var r=document.querySelector("#"+n);r?(r.contextmenu.open(t),t.preventDefault()):console.error("JSUITES: Contextmenu id not found")}})),e.contextmenu.hasEvents=!0),t.contextmenu=r,r},e.contextmenu.getElement=function(e){var t=0;function n(e){e.parentNode&&e.getAttribute("aria-contextmenu-id")?t=e.getAttribute("aria-contextmenu-id"):e.parentNode&&n(e.parentNode)}return n(e),t},e.dropdown=function(t,n){if(t.dropdown)return t.dropdown.setOptions(n,!0);var r={type:"dropdown",options:{}},o=function(e,n){e&&e.length&&(r.setData(e),"function"==typeof r.options.onload&&r.options.onload(t,r,e,n)),n&&a(n),void 0!==n&&null!==n||(r.options.value=""),t.value=r.options.value,1==r.options.opened&&r.open()},i=function(){r.value={};for(var e=0;e<r.items.length;e++)1==r.items[e].selected&&(r.items[e].element&&r.items[e].element.classList.remove("jdropdown-selected"),r.items[e].selected=null);r.options.value=""},a=function(e){if(i(),null!==e)if(e){Array.isArray(e)||(e=(""+e).split(";"));for(var t=0;t<e.length;t++)r.value[e[t]]=""}else"undefined"!==typeof r.value[""]&&(r.value[""]="");for(t=0;t<r.items.length;t++)"undefined"!==typeof r.value[s(t)]&&(r.items[t].element&&r.items[t].element.classList.add("jdropdown-selected"),r.items[t].selected=!0,r.value[s(t)]=l(t));r.options.value=Object.keys(r.value).join(";"),r.header.value=r.getText()},s=function(e,t){if(r.options.format)n="id";else var n="value";return r.items[e]?void 0!==t?r.items[e].data[n]=t:r.items[e].data[n]:""},l=function(e,t){if(r.options.format)n="name";else var n="text";return r.items[e]?void 0!==t?r.items[e].data[n]=t:r.items[e].data[n]:""},u=function(){return Object.keys(r.value)},c=function(){for(var e=[],t=Object.keys(r.value),n=0;n<t.length;n++)e.push(r.value[t[n]]);return e};r.setOptions=function(n,i){n||(n={});var a={url:null,data:[],format:0,multiple:!1,autocomplete:!1,remoteSearch:!1,lazyLoading:!1,type:null,width:null,maxWidth:null,opened:!1,value:null,placeholder:"",newOptions:!1,position:!1,onchange:null,onload:null,onopen:null,onclose:null,onfocus:null,onblur:null,oninsert:null};for(var s in a)n&&n.hasOwnProperty(s)?r.options[s]=n[s]:"undefined"!=typeof r.options[s]&&!0!==i||(r.options[s]=a[s]);return 1!=r.options.remoteSearch&&"searchbar"!==r.options.type||(r.options.autocomplete=!0),1==r.options.newOptions?r.header.classList.add("jdropdown-add"):r.header.classList.remove("jdropdown-add"),1==r.options.autocomplete?r.header.removeAttribute("readonly"):r.header.setAttribute("readonly","readonly"),r.options.placeholder?r.header.setAttribute("placeholder",r.options.placeholder):r.header.removeAttribute("placeholder"),t.classList.remove("jdropdown-searchbar"),t.classList.remove("jdropdown-picker"),t.classList.remove("jdropdown-list"),"searchbar"==r.options.type?t.classList.add("jdropdown-searchbar"):"list"==r.options.type?t.classList.add("jdropdown-list"):"picker"==r.options.type?t.classList.add("jdropdown-picker"):e.getWindowWidth()<800?r.options.autocomplete?(t.classList.add("jdropdown-searchbar"),r.options.type="searchbar"):(t.classList.add("jdropdown-picker"),r.options.type="picker"):(r.options.width?(t.style.width=r.options.width,t.style.minWidth=r.options.width):(t.style.removeProperty("width"),t.style.removeProperty("min-width")),t.classList.add("jdropdown-default"),r.options.type="default"),"searchbar"==r.options.type?d.appendChild(p):h.insertBefore(p,h.firstChild),r.options.url&&!n.data?e.ajax({url:r.options.url,method:"GET",dataType:"json",success:function(e){e&&o(e,r.options.value)}}):o(r.options.data,r.options.value),r};var d=null,h=null,f=null,p=null,g=null,b=null,m=null,v=function(){if(n||(n={}),"SELECT"==t.tagName){var o=e.dropdown.extractFromDom(t,n);t=o.el,n=o.options}!n.placeholder&&t.getAttribute("placeholder")&&(n.placeholder=t.getAttribute("placeholder")),r.value={},r.items=[],r.groups=[],r.search="",r.results=null,r.numOfItems=0,t.classList.add("jdropdown"),(d=document.createElement("div")).className="jdropdown-container-header",r.header=document.createElement("input"),r.header.className="jdropdown-header",r.header.setAttribute("autocomplete","off"),r.header.onfocus=function(){"function"==typeof r.options.onfocus&&r.options.onfocus(t)},r.header.onblur=function(){"function"==typeof r.options.onblur&&r.options.onblur(t)},r.header.onkeyup=function(e){1!=r.options.autocomplete||m?r.options.autocomplete||r.next(e.key):(r.search!=r.header.value.trim()&&(m=setTimeout((function(){r.find(r.header.value.trim()),m=null}),400)),t.classList.contains("jdropdown-focus")||r.open())},e.dropdown.hasEvents||(e.dropdown.hasEvents=!0,document.addEventListener("keydown",e.dropdown.keydown)),(h=document.createElement("div")).className="jdropdown-container",(f=document.createElement("div")).className="jdropdown-content",(p=document.createElement("div")).className="jdropdown-close",p.innerHTML="Done",(g=document.createElement("div")).className="jdropdown-reset",g.innerHTML="x",g.onclick=function(){r.reset(),r.close()},(b=document.createElement("div")).className="jdropdown-backdrop",d.appendChild(r.header),h.appendChild(f),t.appendChild(d),t.appendChild(h),t.appendChild(b),r.setOptions(n),"ontouchsend"in document.documentElement===!0?t.addEventListener("touchsend",e.dropdown.mouseup):t.addEventListener("mouseup",e.dropdown.mouseup),1==r.options.lazyLoading&&e.lazyLoading(f,{loadUp:r.loadUp,loadDown:r.loadDown}),t.change=r.setValue,t.val=function(e){if(void 0===e)return r.getValue(!!r.options.multiple);r.setValue(e)},t.dropdown=r};r.getUrl=function(){return r.options.url},r.setUrl=function(t,n){r.options.url=t,e.ajax({url:r.options.url,method:"GET",dataType:"json",success:function(e){r.setData(e),"function"==typeof n&&n(r)}})},r.setId=function(e,t){if(r.options.format)n="id";else var n="value";"object"==typeof e?e[n]=t:r.items[e].data[n]=t},r.add=function(t){if(!t){var n=1==r.options.autocomplete?r.header.value:"";if(!(t=prompt("Text",n)))return!1}var o=e.guid();if(r.options.format)i={id:o,name:t};else var i={value:o,text:t};r.options.data.push(i);var a=r.createItem(i);return f.appendChild(a.element),"function"==typeof r.options.oninsert&&r.options.oninsert(r,i,i),"none"==f.style.display&&(f.style.display=""),i},r.createItem=function(e,t,n){r.options.format?(e.id||void 0===e.value||(e.id=e.value),e.name||void 0===e.text||(e.name=e.text)):(e.value||void 0===e.id||(e.value=e.id),e.text||void 0===e.name||(e.text=e.name));var o={};if(o.element=document.createElement("div"),o.element.className="jdropdown-item",o.element.indexValue=r.items.length,o.data=e,t&&(o.group=t),e.id&&o.element.setAttribute("id",e.id),1==e.disabled&&o.element.setAttribute("data-disabled",!0),e.image){var i=document.createElement("img");i.className="jdropdown-image",i.src=e.image,e.title||i.classList.add("jdropdown-image-small"),o.element.appendChild(i)}else if(e.color){var a=document.createElement("div");a.className="jdropdown-color",a.style.backgroundColor=e.color,o.element.appendChild(a)}if(r.options.format)s=e.name;else var s=e.text;var l=document.createElement("div");if(l.className="jdropdown-description",l.innerHTML=s||"&nbsp;",e.title){var u=document.createElement("div");u.className="jdropdown-title",u.innerText=e.title,l.appendChild(u)}if(r.options.format)c=e.id;else var c=e.value;return r.value[c]&&(o.element.classList.add("jdropdown-selected"),o.selected=!0),r.items.push(o),o.element.appendChild(l),o},r.appendData=function(e){if(e.length){r.numOfItems=0;for(var t=[],n=[],o=0;o<e.length;o++)e[o].group?(n[e[o].group]||(n[e[o].group]=[]),n[e[o].group].push(o)):t.push(o);var i=Object.keys(n);if(i.length>0)for(o=0;o<i.length;o++){var a=document.createElement("div");a.className="jdropdown-group";var s=document.createElement("div");s.className="jdropdown-group-name",s.innerHTML=i[o];var l=document.createElement("i");l.className="jdropdown-group-arrow jdropdown-group-arrow-down",s.appendChild(l);var u=document.createElement("div");u.className="jdropdown-group-items";for(var c=0;c<n[i[o]].length;c++){var d=r.createItem(e[n[i[o]][c]],a,i[o]);(0==r.options.lazyLoading||r.numOfItems<200)&&(u.appendChild(d.element),r.numOfItems++)}a.appendChild(s),a.appendChild(u),r.groups.push(a),u.children.length>0&&f.appendChild(a)}if(t.length)for(o=0;o<t.length;o++)d=r.createItem(e[t[o]]),(0==r.options.lazyLoading||r.numOfItems<200)&&(f.appendChild(d.element),r.numOfItems++)}},r.setData=function(e){if(e.length){for(var t=0;t<e.length;t++)"object"!=typeof e[t]&&(r.options.format?e[t]={id:e[t],name:e[t]}:e[t]={value:e[t],text:e[t]});i(),f.innerHTML="",r.header.value="",r.items=[],r.appendData(e),r.options.data=e}},r.getData=function(){return r.options.data},r.getPosition=function(e){for(var t=0;t<r.items.length;t++)if(s(t)==e)return t;return 0},r.getText=function(e){var t=c();return e?t:t.join("; ")},r.getValue=function(e){var t=u();return e?t:t.join(";")};var y=function(e){"function"==typeof r.options.onchange&&r.options.onchange(t,r,e,r.options.value),t.value!=r.options.value&&(t.value=r.options.value,"function"==typeof t.onchange&&t.onchange({type:"change",target:t,value:t.value}))};r.setValue=function(e){var t=r.getValue();Array.isArray(e)&&(e=e.join(";")),t!==e&&(a(e),y(t))},r.resetSelected=function(){r.setValue(null)},r.selectIndex=function(e){if(e=parseInt(e),r.items&&r.items[e])if(r.setCursor(e,!1),r.options.multiple){var t=r.options.value;r.items[e].selected?(r.items[e].element.classList.remove("jdropdown-selected"),r.items[e].selected=!1,delete r.value[s(e)]):(r.items[e].element.classList.add("jdropdown-selected"),r.items[e].selected=!0,r.value[s(e)]=l(e)),r.options.value=Object.keys(r.value).join(";"),0==r.options.autocomplete&&(r.header.value=c().join("; ")),y(t)}else r.items[e].selected?r.setValue(null):r.setValue(s(e)),r.close()},r.selectItem=function(e){r.selectIndex(e.indexValue)};var j=function(e,t){for(var n=0;n<t.length;n++)if(r.options.format){if(t[n].id==e)return!0}else if(t[n].value==e)return!0;return!1};r.find=function(t){if(r.search==t.trim())return!1;if(r.search=t,r.numOfItems=0,1==r.options.remoteSearch)r.currentIndex=null,r.results=null,e.ajax({url:r.options.url+"?q="+t,method:"GET",dataType:"json",success:function(e){r.items=[],f.innerHTML="";var t=Object.keys(r.value);if(t.length)for(var n=0;n<t.length;n++)j(t[n],e)||(r.options.format?e.unshift({id:t[n],name:r.value[t[n]]}):e.unshift({value:t[n],text:r.value[t[n]]}));r.appendData(e),e.length?f.style.display="":f.style.display="none"}});else{t=new RegExp(t,"gi"),r.results=[];for(var n=0;n<r.items.length;n++){var o=l(n),i=r.items[n].data.title||"",a=r.items[n].data.group||"",s=r.items[n].data.synonym||"";if(s&&(s=s.join(" ")),(null==t||1==r.items[n].selected||o.match(t)||i.match(t)||a.match(t)||s.match(t))&&(r.results.push(r.items[n]),r.items[n].group&&r.items[n].group.children[1].children[0]))for(;r.items[n].group.children[1].children[0];)r.items[n].group.children[1].removeChild(r.items[n].group.children[1].children[0])}for(;f.children[0];)f.removeChild(f.children[0]);var u=r.results.length||0;for(1==r.options.lazyLoading&&u>200&&(u=200),n=0;n<u;n++)r.results[n].group?(r.results[n].group.parentNode||f.appendChild(r.results[n].group),r.results[n].group.children[1].appendChild(r.results[n].element)):f.appendChild(r.results[n].element),r.numOfItems++;r.results.length?f.style.display="":f.style.display="none"}},r.open=function(){if(!t.classList.contains("jdropdown-focus")){e.dropdown.current=r,e.tracking(r,!0),t.classList.add("jdropdown-focus"),e.getWindowWidth()<800&&(null!=r.options.type&&"picker"!=r.options.type||e.animation.slideBottom(h,1)),1==r.options.autocomplete&&(r.header.value=r.search,r.header.focus());var n=Object.keys(u());if(n[0]){var o=r.getPosition(n[0]);o&&r.setCursor(o)}if(!r.options.type||"default"==r.options.type){var i=t.getBoundingClientRect(),a=h.getBoundingClientRect();r.options.position?(h.style.position="fixed",window.innerHeight<i.bottom+a.height?(h.style.top="",h.style.bottom=window.innerHeight-i.top+1+"px"):(h.style.top=i.bottom+"px",h.style.bottom=""),h.style.left=i.left+"px"):window.innerHeight<i.bottom+a.height?(h.style.top="",h.style.bottom=i.height+1+"px"):(h.style.top="",h.style.bottom=""),h.style.minWidth=i.width+"px",r.options.maxWidth&&(h.style.maxWidth=r.options.maxWidth),r.items.length||1!=r.options.autocomplete?f.style.display="":f.style.display="none"}}"function"==typeof r.options.onopen&&r.options.onopen(t)},r.close=function(n){return t.classList.contains("jdropdown-focus")&&(r.header.value=r.getText(),r.setCursor(),n||"function"!=typeof r.options.onclose||r.options.onclose(t),r.header.blur&&r.header.blur(),t.classList.remove("jdropdown-focus"),e.tracking(r,!1),e.dropdown.current=null),r.getValue()},r.setCursor=function(e,t){if(null!=r.currentIndex&&r.items&&r.items[r.currentIndex]&&r.items[r.currentIndex].element.classList.remove("jdropdown-cursor"),void 0==e)r.currentIndex=null;else if(parseInt(e),r.items[e].element.classList.add("jdropdown-cursor"),r.currentIndex=e,!1!==t&&r.items[r.currentIndex].element){f.scrollTop;var n=r.items[r.currentIndex].element;f.scrollTop=n.offsetTop-n.scrollTop+n.clientTop-95}},r.resetCursor=r.setCursor,r.updateCursor=r.setCursor,r.reset=function(){r.setCursor(),r.setValue(null)},r.firstVisible=function(){for(var e=null,t=0;t<r.items.length;t++)if(r.items&&r.items[t]&&r.items[t].element.parentNode&&"none"!=r.items[t].element.style.display){e=t;break}if(null==e)return!1;r.setCursor(e)},r.first=function(){for(var e=null,t=r.currentIndex-1;t>=0;t--)r.items&&r.items[t]&&r.items[t].element.parentNode&&"none"!=r.items[t].element.style.display&&(e=t);if(null==e)return!1;r.setCursor(e)},r.last=function(){for(var e=null,t=r.currentIndex+1;t<r.items.length;t++)r.items&&r.items[t]&&r.items[t].element.parentNode&&"none"!=r.items[t].element.style.display&&(e=t);if(null==e)return!1;r.setCursor(e)};var x=function(e,t){for(var n=e;n<r.items.length;n++)if(r.items&&r.items[n]&&r.items[n].element.parentNode&&(!t||(""+l(n)).substr(0,1).toLowerCase()==t))return n;return null};return r.next=function(e){if(e&&1==e.length&&(e=e.toLowerCase()),null===r.currentIndex)var t=r.currentIndex=0;else t=r.currentIndex+1;var n=x(t,e);if(null==n&&e&&null==(n=x(0,e)))return!1;r.setCursor(n)},r.prev=function(){for(var e=null,t=r.currentIndex-1;t>=0;t--)if(r.items&&r.items[t]&&r.items[t].element.parentNode){e=t;break}if(null==e)return!1;r.setCursor(e)},r.loadUp=function(){return!1},r.loadDown=function(){var e=!1;if(r.results)var t=r.results;else t=r.items;if(t.length>r.numOfItems){var n=r.numOfItems,o=t.length-n;o>200&&(o=200);for(var i=n;i<n+o;i++)t[i].group?(t[i].group.parentNode||f.appendChild(t[i].group),t[i].group.children[2].appendChild(t[i].element)):f.appendChild(t[i].element),r.numOfItems++;e=!0}return e},v(),r},e.dropdown.keydown=function(t){var n=null;(n=e.dropdown.current)&&(13==t.which?n.selectIndex(n.currentIndex):38==t.which?(null==n.currentIndex?n.firstVisible():n.currentIndex>0&&n.prev(),t.preventDefault()):40==t.which?(null==n.currentIndex?n.firstVisible():n.currentIndex+1<n.items.length&&n.next(),t.preventDefault()):36==t.which?n.first():35==t.which?n.last():27==t.which&&n.close())},e.dropdown.mouseup=function(t){var n=e.findElement(t.target,"jdropdown");if(n){var r=n.dropdown;if(t.target.classList.contains("jdropdown-header"))if(n.classList.contains("jdropdown-focus")&&n.classList.contains("jdropdown-default")){var o=n.getBoundingClientRect();if(t.changedTouches&&t.changedTouches[0]){var i=t.changedTouches[0].clientX;t.changedTouches[0].clientY}else i=t.clientX,t.clientY;o.width-(i-o.left)<30?t.target.classList.contains("jdropdown-add")?r.add():r.close():0==r.options.autocomplete&&r.close()}else r.open();else if(t.target.classList.contains("jdropdown-group-name")){var a=t.target.nextSibling.children;if("none"!=t.target.nextSibling.style.display)for(var s=0;s<a.length;s++)"none"!=a[s].style.display&&r.selectItem(a[s])}else t.target.classList.contains("jdropdown-group-arrow")?t.target.classList.contains("jdropdown-group-arrow-down")?(t.target.classList.remove("jdropdown-group-arrow-down"),t.target.classList.add("jdropdown-group-arrow-up"),t.target.parentNode.nextSibling.style.display="none"):(t.target.classList.remove("jdropdown-group-arrow-up"),t.target.classList.add("jdropdown-group-arrow-down"),t.target.parentNode.nextSibling.style.display=""):t.target.classList.contains("jdropdown-item")?r.selectItem(t.target):t.target.classList.contains("jdropdown-image")||t.target.classList.contains("jdropdown-description")?r.selectItem(t.target.parentNode):t.target.classList.contains("jdropdown-title")?r.selectItem(t.target.parentNode.parentNode):(t.target.classList.contains("jdropdown-close")||t.target.classList.contains("jdropdown-backdrop"))&&r.close()}},e.dropdown.extractFromDom=function(e,t){var n=e;if(t||(t={}),!e.getAttribute("multiple")||t&&void 0!=t.multiple||(t.multiple=!0),!e.getAttribute("placeholder")||t&&void 0!=t.placeholder||(t.placeholder=e.getAttribute("placeholder")),!e.getAttribute("data-autocomplete")||t&&void 0!=t.autocomplete||(t.autocomplete=!0),t&&void 0!=t.width||(t.width=e.offsetWidth),!e.value||t&&void 0!=t.value||(t.value=e.value),!t||void 0==t.data){t.data=[];for(var r=0;r<e.children.length;r++)if("OPTGROUP"==e.children[r].tagName)for(var o=0;o<e.children[r].children.length;o++)t.data.push({value:e.children[r].children[o].value,text:e.children[r].children[o].innerHTML,group:e.children[r].getAttribute("label")});else t.data.push({value:e.children[r].value,text:e.children[r].innerHTML})}t&&void 0!=t.onchange||(t.onchange=function(e,r,o,i){1==t.multiple?obj.items[r].classList.contains("jdropdown-selected")?n.options[r].setAttribute("selected","selected"):n.options[r].removeAttribute("selected"):n.value=i});var i=document.createElement("div");return e.parentNode.insertBefore(i,e),e.style.display="none",{el:e=i,options:t}},e.editor=function(t,n){var r={options:{}},o={value:null,snippet:null,toolbar:null,remoteParser:null,placeholder:null,parseURL:!1,filterPaste:!0,dropZone:!1,dropAsSnippet:!1,acceptImages:!1,acceptFiles:!1,maxFileSize:5e6,allowImageResize:!0,border:!0,padding:!0,maxHeight:null,height:null,focus:!1,onclick:null,onfocus:null,onblur:null,onload:null,onkeyup:null,onkeydown:null,onchange:null};for(var i in o)n&&n.hasOwnProperty(i)?r.options[i]=n[i]:r.options[i]=o[i];var a=null,s=null,l=[];t.innerHTML="",r.el=t,"function"==typeof r.options.onclick&&(t.onclick=function(e){r.options.onclick(t,r,e)}),t.classList.add("jeditor-container"),1==r.options.padding&&t.classList.add("jeditor-padding"),0==r.options.border&&(t.style.border="0px");var u=document.createElement("div");u.className="jsnippet",u.setAttribute("contenteditable",!1);var c=document.createElement("div");c.className="jeditor-toolbar";var d=document.createElement("div");if(d.setAttribute("contenteditable",!0),d.setAttribute("spellcheck",!1),d.className="jeditor",r.options.placeholder&&d.setAttribute("data-placeholder",r.options.placeholder),(r.options.maxHeight||r.options.height)&&(d.style.overflowY="auto",r.options.maxHeight&&(d.style.maxHeight=r.options.maxHeight),r.options.height&&(d.style.height=r.options.height)),r.options.value)var h=r.options.value;else h=t.innerHTML?t.innerHTML:"";h||(h="");var f=function(e){"function"==typeof r.options.onchange&&r.options.onchange(t,r,e),r.options.value=r.getData(),t.value!=r.options.value&&(t.value=r.options.value,"function"==typeof t.onchange&&t.onchange({type:"change",target:t,value:t.value}))},p=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelectorAll("img");if(n.length)for(var o=0;o<n.length;o++)r.addImage(n[o].src)},g=function(e){var t,n;window.getSelection&&(t=window.getSelection()).rangeCount&&((n=t.getRangeAt(0)).toString(),n.deleteContents(),n.insertNode(e),n.setStartAfter(e),n.setEndAfter(e),t.removeAllRanges(),t.addRange(n))},b=function(){var e=null;if(e=u.children[0]){e.classList.contains("jslider-grid")||e.classList.add("jslider-grid");var t=e.children.length;e.setAttribute("data-number",t>4?4:t),t>4?e.setAttribute("data-total",t-4):e.removeAttribute("data-total")}},m=function(e){u.innerHTML||v({}),u.children[0].appendChild(e),b()},v=function(e){u.innerHTML="";for(var t=["image","title","description","host","url"],n=0;n<t.length;n++){var r=document.createElement("div");if(r.className="jsnippet-"+t[n],r.setAttribute("data-k",t[n]),u.appendChild(r),e[t[n]])if("image"==t[n]){Array.isArray(e.image)||(e.image=[e.image]);for(var o=0;o<e.image.length;o++){var i=document.createElement("img");i.src=e.image[o],r.appendChild(i)}}else r.innerHTML=e[t[n]]}d.appendChild(document.createElement("br")),d.appendChild(u)},y=function(){clearTimeout(a),a=setTimeout((function(){if(!d.querySelector(".jsnippet")){var t=d.innerHTML.replace(/\n/g," "),n=document.createElement("div");n.innerHTML=t;var o=n.innerText,i=e.editor.detectUrl(o);if(i)if("jpg"==i[0].substr(-3)||"png"==i[0].substr(-3)||"gif"==i[0].substr(-3))r.addImage(i[0],!0);else{var a=e.editor.youtubeParser(i[0]);r.parseWebsite(i[0],a)}}}),1e3)};r.parseContent=function(){y()},r.parseWebsite=function(t,n){if(r.options.remoteParser){n&&(t="https://www.youtube.com/watch?v="+n);var o={title:"",description:"",image:"",host:t.split("/")[2],url:t};e.ajax({url:r.options.remoteParser+encodeURI(t.trim()),method:"GET",dataType:"json",success:function(e){e.title&&(o.title=e.title),e.description&&(o.description=e.description),e.host&&(o.host=e.host),e.url&&(o.url=e.url),v(o),e.image?r.addImage(e.image,!0):e["og:image"]&&r.addImage(e["og:image"],!0)}})}else console.log("The remoteParser is not defined")},r.setData=function(t){d.innerHTML=t,r.options.focus&&e.editor.setCursor(d,!0),l=[]},r.getFiles=function(){for(var e=d.querySelectorAll(".jfile"),t=[],n=0;n<e.length;n++)l[e[n].src]&&t.push(l[e[n].src]);return t},r.getText=function(){return d.innerText},r.getData=function(e){if(e){if(a={content:""},u.innerHTML){a.snippet={};for(var t=0;t<u.children.length;t++){var n=u.children[t].getAttribute("data-k");if(n)if("image"==n){a.snippet.image||(a.snippet.image=[]);for(var r=0;r<u.children[t].children.length;r++)a.snippet.image.push(u.children[t].children[r].getAttribute("src"))}else a.snippet[n]=u.children[t].innerHTML}}var o=Object.keys(l);if(o.length)for(a.files=[],t=0;t<o.length;t++)a.files.push(l[o[t]]);var i=d.innerHTML;i=(i=(i=i.replace(/<br>/g,"\n")).replace(/<\/div>/g,"</div>\n")).replace(/<(?:.|\n)*?>/gm,""),a.content=i.trim()}else var a=d.innerHTML;return a},r.reset=function(){d.innerHTML="",u.innerHTML="",l=[]},r.addPdf=function(e){if("data"!=e.result.substr(0,4))console.error("Invalid source");else{var t=document.createElement("canvas");t.width=60,t.height=60;var n=new Image;t.getContext("2d").drawImage(n,0,0,t.width,t.height),t.toBlob((function(t){var n=document.createElement("img");n.src=window.URL.createObjectURL(t),n.title=e.name,n.className="jfile pdf",l[n.src]={file:n.src,extension:"pdf",content:e.result},g(n)}))}},r.addImage=function(e,t){if("data"==e.substr(0,4)||r.options.remoteParser){if("data"==e.substr(0,4))n=(n=(n=e.split(";"))[0].split("/"))[1];else{var n=e.substr(e.lastIndexOf(".")+1);e=r.options.remoteParser+e}var o=new Image;o.onload=function(){var e=document.createElement("canvas");e.width=o.width,e.height=o.height,e.getContext("2d").drawImage(o,0,0,e.width,e.height),e.toBlob((function(o){var i=document.createElement("img");i.src=window.URL.createObjectURL(o),i.classList.add("jfile"),i.setAttribute("tabindex","900"),l[i.src]={file:i.src,extension:n,content:e.toDataURL()},r.options.dropAsSnippet||t?(m(i),l[i.src].snippet=!0):g(i),f()}))},o.src=e}else console.error("remoteParser not defined in your initialization")},r.addFile=function(e){for(var t=[],n=0;n<e.length;n++)if(e[n].size>r.options.maxFileSize)alert("The file is too big");else{var o=e[n].type.split("/");(o="image"==o[0]?1:"pdf"==o[1]?2:0)?(t[n]=new FileReader,t[n].index=n,t[n].type=o,t[n].name=e[n].name,t[n].date=e[n].lastModified,t[n].size=e[n].size,t[n].addEventListener("load",(function(e){2==e.target.type?1==r.options.acceptFiles&&r.addPdf(e.target):r.addImage(e.target.result)}),!1),t[n].readAsDataURL(e[n])):alert("The extension is not allowed")}},r.destroy=function(){d.removeEventListener("mouseup",j),d.removeEventListener("mousedown",x),d.removeEventListener("mousemove",w),d.removeEventListener("keyup",C),d.removeEventListener("keydown",_),d.removeEventListener("dragstart",k),d.removeEventListener("dragenter",M),d.removeEventListener("dragover",L),d.removeEventListener("drop",I),d.removeEventListener("paste",A),"function"==typeof r.options.onblur&&d.removeEventListener("blur",D),"function"==typeof r.options.onfocus&&d.removeEventListener("focus",N),t.editor=null,t.classList.remove("jeditor-container"),c.remove(),u.remove(),d.remove()};var j=function(e){s&&s.e&&s.e.classList.remove("resizing"),s=!1},x=function(e){var t=function(t){var n=t.getBoundingClientRect();n.width-(e.clientX-n.left)<40&&e.clientY-n.top<40&&(t.innerHTML="",t.remove())};if("IMG"==e.target.tagName)if(e.target.style.cursor){var n=e.target.getBoundingClientRect();s={e:e.target,x:e.clientX,y:e.clientY,w:n.width,h:n.height,d:e.target.style.cursor},e.target.width||(e.target.width=n.width+"px"),e.target.height||(e.target.height=n.height+"px");var r=window.getSelection();if(r.rangeCount)for(var o=0;o<r.rangeCount;o++)r.removeRange(r.getRangeAt(o));e.target.classList.add("resizing")}else s=!0;else e.target.classList.contains("jsnippet")?t(e.target):e.target.parentNode.classList.contains("jsnippet")&&t(e.target.parentNode),s=!0},w=function(e){if("IMG"==e.target.tagName&&!e.target.parentNode.classList.contains("jsnippet-image")&&1==r.options.allowImageResize&&e.target.getAttribute("tabindex")){var t=e.target.getBoundingClientRect();e.clientY-t.top<5?t.width-(e.clientX-t.left)<5?e.target.style.cursor="ne-resize":e.clientX-t.left<5?e.target.style.cursor="nw-resize":e.target.style.cursor="n-resize":t.height-(e.clientY-t.top)<5?t.width-(e.clientX-t.left)<5?e.target.style.cursor="se-resize":e.clientX-t.left<5?e.target.style.cursor="sw-resize":e.target.style.cursor="s-resize":t.width-(e.clientX-t.left)<5?e.target.style.cursor="e-resize":e.clientX-t.left<5?e.target.style.cursor="w-resize":e.target.style.cursor=""}if(1==e.which&&s&&s.d){if("e-resize"==s.d||"ne-resize"==s.d||"se-resize"==s.d)if(s.e.width=s.w+(e.clientX-s.x),e.shiftKey){var n=(e.clientX-s.x)*(s.h/s.w);s.e.height=s.h+n}else n=null;n||"s-resize"!=s.d&&"se-resize"!=s.d&&"sw-resize"!=s.d||e.shiftKey||(s.e.height=s.h+(e.clientY-s.y))}},C=function(e){d.innerHTML||(d.innerHTML="<div><br></div>"),"function"==typeof r.options.onkeyup&&r.options.onkeyup(t,r,e)},_=function(e){1==r.options.parseURL&&y(),"function"==typeof r.options.onkeydown&&r.options.onkeydown(t,r,e),"Delete"==e.key&&"IMG"==e.target.tagName&&e.target.parentNode.classList.contains("jsnippet-image")&&(e.target.remove(),b())},S=[HTMLUnknownElement],E=["color","font-weight","font-size","background","background-color","margin"],O=function e(t){if(t.attributes&&t.attributes.length){var n=null,o=t.getAttribute("style");if(o){n=[];for(var i=o.split(";"),a=0;a<i.length;a++){var s=i[a].trim().split(":");if(E.indexOf(s[0].trim())>=0){var l=s.shift();s=s.join(":"),n.push(l+":"+s)}}}if("IMG"==t.tagName)r.options.acceptImages?(t.setAttribute("tabindex","900"),r.addImage(t.src)):t.remove();else for(var u=t.attributes.length-1;u>=0;u--)t.removeAttribute(t.attributes[u].name);t.style="",n&&n.length&&t.setAttribute("style",n.join(";"))}if(t.children.length)for(u=0;u<t.children.length;u++)e(t.children[u]);S.indexOf(t.constructor)>=0&&t.remove()},T=function(e){e&&(e=e.replace(new RegExp("\x3c!--(.*?)--\x3e","gsi"),""));var t=document.createElement("span");return t.innerHTML=e,O(t),t},A=function(e){if(1==r.options.filterPaste){if(e.clipboardData||e.originalEvent.clipboardData)var t=(e.originalEvent||e).clipboardData.getData("text/html"),n=(e.originalEvent||e).clipboardData.getData("text/plain"),o=(e.originalEvent||e).clipboardData.files;else window.clipboardData&&(t=window.clipboardData.getData("Html"),n=window.clipboardData.getData("Text"),o=window.clipboardData.files);if(o.length)r.addFile(o);else if(t){var i=T(t);g(i)}else t=n.split("\r\n"),e.target.innerText?(t=t.map((function(e){return"<div>"+e+"</div>"})),document.execCommand("insertHtml",!1,t.join(""))):t.map((function(e){var t=document.createElement("div");t.innerText=e,d.appendChild(t)}));e.preventDefault()}},k=function(e){s&&s.e&&e.preventDefault()},M=function(e){s||0==r.options.dropZone||(t.classList.add("jeditor-dragging"),e.preventDefault())},L=function(e){s||0==r.options.dropZone||(a&&clearTimeout(a),a=setTimeout((function(){t.classList.remove("jeditor-dragging")}),100),e.preventDefault())},I=function(e){if(s||0==r.options.dropZone);else{var n=null;document.caretRangeFromPoint?n=document.caretRangeFromPoint(e.clientX,e.clientY):e.rangeParent&&(n=document.createRange()).setStart(e.rangeParent,e.rangeOffset);var o=window.getSelection();o.removeAllRanges(),o.addRange(n),o.anchorNode.parentNode.focus();var i=(e.originalEvent||e).dataTransfer.getData("text/html"),a=(e.originalEvent||e).dataTransfer.getData("text/plain"),l=(e.originalEvent||e).dataTransfer.files;l.length?r.addFile(l):a&&p(i),t.classList.remove("jeditor-dragging"),e.preventDefault()}},D=function(e){"function"==typeof r.options.onblur&&r.options.onblur(t,r,e),f(e)},N=function(e){"function"==typeof r.options.onfocus&&r.options.onfocus(t,r,e)};return d.addEventListener("mouseup",j),d.addEventListener("mousedown",x),d.addEventListener("mousemove",w),d.addEventListener("keyup",C),d.addEventListener("keydown",_),d.addEventListener("dragstart",k),d.addEventListener("dragenter",M),d.addEventListener("dragover",L),d.addEventListener("drop",I),d.addEventListener("paste",A),d.addEventListener("focus",N),d.addEventListener("blur",D),"function"==typeof r.options.onload&&r.options.onload(t,r,d),d.innerHTML=h,t.appendChild(d),r.options.snippet&&v(r.options.snippet),null==r.options.toolbar&&(r.options.toolbar=e.editor.getDefaultToolbar()),r.options.toolbar&&(t.appendChild(c),e.toolbar(c,{container:!0,items:r.options.toolbar})),r.options.focus&&e.editor.setCursor(d,"initial"==r.options.focus),t.change=r.setData,t.val=function(e){if(void 0===e){var n="true"!==t.getAttribute("data-html");return r.getData(n)}r.setData(e)},t.editor=r,r},e.editor.setCursor=function(e,t){e.focus(),document.execCommand("selectAll");var n=window.getSelection(),r=n.getRangeAt(0);if(1==t)var o=r.startContainer,i=0;else i=(o=r.endContainer).length;r.setStart(o,i),r.setEnd(o,i),n.removeAllRanges(),n.addRange(r)},e.editor.getDomain=function(e){return e.replace("http://","").replace("https://","").replace("www.","").split(/[/?#]/)[0].split(/:/g)[0]},e.editor.detectUrl=function(e){var t=/(((https?:\/\/)|(www\.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]+)/gi,n=e.match(t);return n&&"www"==n[0].substr(0,3)&&(n[0]="http://"+n[0]),n},e.editor.youtubeParser=function(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,n=e.match(t);return!(!n||11!=n[7].length)&&n[7]},e.editor.getDefaultToolbar=function(){return[{content:"undo",onclick:function(){document.execCommand("undo")}},{content:"redo",onclick:function(){document.execCommand("redo")}},{type:"divisor"},{content:"format_bold",onclick:function(e,t,n){document.execCommand("bold"),document.queryCommandState("bold")?n.classList.add("selected"):n.classList.remove("selected")}},{content:"format_italic",onclick:function(e,t,n){document.execCommand("italic"),document.queryCommandState("italic")?n.classList.add("selected"):n.classList.remove("selected")}},{content:"format_underline",onclick:function(e,t,n){document.execCommand("underline"),document.queryCommandState("underline")?n.classList.add("selected"):n.classList.remove("selected")}},{type:"divisor"},{content:"format_list_bulleted",onclick:function(e,t,n){document.execCommand("insertUnorderedList"),document.queryCommandState("insertUnorderedList")?n.classList.add("selected"):n.classList.remove("selected")}},{content:"format_list_numbered",onclick:function(e,t,n){document.execCommand("insertOrderedList"),document.queryCommandState("insertOrderedList")?n.classList.add("selected"):n.classList.remove("selected")}},{content:"format_indent_increase",onclick:function(e,t,n){document.execCommand("indent",!0,null),document.queryCommandState("indent")?n.classList.add("selected"):n.classList.remove("selected")}},{content:"format_indent_decrease",onclick:function(){document.execCommand("outdent"),document.queryCommandState("outdent")?this.classList.add("selected"):this.classList.remove("selected")}}]},e.form=function(t,n){var r={options:{}},o={url:null,message:"Are you sure? There are unsaved information in your form",ignore:!1,currentHash:null,submitButton:null,validations:null,onbeforeload:null,onload:null,onbeforesave:null,onsave:null,onbeforeremove:null,onremove:null,onerror:function(t,n){e.alert(n)}};for(var i in o)n&&n.hasOwnProperty(i)?r.options[i]=n[i]:r.options[i]=o[i];r.options.validations||(r.options.validations={}),r.options.submitButton||(r.options.submitButton=t.querySelector("input[type=submit]")),r.options.submitButton&&r.options.url&&(r.options.submitButton.onclick=function(){r.save()}),r.options.validations.email||(r.options.validations.email=e.validations.email),r.options.validations.length||(r.options.validations.length=e.validations.length),r.options.validations.required||(r.options.validations.required=e.validations.required),r.setUrl=function(e){r.options.url=e},r.load=function(){e.ajax({url:r.options.url,method:"GET",dataType:"json",queue:!0,success:function(n){if("function"==typeof r.options.onbeforeload){var o=r.options.onbeforeload(t,n);o&&(n=o)}e.form.setElements(t,n),"function"==typeof r.options.onload&&r.options.onload(t,n)}})},r.save=function(){var n=r.validate();if(n)r.options.onerror(t,n);else{var o=e.form.getElements(t,!0);if("function"==typeof r.options.onbeforesave&&!1===(o=r.options.onbeforesave(t,o)))return void console.log("Onbeforesave returned false");e.ajax({url:r.options.url,method:"POST",dataType:"json",data:o,success:function(e){"function"==typeof r.options.onsave&&r.options.onsave(t,o,e)}})}},r.remove=function(){if("function"==typeof r.options.onbeforeremove&&!1===r.options.onbeforeremove(t,r))return!1;e.ajax({url:r.options.url,method:"DELETE",dataType:"json",success:function(e){"function"==typeof r.options.onremove&&r.options.onremove(t,r,e),r.reset()}})};var a=function(e){e.classList.add("error"),r.options.submitButton&&r.options.submitButton.setAttribute("disabled",!0);var t=e.getAttribute("data-error")||"There is an error in the form";return e.setAttribute("title",t),t},s=function(e){var n=!1;e.classList.remove("error"),e.removeAttribute("title");for(var o=t.querySelectorAll("input, select, textarea, div[name]"),i=0;i<o.length;i++)o[i].getAttribute("data-validation")&&o[i].classList.contains("error")&&(n=!0);r.options.submitButton&&(n?r.options.submitButton.setAttribute("disabled",!0):r.options.submitButton.removeAttribute("disabled"))};return r.validateElement=function(t){var n=!1,o=e.form.getValue(t),i=t.getAttribute("data-validation");return"function"!=typeof r.options.validations[i]||r.options.validations[i](o,t)?t.classList.contains("error")&&s(t):n=a(t),n},r.reset=function(){for(var e=t.querySelectorAll("input, select, textarea, div[name]"),n=0;n<e.length;n++)e[n].getAttribute("name")&&("checkbox"==e[n].type||"radio"==e[n].type?e[n].checked=!1:"function"==typeof e[n].val?e[n].val(""):e[n].value="")},r.validate=function(){for(var e=[],n=t.querySelectorAll("input, select, textarea, div[name]"),o=0;o<n.length;o++)if(n[o].getAttribute("data-validation")){var i=r.validateElement(n[o]);i&&e.push(i)}return e.length>0&&e.join("<br>")},r.getError=function(){return!!r.validation()},r.setHash=function(){return r.getHash(e.form.getElements(t))},r.getHash=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n},r.isChanged=function(){var e=r.setHash();return r.options.currentHash!=e},r.resetTracker=function(){r.options.currentHash=r.setHash(),r.options.ignore=!1},r.setIgnore=function(e){r.options.ignore=!!e},setTimeout((function(){r.options.currentHash=r.setHash()}),1e3),t.addEventListener("keyup",(function(e){e.target.getAttribute("data-validation")&&r.validateElement(e.target)})),e.form.hasEvents||(window.addEventListener("beforeunload",(function(e){if(r.isChanged()&&0==r.options.ignore){var t=r.options.message?r.options.message:"o/";return t?("undefined"==typeof e&&(e=window.event),e&&(e.returnValue=t),t):void 0}})),e.form.hasEvents=!0),t.form=r,r},e.form.getValue=function(e){var t=null;if("checkbox"==e.type)1==e.checked&&(t=e.value||!0);else if("radio"==e.type)1==e.checked&&(t=e.value);else if("select"==e.tagName&&1==e.multiple){t=[];for(var n=e.querySelectorAll("options[selected]"),r=0;r<n.length;r++)t.push(n[r].value)}else t="function"==typeof e.val?e.val():e.value||"";return t},e.form.getElements=function(t,n){for(var r={},o=null,i=t.querySelectorAll("input, select, textarea, div[name]"),a=0;a<i.length;a++)(o=i[a].getAttribute("name"))&&(r[o]=e.form.getValue(i[a])||"");return 1==n?r:JSON.stringify(r)},e.form.setElements=function(t,n){for(var r=null,o=null,i=t.querySelectorAll("input, select, textarea, div[name]"),a=0;a<i.length;a++){var s=i[a].getAttribute("type");if(r=i[a].getAttribute("name")){if(o=null,(r=r.replace(new RegExp(/\[(.*?)\]/gi),".$1")).match(/\./)){var l=e.path.call(n,r)||"";"undefined"!==typeof l&&(o=l)}else"undefined"!==typeof n[r]&&(o=n[r]);null!==o&&("checkbox"==s||"radio"==s?i[a].checked=!!o:"function"==typeof i[a].val?i[a].val(o):i[a].value=o)}}},e.tracker=e.form,e.focus=function(e){if(e.innerText.length){var t=document.createRange(),n=window.getSelection(),r=e.childNodes[e.childNodes.length-1];t.setStart(r,r.length),t.collapse(!0),n.removeAllRanges(),n.addRange(t),e.scrollLeft=e.scrollWidth}},e.isNumeric=function(e){return!isNaN(e)&&null!==e&&""!==e},e.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},e.getNode=function(){var e=document.getSelection().anchorNode;return e?3==e.nodeType?e.parentNode:e:null},e.hash=function(e){var t,n,r=0;if(0===e.length)return r;for(t=0;t<e.length;t++)(n=e.charCodeAt(t))>32&&(r=(r<<5)-r+n,r|=0);return r},e.randomColor=function(t){var n=-.25,r=String("#"+Math.random().toString(16).slice(2,8).toUpperCase()).replace(/[^0-9a-f]/gi,"");r.length<6&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var o,i,a=[];for(i=0;i<3;i++)o=parseInt(r.substr(2*i,2),16),o=Math.round(Math.min(Math.max(0,o+o*n),255)).toString(16),a.push(("00"+o).substr(o.length));return 1==t?"#"+e.two(a[0].toString(16))+e.two(a[1].toString(16))+e.two(a[2].toString(16)):a},e.getWindowWidth=function(){var e=window,t=document,n=t.documentElement,r=t.getElementsByTagName("body")[0];return e.innerWidth||n.clientWidth||r.clientWidth},e.getWindowHeight=function(){var e=window,t=document,n=t.documentElement,r=t.getElementsByTagName("body")[0];return e.innerHeight||n.clientHeight||r.clientHeight},e.getPosition=function(e){if(e.changedTouches&&e.changedTouches[0])var t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY;else t=window.Event?e.pageX:e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),n=window.Event?e.pageY:e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);return[t,n]},e.click=function(e){if(e.click)e.click();else{var t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}},e.findElement=function(e,t){var n=!1;function r(e){e&&!n&&("function"==typeof t?n=t(e):"string"==typeof t&&e.classList&&e.classList.contains(t)&&(n=e)),e.parentNode&&!n&&r(e.parentNode)}return r(e),n},e.two=function(e){return 1==(e=""+e).length&&(e="0"+e),e},e.sha512=function(e){function t(e,t){this.highOrder=e,this.lowOrder=t}var n,r,o,i,a,s,l,u,c,d,h=[new t(1779033703,4089235720),new t(3144134277,2227873595),new t(1013904242,4271175723),new t(2773480762,1595750129),new t(1359893119,2917565137),new t(2600822924,725511199),new t(528734635,4215389547),new t(1541459225,327033209)],f=[new t(1116352408,3609767458),new t(1899447441,602891725),new t(3049323471,3964484399),new t(3921009573,2173295548),new t(961987163,4081628472),new t(1508970993,3053834265),new t(2453635748,2937671579),new t(2870763221,3664609560),new t(3624381080,2734883394),new t(310598401,1164996542),new t(607225278,1323610764),new t(1426881987,3590304994),new t(1925078388,4068182383),new t(2162078206,991336113),new t(2614888103,633803317),new t(3248222580,3479774868),new t(3835390401,2666613458),new t(4022224774,944711139),new t(264347078,2341262773),new t(604807628,2007800933),new t(770255983,1495990901),new t(1249150122,1856431235),new t(1555081692,3175218132),new t(1996064986,2198950837),new t(2554220882,3999719339),new t(2821834349,766784016),new t(2952996808,2566594879),new t(3210313671,3203337956),new t(3336571891,1034457026),new t(3584528711,2466948901),new t(113926993,3758326383),new t(338241895,168717936),new t(666307205,1188179964),new t(773529912,1546045734),new t(1294757372,1522805485),new t(1396182291,2643833823),new t(1695183700,2343527390),new t(1986661051,1014477480),new t(2177026350,1206759142),new t(2456956037,344077627),new t(2730485921,1290863460),new t(2820302411,3158454273),new t(3259730800,3505952657),new t(3345764771,106217008),new t(3516065817,3606008344),new t(3600352804,1432725776),new t(4094571909,1467031594),new t(275423344,851169720),new t(430227734,3100823752),new t(506948616,1363258195),new t(659060556,3750685593),new t(883997877,3785050280),new t(958139571,3318307427),new t(1322822218,3812723403),new t(1537002063,2003034995),new t(1747873779,3602036899),new t(1955562222,1575990012),new t(2024104815,1125592928),new t(2227730452,2716904306),new t(2361852424,442776044),new t(2428436474,593698344),new t(2756734187,3733110249),new t(3204031479,2999351573),new t(3329325298,3815920427),new t(3391569614,3928383900),new t(3515267271,566280711),new t(3940187606,3454069534),new t(4118630271,4000239992),new t(116418474,1914138554),new t(174292421,2731055270),new t(289380356,3203993006),new t(460393269,320620315),new t(685471733,587496836),new t(852142971,1086792851),new t(1017036298,365543100),new t(1126000580,2618297676),new t(1288033470,3409855158),new t(1501505948,4234509866),new t(1607167915,987167468),new t(1816402316,1246189591)],p=new Array(64),g=8;function b(e){return unescape(encodeURIComponent(e))}function m(e){for(var t=[],n=(1<<g)-1,r=e.length*g,o=0;o<r;o+=g)t[o>>5]|=(e.charCodeAt(o/g)&n)<<32-g-o%32;return t}function v(e){for(var t,n="0123456789abcdef",r="",o=4*e.length,i=0;i<o;i+=1)t=e[i>>2]>>8*(3-i%4),r+=n.charAt(t>>4&15)+n.charAt(15&t);return r}function y(e,n){var r,o,i;return r=(65535&e.lowOrder)+(65535&n.lowOrder),i=(65535&(o=(e.lowOrder>>>16)+(n.lowOrder>>>16)+(r>>>16)))<<16|65535&r,r=(65535&e.highOrder)+(65535&n.highOrder)+(o>>>16),new t((65535&(o=(e.highOrder>>>16)+(n.highOrder>>>16)+(r>>>16)))<<16|65535&r,i)}function j(e,n,r,o){var i,a,s;return i=(65535&e.lowOrder)+(65535&n.lowOrder)+(65535&r.lowOrder)+(65535&o.lowOrder),s=(65535&(a=(e.lowOrder>>>16)+(n.lowOrder>>>16)+(r.lowOrder>>>16)+(o.lowOrder>>>16)+(i>>>16)))<<16|65535&i,i=(65535&e.highOrder)+(65535&n.highOrder)+(65535&r.highOrder)+(65535&o.highOrder)+(a>>>16),new t((65535&(a=(e.highOrder>>>16)+(n.highOrder>>>16)+(r.highOrder>>>16)+(o.highOrder>>>16)+(i>>>16)))<<16|65535&i,s)}function x(e,n,r,o,i){var a,s,l;return a=(65535&e.lowOrder)+(65535&n.lowOrder)+(65535&r.lowOrder)+(65535&o.lowOrder)+(65535&i.lowOrder),l=(65535&(s=(e.lowOrder>>>16)+(n.lowOrder>>>16)+(r.lowOrder>>>16)+(o.lowOrder>>>16)+(i.lowOrder>>>16)+(a>>>16)))<<16|65535&a,a=(65535&e.highOrder)+(65535&n.highOrder)+(65535&r.highOrder)+(65535&o.highOrder)+(65535&i.highOrder)+(s>>>16),new t((65535&(s=(e.highOrder>>>16)+(n.highOrder>>>16)+(r.highOrder>>>16)+(o.highOrder>>>16)+(i.highOrder>>>16)+(a>>>16)))<<16|65535&a,l)}function w(e,n,r){return new t(e.highOrder&n.highOrder^e.highOrder&r.highOrder^n.highOrder&r.highOrder,e.lowOrder&n.lowOrder^e.lowOrder&r.lowOrder^n.lowOrder&r.lowOrder)}function C(e,n,r){return new t(e.highOrder&n.highOrder^~e.highOrder&r.highOrder,e.lowOrder&n.lowOrder^~e.lowOrder&r.lowOrder)}function _(e,n){return n<=32?new t(e.highOrder>>>n|e.lowOrder<<32-n,e.lowOrder>>>n|e.highOrder<<32-n):new t(e.lowOrder>>>n|e.highOrder<<32-n,e.highOrder>>>n|e.lowOrder<<32-n)}function S(e){var n=_(e,28),r=_(e,34),o=_(e,39);return new t(n.highOrder^r.highOrder^o.highOrder,n.lowOrder^r.lowOrder^o.lowOrder)}function E(e){var n=_(e,14),r=_(e,18),o=_(e,41);return new t(n.highOrder^r.highOrder^o.highOrder,n.lowOrder^r.lowOrder^o.lowOrder)}function O(e){var n=_(e,1),r=_(e,8),o=A(e,7);return new t(n.highOrder^r.highOrder^o.highOrder,n.lowOrder^r.lowOrder^o.lowOrder)}function T(e){var n=_(e,19),r=_(e,61),o=A(e,6);return new t(n.highOrder^r.highOrder^o.highOrder,n.lowOrder^r.lowOrder^o.lowOrder)}function A(e,n){return n<=32?new t(e.highOrder>>>n,e.lowOrder>>>n|e.highOrder<<32-n):new t(0,e.highOrder<<32-n)}var k=(e=b(e)).length*g;(e=m(e))[k>>5]|=128<<24-k%32,e[31+(k+128>>10<<5)]=k;for(var M=0;M<e.length;M+=32){n=h[0],r=h[1],o=h[2],i=h[3],a=h[4],s=h[5],l=h[6],u=h[7];for(var L=0;L<80;L++)p[L]=L<16?new t(e[2*L+M],e[2*L+M+1]):j(T(p[L-2]),p[L-7],O(p[L-15]),p[L-16]),c=x(u,E(a),C(a,s,l),f[L],p[L]),d=y(S(n),w(n,r,o)),u=l,l=s,s=a,a=y(i,c),i=o,o=r,r=n,n=y(c,d);h[0]=y(n,h[0]),h[1]=y(r,h[1]),h[2]=y(o,h[2]),h[3]=y(i,h[3]),h[4]=y(a,h[4]),h[5]=y(s,h[5]),h[6]=y(l,h[6]),h[7]=y(u,h[7])}var I=[];for(M=0;M<h.length;M++)I.push(h[M].highOrder),I.push(h[M].lowOrder);return v(I)},e.login||(e.login={},e.login.sha512=e.sha512),e.image=e.upload=function(t,n){var r={options:{}},o={type:"image",extension:"*",input:!1,minWidth:!1,maxWidth:null,maxHeight:null,maxJpegSizeBytes:null,onchange:null,multiple:!1,remoteParser:null,text:{extensionNotAllowed:"The extension is not allowed"}};for(var i in o)n&&n.hasOwnProperty(i)?r.options[i]=n[i]:r.options[i]=o[i];1==r.options.multiple&&t.setAttribute("data-multiple",!0),t.content=[],t.classList.add("jupload"),1==r.options.input&&t.classList.add("input"),r.add=function(n){if(0==r.options.multiple&&(t.content=[],t.innerText=""),"image"==r.options.type){var o=document.createElement("img");o.setAttribute("src",n.file),o.setAttribute("tabindex",-1),t.getAttribute("name")||(o.className="jfile",o.content=n),t.appendChild(o)}else{if(n.name)var i=n.name;else i=n.file;var a=document.createElement("div");a.innerText=i||r.options.type,a.classList.add("jupload-item"),a.setAttribute("tabindex",-1),t.appendChild(a)}n.content&&(n.file=e.guid()),t.content.push(n),"function"==typeof r.options.onchange&&r.options.onchange(t,n)},r.addFromFile=function(e){if(e.type.split("/")[0]==r.options.type){var t=new FileReader;t.addEventListener("load",(function(t){var n={file:t.srcElement.result,extension:e.name.substr(e.name.lastIndexOf(".")+1),name:e.name,size:e.size,lastmodified:e.lastModified,content:t.srcElement.result};r.add(n)})),t.readAsDataURL(e)}else alert(r.options.text.extensionNotAllowed)},r.addFromUrl=function(t){if("data"==t.substr(0,4)||r.options.remoteParser)if("data"==t.substr(0,4))if((o=(o=t.split(";"))[0].split("/"))[0].replace("data:","")==r.options.type){var n={file:t,name:"",extension:o[1],content:t};r.add(n)}else alert(r.options.text.extensionNotAllowed);else{var o=t.substr(t.lastIndexOf(".")+1);t=r.options.remoteParser+t,e.ajax({url:t,type:"GET",dataType:"blob",success:function(e){}})}else console.error("remoteParser not defined in your initialization")};var a=r.options.type+"/"+r.options.extension,s=document.createElement("input");s.type="file",s.setAttribute("accept",a),s.onchange=function(){for(var e=0;e<this.files.length;e++)r.addFromFile(this.files[e])},1==r.options.multiple&&s.setAttribute("multiple",!0);var l=null;return t.addEventListener("click",(function(n){l=null,t.children.length&&n.target!==t?n.target.parentNode==t&&(l=n.target):e.click(s)})),t.addEventListener("dblclick",(function(t){e.click(s)})),t.addEventListener("dragenter",(function(e){t.style.border="1px dashed #000"})),t.addEventListener("dragleave",(function(e){t.style.border="1px solid #eee"})),t.addEventListener("dragstop",(function(e){t.style.border="1px solid #eee"})),t.addEventListener("dragover",(function(e){e.preventDefault()})),t.addEventListener("keydown",(function(e){if(l&&46==e.which){var n=Array.prototype.indexOf.call(t.children,l);n>=0&&(t.content.splice(n,1),l.remove(),l=null)}})),t.addEventListener("drop",(function(e){e.preventDefault(),e.stopPropagation();var n=(e.originalEvent||e).dataTransfer.getData("text/html");if((e.originalEvent||e).dataTransfer.files.length)for(var o=0;o<e.dataTransfer.files.length;o++)r.addFromFile(e.dataTransfer.files[o]);else if(n){0==r.options.multiple&&(t.innerText="");var i=document.createElement("div");i.innerHTML=n;var a=i.querySelectorAll("img");if(a.length)for(o=0;o<a.length;o++)r.addFromUrl(a[o].src)}return t.style.border="1px solid #eee",!1})),t.val=function(e){if(void 0===e)return t.content&&t.content.length?t.content:null;if(t.innerText="",t.content=[],e)if(Array.isArray(e))for(var n=0;n<e.length;n++)"string"==typeof e[n]?r.add({file:e[n]}):r.add(e[n]);else"string"==typeof e&&r.add({file:e})},t.upload=t.image=r,r},e.image.create=function(e){var t=document.createElement("img");return t.setAttribute("src",e.file),t.className="jfile",t.setAttribute("tabindex",-1),t.content=e,t},e.lazyLoading=function(e,t){var n={};t.loadUp&&"function"==typeof t.loadUp||(t.loadUp=function(){return!1}),t.loadDown&&"function"==typeof t.loadDown||(t.loadDown=function(){return!1}),t.timer||(t.timer=100);var r=null,o=function(n){if(null==r){var o=e.scrollTop;e.scrollTop+2*e.clientHeight>=e.scrollHeight?t.loadDown()&&o==e.scrollTop&&(e.scrollTop=e.scrollTop-e.clientHeight):e.scrollTop<=e.clientHeight&&t.loadUp()&&o==e.scrollTop&&(e.scrollTop=e.scrollTop+e.clientHeight),r=setTimeout((function(){r=null}),t.timer)}};return e.onscroll=function(e){o(e)},e.onwheel=function(e){o(e)},n},e.loading=function(){var e={},t=null;return e.show=function(){t||((t=document.createElement("div")).className="jloading"),document.body.appendChild(t)},e.hide=function(){t&&t.parentNode&&document.body.removeChild(t)},e}(),e.mask=function(){var t={},n=0,r=[],o=[];t.run=function(o,i,a){if(o.toString().length&&i.toString().length){if("undefined"==typeof a&&(a="."),e.isNumeric(o)){if("number"==typeof o)var s=(""+o).split(".");else s=(""+o).split(a);o=s[0];var l=s[1]}else o=""+o;var u;if(n=0,r=[],t.prepare(i),u=o)for(var c=0;c<u.length;c++)null!=u[c]&&t.process(u[c]);if(l&&(t.process(a),u=l))for(c=0;c<u.length;c++)null!=u[c]&&t.process(u[c]);return r.join("")}return""};var i=function(i){n=0,r=[],t.prepare(this.getAttribute("data-mask"));var a="";if("DIV"==this.tagName){if(this.innerText){var s=window.getSelection();if(s&&s.anchorOffset!=s.focusOffset){var l=s.anchorOffset>s.focusOffset?s.focusOffset:s.anchorOffset;a=this.innerText.substring(0,l)}else a=this.innerText}}else a=this.selectionStart<this.selectionEnd?this.value.substring(0,this.selectionStart):this.value;a+=i;for(var u=0;u<a.length;u++)null!=a[u]&&t.process(a[u]);var c=r.join("");"DIV"==this.tagName?c!=this.innerText&&(this.innerText=c,e.focus(this)):this.value=c,o.length==r.length&&o[o.length-1].length==r[r.length-1].length?this.setAttribute("data-completed","true"):this.setAttribute("data-completed","false")};return t.apply=function(e){e.target&&!e.target.getAttribute("readonly")&&e.target.getAttribute("data-mask")&&e.key&&e.key.length<2&&!e.ctrlKey&&(e.preventDefault(),i.call(e.target,e.key))},t.paste=function(e){if(e.target&&!e.target.getAttribute("readonly")&&e.target.getAttribute("data-mask")){if(e.clipboardData||e.originalEvent.clipboardData)var t=(e.originalEvent||e).clipboardData.getData("text/plain");else window.clipboardData&&(t=window.clipboardData.getData("Text"));t&&(e.preventDefault(),i.call(e.target,t))}},t.process=function(e){do{if("mm"==o[n])return null==r[n]||""==r[n]?parseInt(e)>1&&parseInt(e)<10?(r[n]="0"+e,n++,!0):parseInt(e)<10&&(r[n]=e,!0):(1==r[n]&&r[n]<2&&parseInt(e)<3||0==r[n]&&r[n]<10)&&(r[n]+=e,n++,!0);if("dd"==o[n])return null==r[n]||""==r[n]?parseInt(e)>3&&parseInt(e)<10?(r[n]="0"+e,n++,!0):parseInt(e)<10&&(r[n]=e,!0):(3==r[n]&&parseInt(e)<2||r[n]<3&&parseInt(e)<10)&&(r[n]+=e,n++,!0);if("hh24"==o[n])return null==r[n]||""==r[n]?parseInt(e)>2&&parseInt(e)<10?(r[n]="0"+e,n++,!0):parseInt(e)<10&&(r[n]=e,!0):(2==r[n]&&parseInt(e)<4||r[n]<2&&parseInt(e)<10)&&(r[n]+=e,n++,!0);if("hh"==o[n])return null==r[n]||""==r[n]?parseInt(e)>1&&parseInt(e)<10?(r[n]="0"+e,n++,!0):parseInt(e)<10&&(r[n]=e,!0):(1==r[n]&&parseInt(e)<3||r[n]<1&&parseInt(e)<10)&&(r[n]+=e,n++,!0);if("mi"==o[n]||"ss"==o[n])return null==r[n]||""==r[n]?parseInt(e)>5&&parseInt(e)<10?(r[n]="0"+e,n++,!0):parseInt(e)<10&&(r[n]=e,!0):parseInt(e)<10&&(r[n]+=e,n++,!0);if("yy"==o[n]||"yyyy"==o[n])return parseInt(e)<10&&(null==r[n]||""==r[n]?r[n]=e:r[n]+=e,r[n].length==o[n].length&&n++,!0);if("#"==o[n]||"#.##"==o[n]||"#,##"==o[n]||"# ##"==o[n]||"#'##"==o[n]){if(e.match(/[0-9]/g)){if("#.##"==o[n])var t=".";else t="#,##"==o[n]?",":"# ##"==o[n]?" ":"#'##"==o[n]?"'":"";if(null==r[n]||""==r[n])r[n]=e;else if(r[n]+=e,t){r[n]=r[n].match(/[0-9]/g).join("");for(var i=[],a=0,s=r[n].length-1;s>=0;s--)i.push(r[n][s]),++a%3||i.push(t);i=i.reverse(),r[n]=i.join(""),r[n].substr(0,1)==t&&(r[n]=r[n].substr(1))}return!0}if("#.##"==o[n]&&"."==e);else if("#,##"==o[n]&&","==e);else if("# ##"==o[n]&&" "==e);else if("#'##"==o[n]&&"'"==e);else if(r[n]&&(n++,o[n])){if(o[n]==e)return r[n]=e,!0;if("0"==o[n]&&o[n+1]==e)return n++,r[n]=e,!0}return!1}if("0"==o[n])return!!e.match(/[0-9]/g)&&(r[n]=e,n++,!0);if("a"==o[n])return!!e.match(/[a-zA-Z]/g)&&(r[n]=e,n++,!0);if(null!=o[n]){if("\\a"==o[n])var l="a";else l="\\0"==o[n]?"0":"[-]"==o[n]?"-"==e||"+"==e?e:" ":o[n];if(r[n]=l,e==l)return n++,!0}n++}while(o[n])},t.prepare=function(e){o=[];for(var t=0;t<e.length;t++)e[t].match(/[0-9]|[a-z]|\\/g)?"y"==e[t]&&"y"==e[t+1]&&"y"==e[t+2]&&"y"==e[t+3]?(o.push("yyyy"),t+=3):"y"==e[t]&&"y"==e[t+1]?(o.push("yy"),t++):"m"==e[t]&&"m"==e[t+1]&&"m"==e[t+2]&&"m"==e[t+3]?(o.push("mmmm"),t+=3):"m"==e[t]&&"m"==e[t+1]&&"m"==e[t+2]?(o.push("mmm"),t+=2):"m"==e[t]&&"m"==e[t+1]?(o.push("mm"),t++):"d"==e[t]&&"d"==e[t+1]?(o.push("dd"),t++):"h"==e[t]&&"h"==e[t+1]&&"2"==e[t+2]&&"4"==e[t+3]?(o.push("hh24"),t+=3):"h"==e[t]&&"h"==e[t+1]?(o.push("hh"),t++):"m"==e[t]&&"i"==e[t+1]?(o.push("mi"),t++):"s"==e[t]&&"s"==e[t+1]?(o.push("ss"),t++):"a"==e[t]&&"m"==e[t+1]?(o.push("am"),t++):"p"==e[t]&&"m"==e[t+1]?(o.push("pm"),t++):"\\"==e[t]&&"0"==e[t+1]?(o.push("\\0"),t++):"\\"==e[t]&&"a"==e[t+1]?(o.push("\\a"),t++):o.push(e[t]):"#"==e[t]&&"."==e[t+1]&&"#"==e[t+2]&&"#"==e[t+3]?(o.push("#.##"),t+=3):"#"==e[t]&&","==e[t+1]&&"#"==e[t+2]&&"#"==e[t+3]?(o.push("#,##"),t+=3):"#"==e[t]&&" "==e[t+1]&&"#"==e[t+2]&&"#"==e[t+3]?(o.push("# ##"),t+=3):"#"==e[t]&&"'"==e[t+1]&&"#"==e[t+2]&&"#"==e[t+3]?(o.push("#'##"),t+=3):"["==e[t]&&"-"==e[t+1]&&"]"==e[t+2]?(o.push("[-]"),t+=2):o.push(e[t])},"undefined"!==typeof document&&(document.addEventListener("paste",t.paste),document.addEventListener("keydown",t.apply)),t}(),e.modal=function(t,n){var r={options:{}},o={url:null,onopen:null,onclose:null,closed:!1,width:null,height:null,title:null,padding:null};for(var i in o)n&&n.hasOwnProperty(i)?r.options[i]=n[i]:r.options[i]=o[i];!r.options.title&&t.getAttribute("title")&&(r.options.title=t.getAttribute("title"));for(var a=document.createElement("div");t.children[0];)a.appendChild(t.children[0]);for(r.content=document.createElement("div"),r.content.className="jmodal_content",r.content.innerHTML=t.innerHTML;a.children[0];)r.content.appendChild(a.children[0]);r.container=document.createElement("div"),r.container.className="jmodal",r.container.appendChild(r.content),r.options.padding&&(r.content.style.padding=r.options.padding),r.options.width&&(r.container.style.width=r.options.width),r.options.height&&(r.container.style.height=r.options.height),r.options.title?r.container.setAttribute("title",r.options.title):r.container.classList.add("no-title"),t.innerHTML="",t.style.display="none",t.appendChild(r.container);var s=document.createElement("div");return s.className="jmodal_backdrop",s.onclick=function(){r.close()},t.appendChild(s),r.open=function(){t.style.display="block";var n=r.container.getBoundingClientRect();e.getWindowWidth()<n.width?(r.container.style.top="",r.container.style.left="",r.container.classList.add("jmodal_fullscreen"),e.animation.slideBottom(r.container,1)):s.style.display="block",e.modal.current=r,"function"==typeof r.options.onopen&&r.options.onopen(t,r)},r.resetPosition=function(){r.container.style.top="",r.container.style.left=""},r.isOpen=function(){return"none"!=t.style.display},r.close=function(){t.style.display="none",s.style.display="",e.modal.current=null,r.container.classList.remove("jmodal_fullscreen"),"function"==typeof r.options.onclose&&r.options.onclose(t,r)},e.modal.hasEvents||(e.modal.current=r,"ontouchstart"in document.documentElement===!0?document.addEventListener("touchstart",e.modal.mouseDownControls):(document.addEventListener("mousedown",e.modal.mouseDownControls),document.addEventListener("mousemove",e.modal.mouseMoveControls),document.addEventListener("mouseup",e.modal.mouseUpControls)),document.addEventListener("keydown",e.modal.keyDownControls),e.modal.hasEvents=!0),r.options.url?e.ajax({url:r.options.url,method:"GET",dataType:"text/html",success:function(e){r.content.innerHTML=e,r.options.closed||r.open()}}):r.options.closed||r.open(),t.modal=r,r},e.modal.current=null,e.modal.position=null,e.modal.keyDownControls=function(t){27==t.which&&e.modal.current&&e.modal.current.close()},e.modal.mouseUpControls=function(t){e.modal.current&&(e.modal.current.container.style.cursor="auto"),e.modal.position=null},e.modal.mouseMoveControls=function(t){if(e.modal.current&&e.modal.position)if(1==t.which||3==t.which){var n=e.modal.position;e.modal.current.container.style.top=n[1]+(t.clientY-n[3])+n[5]/2+"px",e.modal.current.container.style.left=n[0]+(t.clientX-n[2])+n[4]/2+"px",e.modal.current.container.style.cursor="move"}else e.modal.current.container.style.cursor="auto"},e.modal.mouseDownControls=function(t){e.modal.position=[],t.target.classList.contains("jmodal")&&setTimeout((function(){var n=t.target.getBoundingClientRect();if(t.changedTouches&&t.changedTouches[0])var r=t.changedTouches[0].clientX,o=t.changedTouches[0].clientY;else r=t.clientX,o=t.clientY;n.width-(r-n.left)<50&&o-n.top<50?setTimeout((function(){e.modal.current.close()}),100):t.target.getAttribute("title")&&o-n.top<50&&(document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),e.modal.position=[n.left,n.top,t.clientX,t.clientY,n.width,n.height])}),100)},e.notification=function(t){var n={options:{}},r={icon:null,name:"Notification",date:null,error:null,title:null,message:null,timeout:4e3,autoHide:!0,closeable:!0};for(var o in r)t&&t.hasOwnProperty(o)?n.options[o]=t[o]:n.options[o]=r[o];var i=document.createElement("div");i.className="jnotification",n.options.error&&i.classList.add("jnotification-error");var a=document.createElement("div");a.className="jnotification-container",i.appendChild(a);var s=document.createElement("div");s.className="jnotification-header",a.appendChild(s);var l=document.createElement("div");if(l.className="jnotification-image",s.appendChild(l),n.options.icon){var u=document.createElement("img");u.src=n.options.icon,l.appendChild(u)}var c=document.createElement("div");if(c.className="jnotification-name",c.innerHTML=n.options.name,s.appendChild(c),1==n.options.closeable){var d=document.createElement("div");d.className="jnotification-close",d.onclick=function(){n.hide()},s.appendChild(d)}var h=document.createElement("div");h.className="jnotification-date",s.appendChild(h);var f=document.createElement("div");if(f.className="jnotification-content",a.appendChild(f),n.options.title){var p=document.createElement("div");p.className="jnotification-title",p.innerHTML=n.options.title,f.appendChild(p)}var g=document.createElement("div");if(g.className="jnotification-message",g.innerHTML=n.options.message,f.appendChild(g),n.show=function(){document.body.appendChild(i),e.getWindowWidth()>800?e.animation.fadeIn(i):e.animation.slideTop(i,1)},n.hide=function(){e.getWindowWidth()>800?e.animation.fadeOut(i,(function(){i.parentNode&&(i.parentNode.removeChild(i),b&&clearTimeout(b))})):e.animation.slideTop(i,0,(function(){i.parentNode&&(i.parentNode.removeChild(i),b&&clearTimeout(b))}))},n.show(),1==n.options.autoHide)var b=setTimeout((function(){n.hide()}),n.options.timeout);return e.getWindowWidth()<800&&i.addEventListener("swipeup",(function(e){n.hide(),e.preventDefault(),e.stopPropagation()})),n},e.notification.isVisible=function(){var e=document.querySelector(".jnotification");return!(!e||!e.parentNode)},e.palette=function(e){var t={material:[["#ffebee","#fce4ec","#f3e5f5","#e8eaf6","#e3f2fd","#e0f7fa","#e0f2f1","#e8f5e9","#f1f8e9","#f9fbe7","#fffde7","#fff8e1","#fff3e0","#fbe9e7","#efebe9","#fafafa","#eceff1"],["#ffcdd2","#f8bbd0","#e1bee7","#c5cae9","#bbdefb","#b2ebf2","#b2dfdb","#c8e6c9","#dcedc8","#f0f4c3","#fff9c4","#ffecb3","#ffe0b2","#ffccbc","#d7ccc8","#f5f5f5","#cfd8dc"],["#ef9a9a","#f48fb1","#ce93d8","#9fa8da","#90caf9","#80deea","#80cbc4","#a5d6a7","#c5e1a5","#e6ee9c","#fff59d","#ffe082","#ffcc80","#ffab91","#bcaaa4","#eeeeee","#b0bec5"],["#e57373","#f06292","#ba68c8","#7986cb","#64b5f6","#4dd0e1","#4db6ac","#81c784","#aed581","#dce775","#fff176","#ffd54f","#ffb74d","#ff8a65","#a1887f","#e0e0e0","#90a4ae"],["#ef5350","#ec407a","#ab47bc","#5c6bc0","#42a5f5","#26c6da","#26a69a","#66bb6a","#9ccc65","#d4e157","#ffee58","#ffca28","#ffa726","#ff7043","#8d6e63","#bdbdbd","#78909c"],["#f44336","#e91e63","#9c27b0","#3f51b5","#2196f3","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],["#e53935","#d81b60","#8e24aa","#3949ab","#1e88e5","#00acc1","#00897b","#43a047","#7cb342","#c0ca33","#fdd835","#ffb300","#fb8c00","#f4511e","#6d4c41","#757575","#546e7a"],["#d32f2f","#c2185b","#7b1fa2","#303f9f","#1976d2","#0097a7","#00796b","#388e3c","#689f38","#afb42b","#fbc02d","#ffa000","#f57c00","#e64a19","#5d4037","#616161","#455a64"],["#c62828","#ad1457","#6a1b9a","#283593","#1565c0","#00838f","#00695c","#2e7d32","#558b2f","#9e9d24","#f9a825","#ff8f00","#ef6c00","#d84315","#4e342e","#424242","#37474f"],["#b71c1c","#880e4f","#4a148c","#1a237e","#0d47a1","#006064","#004d40","#1b5e20","#33691e","#827717","#f57f17","#ff6f00","#e65100","#bf360c","#3e2723","#212121","#263238"]],fire:[["0b1a6d","840f38","b60718","de030b","ff0c0c","fd491c","fc7521","faa331","fbb535","ffc73a"],["071147","5f0b28","930513","be0309","ef0000","fa3403","fb670b","f9991b","faad1e","ffc123"],["03071e","370617","6a040f","9d0208","d00000","dc2f02","e85d04","f48c06","faa307","ffba08"],["020619","320615","61040d","8c0207","bc0000","c82a02","d05203","db7f06","e19405","efab00"],["020515","2d0513","58040c","7f0206","aa0000","b62602","b94903","c57205","ca8504","d89b00"]],baby:[["eddcd2","fff1e6","fde2e4","fad2e1","c5dedd","dbe7e4","f0efeb","d6e2e9","bcd4e6","99c1de"],["e1c4b3","ffd5b5","fab6ba","f5a8c4","aacecd","bfd5cf","dbd9d0","baceda","9dc0db","7eb1d5"],["daa990","ffb787","f88e95","f282a9","8fc4c3","a3c8be","cec9b3","9dbcce","82acd2","649dcb"],["d69070","ff9c5e","f66770","f05f8f","74bbb9","87bfae","c5b993","83aac3","699bca","4d89c2"],["c97d5d","f58443","eb4d57","e54a7b","66a9a7","78ae9c","b5a67e","7599b1","5c88b7","4978aa"]]};return t[e]?t[e]:t.material},e.picker=function(t,n){if(t.picker)return t.picker.setOptions(n,!0);var r={type:"picker",options:{}},o=null,i=null,a=function(){i.innerHTML="";for(var e=Object.keys(r.options.data),t=0;t<e.length;t++){var n=document.createElement("div");n.classList.add("jpicker-item"),n.k=e[t],n.v=r.options.data[e[t]],n.innerHTML=r.getLabel(e[t]),i.appendChild(n)}};return r.setOptions=function(e,t){var n={value:0,data:null,render:null,onchange:null,onselect:null,onopen:null,onclose:null,onload:null,width:null,header:!0,right:!1,content:!1,columns:null,height:null};for(var s in e&&e.options&&(e.data=e.options),n)e&&e.hasOwnProperty(s)?r.options[s]=e[s]:"undefined"!=typeof r.options[s]&&!0!==t||(r.options[s]=n[s]);return!1===r.options.header?o.style.display="none":o.style.display="",r.options.width?o.style.width=parseInt(r.options.width)+"px":o.style.width="",r.options.height?(i.style.maxHeight=r.options.height+"px",i.style.overflow="scroll"):i.style.overflow="",r.options.columns>0&&(i.classList.add("jpicker-columns"),i.style.width=r.options.width?r.options.width:36*r.options.columns+"px"),isNaN(r.options.value)&&(r.options.value="0"),a(),r.setValue(r.options.value),r},r.getValue=function(){return r.options.value},r.setValue=function(e){r.setLabel(e),r.options.value=String(e),t.value!=r.options.value&&(t.value=r.options.value,"function"==typeof t.onchange&&t.onchange({type:"change",target:t,value:t.value})),"generic"!==i.children[e].getAttribute("type")&&r.close()},r.getLabel=function(e){var t=r.options.data[e]||null;return"function"==typeof r.options.render&&(t=r.options.render(t)),t},r.setLabel=function(e){if(r.options.content)var t='<i class="material-icons">'+r.options.content+"</i>";else t=r.getLabel(e);o.innerHTML=t},r.open=function(){if(!t.classList.contains("jpicker-focus")){e.tracking(r,!0),t.classList.add("jpicker-focus"),t.focus();var n=o.getBoundingClientRect(),a=i.getBoundingClientRect();window.innerHeight<n.bottom+a.height?i.style.marginTop=-1*(a.height+4)+"px":i.style.marginTop=n.height+2+"px",!0===r.options.right&&(i.style.marginLeft=-1*a.width+24+"px"),"function"==typeof r.options.onopen&&r.options.onopen(t,r)}},r.close=function(){t.classList.contains("jpicker-focus")&&(t.classList.remove("jpicker-focus"),e.tracking(r,!1),"function"==typeof r.options.onclose&&r.options.onclose(t,r))},t.classList.add("jpicker"),t.setAttribute("tabindex","900"),(o=document.createElement("div")).classList.add("jpicker-header"),t.onmouseup=function(n){var o=e.findElement(n.target,"jpicker-item");o?(r.setValue(o.k),"function"==typeof r.options.onchange&&r.options.onchange.call(r,t,r,o.v,o.v,o.k)):t.classList.contains("jpicker-focus")?r.close():r.open()},(i=document.createElement("div")).classList.add("jpicker-content"),t.appendChild(o),t.appendChild(i),t.value=n.value||0,r.setOptions(n),"function"==typeof r.options.onload&&r.options.onload(t,r),t.change=r.setValue,t.val=function(e){if(void 0===e)return r.getValue();r.setValue(e)},t.picker=r,r},e.progressbar=function(e,t){var n={options:{}},r={value:0,onchange:null,width:null};for(var o in r)t&&t.hasOwnProperty(o)?n.options[o]=t[o]:n.options[o]=r[o];e.classList.add("jprogressbar"),e.setAttribute("tabindex",1),e.setAttribute("data-value",n.options.value);var i=document.createElement("div");i.style.width=n.options.value+"%",i.style.color="#fff",e.appendChild(i),n.options.width&&(e.style.width=n.options.width),n.setValue=function(t){t=parseInt(t),n.options.value=t,i.style.width=t+"%",e.setAttribute("data-value",t+"%"),e.style.color=t<6?"#000":"#fff",n.options.value=t,"function"==typeof n.options.onchange&&n.options.onchange(e,t),e.value!=n.options.value&&(e.value=n.options.value,"function"==typeof e.onchange&&e.onchange({type:"change",target:e,value:e.value}))},n.getValue=function(){return n.options.value};var a=function(t){if(t.which){var r=e.getBoundingClientRect();if(t.changedTouches&&t.changedTouches[0]){var o=t.changedTouches[0].clientX;t.changedTouches[0].clientY}else o=t.clientX,t.clientY;n.setValue(Math.round((o-r.left)/r.width*100))}};return"touchstart"in document.documentElement===!0?(e.addEventListener("touchstart",a),e.addEventListener("touchend",a)):(e.addEventListener("mousedown",a),e.addEventListener("mousemove",a)),e.change=n.setValue,e.val=function(e){if(void 0===e)return n.getValue();n.setValue(e)},e.progressbar=n,n},e.rating=function(e,t){if(e.rating)return e.rating.setOptions(t,!0);var n={options:{},setOptions:function(t,r){var o={number:5,value:0,tooltip:["Very bad","Bad","Average","Good","Very good"],onchange:null};for(var i in o)t&&t.hasOwnProperty(i)?n.options[i]=t[i]:"undefined"!=typeof n.options[i]&&!0!==r||(n.options[i]=o[i]);e.innerHTML="";for(var a=0;a<n.options.number;a++){var s=document.createElement("div");s.setAttribute("data-index",a+1),s.setAttribute("title",n.options.tooltip[a]),e.appendChild(s)}if(n.options.value)for(a=0;a<n.options.number;a++)a<n.options.value&&e.children[a].classList.add("jrating-selected");return n},setValue:function(t){for(var r=0;r<n.options.number;r++)r<t?e.children[r].classList.add("jrating-selected"):(e.children[r].classList.remove("jrating-over"),e.children[r].classList.remove("jrating-selected"));n.options.value=t,"function"==typeof n.options.onchange&&n.options.onchange(e,t),e.value!=n.options.value&&(e.value=n.options.value,"function"==typeof e.onchange&&e.onchange({type:"change",target:e,value:e.value}))},getValue:function(){return n.options.value}};return n.setOptions(t),e.classList.add("jrating"),e.addEventListener("click",(function(e){var t=e.target.getAttribute("data-index");void 0!=t&&(t==n.options.value?n.setValue(0):n.setValue(t))})),e.addEventListener("mouseover",(function(t){for(var r=t.target.getAttribute("data-index"),o=0;o<n.options.number;o++)o<r?e.children[o].classList.add("jrating-over"):e.children[o].classList.remove("jrating-over")})),e.addEventListener("mouseout",(function(t){for(var r=0;r<n.options.number;r++)e.children[r].classList.remove("jrating-over")})),e.change=n.setValue,e.val=function(e){if(void 0===e)return n.getValue();n.setValue(e)},e.rating=n,n},e.search=function(t,n){if(t.search)return t.search;var r=null,o=function(e){if(e.target.classList.contains("jsearch_item"))var t=e.target;else t=e.target.parentNode;l.selectIndex(t),e.preventDefault()},i=function(e){if(u.innerHTML="",e.length){t.style.display="block";for(var n=e.length<11?e.length:10,r=0;r<n;r++){var o=e[r].text;!o&&e[r].name&&(o=e[r].name);var i=e[r].value;!i&&e[r].id&&(i=e[r].id);var a=document.createElement("div");a.setAttribute("data-value",i),a.setAttribute("data-text",o),a.className="jsearch_item",e[r].id&&a.setAttribute("id",e[r].id),0==r&&a.classList.add("selected");var s=document.createElement("img");e[r].image?s.src=e[r].image:s.style.display="none",a.appendChild(s);var l=document.createElement("div");l.innerHTML=o,a.appendChild(l),u.appendChild(a)}}else t.style.display=""},a=function(t){if(t!=l.terms)if(l.terms=t,r=0,Array.isArray(l.options.data)){var n=function(e){for(var n in e)if((""+e[n]).toLowerCase().search(t)>=0)return!0;return!1},o=l.options.data.filter((function(e){return n(e)}));i(o)}else e.ajax({url:l.options.data+t,method:"GET",dataType:"json",success:function(e){i(e)}})},s=null,l=function(e){s&&clearTimeout(s),s=setTimeout((function(){a(e)}),500)};l.options={data:n.data||null,input:n.input||null,onselect:n.onselect||null},l.selectIndex=function(e){var t=e.getAttribute("id"),n=e.getAttribute("data-text"),r=e.getAttribute("data-value");"function"==typeof l.options.onselect&&l.options.onselect(l,n,r,t),l.close()},l.open=function(){t.style.display="block"},l.close=function(){s&&clearTimeout(s),l.terms="",u.innerHTML="",t.style.display=""},l.isOpened=function(){return!!t.style.display},l.keydown=function(e){l.isOpened()&&("Enter"==e.key?u.children[r]&&(l.selectIndex(u.children[r]),e.preventDefault()):"ArrowUp"===e.key?(u.children[0]&&(u.children[r].classList.remove("selected"),r>0&&r--,u.children[r].classList.add("selected")),e.preventDefault()):"ArrowDown"===e.key&&(u.children[r].classList.remove("selected"),r<9&&u.children[r+1]&&r++,u.children[r].classList.add("selected"),e.preventDefault()))},l.keyup=function(t){if(l.options.input)l(l.options.input.value);else{var n=e.getNode();n&&l(n.innerText)}};var u=document.createElement("div");return u.classList.add("jsearch_container"),u.onmousedown=o,t.appendChild(u),t.classList.add("jsearch"),t.search=l,l},e.slider=function(e,t){var n={options:{},currentImage:null};if(t&&(n.options=t),e.setAttribute("tabindex","900"),n.options.items=[],!e.classList.contains("jslider")){if(e.classList.add("jslider"),e.classList.add("unselectable"),n.options.height&&(e.style.height=n.options.height),n.options.width&&(e.style.width=n.options.width),n.options.grid){e.classList.add("jslider-grid");var r=e.children.length;r>4&&e.setAttribute("data-total",r-4),e.setAttribute("data-number",r>4?4:r)}var o=document.createElement("div");if(o.classList.add("jslider-counter"),e.children.length>0)for(var i=0;i<e.children.length;i++){n.options.items.push(e.children[i]);var a=document.createElement("div");a.onclick=function(){var e=Array.prototype.slice.call(o.children).indexOf(this);n.show(n.currentImage=n.options.items[e])},o.appendChild(a)}var s=document.createElement("div");s.className="jslider-caption";var l=document.createElement("div"),u=document.createElement("div");u.className="jslider-close",u.innerHTML="",u.onclick=function(){n.close()},l.appendChild(s),l.appendChild(u)}n.updateCounter=function(e){for(var t=0;t<o.children.length;t++)if(o.children[t].classList.contains("jslider-counter-focus")){o.children[t].classList.remove("jslider-counter-focus");break}o.children[e].classList.add("jslider-counter-focus")},n.show=function(t){t||(t=e.children[0]),e.classList.add("jslider-focus"),e.classList.remove("jslider-grid"),e.appendChild(l),e.appendChild(o);var r=n.options.items.indexOf(t);n.updateCounter(r);for(var i=0;i<e.children.length;i++)e.children[i].style.display="";t.style.display="block",t.previousElementSibling?e.classList.add("jslider-left"):e.classList.remove("jslider-left"),t.nextElementSibling&&"IMG"==t.nextElementSibling.tagName?e.classList.add("jslider-right"):e.classList.remove("jslider-right"),n.currentImage=t,n.currentImage.offsetHeight>n.currentImage.offsetWidth&&n.currentImage.classList.add("jslider-vertical"),l.children[0].innerText=n.currentImage.getAttribute("title")},n.open=function(){n.show(),"function"==typeof n.options.onopen&&n.options.onopen(e)},n.close=function(){e.classList.remove("jslider-focus"),e.classList.remove("jslider-left"),e.classList.remove("jslider-right"),n.options.grid&&e.classList.add("jslider-grid");for(var t=0;t<e.children.length;t++)e.children[t].style.display="";o.remove(),l.remove(),n.currentImage=null,"function"==typeof n.options.onclose&&n.options.onclose(e)},n.reset=function(){e.innerHTML=""},n.next=function(){var e=n.currentImage.nextElementSibling;e&&"IMG"===e.tagName&&n.show(n.currentImage.nextElementSibling)},n.prev=function(){n.currentImage.previousElementSibling&&n.show(n.currentImage.previousElementSibling)};var c=function(e){if("IMG"==e.target.tagName)n.show(e.target);else if(!e.target.classList.contains("jslider-close")&&!e.target.parentNode.classList.contains("jslider-counter")&&!e.target.classList.contains("jslider-counter")){var t=e.offsetX||e.changedTouches[0].clientX;e.target.clientWidth-t<40?n.next():t<40&&n.prev()}};return"ontouchend"in document.documentElement===!0?e.addEventListener("touchend",c):e.addEventListener("mouseup",c),e.addEventListener("swipeleft",(function(e){n.next(),e.preventDefault(),e.stopPropagation()})),e.addEventListener("swiperight",(function(e){n.prev(),e.preventDefault(),e.stopPropagation()})),e.addEventListener("keydown",(function(e){27==e.which&&n.close()})),e.slider=n,n},e.sorting=function(e,t){var n={options:{}},r={pointer:null,direction:null,ondragstart:null,ondragend:null,ondrop:null},o=null;for(var i in r)t&&t.hasOwnProperty(i)?n.options[i]=t[i]:n.options[i]=r[i];e.classList.add("jsorting"),e.addEventListener("dragstart",(function(t){var r=Array.prototype.indexOf.call(t.target.parentNode.children,t.target);o={element:t.target,o:r,d:r},t.target.style.opacity="0.25","function"==typeof n.options.ondragstart&&n.options.ondragstart(e,t.target,t)})),e.addEventListener("dragover",(function(e){if(e.preventDefault(),a(e.target)&&o&&"true"==e.target.getAttribute("draggable")&&o.element!=e.target){if(n.options.direction)t=e.target.clientWidth/2>e.offsetX;else var t=e.target.clientHeight/2>e.offsetY;t?e.target.parentNode.insertBefore(o.element,e.target):e.target.parentNode.insertBefore(o.element,e.target.nextSibling),o.d=Array.prototype.indexOf.call(e.target.parentNode.children,o.element)}})),e.addEventListener("dragleave",(function(e){e.preventDefault()})),e.addEventListener("dragend",(function(t){t.preventDefault(),o&&("function"==typeof n.options.ondragend&&n.options.ondragend(e,o.element,t),o.o<o.d?t.target.parentNode.insertBefore(o.element,t.target.parentNode.children[o.o]):t.target.parentNode.insertBefore(o.element,t.target.parentNode.children[o.o].nextSibling),o.element.style.opacity="",o=null)})),e.addEventListener("drop",(function(t){t.preventDefault(),o&&o.o!=o.d&&"function"==typeof n.options.ondrop&&n.options.ondrop(e,o.o,o.d,o.element,t.target,t),o.element.style.opacity="",o=null}));for(var a=function(e){var t=!1;function n(e){e.className&&e.classList.contains("jsorting")&&(t=!0),t||n(e.parentNode)}return n(e),t},s=0;s<e.children.length;s++)e.children[s].hasAttribute("draggable")||e.children[s].setAttribute("draggable","true");return e.val=function(){for(var t=null,n=[],r=0;r<e.children.length;r++)(t=e.children[r].getAttribute("data-id"))&&n.push(t);return n},e},e.tabs=function(t,n){var r={options:{}},o={data:[],position:null,allowCreate:!1,allowChangePosition:!1,onclick:null,onload:null,onchange:null,oncreate:null,ondelete:null,onbeforecreate:null,onchangeposition:null,animation:!1,hideHeaders:!1,padding:null,palette:null};for(var i in o)n&&n.hasOwnProperty(i)?r.options[i]=n[i]:r.options[i]=o[i];t.classList.add("jtabs");var a=null,s=null,l=null,u=function(e){var t=r.headers.children[e].getBoundingClientRect();"modern"==r.options.palette?(l.style.width=t.width-4+"px",l.style.left=r.headers.children[e].offsetLeft+2+"px"):(l.style.width=t.width+"px",l.style.left=r.headers.children[e].offsetLeft+"px"),l.style.bottom="0px"},c=function(e){"function"==typeof r.headers.scrollTo?r.headers.scrollTo({left:e,behavior:"smooth"}):r.headers.scrollLeft=e,e<=1?a.classList.add("disabled"):a.classList.remove("disabled"),e>=r.headers.scrollWidth-r.headers.offsetWidth?s.classList.add("disabled"):s.classList.remove("disabled"),r.headers.scrollWidth<=r.headers.offsetWidth?(a.style.display="none",s.style.display="none"):(a.style.display="",s.style.display="")};if(r.open=function(e){for(var n=null,o=0;o<r.headers.children.length;o++)r.headers.children[o].classList.contains("jtabs-selected")&&(n=o),r.headers.children[o].classList.remove("jtabs-selected"),r.content.children[o]&&r.content.children[o].classList.remove("jtabs-selected");if(r.headers.children[e].classList.add("jtabs-selected"),r.content.children[e]&&r.content.children[e].classList.add("jtabs-selected"),n!=e&&"function"==typeof r.options.onchange&&r.content.children[e]&&r.options.onchange(t,r,e,r.headers.children[e],r.content.children[e]),1==r.options.hideHeaders&&r.headers.children.length<3&&0==r.options.allowCreate)r.headers.parentNode.style.display="none";else{1==r.options.animation&&u(e),r.headers.parentNode.style.display="";var i=r.headers.children[e].offsetLeft,a=i+r.headers.children[e].offsetWidth,s=r.headers.scrollLeft,l=s+r.headers.offsetWidth;s<=i&&l>=a||c(i-1)}},r.selectIndex=function(e){var t=Array.prototype.indexOf.call(r.headers.children,e);return t>=0&&r.open(t),t},r.rename=function(e,t){t||(t=prompt("New title",r.headers.children[e].innerText)),r.headers.children[e].innerText=t,r.open(e)},r.create=function(e,n){if("function"==typeof r.options.onbeforecreate){var o=r.options.onbeforecreate(t);if(!1===o)return!1;e=o}var i=r.appendElement(e);return"function"==typeof r.options.oncreate&&r.options.oncreate(t,i),i},r.remove=function(e){return r.deleteElement(e)},r.nextNumber=function(){for(var e=0,t=0;t<r.headers.children.length;t++){var n=r.headers.children[t].innerText.match(/[0-9].*/);n>e&&(e=parseInt(n))}return e?e++:e=1,e},r.deleteElement=function(e){if(!r.headers.children[e])return!1;r.headers.removeChild(r.headers.children[e]),r.content.removeChild(r.content.children[e]),r.open(0),"function"==typeof r.options.ondelete&&r.options.ondelete(t,e)},r.appendElement=function(e){if(e||(e=prompt("Title?","")),e){var t=document.createElement("div");r.content.appendChild(t);var n=document.createElement("div");return n.innerHTML=e,n.content=t,r.headers.insertBefore(n,r.headers.lastChild),r.options.allowChangePosition&&n.setAttribute("draggable","true"),r.selectIndex(n),t}},r.getActive=function(){for(var e=0;e<r.headers.children.length;e++)if(r.headers.children[e].classList.contains("jtabs-selected"))return e;return 0},r.updateContent=function(e,t){"string"!==typeof t||(document.createElement("div").innerHTML=t),r.content.children[e].classList.contains("jtabs-selected")&&t.classList.add("jtabs-selected"),r.content.replaceChild(t,r.content.children[e])},r.updatePosition=function(e,t){e>t?r.content.insertBefore(r.content.children[e],r.content.children[t]):r.content.insertBefore(r.content.children[e],r.content.children[t].nextSibling),r.open(t),"function"==typeof r.options.onchangeposition&&r.options.onchangeposition(r.headers,e,t)},r.move=function(e,t){e>t?r.headers.insertBefore(r.headers.children[e],r.headers.children[t]):r.headers.insertBefore(r.headers.children[e],r.headers.children[t].nextSibling),r.updatePosition(e,t)},r.setBorder=u,r.init=function(){t.innerHTML="",r.headers=document.createElement("div"),r.content=document.createElement("div"),r.headers.classList.add("jtabs-headers"),r.content.classList.add("jtabs-content"),r.options.palette?t.classList.add("jtabs-modern"):t.classList.remove("jtabs-modern"),r.options.padding&&(r.content.style.padding=parseInt(r.options.padding)+"px");var n=document.createElement("div");n.className="jtabs-headers-container",n.appendChild(r.headers);var o=document.createElement("div");if(o.className="jtabs-controls",o.setAttribute("draggable","false"),n.appendChild(o),"bottom"==r.options.position?(t.appendChild(r.content),t.appendChild(n)):(t.appendChild(n),t.appendChild(r.content)),1==r.options.allowCreate){var i=document.createElement("div");i.className="jtabs-add",i.onclick=function(){r.create()},o.appendChild(i)}(a=document.createElement("div")).className="jtabs-prev",a.onclick=function(){c(r.headers.scrollLeft-r.headers.offsetWidth)},o.appendChild(a),(s=document.createElement("div")).className="jtabs-next",s.onclick=function(){c(r.headers.scrollLeft+r.headers.offsetWidth)},o.appendChild(s);for(var u=0;u<r.options.data.length;u++){if(r.options.data[u].titleElement)var d=r.options.data[u].titleElement;else d=document.createElement("div");if(r.options.data[u].icon){var h=document.createElement("div"),f=document.createElement("i");f.classList.add("material-icons"),f.innerHTML=r.options.data[u].icon,h.appendChild(f),d.appendChild(h)}if(r.options.data[u].title){var p=document.createTextNode(r.options.data[u].title);d.appendChild(p)}if(r.options.data[u].width&&(d.style.width=r.options.data[u].width),r.options.data[u].contentElement)var g=r.options.data[u].contentElement;else(g=document.createElement("div")).innerHTML=r.options.data[u].content;r.headers.appendChild(d),r.content.appendChild(g)}(l=document.createElement("div")).className="jtabs-border",r.headers.appendChild(l),r.options.animation&&t.classList.add("jtabs-animation"),r.headers.addEventListener("click",(function(e){if(e.target.parentNode.classList.contains("jtabs-headers"))var n=e.target;else n="I"==e.target.tagName?e.target.parentNode.parentNode:e.target.parentNode;var o=r.selectIndex(n);"function"==typeof r.options.onclick&&r.options.onclick(t,r,o,r.headers.children[o],r.content.children[o])})),r.headers.addEventListener("contextmenu",(function(e){r.selectIndex(e.target)})),r.headers.children.length&&r.open(0),c(0),1==r.options.allowChangePosition&&e.sorting(r.headers,{direction:1,ondrop:function(e,t,n){r.updatePosition(t,n)}}),"function"==typeof r.options.onload&&r.options.onload(t,r)},t.children[0]&&t.children[0].children.length)for(var d=0;d<t.children[0].children.length;d++){var h=r.options.data&&r.options.data[d]?r.options.data[d]:{};t.children[1]&&t.children[1].children[d]?(h.titleElement=t.children[0].children[d],h.contentElement=t.children[1].children[d]):h.contentElement=t.children[0].children[d],r.options.data[d]=h}var f=!1;if(r.options.data)for(d=0;d<r.options.data.length;d++)r.options.data[d].url&&(e.ajax({url:r.options.data[d].url,type:"GET",dataType:"text/html",index:d,success:function(e){r.options.data[this.index].content=e},complete:function(){r.init()}}),f=!0);return f||r.init(),t.tabs=r,r},e.tags=function(t,n){if(t.tags)return t.tags.setOptions(n,!0);var r={type:"tags",options:{}},o=function(){return!!(r.options.limit&&t.children.length>=r.options.limit)},i=null,a=null;r.setOptions=function(n,o){var s={value:"",limit:null,limitMessage:"The limit of entries is: ",search:null,placeholder:null,validation:null,onbeforechange:null,onchange:null,onfocus:null,onblur:null,onload:null,colors:null};for(var l in s)n&&n.hasOwnProperty(l)?r.options[l]=n[l]:"undefined"!=typeof r.options[l]&&!0!==o||(r.options[l]=s[l]);return r.options.placeholder?t.setAttribute("data-placeholder",r.options.placeholder):t.removeAttribute("data-placeholder"),t.placeholder=r.options.placeholder,r.setValue(r.options.value),c(),r.options.search?a||(a=document.createElement("div"),t.parentNode.insertBefore(a,t.nextSibling),i=e.search(a,{data:r.options.search,onselect:function(e,t,n){r.selectIndex(t,n)}})):a&&(i=null,a.remove(),a=null),r},r.add=function(n,a){if("function"==typeof r.options.onbeforechange){var c=r.options.onbeforechange(t,r,r.options.value,n);if(!1===c)return!1;null!=c&&(n=c)}if(i&&i.close(),o())alert(r.options.limitMessage+" "+r.options.limit);else{var d=e.getNode();if(!(d&&d.parentNode&&d.parentNode.classList.contains("jtags")&&d.nextSibling)||d.nextSibling.innerText&&d.nextSibling.innerText.trim()){if(t.lastChild&&(t.lastChild.innerText.trim()||t.removeChild(t.lastChild)),n&&"string"!=typeof n){for(var h=0;h<=n.length;h++)if(!o()){if(n[h]&&"string"!=typeof n[h])f=n[h].text,p=n[h].value;else var f=n[h]||"",p=null;g=l(f,p)}}else var g=l(n,n,d);u()}else g=d.nextSibling;a&&s(g)}},r.remove=function(e){e.parentNode.removeChild(e),t.children.length?u():r.add("",!0)},r.getData=function(){for(var e=[],n=0;n<t.children.length;n++){var r=t.children[n].innerText.replace("\n",""),o=t.children[n].getAttribute("data-value");o||(o=r),(r||o)&&e.push({text:r,value:o})}return e},r.getValue=function(e){var n=null;if(null!=e)(n=t.children[e].getAttribute("data-value"))||(n=t.children[e].innerText.replace("\n",""));else{for(var o=[],i=0;i<t.children.length;i++)(n=t.children[i].innerText.replace("\n",""))&&o.push(r.getValue(i));n=o.join(",")}return n},r.setValue=function(e){if(e){if(t.value!=e)if(Array.isArray(e))r.add(e);else{var n=(""+e).trim(),o=h(n);t.innerHTML="",r.add(o)}}else r.reset()},r.reset=function(){t.classList.add("jtags-empty"),t.innerHTML="<div></div>",u()},r.isValid=function(){for(var e=0,n=0;n<t.children.length;n++)t.children[n].classList.contains("jtags_error")&&e++;return 0==e},r.selectIndex=function(t,n){var i=e.getNode();i&&(i.innerText=t,n&&i.setAttribute("data-value",n),i.classList.remove("jtags_error"),o()||r.add("",!0))},r.search=function(e){e.innerText},r.destroy=function(){t.removeEventListener("mouseup",m),t.removeEventListener("keydown",p),t.removeEventListener("keyup",g),t.removeEventListener("paste",b),t.removeEventListener("focus",v),t.removeEventListener("blur",y),t.parentNode.removeChild(t)};var s=function(e){var t=document.createRange(),n=window.getSelection();t.setStart(e,e.innerText.length||0),t.collapse(!0),n.removeAllRanges(),n.addRange(t),e.scrollLeft=e.scrollWidth},l=function(e,n,r){var o=document.createElement("div");return o.innerHTML=e||"",n&&o.setAttribute("data-value",n),r&&r.parentNode.classList.contains("jtags")?t.insertBefore(o,r.nextSibling):t.appendChild(o),o},u=function(){var e=r.getValue();e!=r.options.value&&(r.options.value=e,"function"==typeof r.options.onchange&&r.options.onchange(t,r,r.options.value),t.value!=r.options.value&&(t.value=r.options.value,"function"==typeof t.onchange&&t.onchange({type:"change",target:t,value:t.value}))),c()},c=function(){for(var e=0;e<t.children.length;e++)r.getValue(e)?(t.children[e].classList.add("jtags_label"),"function"==typeof r.options.validation&&r.getValue(e)?r.options.validation(t.children[e],t.children[e].innerText,t.children[e].getAttribute("data-value"))?t.children[e].classList.remove("jtags_error"):t.children[e].classList.add("jtags_error"):t.children[e].classList.remove("jtags_error")):t.children[e].classList.remove("jtags_label");d()},d=function(){t.innerText.trim()?t.classList.remove("jtags-empty"):(t.innerHTML="<div></div>",t.classList.add("jtags-empty"))},h=function(e){var t=[],n="";if(e=e.trim()){for(var r=0;r<e.length;r++)","==e[r]||";"==e[r]||"\n"==e[r]?n&&(t.push(n.trim()),n=""):n+=e[r];n&&t.push(n)}return t},f=0,p=function(e){f=window.getSelection().anchorOffset,d(),"Tab"===e.key||";"===e.key||","===e.key?(window.getSelection().anchorOffset>1&&(o()||r.add("",!0)),e.preventDefault()):"Enter"==e.key?i&&i.isOpened()||(window.getSelection().anchorOffset>1&&(o()||r.add("",!0)),e.preventDefault()):"Backspace"==e.key&&1==t.children.length&&window.getSelection().anchorOffset<1&&e.preventDefault(),i&&i.keydown(e)},g=function(e){if(39==e.which){var t=window.getSelection().anchorOffset;t>1&&t==f&&r.add("",!0)}else 13==e.which||38==e.which||40==e.which?e.preventDefault():i&&i.keyup(e);c()},b=function(e){if(e.clipboardData||e.originalEvent.clipboardData)var t=(e.originalEvent||e).clipboardData.getData("text/plain");else window.clipboardData&&(t=window.clipboardData.getData("Text"));var n=h(t);n.length>1&&(r.add(n,!0),e.preventDefault())},m=function(e){if(e.target.parentNode&&e.target.parentNode.classList.contains("jtags")&&(e.target.classList.contains("jtags_label")||e.target.classList.contains("jtags_error"))){var t=e.target.getBoundingClientRect();t.width-(e.clientX-t.left)<16&&r.remove(e.target)}},v=function(){t.classList.contains("jtags-focus")||(t.children.length&&!r.getValue(t.children.length-1)||o()||l(""),"function"==typeof r.options.onfocus&&r.options.onfocus(t,r,r.getValue()),t.classList.add("jtags-focus"))},y=function(){if(t.classList.contains("jtags-focus")){i&&i.close();for(var e=0;e<t.children.length-1;e++)r.getValue(e)||t.removeChild(t.children[e]);u(),t.classList.remove("jtags-focus"),"function"==typeof r.options.onblur&&r.options.onblur(t,r,r.getValue())}};return"touchend"in document.documentElement===!0?t.addEventListener("touchend",m):t.addEventListener("mouseup",m),t.addEventListener("keydown",p),t.addEventListener("keyup",g),t.addEventListener("paste",b),t.addEventListener("focus",v),t.addEventListener("blur",y),t.setAttribute("contenteditable",!0),t.classList.add("jtags"),r.setOptions(n),"function"==typeof r.options.onload&&r.options.onload(t,r),t.change=r.setValue,t.val=function(e){if(void 0===e)return r.getValue();r.setValue(e)},t.tags=r,r},e.toolbar=function(t,n){var r={options:{}},o={app:null,container:!1,badge:!1,title:!1,responsive:!1,items:[]};for(var i in o)n&&n.hasOwnProperty(i)?r.options[i]=n[i]:r.options[i]=o[i];!t&&n.app&&n.app.el&&(t=document.createElement("div"),n.app.el.appendChild(t));var a=document.createElement("div");a.classList.add("jtoolbar-item"),a.classList.add("jtoolbar-arrow");var s=document.createElement("div");s.classList.add("jtoolbar-floating"),a.appendChild(s),r.selectItem=function(e){for(var t=u.children,n=0;n<t.length;n++)e!=t[n]&&t[n].classList.remove("jtoolbar-selected");e.classList.add("jtoolbar-selected")},r.hide=function(){e.animation.slideBottom(t,0,(function(){t.style.display="none"}))},r.show=function(){t.style.display="",e.animation.slideBottom(t,1)},r.get=function(){return t},r.setBadge=function(e,t){u.children[e].children[1].firstChild.innerHTML=t},r.destroy=function(){toolbar.remove(),t.innerHTML=""};var l=function(){this.classList.contains("jtoolbar-active")?this.classList.remove("jtoolbar-active"):this.classList.add("jtoolbar-active")};r.create=function(n){u.innerHTML="";for(var o=0;o<n.length;o++){var i=document.createElement("div");if(i.classList.add("jtoolbar-item"),n[o].width&&(i.style.width=parseInt(n[o].width)+"px"),n[o].k&&(i.k=n[o].k),n[o].tooltip&&i.setAttribute("title",n[o].tooltip),n[o].id&&i.setAttribute("id",n[o].id),n[o].state&&(i.toggleState=l),n[o].active&&i.classList.add("jtoolbar-active"),"select"==n[o].type||"dropdown"==n[o].type)e.picker(i,n[o]);else if("divisor"==n[o].type)i.classList.add("jtoolbar-divisor");else if("label"==n[o].type)i.classList.add("jtoolbar-label"),i.innerHTML=n[o].content;else{var a=document.createElement("i");if("undefined"===typeof n[o].class)a.classList.add("material-icons");else for(var s=n[o].class.split(" "),c=0;c<s.length;c++)a.classList.add(s[c]);if(a.innerHTML=n[o].content?n[o].content:"",i.appendChild(a),1==r.options.badge){var d=document.createElement("div");d.classList.add("jbadge");var h=document.createElement("div");h.innerHTML=n[o].badge?n[o].badge:"",d.appendChild(h),i.appendChild(d)}if(n[o].title)if(1==r.options.title){var f=document.createElement("span");f.innerHTML=n[o].title,i.appendChild(f)}else i.setAttribute("title",n[o].title);r.options.app&&n[o].route&&(i.route=n[o].route,i.onclick=function(){r.options.app.pages(this.route)},r.options.app.pages(n[o].route,{toolbarItem:i,closed:!0}))}n[o].onclick&&(i.onclick=n[o].onclick.bind(n[o],t,r,i)),u.appendChild(i)}r.refresh()},r.open=function(){a.classList.add("jtoolbar-arrow-selected"),s.getBoundingClientRect().bottom>window.innerHeight?s.style.bottom="0":s.style.removeProperty("bottom"),s.style.right="0",a.children[0].focus(),e.tracking(r,!0)},r.close=function(){a.classList.remove("jtoolbar-arrow-selected"),e.tracking(r,!1)},r.refresh=function(){if(1==r.options.responsive){for(a.remove();s.firstChild;)u.appendChild(s.firstChild);for(var e=t.parentNode.offsetWidth-60;e<u.offsetWidth;)u.lastChild&&s.insertBefore(u.lastChild,s.firstChild);s.children.length>0&&u.appendChild(a)}},t.onclick=function(t){var n=e.findElement(t.target,"jtoolbar-item");n&&r.selectItem(n),t.target.classList.contains("jtoolbar-arrow")&&r.open()},window.addEventListener("resize",(function(){r.refresh()})),t.classList.add("jtoolbar"),t.innerHTML="",1==r.options.container&&t.classList.add("jtoolbar-container");var u=document.createElement("div");return t.appendChild(u),r.options.app&&t.classList.add("jtoolbar-mobile"),r.create(r.options.items),t.toolbar=r,r},e.validations={},e.validations.email=function(e){var t=new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);return!(!e||!t.test(e))},e.validations.length=function(e,t){var n=t.getAttribute("data-length")||5;return e.length>=n},e.validations.required=function(e){return!!e.trim()},e.validations.number=function(t,n){return e.isNumber(t)},e.validations.date=function(e,t){if(">="==t.operator)return e>=t.reference},e}()},function(e,t){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},writable:!0,configurable:!0})},function(e,t,n){"use strict";(function(e){var r=n(29),o=n(30),i=n(31);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),o=(e=s(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?s(e,0):h(e,t);if("Buffer"===t.type&&i(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=s(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,o);if("number"===typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,o){var i,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var c=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(n+l>s&&(n=s-l),i=n;i>=0;i--){for(var d=!0,h=0;h<l;h++)if(u(e,i+h)!==u(t,h)){d=!1;break}if(d)return i}return-1}function y(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function j(e,t,n,r){return Y(U(t,e.length-n),e,n,r)}function x(e,t,n,r){return Y(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return x(e,t,n,r)}function C(e,t,n,r){return Y(z(t),e,n,r)}function _(e,t,n,r){return Y(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,l,u=e[o],c=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128===(192&(i=e[o+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[o+1],a=e[o+2],128===(192&i)&&128===(192&a)&&(l=(15&u)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128===(192&i)&&128===(192&a)&&128===(192&s)&&(l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),o+=d}return function(e){var t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=O));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"===typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,o){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),u=this.slice(r,o),c=e.slice(t,n),d=0;d<s;++d)if(u[d]!==c[d]){i=u[d],a=c[d];break}return i<a?-1:a<i?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return j(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function T(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=H(e[i]);return o}function M(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function L(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function P(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,i){return i||P(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,i){return i||P(e,0,n,8),o.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var o=t-e;n=new l(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},l.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);I(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);I(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},l.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=l.isBuffer(e)?e:U(new l(e,r).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function z(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function Y(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(11))},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),c=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===s&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,l[c++]=255&t);1===s&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,l=n-o;s<l;s+=a)i.push(c(e,s,s+a>l?l:s+a));1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?o-1:0,h=n?-1:1,f=e[t+d];for(d+=h,i=f&(1<<-c)-1,f>>=-c,c+=s;c>0;i=256*i+e[t+d],d+=h,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=h,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),i-=u}return(f?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,d=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[n+f]=255&s,f+=p,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+f]=255&a,f+=p,a/=256,u-=8);e[n+f-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&"function"===typeof e[Symbol.iterator])return"Iterable";if("Custom"===t&&e.constructor!==Object&&e instanceof Object)return"Object";return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1)),o=a(n(2)),i=a(n(8));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function u(e){var t=Object.getOwnPropertyNames(e).length;return"".concat(t," ").concat(1!==t?"keys":"key")}var c=function(e){var t=e.data,n=l(e,["data"]);return r.default.createElement(i.default,s({},n,{data:t,nodeType:"Object",nodeTypeIndicator:"Error"===n.nodeType?"Error()":"{}",createItemString:u,expandable:Object.getOwnPropertyNames(t).length>0}))};c.propTypes={data:o.default.object,nodeType:o.default.string.isRequired};var d=c;t.default=d},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function i(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return"Object"===e?Object.keys(t).length:"Array"===e?t.length:1/0}function l(e){return"function"===typeof e.set}function u(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;if("Object"===e){var s=Object.getOwnPropertyNames(t);n&&s.sort(!0===n?void 0:n),r={entries:(s=s.slice(i,a+1)).map((function(e){return{key:e,value:t[e]}}))}}else if("Array"===e)r={entries:t.slice(i,a+1).map((function(e,t){return{key:t+i,value:e}}))};else{var u,c=0,d=[],h=!0,f=l(t),p=o(t);try{for(p.s();!(u=p.n()).done;){var g=u.value;if(c>a){h=!1;break}i<=c&&(f&&Array.isArray(g)?"string"===typeof g[0]||"number"===typeof g[0]?d.push({key:g[0],value:g[1]}):d.push({key:"[entry ".concat(c,"]"),value:{"[key]":g[0],"[value]":g[1]}}):d.push({key:c,value:g})),c++}}catch(b){p.e(b)}finally{p.f()}r={hasMore:!h,entries:d}}return r}function c(e,t,n){for(var r=[];t-e>n*n;)n*=n;for(var o=e;o<=t;o+=n)r.push({from:o,to:Math.min(t,o+n-1)});return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,l=u.bind(null,e,t,n);if(!o)return l().entries;var d,h=a<1/0,f=Math.min(a-i,s(e,t));if("Iterable"!==e){if(f<=o||o<7)return l(i,a).entries}else if(f<=o&&!h)return l(i,a).entries;if("Iterable"===e){var p=l(i,i+o-1),g=p.hasMore,b=p.entries;d=g?[].concat(r(b),r(c(i+o,i+2*o-1,o))):b}else d=h?c(i,a,o):[].concat(r(l(0,o-5).entries),r(c(o-4,f-5,o)),r(l(f-4,f-1).entries));return d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1)),o=a(n(2)),i=a(n(13));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,n,o,a=d(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),g(f(t=a.call(this,e)),"handleClick",(function(){t.setState({expanded:!t.state.expanded})})),t.state={expanded:!1},t}return t=s,(n=[{key:"render",value:function(){var e=this.props,t=e.styling,n=e.from,o=e.to,a=e.renderChildNodes,s=e.nodeType;return this.state.expanded?r.default.createElement("div",t("itemRange",this.state.expanded),a(this.props,n,o)):r.default.createElement("div",l({},t("itemRange",this.state.expanded),{onClick:this.handleClick}),r.default.createElement(i.default,{nodeType:s,styling:t,expanded:!1,onClick:this.handleClick,arrowStyle:"double"}),"".concat(n," ... ").concat(o))}}])&&u(t.prototype,n),o&&u(t,o),s}(r.default.Component);t.default=b,g(b,"propTypes",{styling:o.default.func.isRequired,from:o.default.number.isRequired,to:o.default.number.isRequired,renderChildNodes:o.default.func.isRequired,nodeType:o.default.string.isRequired})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1)),o=a(n(2)),i=a(n(8));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function u(e){return"".concat(e.length," ").concat(1!==e.length?"items":"item")}var c=function(e){var t=e.data,n=l(e,["data"]);return r.default.createElement(i.default,s({},n,{data:t,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:u,expandable:t.length>0}))};c.propTypes={data:o.default.array};var d=c;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(1)),o=i(n(8));function i(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=0,r=!1;if(Number.isSafeInteger(e.size))n=e.size;else{var o,i=s(e);try{for(i.s();!(o=i.n()).done;){o.value;if(t&&n+1>t){r=!0;break}n+=1}}catch(a){i.e(a)}finally{i.f()}}return"".concat(r?">":"").concat(n," ").concat(1!==n?"entries":"entry")}var c=function(e){var t=a({},e);return r.default.createElement(o.default,a({},t,{nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:u}))};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(1)),o=i(n(2));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e){var t=e.nodeType,n=e.styling,o=e.labelRenderer,i=e.keyPath,s=e.valueRenderer,l=e.value,u=e.valueGetter,c=void 0===u?function(e){return e}:u;return r.default.createElement("li",n("value",t,i),r.default.createElement("label",n(["label","valueLabel"],t,i),o(i,t,!1,!1)),r.default.createElement("span",n("valueText",t,i),s.apply(void 0,[c(l),l].concat(a(i)))))};l.propTypes={nodeType:o.default.string.isRequired,styling:o.default.func.isRequired,labelRenderer:o.default.func.isRequired,keyPath:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.number]).isRequired).isRequired,valueRenderer:o.default.func.isRequired,value:o.default.any,valueGetter:o.default.func};var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(14),o=function(e){return e&&e.__esModule?e:{default:e}}(n(92));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e){return{String:e.STRING_COLOR,Date:e.DATE_COLOR,Number:e.NUMBER_COLOR,Boolean:e.BOOLEAN_COLOR,Null:e.NULL_COLOR,Undefined:e.UNDEFINED_COLOR,Function:e.FUNCTION_COLOR,Symbol:e.SYMBOL_COLOR}},u=(0,r.createStyling)((function(e){var t=function(e){return{BACKGROUND_COLOR:e.base00,TEXT_COLOR:e.base07,STRING_COLOR:e.base0B,DATE_COLOR:e.base0B,NUMBER_COLOR:e.base09,BOOLEAN_COLOR:e.base09,NULL_COLOR:e.base08,UNDEFINED_COLOR:e.base08,FUNCTION_COLOR:e.base08,SYMBOL_COLOR:e.base08,LABEL_COLOR:e.base0D,ARROW_COLOR:e.base0D,ITEM_STRING_COLOR:e.base0B,ITEM_STRING_EXPANDED_COLOR:e.base03}}(e);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:t.BACKGROUND_COLOR},value:function(e,t,n){return{style:a(a({},e.style),{},{paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:n.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"})}},label:{display:"inline-block",color:t.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:function(e,n){return{style:a(a({},e.style),{},{color:l(t)[n]})}},itemRange:function(e,n){return{style:{paddingTop:n?0:"0.25em",cursor:"pointer",color:t.LABEL_COLOR}}},arrow:function(e,t,n){return{style:a(a({},e.style),{},{marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:n?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:n?"rotateZ(90deg)":"rotateZ(0deg)",transform:n?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"})}},arrowContainer:function(e,t){return{style:a(a({},e.style),{},{display:"inline-block",paddingRight:"0.5em",paddingLeft:"double"===t?"1em":0,cursor:"pointer"})}},arrowSign:{color:t.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:function(e,t,n,r,o){return{style:a(a({},e.style),{},{position:"relative",paddingTop:"0.25em",marginLeft:t.length>1?"0.875em":0,paddingLeft:o?0:"1.125em"})}},rootNode:{padding:0,margin:0},nestedNodeLabel:function(e,t,n,r,o){return{style:a(a({},e.style),{},{margin:0,padding:0,WebkitUserSelect:o?"inherit":"text",MozUserSelect:o?"inherit":"text",cursor:o?"pointer":"default"})}},nestedNodeItemString:function(e,n,r,o){return{style:a(a({},e.style),{},{paddingLeft:"0.5em",cursor:"default",color:o?t.ITEM_STRING_EXPANDED_COLOR:t.ITEM_STRING_COLOR})}},nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:function(e,t,n){return{style:a(a({},e.style),{},{padding:0,margin:0,listStyle:"none",display:n?"block":"none"})}},rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}}),{defaultBase16:o.default});t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var o=n(44);t.threezerotwofour=r(o);var i=n(45);t.apathy=r(i);var a=n(46);t.ashes=r(a);var s=n(47);t.atelierDune=r(s);var l=n(48);t.atelierForest=r(l);var u=n(49);t.atelierHeath=r(u);var c=n(50);t.atelierLakeside=r(c);var d=n(51);t.atelierSeaside=r(d);var h=n(52);t.bespin=r(h);var f=n(53);t.brewer=r(f);var p=n(54);t.bright=r(p);var g=n(55);t.chalk=r(g);var b=n(56);t.codeschool=r(b);var m=n(57);t.colors=r(m);var v=n(58);t.default=r(v);var y=n(59);t.eighties=r(y);var j=n(60);t.embers=r(j);var x=n(61);t.flat=r(x);var w=n(62);t.google=r(w);var C=n(63);t.grayscale=r(C);var _=n(64);t.greenscreen=r(_);var S=n(65);t.harmonic=r(S);var E=n(66);t.hopscotch=r(E);var O=n(67);t.isotope=r(O);var T=n(68);t.marrakesh=r(T);var A=n(69);t.mocha=r(A);var k=n(70);t.monokai=r(k);var M=n(71);t.ocean=r(M);var L=n(72);t.paraiso=r(L);var I=n(73);t.pop=r(I);var D=n(74);t.railscasts=r(D);var N=n(75);t.shapeshifter=r(N);var P=n(76);t.solarized=r(P);var R=n(77);t.summerfruit=r(R);var F=n(78);t.tomorrow=r(F);var B=n(79);t.tube=r(B);var H=n(80);t.twilight=r(H)},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"brewer",author:"timoth\xe9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},e.exports=t.default},function(e,t,n){"use strict";var r=n(82),o=n(86),i=[].slice,a=["keyword","gray","hex"],s={};Object.keys(o).forEach((function(e){s[i.call(o[e].labels).sort().join("")]=e}));var l={};function u(e,t){if(!(this instanceof u))return new u(e,t);if(t&&t in a&&(t=null),t&&!(t in o))throw new Error("Unknown model: "+t);var n,c;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof u)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"===typeof e){var d=r.get(e);if(null===d)throw new Error("Unable to parse color from string: "+e);this.model=d.model,c=o[this.model].channels,this.color=d.value.slice(0,c),this.valpha="number"===typeof d.value[c]?d.value[c]:1}else if(e.length){this.model=t||"rgb",c=o[this.model].channels;var h=i.call(e,0,c);this.color=f(h,c),this.valpha="number"===typeof e[c]?e[c]:1}else if("number"===typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var p=Object.keys(e);"alpha"in e&&(p.splice(p.indexOf("alpha"),1),this.valpha="number"===typeof e.alpha?e.alpha:0);var g=p.sort().join("");if(!(g in s))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=s[g];var b=o[this.model].labels,m=[];for(n=0;n<b.length;n++)m.push(e[b[n]]);this.color=f(m)}if(l[this.model])for(c=o[this.model].channels,n=0;n<c;n++){var v=l[this.model][n];v&&(this.color[n]=v(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function c(e,t,n){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(l[e]||(l[e]=[]))[t]=n})),e=e[0],function(r){var o;return arguments.length?(n&&(r=n(r)),(o=this[e]()).color[t]=r,o):(o=this[e]().color[t],n&&(o=n(o)),o)}}function d(e){return function(t){return Math.max(0,Math.min(e,t))}}function h(e){return Array.isArray(e)?e:[e]}function f(e,t){for(var n=0;n<t;n++)"number"!==typeof e[n]&&(e[n]=0);return e}u.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in r.to?this:this.rgb(),n=1===(t=t.round("number"===typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return r.to[t.model](n)},percentString:function(e){var t=this.rgb().round("number"===typeof e?e:1),n=1===t.valpha?t.color:t.color.concat(this.valpha);return r.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=o[this.model].channels,n=o[this.model].labels,r=0;r<t;r++)e[n[r]]=this.color[r];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new u(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new u(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:c("rgb",0,d(255)),green:c("rgb",1,d(255)),blue:c("rgb",2,d(255)),hue:c(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:c("hsl",1,d(100)),lightness:c("hsl",2,d(100)),saturationv:c("hsv",1,d(100)),value:c("hsv",2,d(100)),chroma:c("hcg",1,d(100)),gray:c("hcg",2,d(100)),white:c("hwb",1,d(100)),wblack:c("hwb",2,d(100)),cyan:c("cmyk",0,d(100)),magenta:c("cmyk",1,d(100)),yellow:c("cmyk",2,d(100)),black:c("cmyk",3,d(100)),x:c("xyz",0,d(100)),y:c("xyz",1,d(100)),z:c("xyz",2,d(100)),l:c("lab",0,d(100)),a:c("lab",1),b:c("lab",2),keyword:function(e){return arguments.length?new u(e):o[this.model].keyword(this.color)},hex:function(e){return arguments.length?new u(e):r.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return u.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),n=t.color[0];return n=(n=(n+e)%360)<0?360+n:n,t.color[0]=n,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var n=e.rgb(),r=this.rgb(),o=void 0===t?.5:t,i=2*o-1,a=n.alpha()-r.alpha(),s=((i*a===-1?i:(i+a)/(1+i*a))+1)/2,l=1-s;return u.rgb(s*n.red()+l*r.red(),s*n.green()+l*r.green(),s*n.blue()+l*r.blue(),n.alpha()*o+r.alpha()*(1-o))}},Object.keys(o).forEach((function(e){if(-1===a.indexOf(e)){var t=o[e].channels;u.prototype[e]=function(){if(this.model===e)return new u(this);if(arguments.length)return new u(arguments,e);var n="number"===typeof arguments[t]?t:this.valpha;return new u(h(o[this.model][e].raw(this.color)).concat(n),e)},u[e]=function(n){return"number"===typeof n&&(n=f(i.call(arguments),t)),new u(n,e)}}})),e.exports=u},function(e,t,n){var r=n(83),o=n(84),i={};for(var a in r)r.hasOwnProperty(a)&&(i[r[a]]=a);var s=e.exports={to:{},get:{}};function l(e,t,n){return Math.min(Math.max(t,e),n)}function u(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}s.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=s.get.hsl(e),n="hsl";break;case"hwb":t=s.get.hwb(e),n="hwb";break;default:t=s.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},s.get.rgb=function(e){if(!e)return null;var t,n,o,i=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(o=t[2],t=t[1],n=0;n<3;n++){var a=2*n;i[n]=parseInt(t.slice(a,a+2),16)}o&&(i[3]=parseInt(o,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(o=(t=t[1])[3],n=0;n<3;n++)i[n]=parseInt(t[n]+t[n],16);o&&(i[3]=parseInt(o+o,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)i[n]=parseInt(t[n+1],0);t[4]&&(i[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(i=r[t[1]])?(i[3]=1,i):null:null;for(n=0;n<3;n++)i[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(i[3]=parseFloat(t[4]))}for(n=0;n<3;n++)i[n]=l(i[n],0,255);return i[3]=l(i[3],0,1),i},s.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},s.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},s.to.hex=function(){var e=o(arguments);return"#"+u(e[0])+u(e[1])+u(e[2])+(e[3]<1?u(Math.round(255*e[3])):"")},s.to.rgb=function(){var e=o(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},s.to.rgb.percent=function(){var e=o(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},s.to.hsl=function(){var e=o(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},s.to.hwb=function(){var e=o(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},s.to.keyword=function(e){return i[e.slice(0,3)]}},function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,n){"use strict";var r=n(85),o=Array.prototype.concat,i=Array.prototype.slice,a=e.exports=function(e){for(var t=[],n=0,a=e.length;n<a;n++){var s=e[n];r(s)?t=o.call(t,i.call(s)):t.push(s)}return t};a.wrap=function(e){return function(){return e(a(arguments))}}},function(e,t){e.exports=function(e){return!(!e||"string"===typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},function(e,t,n){var r=n(15),o=n(88),i={};Object.keys(r).forEach((function(e){i[e]={},Object.defineProperty(i[e],"channels",{value:r[e].channels}),Object.defineProperty(i[e],"labels",{value:r[e].labels});var t=o(e);Object.keys(t).forEach((function(n){var r=t[n];i[e][n]=function(e){var t=function(t){if(void 0===t||null===t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"===typeof n)for(var r=n.length,o=0;o<r;o++)n[o]=Math.round(n[o]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(r),i[e][n].raw=function(e){var t=function(t){return void 0===t||null===t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)}))})),e.exports=i},function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,n){var r=n(15);function o(e){var t=function(){for(var e={},t=Object.keys(r),n=t.length,o=0;o<n;o++)e[t[o]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var o=n.pop(),i=Object.keys(r[o]),a=i.length,s=0;s<a;s++){var l=i[s],u=t[l];-1===u.distance&&(u.distance=t[o].distance+1,u.parent=o,n.unshift(l))}return t}function i(e,t){return function(n){return t(e(n))}}function a(e,t){for(var n=[t[e].parent,e],o=r[t[e].parent][e],a=t[e].parent;t[a].parent;)n.unshift(t[a].parent),o=i(r[t[a].parent][a],o),a=t[a].parent;return o.conversion=n,o}e.exports=function(e){for(var t=o(e),n={},r=Object.keys(t),i=r.length,s=0;s<i;s++){var l=r[s];null!==t[l].parent&&(n[l]=a(l,t))}return n}},function(e,t,n){(function(t){var n="__lodash_placeholder__",r=32,o=1/0,i=NaN,a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",r],["partialRight",64],["rearg",256]],s="[object Function]",l="[object GeneratorFunction]",u=/^\s+|\s+$/g,c=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,d=/\{\n\/\* \[wrapped with (.+)\] \*/,h=/,? & /,f=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,g=/^\[object .+?Constructor\]$/,b=/^0o[0-7]+$/i,m=/^(?:0|[1-9]\d*)$/,v=parseInt,y="object"==typeof t&&t&&t.Object===Object&&t,j="object"==typeof self&&self&&self.Object===Object&&self,x=y||j||Function("return this")();function w(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function C(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!==t)return function(e,t,n,r){var o=e.length,i=n+(r?1:-1);for(;r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,_,n);var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function _(e){return e!==e}function S(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&r++;return r}function E(e,t){for(var r=-1,o=e.length,i=0,a=[];++r<o;){var s=e[r];s!==t&&s!==n||(e[r]=n,a[i++]=r)}return a}var O=Function.prototype,T=Object.prototype,A=x["__core-js_shared__"],k=function(){var e=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),M=O.toString,L=T.hasOwnProperty,I=T.toString,D=RegExp("^"+M.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=Object.create,P=Math.max,R=Math.min,F=function(){var e=q(Object,"defineProperty"),t=q.name;return t&&t.length>2?e:void 0}();function B(e){return ne(e)?N(e):{}}function H(e){return!(!ne(e)||(t=e,k&&k in t))&&(function(e){var t=ne(e)?I.call(e):"";return t==s||t==l}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?D:g).test(function(e){if(null!=e){try{return M.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e));var t}function U(e,t,n,r){for(var o=-1,i=e.length,a=n.length,s=-1,l=t.length,u=P(i-a,0),c=Array(l+u),d=!r;++s<l;)c[s]=t[s];for(;++o<a;)(d||o<i)&&(c[n[o]]=e[o]);for(;u--;)c[s++]=e[o++];return c}function z(e,t,n,r){for(var o=-1,i=e.length,a=-1,s=n.length,l=-1,u=t.length,c=P(i-s,0),d=Array(c+u),h=!r;++o<c;)d[o]=e[o];for(var f=o;++l<u;)d[f+l]=t[l];for(;++a<s;)(h||o<i)&&(d[f+n[a]]=e[o++]);return d}function Y(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=B(e.prototype),r=e.apply(n,t);return ne(r)?r:n}}function W(e,t,n,r,o,i,a,s,l,u){var c=128&t,d=1&t,h=2&t,f=24&t,p=512&t,g=h?void 0:Y(e);return function b(){for(var m=arguments.length,v=Array(m),y=m;y--;)v[y]=arguments[y];if(f)var j=G(b),w=S(v,j);if(r&&(v=U(v,r,o,f)),i&&(v=z(v,i,a,f)),m-=w,f&&m<u){var C=E(v,j);return V(e,t,W,b.placeholder,n,v,C,s,l,u-m)}var _=d?n:this,O=h?_[e]:e;return m=v.length,s?v=Z(v,s):p&&m>1&&v.reverse(),c&&l<m&&(v.length=l),this&&this!==x&&this instanceof b&&(O=g||Y(O)),O.apply(_,v)}}function V(e,t,n,o,i,a,s,l,u,c){var d=8&t;t|=d?r:64,4&(t&=~(d?64:r))||(t&=-4);var h=n(e,t,i,d?a:void 0,d?s:void 0,d?void 0:a,d?void 0:s,l,u,c);return h.placeholder=o,$(h,e,t)}function X(e,t,n,o,i,a,s,l){var u=2&t;if(!u&&"function"!=typeof e)throw new TypeError("Expected a function");var c=o?o.length:0;if(c||(t&=-97,o=i=void 0),s=void 0===s?s:P(oe(s),0),l=void 0===l?l:oe(l),c-=i?i.length:0,64&t){var d=o,h=i;o=i=void 0}var f=[e,t,n,o,i,d,h,a,s,l];if(e=f[0],t=f[1],n=f[2],o=f[3],i=f[4],!(l=f[9]=null==f[9]?u?0:e.length:P(f[9]-c,0))&&24&t&&(t&=-25),t&&1!=t)p=8==t||16==t?function(e,t,n){var r=Y(e);return function o(){for(var i=arguments.length,a=Array(i),s=i,l=G(o);s--;)a[s]=arguments[s];var u=i<3&&a[0]!==l&&a[i-1]!==l?[]:E(a,l);return(i-=u.length)<n?V(e,t,W,o.placeholder,void 0,a,u,void 0,void 0,n-i):w(this&&this!==x&&this instanceof o?r:e,this,a)}}(e,t,l):t!=r&&33!=t||i.length?W.apply(void 0,f):function(e,t,n,r){var o=1&t,i=Y(e);return function t(){for(var a=-1,s=arguments.length,l=-1,u=r.length,c=Array(u+s),d=this&&this!==x&&this instanceof t?i:e;++l<u;)c[l]=r[l];for(;s--;)c[l++]=arguments[++a];return w(d,o?n:this,c)}}(e,t,n,o);else var p=function(e,t,n){var r=1&t,o=Y(e);return function t(){return(this&&this!==x&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,n);return $(p,e,t)}function G(e){return e.placeholder}function q(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return H(n)?n:void 0}function K(e){var t=e.match(d);return t?t[1].split(h):[]}function J(e,t){var n=t.length,r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(c,"{\n/* [wrapped with "+t+"] */\n")}function Q(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||m.test(e))&&e>-1&&e%1==0&&e<t}function Z(e,t){for(var n=e.length,r=R(t.length,n),o=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e);r--;){var i=t[r];e[r]=Q(i,n)?o[i]:void 0}return e}var $=F?function(e,t,n){var r,o=t+"";return F(e,"toString",{configurable:!0,enumerable:!1,value:(r=J(o,ee(K(o),n)),function(){return r})})}:function(e){return e};function ee(e,t){return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(a,(function(n){var r="_."+n[0];t&n[1]&&!C(e,r)&&e.push(r)})),e.sort()}function te(e,t,n){var r=X(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=te.placeholder,r}function ne(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function re(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==I.call(e)}(e))return i;if(ne(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ne(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var n=p.test(e);return n||b.test(e)?v(e.slice(2),n?2:8):f.test(e)?i:+e}(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function oe(e){var t=re(e),n=t%1;return t===t?n?t-n:t:0}te.placeholder={},e.exports=te}).call(this,n(11))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.yuv2rgb=function(e){var t,n,r,o=e[0],i=e[1],a=e[2];return t=1*o+0*i+1.13983*a,n=1*o+-.39465*i+-.5806*a,r=1*o+2.02311*i+0*a,t=Math.min(Math.max(0,t),1),n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),[255*t,255*n,255*r]},t.rgb2yuv=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[.299*t+.587*n+.114*r,-.14713*t+-.28886*n+.436*r,.615*t+-.51499*n+-.10001*r]}},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.r(t);var a=n(5),s=n.n(a);function l(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(void 0)}))}}var c=n(1),d=n.n(c),h=n(9),f=n.n(h);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=g(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){return!t||"object"!==S(t)&&"function"!==typeof t?x(e):t}function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}var T=n(3),A=n.n(T),k=n(0),M=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{children:this.props.value})}}],[{key:"preprocess",value:function(){var e=u(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(d.a.Component),L=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,null,[{key:"preprocess",value:function(){var e=u(s.a.mark((function e(t,n){var r,o,i,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n+"/"+t,e.next=3,fetch(r);case 3:if((o=e.sent).ok){e.next=6;break}throw new Error("HTTP error! status: ".concat(o.status));case 6:return e.next=8,o.blob();case 8:return i=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new FileReader;n.addEventListener("load",(function(){e(n.result)}),!1),n.onerror=function(){return t(a)},n.readAsDataURL(i)})));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(M),I=n(2),D=n.n(I);function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var P=Object.freeze({START:"start",PAUSE:"pause",STOP:"stop",NONE:"none"}),R=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).init=function(){try{return n.leftchannel=[],n.rightchannel=[],n.recorder=null,n.recording=!1,n.recordingLength=0,n.volume=null,n.audioInput=null,n.sampleRate=null,n.AudioContext=window.AudioContext||window.webkitAudioContext,n.context=null,n.analyser=null,n.canvas=n.canvasRef.current,n.canvasCtx=n.canvas.getContext("2d"),n.stream=null,n.tested=!1,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,Promise.resolve()}catch(e){return Promise.reject(e)}},n.getStream=function(e){return e||(e={audio:!0,video:!1}),navigator.mediaDevices.getUserMedia(e)},n.setUpRecording=function(){n.context=new n.AudioContext,n.sampleRate=n.context.sampleRate,n.volume=n.context.createGain(),n.audioInput=n.context.createMediaStreamSource(n.stream),n.analyser=n.context.createAnalyser(),n.audioInput.connect(n.analyser);n.recorder=n.context.createScriptProcessor(2048,2,2),n.analyser.connect(n.recorder),n.recorder.connect(n.context.destination);var e=N(n);n.recorder.onaudioprocess=function(t){if(e.recording){var n=t.inputBuffer.getChannelData(0),r=t.inputBuffer.getChannelData(1);e.tested||(e.tested=!0,n.reduce((function(e,t){return e+t}))||(console.log("Error: There seems to be an issue with your Mic"),e.stop(),e.stream.getTracks().forEach((function(e){e.stop()})),e.context.close())),e.leftchannel.push(new Float32Array(n)),e.rightchannel.push(new Float32Array(r)),e.recordingLength+=2048}},n.visualize()},n.mergeBuffers=function(e,t){for(var n=new Float32Array(t),r=0,o=e.length,i=0;i<o;i++){var a=e[i];n.set(a,r),r+=a.length}return n},n.interleave=function(e,t){for(var n=e.length+t.length,r=new Float32Array(n),o=0,i=0;i<n;)r[i++]=e[o],r[i++]=t[o],o++;return r},n.writeUTFBytes=function(e,t,n){for(var r=n.length,o=0;o<r;o++)e.setUint8(t+o,n.charCodeAt(o))},n.visualize=function(){var e=n.props,t=e.backgroundColor,r=e.foregroundColor;if(n.WIDTH=n.canvas.width,n.HEIGHT=n.canvas.height,n.CENTERX=n.canvas.width/2,n.CENTERY=n.canvas.height/2,n.analyser){n.analyser.fftSize=2048;var o=n.analyser.fftSize,i=new Uint8Array(o);n.canvasCtx.clearRect(0,0,n.WIDTH,n.HEIGHT);var a=N(n);!function e(){a.drawVisual=requestAnimationFrame(e),a.analyser.getByteTimeDomainData(i),a.canvasCtx.fillStyle=t,a.canvasCtx.fillRect(0,0,a.WIDTH,a.HEIGHT),a.canvasCtx.lineWidth=2,a.canvasCtx.strokeStyle=r,a.canvasCtx.beginPath();for(var n=1*a.WIDTH/o,s=0,l=0;l<o;l++){var u=i[l]/128*a.HEIGHT/2;0===l?a.canvasCtx.moveTo(s,u):a.canvasCtx.lineTo(s,u),s+=n}a.canvasCtx.lineTo(a.canvas.width,a.canvas.height/2),a.canvasCtx.stroke()}()}},n.setupMic=function(){try{var e=function(){n.setUpRecording()},t=function(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}((function(){return Promise.resolve(n.getStream()).then((function(e){window.stream=n.stream=e}))}),(function(e){console.log("Error: Issue getting mic",e)}));return Promise.resolve(t&&t.then?t.then(e):e())}catch(r){return Promise.reject(r)}},n.start=function(){try{return Promise.resolve(n.setupMic()).then((function(){n.recording=!0,n.leftchannel.length=n.rightchannel.length=0,n.recordingLength=0}))}catch(e){return Promise.reject(e)}},n.stop=function(){var e=n.props,t=e.onStop,r=e.type;n.recording=!1,n.closeMic(),n.leftBuffer=n.mergeBuffers(n.leftchannel,n.recordingLength),n.rightBuffer=n.mergeBuffers(n.rightchannel,n.recordingLength);var o=n.interleave(n.leftBuffer,n.rightBuffer),i=new ArrayBuffer(44+2*o.length),a=new DataView(i);n.writeUTFBytes(a,0,"RIFF"),a.setUint32(4,44+2*o.length,!0),n.writeUTFBytes(a,8,"WAVE"),n.writeUTFBytes(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,2,!0),a.setUint32(24,n.sampleRate,!0),a.setUint32(28,4*n.sampleRate,!0),a.setUint16(32,4,!0),a.setUint16(34,16,!0),n.writeUTFBytes(a,36,"data"),a.setUint32(40,2*o.length,!0);for(var s=o.length,l=44,u=0;u<s;u++)a.setInt16(l,32767*o[u],!0),l+=2;var c=new Blob([a],{type:r}),d=URL.createObjectURL(c);t&&t({blob:c,url:d,type:r})},n.pause=function(){n.recording=!1,n.closeMic()},n.resume=function(){n.setupMic(),n.recording=!0},n.closeMic=function(){n.stream.getAudioTracks().forEach((function(e){e.stop()})),n.audioInput.disconnect(0),n.analyser.disconnect(0),n.recorder.disconnect(0)},n.canvasRef=d.a.createRef(),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.init()},o.componentDidUpdate=function(e,t){var n=this.props.state;this.checkState(e.state,n)},o.checkState=function(e){switch(e){case P.START:this.doIfState(P.PAUSE,this.pause),this.doIfState(P.STOP,this.stop);break;case P.PAUSE:this.doIfState(P.START,this.resume),this.doIfState(P.STOP,this.stop);break;case P.STOP:default:this.doIfState(P.START,this.start)}},o.doIfState=function(e,t){this.props.state==e&&t&&t()},o.componentWillUnmount=function(){},o.render=function(){var e=this.props,t=e.canvasWidth,n=e.canvasHeight;return d.a.createElement("div",{className:"audio-react-recorder"},d.a.createElement("canvas",{ref:this.canvasRef,width:t,height:n,className:"audio-react-recorder__canvas"}))},r}(d.a.Component);R.propTypes={state:D.a.string,type:D.a.string.isRequired,backgroundColor:D.a.string,foregroundColor:D.a.string,canvasWidth:D.a.oneOfType([D.a.string,D.a.number]),canvasHeight:D.a.oneOfType([D.a.string,D.a.number]),onStop:D.a.func},R.defaultProps={state:P.NONE,type:"audio/wav",backgroundColor:"rgb(200, 200, 200)",foregroundColor:"rgb(0, 0, 0)",canvasWidth:500,canvasHeight:300};var F=R;function B(e){for(var t=0;e>1024;)e/=1024,t++;var n=["B","KB","MB","GB","PB"][t];return e.toFixed(1)+" "+n}function H(e){if(e<0)var t=[52,152,219];else t=[231,76,60];return"rgb("+(n=function(e,t,n){e>1&&(e=1),e=Math.sqrt(e);var r,o=[0,0,0];for(r=0;r<3;r++)o[r]=Math.round(t[r]*(1-e)+n[r]*e);return o}(Math.abs(e),[255,255,255],t))[0]+", "+n[1]+", "+n[2]+")";var n}function U(e,t,n,r,o){var i=r/o,a=t/n,s=0,l=0;return(e?i>a:i<a)?l=(s=t)/i:s=(l=n)*i,{width:s,height:l,x:(t-s)/2,y:(n-l)/2}}var z=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).start=function(){r.setState({recordState:P.START})},r.stop=function(){r.setState({recordState:P.STOP})},r.onStop=function(e){var t=new FileReader;t.onload=function(e){this.props.handleChange(e.target.result)}.bind(x(r)),t.readAsDataURL(e.blob)},r.state={recordState:P.STOP},r.src=null,r.key=0,r.uploader=d.a.createRef(),r.openFileUpload=r.openFileUpload.bind(x(r)),r.load_preview_from_files=r.load_preview_from_files.bind(x(r)),r.load_preview_from_upload=r.load_preview_from_upload.bind(x(r)),r.load_preview_from_drop=r.load_preview_from_drop.bind(x(r)),r}return j(n,[{key:"openFileUpload",value:function(){this.uploader.current.click()}},{key:"render",value:function(){if(null!==this.props.value)return this.props.value!==this.src&&(this.key+=1,this.src=this.props.value),Object(k.jsxs)("div",{className:"input_audio",children:[Object(k.jsx)("audio",{controls:!0,children:Object(k.jsx)("source",{src:this.props.value})},this.key),null!==this.props.interpretation&&Object(k.jsx)("div",{class:"interpret_range",children:this.props.interpretation.map((function(e){return Object(k.jsx)("div",{style:{"background-color":H(e)}})}))})]});if("microphone"===this.props.source)return Object(k.jsxs)("div",{className:"input_audio",children:[Object(k.jsx)(F,{state:this.state.recordState,onStop:this.onStop}),this.state.recordState===P.STOP?Object(k.jsx)("button",{className:"start",onClick:this.start,children:"Record"}):Object(k.jsx)("button",{className:"stop",onClick:this.stop,children:"Recording..."})]});if("upload"===this.props.source){var e=function(e){e.preventDefault(),e.stopPropagation()};return Object(k.jsxs)("div",{className:"input_image",onDrag:e,onDragStart:e,onDragEnd:e,onDragOver:e,onDragEnter:e,onDragLeave:e,onDrop:e,children:[Object(k.jsxs)("div",{className:"upload_zone",onClick:this.openFileUpload,onDrop:this.load_preview_from_drop,children:["Drop Audio Here",Object(k.jsx)("br",{}),"- or -",Object(k.jsx)("br",{}),"Click to Upload"]}),Object(k.jsx)("input",{className:"hidden_upload",type:"file",ref:this.uploader,onChange:this.load_preview_from_upload,accept:"audio/*",style:{display:"none"}})]})}}},{key:"load_preview_from_drop",value:function(e){this.load_preview_from_files(e.dataTransfer.files)}},{key:"load_preview_from_upload",value:function(e){this.load_preview_from_files(e.target.files)}},{key:"load_preview_from_files",value:function(e){if(e.length&&window.FileReader){var t=this,n=new FileReader;n.readAsDataURL(e[0]),n.onloadend=function(){t.props.handleChange(this.result)}}}}]),n}(d.a.Component),Y=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_audio_example",children:this.props.value})}}]),n}(L),W=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(x(r)),r}return j(n,[{key:"handleChange",value:function(e){var t=this.props.value;t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),this.props.handleChange(t)}},{key:"render",value:function(){var e=this;return Object(k.jsx)("div",{className:"input_checkbox_group",children:this.props.choices.map((function(t,n){return Object(k.jsxs)("div",{className:A()("checkbox_item",{selected:e.props.value.includes(t)}),onClick:e.handleChange.bind(e,t),children:[null===e.props.interpretation?Object(k.jsx)("div",{className:"checkbox",children:Object(k.jsxs)("svg",{className:"check",viewBox:"-10 -10 20 20",children:[Object(k.jsx)("line",{x1:"-7.5",y1:"0",x2:"-2.5",y2:"5"}),Object(k.jsx)("line",{x1:"-2.5",y1:"5",x2:"7.5",y2:"-7.5"})]})}):Object(k.jsxs)("div",{class:"interpretation",children:[Object(k.jsx)("div",{class:"interpretation_box",style:{backgroundColor:H(e.props.interpretation[n][0])}}),Object(k.jsx)("div",{class:"interpretation_box",style:{backgroundColor:H(e.props.interpretation[n][1])},children:Object(k.jsxs)("svg",{className:"interpret_check",viewBox:"-10 -10 20 20",children:[Object(k.jsx)("line",{x1:"-7.5",y1:"0",x2:"-2.5",y2:"5"}),Object(k.jsx)("line",{x1:"-2.5",y1:"5",x2:"7.5",y2:"-7.5"})]})})]}),t]},n)}))})}}]),n}(d.a.Component),V=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_checkbox_group_example",children:this.props.value.join(", ")})}}]),n}(M),X=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(x(r)),r}return j(n,[{key:"handleChange",value:function(){this.props.handleChange(!0!==this.props.value)}},{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_checkbox",children:Object(k.jsx)("div",{className:A()("checkbox_item",{selected:this.props.value}),onClick:this.handleChange,children:null===this.props.interpretation?Object(k.jsx)("div",{className:"checkbox",children:Object(k.jsxs)("svg",{className:"check",viewBox:"-10 -10 20 20",children:[Object(k.jsx)("line",{x1:"-7.5",y1:"0",x2:"-2.5",y2:"5"}),Object(k.jsx)("line",{x1:"-2.5",y1:"5",x2:"7.5",y2:"-7.5"})]})}):Object(k.jsxs)("div",{class:"interpretation",children:[Object(k.jsx)("div",{class:"interpretation_box",style:{backgroundColor:H(this.props.interpretation[0])}}),Object(k.jsx)("div",{class:"interpretation_box",style:{backgroundColor:H(this.props.interpretation[1])},children:Object(k.jsxs)("svg",{className:"interpret_check",viewBox:"-10 -10 20 20",children:[Object(k.jsx)("line",{x1:"-7.5",y1:"0",x2:"-2.5",y2:"5"}),Object(k.jsx)("line",{x1:"-2.5",y1:"5",x2:"7.5",y2:"-7.5"})]})})]})})})}}]),n}(d.a.Component),G=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_checkbox_example",children:JSON.stringify(this.props.value)})}}]),n}(M),q=n(6),K=n.n(q),J=(n(10),function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).componentDidMount=function(){this.el=K()(this.wrapper.current,this.getConfig()),this.el.onchange=this.handle_change},r.wrapper=d.a.createRef(),r.handleChange=r.handleChange.bind(x(r)),r.getConfig=r.getConfig.bind(x(r)),r}return j(n,[{key:"handleChange",value:function(e){this.props.handleChange(e)}},{key:"getConfig",value:function(){var e=this.props.col_count,t={};if(this.props.headers||this.props.datatype){for(var n=[],r=0;r<e;r++){var o={};if(this.props.datatype){var i="string"===typeof this.props.datatype?this.props.datatype:this.props.datatype[r];o.type={str:"text",bool:"checkbox",number:"numeric",date:"calendar"}[i]}this.props.headers&&(o.title=this.props.headers[r]),n.push(o)}t.columns=n}return t.data=this.props.value,t}},{key:"resetData",value:function(e){var t=[e.length,e[0].length],n=t[0],r=t[1],o=this.el.getData(),i=[o.length,o[0].length],a=i[0],s=i[1];a<n?this.el.insertRow(n-a):a>n&&this.el.deleteRow(0,a-n),s<r?this.el.insertColumn(r-s):s>r&&this.el.deleteColumn(0,s-r),this.el.setData(e)}},{key:"render",value:function(){return JSON.stringify(this.props.value)!==JSON.stringify(this.data)&&this.el&&(this.resetData(this.props.value),this.data=this.props.value),Object(k.jsx)("div",{className:"input_dataframe",children:Object(k.jsx)("div",{ref:this.wrapper})})}}]),n}(d.a.Component)),Q=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){var e,t=[],n=m(this.props.value.slice(0,3));try{for(n.s();!(e=n.n()).done;){var r=e.value,o=r.slice(0,3);r.length>3&&o.push("..."),t.push(o)}}catch(a){n.e(a)}finally{n.f()}if(this.props.value.length>3){var i=Array(t[0].length).fill("...");t.push(i)}return Object(k.jsx)("table",{className:"input_dataframe_example",children:Object(k.jsx)("tbody",{children:t.map((function(e){return Object(k.jsx)("tr",{children:e.map((function(e){return Object(k.jsx)("td",{children:e})}))})}))})})}}]),n}(M),Z=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(x(r)),r}return j(n,[{key:"handleChange",value:function(e){this.props.handleChange(e)}},{key:"render",value:function(){var e=this;return Object(k.jsx)("div",{className:"input_dropdown",children:null===this.props.interpretation?Object(k.jsxs)("div",{className:"dropdown inline-block relative",children:[Object(k.jsxs)("button",{className:"selector ",children:[Object(k.jsx)("span",{className:"current",children:this.props.value}),Object(k.jsxs)("svg",{className:"caret",viewBox:"0 0 20 20",children:[Object(k.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})," "]})]}),Object(k.jsx)("ul",{className:"dropdown_menu",children:this.props.choices.map((function(t,n){return Object(k.jsx)("li",{className:A()("dropdown_item",{selected:t===e.props.value}),onClick:e.handleChange.bind(e,t),children:t},n)}))})]}):Object(k.jsx)("div",{class:"interpretation",children:this.props.interpretation.map((function(t,n){return Object(k.jsx)("div",{class:"interpretation_box",style:{backgroundColor:H(t)},children:e.props.choices[n]},n)}))})})}}]),n}(d.a.Component),$=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_dropdown_example",children:this.props.value})}}]),n}(M),ee=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(x(r)),r.uploader=d.a.createRef(),r.openFileUpload=r.openFileUpload.bind(x(r)),r.load_preview_from_files=r.load_preview_from_files.bind(x(r)),r.load_preview_from_upload=r.load_preview_from_upload.bind(x(r)),r.load_preview_from_drop=r.load_preview_from_drop.bind(x(r)),r}return j(n,[{key:"handleChange",value:function(e){this.props.handleChange(e)}},{key:"openFileUpload",value:function(){this.uploader.current.click()}},{key:"render",value:function(){var e,t,n=function(e){e.preventDefault(),e.stopPropagation()};if(null!==this.props.value){if("single"===this.props.file_count){var r=this.props.value[0];e=r.name,t=r.size}else{e=this.props.value.length+" files.",t=0;var o,i=m(this.props.value);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(null===a.size){t=null;break}t+=a.size}}catch(s){i.e(s)}finally{i.f()}}return Object(k.jsx)("div",{className:"input_file",children:Object(k.jsxs)("div",{className:"file_preview_holder",children:[Object(k.jsx)("div",{className:"file_name",children:e}),Object(k.jsx)("div",{className:"file_size",children:null===t?"":B(t)})]})})}return Object(k.jsxs)("div",{className:"input_file",onDrag:n,onDragStart:n,onDragEnd:n,onDragOver:n,onDragEnter:n,onDragLeave:n,onDrop:n,children:[Object(k.jsxs)("div",{className:"upload_zone",onClick:this.openFileUpload,onDrop:this.load_preview_from_drop,children:["Drop File Here",Object(k.jsx)("br",{}),"- or -",Object(k.jsx)("br",{}),"Click to Upload"]}),Object(k.jsx)("input",{className:"hidden_upload",type:"file",multiple:"multiple"===this.props.file_count,webkitdirectory:"directory"===this.props.file_count,mozdirectory:"directory"===this.props.file_count,ref:this.uploader,onChange:this.load_preview_from_upload,style:{display:"none"}})]})}},{key:"load_preview_from_drop",value:function(e){this.load_preview_from_files(e.dataTransfer.files)}},{key:"load_preview_from_upload",value:function(e){this.load_preview_from_files(e.target.files)}},{key:"add_file_to_list",value:function(e,t,n){this.file_data.push({name:t.name,size:t.size,data:e.result,is_local_example:!1}),this.file_data.length===n&&this.handleChange(this.file_data)}},{key:"load_preview_from_files",value:function(e){if(e.length&&window.FileReader){this.file_data=[];var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=new FileReader;o.readAsDataURL(r),o.onloadend=this.add_file_to_list.bind(this,o,r,e.length)}}catch(i){n.e(i)}finally{n.f()}}}}]),n}(d.a.Component),te=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_file_example",children:this.props.value})}}]),n}(M),ne=n(16),re=n.n(ne);n(27);function oe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ie=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v(this,e),this.undoLimit=t,this.undoList=[],this.redoList=[],this.current=null,this.debug=n}return j(e,[{key:"getUndoLimit",value:function(){return this.undoLimit}},{key:"getCurrent",value:function(){return this.current}},{key:"keep",value:function(e){try{this.redoList=[],this.current&&this.undoList.push(this.current),this.undoList.length>this.undoLimit&&this.undoList.shift(),this.current=e}finally{this.print()}}},{key:"undo",value:function(){try{return this.current&&(this.redoList.push(this.current),this.redoList.length>this.undoLimit&&this.redoList.shift(),0===this.undoList.length&&(this.current=null)),this.undoList.length>0?(this.current=this.undoList.pop(),this.current):null}finally{this.print()}}},{key:"redo",value:function(){try{return this.redoList.length>0?(this.current&&this.undoList.push(this.current),this.current=this.redoList.pop(),this.current):null}finally{this.print()}}},{key:"canRedo",value:function(){return this.redoList.length>0}},{key:"canUndo",value:function(){return this.undoList.length>0||null!==this.current}},{key:"clear",value:function(){this.undoList=[],this.redoList=[],this.current=null,this.print()}},{key:"print",value:function(){this.debug&&console.log(this.undoList," -> "+this.current+" <- ",this.redoList.slice(0).reverse())}}]),e}(),ae=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},se=function(){var e,t="";for(e=0;e<32;e+=1)switch(e){case 8:case 20:t+="-",t+=(16*Math.random()|0).toString(16);break;case 12:t+="-",t+="4";break;case 16:t+="-",t+=(4*Math.random()|8).toString(16);break;default:t+=(16*Math.random()|0).toString(16)}return t},le=function(e){var t;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3==(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),"rgba("+[(t="0x"+t.join(""))>>16&255,t>>8&255,255&t].join(",")+",0.4)";throw new Error("Bad Hex")},ue=function(){function e(t){v(this,e),this._canvas=t}return j(e,[{key:"configureCanvas",value:function(e){}},{key:"doMouseUp",value:function(e){}},{key:"doMouseDown",value:function(e){}},{key:"doMouseMove",value:function(e){}},{key:"doMouseOut",value:function(e){}}]),e}(),ce=n(4).fabric,de=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),this._width=e.lineWidth,this._color=e.lineColor}},{key:"doMouseDown",value:function(e){this.isDown=!0;var t=this._canvas,n=t.getPointer(e.e),r=[n.x,n.y,n.x,n.y];this.line=new ce.Line(r,{strokeWidth:this._width,fill:this._color,stroke:this._color,originX:"center",originY:"center",selectable:!1,evented:!1}),this.head=new ce.Triangle({fill:this._color,left:n.x,top:n.y,originX:"center",originY:"center",height:3*this._width,width:3*this._width,selectable:!1,evented:!1,angle:90}),t.add(this.line),t.add(this.head)}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);this.line.set({x2:n.x,y2:n.y}),this.line.setCoords();var r=n.x-this.line.x1,o=n.y-this.line.y1;this.head.set({left:n.x,top:n.y,angle:90+180*Math.atan2(o,r)/Math.PI}),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1;var t=this._canvas;t.remove(this.line),t.remove(this.head);var n=new ce.Group([this.line,this.head]);t.add(n)}},{key:"doMouseOut",value:function(e){this.isDown=!1}}]),n}(ue),he={Circle:"circle",Line:"line",Arrow:"arrow",Pencil:"pencil",Rectangle:"rectangle",RectangleLabel:"rectangle-label",Select:"select",Pan:"pan",Highlighter:"highlighter",DefaultTool:"default-tool"},fe=(n(4).fabric,function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),t.discardActiveObject(),t.defaultCursor="pointer",t.renderAll()}}]),n}(ue)),pe=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=!1,t.selection=!0,t.forEachObject((function(e){e.selectable=e.evented=!0}))}}]),n}(ue),ge=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"configureCanvas",value:function(e){this._canvas.isDrawingMode=!0,this._canvas.freeDrawingBrush.width=e.lineWidth,this._canvas.freeDrawingBrush.color=e.lineColor}}]),n}(ue),be=n(4).fabric,me=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),this._width=e.lineWidth,this._color=e.lineColor}},{key:"doMouseDown",value:function(e){this.isDown=!0;var t=this._canvas,n=t.getPointer(e.e),r=[n.x,n.y,n.x,n.y];this.line=new be.Line(r,{strokeWidth:this._width,fill:this._color,stroke:this._color,originX:"center",originY:"center",selectable:!1,evented:!1}),t.add(this.line)}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);this.line.set({x2:n.x,y2:n.y}),this.line.setCoords(),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1}},{key:"doMouseOut",value:function(e){this.isDown=!1}}]),n}(ue),ve=n(4).fabric,ye=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),this._width=e.lineWidth,this._color=e.lineColor,this._fill=e.fillColor}},{key:"doMouseDown",value:function(e){var t=this._canvas;this.isDown=!0;var n=t.getPointer(e.e);this.startX=n.x,this.startY=n.y,this.rect=new ve.Rect({left:this.startX,top:this.startY,originX:"left",originY:"top",width:n.x-this.startX,height:n.y-this.startY,stroke:this._color,strokeWidth:this._width,fill:this._fill,transparentCorners:!1,selectable:!1,evented:!1,strokeUniform:!0,noScaleCache:!1,angle:0}),t.add(this.rect)}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);this.startX>n.x&&this.rect.set({left:Math.abs(n.x)}),this.startY>n.y&&this.rect.set({top:Math.abs(n.y)}),this.rect.set({width:Math.abs(this.startX-n.x)}),this.rect.set({height:Math.abs(this.startY-n.y)}),this.rect.setCoords(),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1}}]),n}(ue),je=n(4).fabric,xe=function(){function e(t,n,r,o){var i=this;v(this,e),this.update=function(e){i._textObj&&i._rectObj&&e.target===i._rectObj&&i._textObj.set({width:i._rectObj.getScaledWidth(),scaleX:1,scaleY:1,top:i._rectObj.top-i._textObj.getScaledHeight(),left:i._rectObj.left})},this._canvas=t,this._text=n,this._rectObj=new je.Rect(r),this._textObj=new je.Textbox(n,o),t.on({"object:scaling":this.update}),t.on({"object:moving":this.update})}return j(e,[{key:"setText",value:function(e){this._text=e,this._textObj.set({text:e})}}]),e}(),we=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),this._width=e.lineWidth,this._color=e.lineColor,this._fill=e.fillColor,this._textString=e.text,this._maxFontSize=12}},{key:"doMouseDown",value:function(e){var t=this._canvas;this.isDown=!0;var n=t.getPointer(e.e);for(this.startX=n.x,this.startY=n.y,this.rectangleLabel=new xe(t,"New drawing",{left:this.startX,top:this.startY,originX:"left",originY:"top",width:n.x-this.startX,height:n.y-this.startY,stroke:this._color,strokeWidth:this._width,fill:this._fill,transparentCorners:!1,selectable:!1,evented:!1,strokeUniform:!0,noScaleCache:!1,angle:0},{left:this.startX,top:this.startY-12,originX:"left",originY:"top",width:n.x-this.startX-this._width,height:t.height/3,fontSize:this._maxFontSize,noScaleCache:!1,backgroundColor:this._color,transparentCorners:!0,hasControls:!1,angle:0}),this._objects&&this._objects.length>0?this._objects.push(this.rectangleLabel):this._objects=[this.rectangleLabel];this.rectangleLabel._textObj.height>t.height/3;)this.rectangleLabel._textObj.set({fontSize:this.rectangleLabel._textObj.fontSize-1,top:this.startY-this.rectangleLabel._textObj.fontSize-12});t.add(this.rectangleLabel._rectObj),t.add(this.rectangleLabel._textObj),t.renderAll()}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);this.startX>n.x&&(this.rectangleLabel._rectObj.set({left:Math.abs(n.x)}),this.rectangleLabel._textObj.set({left:Math.abs(n.x)})),this.startY>n.y&&(this.rectangleLabel._rectObj.set({left:Math.abs(n.x)}),this.rectangleLabel._textObj.set({top:Math.abs(n.y)})),this.rectangleLabel._textObj.setCoords(),this.rectangleLabel._rectObj.set({width:Math.abs(this.startX-n.x)}),this.rectangleLabel._textObj.set({width:this.rectangleLabel._rectObj.getScaledWidth()}),this.rectangleLabel._rectObj.set({height:Math.abs(this.startY-n.y)}),this.rectangleLabel._rectObj.setCoords(),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1,this._canvas.renderAll()}}]),n}(ue),Ce=n(4).fabric,_e=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),this._width=e.lineWidth,this._color=e.lineColor,this._fill=e.fillColor}},{key:"doMouseDown",value:function(e){var t=this._canvas;this.isDown=!0;var n=t.getPointer(e.e),r=[n.x,n.y];this.startX=r[0],this.startY=r[1],this.circle=new Ce.Circle({left:this.startX,top:this.startY,originX:"left",originY:"center",strokeWidth:this._width,stroke:this._color,fill:this._fill,selectable:!1,evented:!1,radius:1}),t.add(this.circle)}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);this.circle.set({radius:ae({x:this.startX,y:this.startY},{x:n.x,y:n.y})/2,angle:180*Math.atan2(n.y-this.startY,n.x-this.startX)/Math.PI}),this.circle.setCoords(),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1}}]),n}(ue),Se=(n(4).fabric,function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;t.isDrawingMode=t.selection=!1,t.forEachObject((function(e){return e.selectable=e.evented=!1})),t.defaultCursor="move"}},{key:"doMouseDown",value:function(e){var t=this._canvas;this.isDown=!0;var n=t.getPointer(e.e);this.startX=n.x,this.startY=n.y}},{key:"doMouseMove",value:function(e){if(this.isDown){var t=this._canvas,n=t.getPointer(e.e);t.relativePan({x:n.x-this.startX,y:n.y-this.startY}),t.renderAll()}}},{key:"doMouseUp",value:function(e){this.isDown=!1}}]),n}(ue)),Ee=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"configureCanvas",value:function(e){this._canvas.isDrawingMode=!0,this._canvas.freeDrawingBrush.width=e.lineWidth,this._canvas.freeDrawingBrush.color=e.lineColor.indexOf("#")>-1?le(e.lineColor):le(function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"undefined"!=typeof t[e.toLowerCase()]&&t[e.toLowerCase()]}(e.lineColor))}}]),n}(ue),Oe=n(4),Te=function(e){C(n,e);var t=O(n);function n(){var e;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={action:!0},e._initTools=function(t){e._tools={},e._tools[he.Select]=new pe(t),e._tools[he.Pencil]=new ge(t),e._tools[he.Line]=new me(t),e._tools[he.Arrow]=new de(t),e._tools[he.Rectangle]=new ye(t),e._tools[he.RectangleLabel]=new we(t),e._tools[he.Circle]=new _e(t),e._tools[he.Pan]=new Se(t),e._tools[he.Highlighter]=new Ee(t),e._tools[he.DefaultTool]=new fe(t)},e.enableTouchScroll=function(){var t=e._fc;t.allowTouchScrolling||(t.allowTouchScrolling=!0)},e.disableTouchScroll=function(){var t=e._fc;t.allowTouchScrolling&&(t.allowTouchScrolling=!1)},e.addImg=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e._fc;Oe.fabric.Image.fromURL(t,(function(e){var t={left:Math.random()*(r.getWidth()-.5*e.width),top:Math.random()*(r.getHeight()-.5*e.height),scale:.5};Object.assign(t,n),e.scale(t.scale),e.set({left:t.left,top:t.top}),r.add(e)}))},e._onObjectAdded=function(t){var n=e.props.onObjectAdded;if(e.state.action){var r=t.target;r.__version=1;var o=r.toJSON();r.__originalState=o;var i=JSON.stringify(o);e._history.keep([r,i,i]),n(t)}else e.setState({action:!0})},e._onObjectMoving=function(t){(0,e.props.onObjectMoving)(t)},e._onObjectScaling=function(t){(0,e.props.onObjectScaling)(t)},e._onObjectRotating=function(t){(0,e.props.onObjectRotating)(t)},e._onObjectModified=function(t){var n=e.props.onObjectModified,r=t.target;r.__version+=1;var o=JSON.stringify(r.__originalState),i=r.toJSON();r.__originalState=i;var a=JSON.stringify(i);e._history.keep([r,o,a]),n(t)},e._onObjectRemoved=function(t){var n=e.props.onObjectRemoved,r=t.target;r.__removed?r.__version+=1:(r.__version=0,n(t))},e._onMouseDown=function(t){var n=e.props.onMouseDown;e._selectedTool.doMouseDown(t),n(t)},e._onMouseMove=function(t){var n=e.props.onMouseMove;e._selectedTool.doMouseMove(t),n(t)},e._onMouseOut=function(t){var n=e.props.onMouseOut;if(e._selectedTool.doMouseOut(t),e.props.onChange){var r=e.props.onChange;setTimeout((function(){r(t.e)}),10)}n(t)},e._onMouseUp=function(t){var n=e.props.onMouseUp;if(e._selectedTool.doMouseUp(t),e.props.tool!==he.Pencil){var r=e._fc.getObjects(),o=r[r.length-1];o&&1===o.__version&&(o.__originalState=o.toJSON())}if(e.props.onChange){var i=e.props.onChange;setTimeout((function(){i(t.e)}),10)}n(t)},e._resize=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t&&t.preventDefault();var o=e.props,i=o.widthCorrection,a=o.heightCorrection,s=e._fc,l=e._container,u=l.offsetWidth,c=l.clientHeight,d=n||s.getWidth(),h=r||s.getHeight(),f=((u-i)/d).toFixed(2),p=((c-a)/h).toFixed(2);if(s.setWidth(u-i),s.setHeight(c-a),s.backgroundImage){var g=s.backgroundImage;g.width=g.width*f,g.height=g.height*p}var b=s.getObjects();for(var m in b){var v=b[m],y=v.scaleX,j=v.scaleY,x=v.left,w=v.top,C=y*f,_=j*p,S=x*f,E=w*p;v.scaleX=C,v.scaleY=_,v.left=S,v.top=E,v.setCoords()}s.renderAll(),s.calcOffset()},e._backgroundColor=function(t){if(t){var n=e._fc;n.setBackgroundColor(t,(function(){return n.renderAll()}))}},e.zoom=function(t){var n=e._fc,r=n.getObjects();for(var o in r)r[o].scaleX=r[o].scaleX*t,r[o].scaleY=r[o].scaleY*t,r[o].left=r[o].left*t,r[o].top=r[o].top*t,r[o].setCoords();n.renderAll(),n.calcOffset()},e.undo=function(){var t=e._history,n=b(t.getCurrent(),3),r=n[0],o=n[1];n[2];t.undo(),r.__removed?e.setState({action:!1},(function(){e._fc.add(r),r.__version-=1,r.__removed=!1})):r.__version<=1?e._fc.remove(r):(r.__version-=1,r.setOptions(JSON.parse(o)),r.setCoords(),e._fc.renderAll()),e.props.onChange&&e.props.onChange()},e.redo=function(){var t=e._history;if(t.canRedo()){var n=e._fc,r=b(t.redo(),3),o=r[0],i=(r[1],r[2]);0===o.__version?e.setState({action:!1},(function(){n.add(o),o.__version=1})):(o.__version+=1,o.setOptions(JSON.parse(i))),o.setCoords(),n.renderAll(),e.props.onChange&&e.props.onChange()}},e.canUndo=function(){return e._history.canUndo()},e.canRedo=function(){return e._history.canRedo()},e.toDataURL=function(t){return e._fc.toDataURL(t)},e.toJSON=function(t){return e._fc.toJSON(t)},e.fromJSON=function(t){if(t){var n=e._fc;setTimeout((function(){n.loadFromJSON(t,(function(){e.props.tool===he.DefaultTool&&(n.isDrawingMode=n.selection=!1,n.forEachObject((function(e){return e.selectable=e.evented=!1}))),n.renderAll(),e.props.onChange&&e.props.onChange()}))}),100)}},e.clear=function(t){var n=e.toJSON(t);return e._fc.clear(),e._history.clear(),n},e.hasSelection=function(){return!!e._fc.getActiveObject()},e.clearSelection=function(){var t=e._fc;t.discardActiveObject(),t.requestRenderAll()},e.removeSelected=function(){var t=e._fc,n=t.getActiveObject();if(n){var r=[];"activeSelection"===n.type?n.forEachObject((function(e){return r.push(e)})):r.push(n),r.forEach((function(n){n.__removed=!0;var r=n.toJSON();n.__originalState=r;var o=JSON.stringify(r);e._history.keep([n,o,o]),t.remove(n)})),t.discardActiveObject(),t.requestRenderAll()}},e.copy=function(){e._fc.getActiveObject().clone((function(t){return e._clipboard=t}))},e.paste=function(){e._clipboard.clone((function(t){var n=e._fc;n.discardActiveObject(),t.set({left:t.left+10,top:t.top+10,evented:!0}),"activeSelection"===t.type?(t.canvas=n,t.forEachObject((function(e){return n.add(e)})),t.setCoords()):n.add(t),e._clipboard.top+=10,e._clipboard.left+=10,n.setActiveObject(t),n.requestRenderAll()}))},e.setBackgroundFromDataUrl=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e._fc,o=new Image;o.setAttribute("crossOrigin","anonymous");var i=n.stretched,a=n.stretchedX,s=n.stretchedY,l=oe(n,["stretched","stretchedX","stretchedY"]);o.onload=function(){var e=new Oe.fabric.Image(o);(i||a)&&e.scaleToWidth(r.width),(i||s)&&e.scaleToHeight(r.height),r.setBackgroundImage(e,(function(){return r.renderAll()}),l)},o.src=t},e.addText=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e._fc,o=new Oe.fabric.IText(t,n),i={left:.5*(r.getWidth()-o.width),top:.5*(r.getHeight()-o.height)};Object.assign(n,i),o.set({left:n.left,top:n.top}),r.add(o)},e.callEvent=function(t,n){e._selectedTool&&n(t)},e.componentDidMount=function(){var t=e.props,n=t.tool,r=t.value,o=t.undoSteps,i=t.defaultValue,a=t.backgroundColor,s=e._fc=new Oe.fabric.Canvas(e._canvas);e._initTools(s),e._backgroundColor(a);var l=e._tools[n];l&&l.configureCanvas(e.props),e._selectedTool=l,window.addEventListener("resize",e._resize,!1),e._history=new ie(o),s.on("object:added",(function(t){return e.callEvent(t,e._onObjectAdded)})),s.on("object:modified",(function(t){return e.callEvent(t,e._onObjectModified)})),s.on("object:removed",(function(t){return e.callEvent(t,e._onObjectRemoved)})),s.on("mouse:down",(function(t){return e.callEvent(t,e._onMouseDown)})),s.on("mouse:move",(function(t){return e.callEvent(t,e._onMouseMove)})),s.on("mouse:up",(function(t){return e.callEvent(t,e._onMouseUp)})),s.on("mouse:out",(function(t){return e.callEvent(t,e._onMouseOut)})),s.on("object:moving",(function(t){return e.callEvent(t,e._onObjectMoving)})),s.on("object:scaling",(function(t){return e.callEvent(t,e._onObjectScaling)})),s.on("object:rotating",(function(t){return e.callEvent(t,e._onObjectRotating)})),e.disableTouchScroll(),e._resize(),(r||i)&&e.fromJSON(r||i)},e.componentWillUnmount=function(){return window.removeEventListener("resize",e._resize)},e.componentDidUpdate=function(t,n){e.props.width===t.width&&e.props.height===t.height||e._resize(),e.props.tool!==t.tool&&(e._selectedTool=e._tools[e.props.tool],e._fc.defaultCursor="default",e._selectedTool&&e._selectedTool.configureCanvas(e.props)),e.props.backgroundColor!==t.backgroundColor&&e._backgroundColor(e.props.backgroundColor),(e.props.value!==t.value||e.props.value&&e.props.forceValue)&&e.fromJSON(e.props.value)},e.render=function(){var t=e.props,n=t.className,r=t.style,o=t.width,i=t.height,a=Object.assign({},r||{},o?{width:o}:{},i?{height:i}:{height:512});return Object(k.jsx)("div",{className:n,ref:function(t){return e._container=t},style:a,children:Object(k.jsx)("canvas",{id:se(),ref:function(t){return e._canvas=t},children:"Sorry, Canvas HTML5 element is not supported by your browser :("})})},e}return n}(c.PureComponent);Te.defaultProps={lineColor:"black",lineWidth:10,fillColor:"transparent",backgroundColor:"transparent",opacity:1,undoSteps:25,tool:null,widthCorrection:0,heightCorrection:0,forceValue:!1,onObjectAdded:function(){return null},onObjectModified:function(){return null},onObjectRemoved:function(){return null},onMouseDown:function(){return null},onMouseMove:function(){return null},onMouseUp:function(){return null},onMouseOut:function(){return null},onObjectMoving:function(){return null},onObjectScaling:function(){return null},onObjectRotating:function(){return null}};var Ae=Te,ke=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(x(r)),r.uploader=d.a.createRef(),r.openFileUpload=r.openFileUpload.bind(x(r)),r.onImgLoad=r.onImgLoad.bind(x(r)),r.load_preview_from_files=r.load_preview_from_files.bind(x(r)),r.load_preview_from_upload=r.load_preview_from_upload.bind(x(r)),r.load_preview_from_drop=r.load_preview_from_drop.bind(x(r)),r.snapshot=r.snapshot.bind(x(r)),r.getSketch=r.getSketch.bind(x(r)),r.imgRef=d.a.createRef(),r.webcamRef=d.a.createRef(),r.sketchRef=d.a.createRef(),r.sketchKey=0,r}return j(n,[{key:"handleChange",value:function(e){this.props.handleChange(e)}},{key:"openFileUpload",value:function(){this.uploader.current.click()}},{key:"snapshot",value:function(){var e=this.webcamRef.current.getScreenshot();this.handleChange(e)}},{key:"getSketch",value:function(){var e=this.sketchRef.current.toDataURL();this.handleChange(e)}},{key:"onImgLoad",value:function(e){var t=e.target;this.setState({dimensions:{height:t.offsetHeight,width:t.offsetWidth}})}},{key:"render",value:function(){var e=function(e){e.preventDefault(),e.stopPropagation()};if(null!==this.props.value&&"canvas"!==this.props.source){var t=!1;if(null!==this.props.interpretation){var n=this.imgRef.current,r=U(!0,n.width,n.height,n.naturalWidth,n.naturalHeight);this.props.shape&&(r=U(!0,r.width,r.height,this.props.shape[0],this.props.shape[1]));var o=r.width,i=r.height,a=document.createElement("canvas");a.setAttribute("height",i),a.setAttribute("width",o),function(e,t,n,r){var o=n/e[0].length,i=r/e.length,a=0;e.forEach((function(e){var n=0;e.forEach((function(e){t.fillStyle=H(e),t.fillRect(n*o,a*i,o,i),n++})),a++}))}(this.props.interpretation,a.getContext("2d"),o,i),t=Object(k.jsx)("div",{class:"interpretation",children:Object(k.jsx)("img",{src:a.toDataURL()})})}return Object(k.jsxs)("div",{className:"input_image",children:[Object(k.jsx)("div",{className:"image_preview_holder",children:Object(k.jsx)("img",{ref:this.imgRef,onLoad:this.onImgLoad,className:"image_preview",alt:"",src:this.props.value})}),t]})}return"upload"===this.props.source?Object(k.jsxs)("div",{className:"input_image",onDrag:e,onDragStart:e,onDragEnd:e,onDragOver:e,onDragEnter:e,onDragLeave:e,onDrop:e,children:[Object(k.jsxs)("div",{className:"upload_zone",onClick:this.openFileUpload,onDrop:this.load_preview_from_drop,children:["Drop Image Here",Object(k.jsx)("br",{}),"- or -",Object(k.jsx)("br",{}),"Click to Upload"]}),Object(k.jsx)("input",{className:"hidden_upload",type:"file",ref:this.uploader,onChange:this.load_preview_from_upload,accept:"image/x-png,image/gif,image/jpeg",style:{display:"none"}})]}):"webcam"===this.props.source?Object(k.jsx)("div",{className:"input_image",children:Object(k.jsxs)("div",{className:"image_preview_holder",children:[Object(k.jsx)(re.a,{ref:this.webcamRef}),Object(k.jsx)("button",{class:"snapshot",onClick:this.snapshot,children:"- Click to Take Snapshot -"})]})}):"canvas"===this.props.source?(null===this.props.value&&this.sketchRef&&this.sketchRef.current&&(this.sketchKey+=1),Object(k.jsx)("div",{className:"input_image",children:Object(k.jsx)("div",{className:"image_preview_holder sketch",children:Object(k.jsx)(Ae,{ref:this.sketchRef,width:"320px",height:"100%",tool:he.Pencil,lineColor:"black",lineWidth:20,backgroundColor:"white",onChange:this.getSketch},this.sketchKey)})})):void 0}},{key:"load_preview_from_drop",value:function(e){this.load_preview_from_files(e.dataTransfer.files)}},{key:"load_preview_from_upload",value:function(e){this.load_preview_from_files(e.target.files)}},{key:"load_preview_from_files",value:function(e){if(e.length&&window.FileReader&&/^image/.test(e[0].type)){var t=this,n=new FileReader;n.readAsDataURL(e[0]),n.onloadend=function(){t.props.handleChange(this.result)}}}}]),n}(d.a.Component),Me=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("img",{className:"input_image_example",src:this.props.examples_dir+"/"+this.props.value,alt:""})}}]),n}(L),Le=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(x(r)),r}return j(n,[{key:"handleChange",value:function(e){var t=e.target.value;isNaN(parseFloat(t))&&!["","-",".","-."].includes(t)||this.props.handleChange(e.target.value)}},{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_number",children:null===this.props.interpretation?Object(k.jsx)("input",{type:"text",onChange:this.handleChange,value:null===this.props.value?"":this.props.value}):Object(k.jsx)("div",{class:"interpretation",children:this.props.interpretation.map((function(e,t){return Object(k.jsx)("div",{class:"interpretation_box",style:{backgroundColor:H(e[1])},children:e[0]},t)}))})})}}]),n}(d.a.Component),Ie=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_number_example",children:this.props.value})}}]),n}(M),De=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(x(r)),r}return j(n,[{key:"handleChange",value:function(e){this.props.handleChange(e)}},{key:"render",value:function(){var e=this;return Object(k.jsx)("div",{className:"input_radio",children:this.props.choices.map((function(t,n){return Object(k.jsx)("div",{children:Object(k.jsxs)("div",{className:A()("radio_item",{selected:t===e.props.value}),onClick:e.handleChange.bind(e,t),children:[null===e.props.interpretation?Object(k.jsx)("div",{className:"radio_circle"}):Object(k.jsx)("div",{className:"radio_circle",style:{backgroundColor:H(e.props.interpretation[n])}}),t]})},n)}))})}}]),n}(d.a.Component),Ne=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_radio_example",children:this.props.value})}}]),n}(M),Pe=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(x(r)),r}return j(n,[{key:"handleChange",value:function(e){this.props.handleChange(parseFloat(e.target.value))}},{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_slider",children:null===this.props.interpretation?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("input",{type:"range",className:"range",onChange:this.handleChange,value:this.props.value,min:this.props.minimum,max:this.props.maximum,step:this.props.step}),Object(k.jsx)("div",{className:"value",children:this.props.value})]}):Object(k.jsx)("div",{class:"interpret_range",children:this.props.interpretation.map((function(e){return Object(k.jsx)("div",{style:{"background-color":H(e)}})}))})})}}]),n}(d.a.Component),Re=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_slider_example",children:this.props.value})}}]),n}(M),Fe=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(x(r)),r}return j(n,[{key:"handleChange",value:function(e){this.props.handleChange(e.target.value)}},{key:"render",value:function(){return null!==this.props.interpretation?Object(k.jsx)("div",{className:"input_text",children:Object(k.jsx)("div",{class:"interpretation",children:this.props.interpretation.map((function(e,t){return Object(k.jsx)("div",{class:"interpretation_box",style:{backgroundColor:H(e[1])},children:e[0]},t)}))})}):this.props.lines>1?Object(k.jsx)("div",{className:"input_text",children:Object(k.jsx)("textarea",{value:this.props.value||"",onChange:this.handleChange})}):Object(k.jsx)("div",{className:"input_text",children:Object(k.jsx)("input",{type:"text",onChange:this.handleChange,value:this.props.value||""})})}}]),n}(d.a.Component),Be=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"input_textbox_example",children:this.props.value})}}]),n}(M),He=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(x(r)),r.uploader=d.a.createRef(),r.openFileUpload=r.openFileUpload.bind(x(r)),r.load_preview_from_files=r.load_preview_from_files.bind(x(r)),r.load_preview_from_upload=r.load_preview_from_upload.bind(x(r)),r.load_preview_from_drop=r.load_preview_from_drop.bind(x(r)),r}return j(n,[{key:"handleChange",value:function(e){this.props.handleChange(e.target.value)}},{key:"openFileUpload",value:function(){this.uploader.current.click()}},{key:"render",value:function(){var e=function(e){e.preventDefault(),e.stopPropagation()};return null!=this.props.value?Object(k.jsx)("div",{className:"input_video",children:Object(k.jsx)("div",{className:"video_preview_holder",children:Object(k.jsx)("video",{className:"video_preview",controls:!0,src:this.props.value})})}):Object(k.jsxs)("div",{className:"input_video",onDrag:e,onDragStart:e,onDragEnd:e,onDragOver:e,onDragEnter:e,onDragLeave:e,onDrop:e,children:[Object(k.jsxs)("div",{className:"upload_zone",onClick:this.openFileUpload,onDrop:this.load_preview_from_drop,children:["Drop Video Here",Object(k.jsx)("br",{}),"- or -",Object(k.jsx)("br",{}),"Click to Upload"]}),Object(k.jsx)("input",{className:"hidden_upload",type:"file",ref:this.uploader,onChange:this.load_preview_from_upload,accept:"video/mp4,video/x-m4v,video/*",style:{display:"none"}})]})}},{key:"load_preview_from_drop",value:function(e){this.load_preview_from_files(e.dataTransfer.files)}},{key:"load_preview_from_upload",value:function(e){this.load_preview_from_files(e.target.files)}},{key:"load_preview_from_files",value:function(e){if(e.length&&window.FileReader&&/^video/.test(e[0].type)){var t=this,n=new FileReader;n.readAsDataURL(e[0]),n.onloadend=function(){t.props.handleChange(this.result)}}}}]),n}(d.a.Component),Ue=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("video",{className:"input_radio_example",src:this.props.value,controls:!0})}}]),n}(M),ze=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).src=null,r.key=0,r}return j(n,[{key:"render",value:function(){return this.props.value!==this.src&&(this.key+=1,this.src=this.props.value),!!this.props.value&&Object(k.jsx)("div",{className:"output_audio",children:Object(k.jsx)("audio",{controls:!0,children:Object(k.jsx)("source",{src:this.props.value})},this.key)})}}]),n}(d.a.Component),Ye=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"output_audio_example",children:this.props.value})}}]),n}(M),We=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).componentDidMount=function(){this.el=K()(this.wrapper.current,{minDimensions:[1,1]})},r.wrapper=d.a.createRef(),r}return j(n,[{key:"resetData",value:function(e){var t=[e.length,e[0].length],n=t[0],r=t[1],o=this.el.getData(),i=[o.length,o[0].length],a=i[0],s=i[1];a<n?this.el.insertRow(n-a):a>n&&this.el.deleteRow(0,a-n),s<r?this.el.insertColumn(r-s):s>r&&this.el.deleteColumn(0,s-r),this.el.setData(e)}},{key:"render",value:function(){if(this.props.value&&this.props.value.headers&&this.el){var e,t=m(this.props.value.headers.entries());try{for(t.s();!(e=t.n()).done;){var n=b(e.value,2),r=n[0],o=n[1];this.el.setHeader(r,o)}}catch(i){t.e(i)}finally{t.f()}}return this.props.value&&this.el&&this.resetData(this.props.value.data),Object(k.jsx)("div",{className:A()("output_dataframe",{hidden:null===this.props.value}),children:Object(k.jsx)("div",{ref:this.wrapper})})}}]),n}(d.a.Component),Ve=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){var e,t=[],n=m(this.props.value.slice(0,3));try{for(n.s();!(e=n.n()).done;){var r=e.value,o=r.slice(0,3);r.length>3&&o.push("..."),t.push(o)}}catch(a){n.e(a)}finally{n.f()}if(this.props.value.length>3){var i=Array(t[0].length).fill("...");t.push(i)}return Object(k.jsx)("table",{className:"input_dataframe_example",children:Object(k.jsx)("tbody",{children:t.map((function(e){return Object(k.jsx)("tr",{children:e.map((function(e){return Object(k.jsx)("td",{children:e})}))})}))})})}}]),n}(M),Xe=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return!!this.props.value&&Object(k.jsx)("div",{className:"output_file",children:Object(k.jsxs)("a",{className:"file_display",href:"data:;base64,"+this.props.value.data,download:this.props.value.name,children:[Object(k.jsx)("div",{className:"file_name",children:this.props.value.name}),Object(k.jsx)("div",{className:"file_size",children:null===this.props.value.size?"":B(this.props.value.size)})]})})}}]),n}(d.a.Component),Ge=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"output_file_example",children:this.props.value})}}]),n}(M),qe=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).color_map=r.props.color_map||{},r.new_category_index=0,r}return j(n,[{key:"generate_category_legend",value:function(e){var t=["pink","lightblue","gold","plum","lightskyblue","greenyellow","khaki","cyan","moccasin","lightgray"];for(var n in e)if(!(n in this.color_map)){var r=e[n];if(!r)if(this.new_category_index<t.length)r=t[this.new_category_index],this.new_category_index++;else{var o=function(e,t){return Math.floor(Math.random()*(t-e)+e)};r="rgb("+o(128,240)+", "+o(128,240)+", "+o(128,240)+")"}this.color_map[n]=r}}},{key:"render",value:function(){var e=this;if(null===this.props.value||0===this.props.value.length)return!1;var t=this.props.value[0][1];if(null===t||"string"===typeof t){var n,r={},o=m(this.props.value);try{for(o.s();!(n=o.n()).done;){var i=n.value[1];null!=i&&(r[i]=null)}}catch(a){o.e(a)}finally{o.f()}return this.generate_category_legend(r),Object(k.jsxs)("div",{className:"output_highlightedtext",children:[Object(k.jsx)("div",{className:"category_legend",children:Object.entries(this.color_map).map((function(e){var t=b(e,2),n=t[0],r=t[1];return Object(k.jsxs)("div",{className:"category-label",children:[Object(k.jsx)("div",{className:"colorbox",style:{"background-color":r},children:"\xa0"}),n]})}))}),Object(k.jsx)("div",{className:"output_text",children:this.props.value.map((function(t){var n=t[1],r=null==n?"white":e.color_map[n];return Object(k.jsx)("span",{title:n,style:{"background-color":r},children:t[0]})}))})]})}return Object(k.jsxs)("div",{className:"output_highlightedtext",children:[Object(k.jsxs)("div",{className:"color_legend",children:[Object(k.jsx)("span",{children:"-1"}),Object(k.jsx)("span",{children:"0"}),Object(k.jsx)("span",{children:"+1"})]}),Object(k.jsx)("div",{className:"output_text",children:this.props.value.map((function(e,t){var n="";return n=t<0?"8,241,255,"+-t:"230,126,34,"+t,Object(k.jsx)("span",{title:t,style:{"background-color":"rgba{".concat(n,"}")},children:e})}))})]})}}]),n}(d.a.Component),Ke=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){var e,t="",n=m(this.props.value);try{for(n.s();!(e=n.n()).done;){t+=e.value[0]}}catch(r){n.e(r)}finally{n.f()}return t.length>20&&(t=t.substring(0,20)+"..."),Object(k.jsx)("div",{className:"output_highlighted_text_example",children:t})}}]),n}(M),Je=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return!!this.props.value&&Object(k.jsx)("div",{className:"output_html",dangerouslySetInnerHTML:{__html:this.props.value}})}}]),n}(d.a.Component),Qe=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"output_html_example",children:"[HTML]"})}}]),n}(M),Ze=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return!!this.props.value&&Object(k.jsx)("div",{className:"output_image",children:Object(k.jsx)("div",{class:"image_preview_holder",children:Object(k.jsx)("img",{class:"image_preview",alt:"",src:this.props.value[0]})})})}}]),n}(d.a.Component),$e=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("img",{className:"output_image_example",src:this.props.value,alt:""})}}]),n}(M),et=n(17),tt=n.n(et),nt=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return!!this.props.value&&Object(k.jsx)("div",{className:"output_json",children:Object(k.jsx)(tt.a,{data:this.props.value,theme:{base00:"#111",base01:"#222",base02:"#333",base03:"#444",base04:"#555",base05:"#666",base06:"#777",base07:"#888",base08:"#999",base09:"#AAA",base0A:"#BBB",base0B:"#CCC",base0C:"#DDD",base0D:"#EEE",base0E:"#EFEFEF",base0F:"#FFF"},invertTheme:!0})})}}]),n}(d.a.Component),rt=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){var e=JSON.stringify(this.props.value);return e.length>20&&(e=e.substring(0,20)+"..."),Object(k.jsx)("div",{className:"output_json_example",children:e})}}]),n}(M),ot=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return!!this.props.value&&Object(k.jsx)("div",{className:"output_keyvalues",children:Object(k.jsxs)("table",{children:[Object(k.jsxs)("thead",{children:[Object(k.jsx)("th",{children:"Property"}),Object(k.jsx)("th",{children:"Value"})]}),Object(k.jsx)("tbody",{children:this.props.value.map((function(e){var t=b(e,2),n=t[0],r=t[1];return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:n}),Object(k.jsx)("td",{children:r})]})}))})]})})}}]),n}(d.a.Component),it=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"output_key_values_example",children:[this.props.value.map((function(e){var t=b(e,2),n=t[0],r=t[1];return Object(k.jsxs)("div",{children:[n,": ",r]})})),this.props.value.length>3&&Object(k.jsx)("div",{children:'"..."'}),";"]})}}]),n}(M),at=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){if(null==this.props.value)return!1;var e=[],t=[];if("confidences"in this.props.value){var n,r=m(this.props.value.confidences);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=Math.round(100*o.confidence)+"%";e.push(Object(k.jsx)("div",{className:"label",title:o.label,children:o.label})),t.push(Object(k.jsx)("div",{className:"confidence",title:i,style:{minWidth:"calc("+i+" - 12px)"},children:i}))}}catch(a){r.e(a)}finally{r.f()}}return Object(k.jsxs)("div",{className:"output_label",children:[Object(k.jsx)("div",{className:"output_class",children:this.props.value.label}),Object(k.jsxs)("div",{className:"confidence_intervals",children:[Object(k.jsx)("div",{className:"labels",style:{maxWidth:"120px"},children:e}),Object(k.jsx)("div",{className:"confidences",children:t})]})]})}}]),n}(d.a.Component),st=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"convert_example_to_output",value:function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(u){return{label:e}}for(var t="",n=0,r={confidences:[]},o=0,i=Object.entries(e);o<i.length;o++){var a=b(i[o],2),s=a[0],l=a[1];r.confidences.push({label:s,confidence:l}),l>n&&(n=l,t=s)}return r.label=t,r}},{key:"render",value:function(){return Object(k.jsx)("div",{className:"output_label_example",children:function(e,t){if("confidences"in t){if("string"==typeof e)try{e=JSON.parse(e)}catch(n){return t.label}return t.label+" ("+(100*e[t.label]).toFixed(2)+"%)"}return t.label}(this.props.value,this.convert_example_to_output(this.props.value))})}}]),n}(M),lt=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"output_text",children:null===this.props.value?Object(k.jsx)("span",{children:"\xa0"}):this.props.value})}}],[{key:"load_example_preview",value:function(e){return e.length>20?e.substring(0,20)+"...":e}}]),n}(d.a.Component),ut=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"output_textbox_example",children:this.props.value})}}]),n}(M),ct=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return!!this.props.value&&Object(k.jsx)("div",{className:"output_video",children:Object(k.jsx)("video",{controls:!0,src:this.props.value})})}}]),n}(d.a.Component),dt=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"output_video_example",children:this.props.value})}}]),n}(M),ht=n.p+"static/media/logo_loading.e93acd82.jpg";Promise.resolve().then(n.t.bind(null,94,7)),Promise.resolve().then(n.t.bind(null,95,7));var ft={audio:[z,Y],checkboxgroup:[W,V],checkbox:[X,G],dataframe:[J,Q],dropdown:[Z,$],file:[ee,te],image:[ke,Me],number:[Le,Ie],radio:[De,Ne],slider:[Pe,Re],textbox:[Fe,Be],video:[He,Ue]},pt={audio:[ze,Ye],dataframe:[We,Ve],file:[Xe,Ge],highlightedtext:[qe,Ke],html:[Je,Qe],image:[Ze,$e],json:[nt,rt],keyvalues:[ot,it],label:[at,st],textbox:[lt,ut],video:[ct,dt]},gt=function(e){C(n,e);var t=O(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).clear=r.clear.bind(x(r)),r.submit=r.submit.bind(x(r)),r.flag=r.flag.bind(x(r)),r.interpret=r.interpret.bind(x(r)),r.removeInterpret=r.removeInterpret.bind(x(r)),r.handleExampleChange=r.handleExampleChange.bind(x(r)),r.state=r.get_default_state(),r.state.examples_page=0,r.examples_dir=null===r.props.examples_dir?"file"+r.props.examples_dir+(r.props.examples_dir.endswith("/")?"":"/"):"file",r}return j(n,[{key:"get_default_state",value:function(){var e,t={},n=m(this.props.input_components.entries());try{for(n.s();!(e=n.n()).done;){var r=b(e.value,2),o=r[0],i=r[1];t[o]=void 0!==i.default?i.default:null}}catch(h){n.e(h)}finally{n.f()}var a,s=this.props.input_components.length,l=m(this.props.output_components.entries());try{for(l.s();!(a=l.n()).done;){var u=b(a.value,2),c=u[0],d=u[1];t[s+c]=void 0!==d.default?d.default:null}}catch(h){l.e(h)}finally{l.f()}return t.submitting=!1,t.error=!1,t.complete=!1,t.interpretation=null,t.just_flagged=!1,t.has_changed=!1,t.example_id=null,t}},{key:"clear",value:function(){this.setState(this.get_default_state())}},{key:"submit",value:function(){for(var e=this,t=[],n=0;n<this.props.input_components.length;n++){if(null===this.state[n])return;t[n]=this.state[n]}this.setState({submitting:!0,has_changed:!1,error:!1}),this.props.fn(t,"predict").then((function(t){var n,o=e.props.input_components.length,i=m(t.data.entries());try{for(i.s();!(n=i.n()).done;){var a=b(n.value,2),s=a[0],l=a[1];e.setState(r({},o+s,l))}}catch(u){i.e(u)}finally{i.f()}e.setState({submitting:!1,complete:!0}),e.props.live&&e.state.has_changed&&e.submit()})).catch((function(t){console.error(t),e.setState({error:!0,submitting:!1})}))}},{key:"flag",value:function(e){var t=this;if(this.state.complete){for(var n={input_data:[],output_data:[]},r=0;r<this.props.input_components.length;r++)n.input_data.push(this.state[r]);for(var o=0;o<this.props.output_components.length;o++)n.output_data.push(this.state[this.props.input_components.length+o]);this.setState({just_flagged:!0}),window.setTimeout((function(){t.setState({just_flagged:!1})}),1e3),n.flag_option=e,this.props.fn(n,"flag")}}},{key:"interpret",value:function(){var e=this;if(this.state.complete){for(var t=[],n=0;n<this.props.input_components.length;n++){if(null===this.state[n])return;t[n]=this.state[n]}this.setState({submitting:!0,has_changed:!1,error:!1}),this.props.fn(t,"interpret").then((function(t){e.setState({interpretation:t.interpretation_scores,submitting:!1})})).catch((function(t){console.error(t),e.setState({error:!0,submitting:!1})}))}}},{key:"removeInterpret",value:function(){this.setState({interpretation:null})}},{key:"handleChange",value:function(e,t){var n,o=(r(n={},e,t),r(n,"has_changed",!0),n);this.props.live&&!this.state.submitting?this.setState(o,this.submit):this.setState(o)}},{key:"handleExampleChange",value:function(e){var t=this,n={};this.setState({example_id:e});var r,o=m(this.props.examples[e].entries());try{var i=function(){var e=b(r.value,2),o=e[0],i=e[1],a=o<t.props.input_components.length?ft[t.props.input_components[o].name][1]:pt[t.props.output_components[o-t.props.input_components.length].name][1];n[o]=a.preprocess(i,t.examples_dir).then((function(e){t.handleChange(o,e)}))};for(o.s();!(r=o.n()).done;)i()}catch(a){o.e(a)}finally{o.f()}}},{key:"render",value:function(){var e=this,t=!1;return this.state.submitting?t=Object(k.jsx)("div",{className:"loading",children:Object(k.jsx)("img",{alt:"loading",src:ht})}):this.state.error&&(t=Object(k.jsx)("div",{className:"loading",children:Object(k.jsx)("img",{className:"loading_failed",alt:"error",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABACAYAAABfuzgrAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsAAAA7AAWrWiQkAABcSSURBVHhe7Z0JmBRFlsdfZGYdfUBDV3cDcsihyOkBqOCJ4PHpgug6OiMqMyizOH7rt87szi5CH0l3Aw7jjM4666zfeux6zLjq4O16jCiegA4qyI3KKVd30zR0dx2ZGftedHRTVZl1djUNu/n7bCsis4iqzIx/vBcRL6IY5xxcXFycUeSri4uLA65AXFyS4ArExSUJrkBcXJLgCsTFJQmuQFxckuAO87qccHDL4jwUBqv5KDBVBZZfAMyjYW1l+B/+7zjiCsTlhAHrIueRCFj1DRD66xoIfbUWtJ49wXveBNCGDQUF08zjOa4icQXi0u0IYVgW8KYmiGzZCqH3PwTj6FFxTvH7QPH5QO3fHzyjR4I2+FRgBWhRFOW4CMUViEu3IsTR2grGzt0Q+uhjCO/YKc+0IQTi9Yo083hBPW0oeEaNAK3fKcDwnDjehUJxBeLSLQhhGAYYu3ZB5Kt1EFzzpTwTS7RA2lGKikAbiSIZOhjUsjJgmtZlInEF4nLc4dgHN+sOQnjd1xBauRqsYEieseMkkHbUvn1BQ2viGTIElF690O3KvUhcgbgcN8hoWM0tEP7iSzDWb4Dwnu/lmcQkE4hAVUEbfjpogwa2deTz83NqTVyBuHQ5JAweDkNk8xbhToWwI54uKQUiYX5/m1CGDhFiYfhvciEUVyAuXYplmtxESxH+7HMIfrlWHk0PL3bIaWjX3L0HeDAojyZHCQRAPXUgeEeNAqWsFBRV7ZRIXIG4dAk02Wc1HoYQCoNcKhNdq3TRehSC79KLhcvEFBWM3bshsn4jmHvRJTMt+a7EUKddof4JduI9aFWoU88UJSuhuAI5jtQtXdpDbWo5CxgURzgL4BPDbiWvV5lSH1GsrWW6vk++9aSFvCma7CNRhD5ZCUbDIXkmPfKvvFxUbDGMKzvdlmFwq6EBjO+2C6FY9fXivalg2B9R+/YB7fTTwHPGGeh2ZT7J2CmB1JfrSzljMxnwnuIAFsWxSJGOA79W1Cfhu4A9Eqip+hd5oIO6Cv1xvIIfUJrzY2W1/3s8Z+FrC37xo3hwj8X5e6qivFtcXflp2zuT01C58DG85hspnbJ8AOpFLjfxr6xW/4Telw0HKxb+HMu7Gp/NFfJQIrbgF/gAuPLbQE3FRnksKQfLF96hANyNt31o9PUI8JrkvSb/pAWvu4kzWInp5T7D927PJfemV9PShLRh7NoNoRUfZtTPIHzY0nsnnif6D4rP51iJrdYgNw8ehPDadWBu+wZIiCnBB0tumnrqIPCMGYXC65eRNclaIOt13dvXZInH51KAH7uqpLZqoswKGiqrJ+H3yaoi4hWvRLHeE6iuXCUP2ahfoE/ENjstIcWD32sVVr97Aot0qmBpUVe+cC6+zMNnNLjtSPrg/XkU789PZTYh2EitxkpwrsxmBD75fy6pqfq1zHYKs6mJhz5dBa0fZfb4tMJCyJsxHdR+fUAtKkpZcUmEVlMTmGhFwh+vBHP/fnGzUiHmSmj+BK2J98wxbWEraViTrKN5B4T8BTKZJfaLQr816zKxtIl4o1bWVSy0WaV2OFeyLh/v5fkkrrpyfZ48lJSDFfq/4+2nv4zFQeC/m4OW590Dut5XHnIE7UOhTGYM1o6leL/e2q7rfnkoY6xIhIfWruNNDz2csTgKrpsOBbNvQ/fndEdxCIvR3Eya6KgsVKnpvZ7BgyFv2tXgR5eM+VJ/fZqUJNcs8sVX0PrK6xDZvBWsUDilsrot3B3N/l6ZzCl4l++rX1B9g8zmHHw+Sw5U6MIFTAS6iS8owMh6dAp8OFNUA56V2S4B79eVPQz2J5nNGPP7vXD0+WVJJ/vi8Z9/LhTdNRe8Z58FammprSW3wmEeXLWaN/3uIWh55lkxoUhClKcF5CbR5KBn1EgouPVmdM/Op4cjzyaGh4Jg7NkDR575k+jTpCLnAkEHfpnJ4fb4P/xqsznw29AtvhnTNxoWr5L/JCUm5/dawKejC3W5xdg0bDZvx7L+S562wRX+C5lMC3Tdj5VvpS5f4ZCw/IaKhf+I4ncUKDaE6/Apz8MHOZGrvL/J1dPw2GV4ail+pvOsGWOXYiv/O5lLl+V0PXgt1+CHXoWffAO2wW/gNX0jz8fC4Dq0jFNkLiNofiNdPP36Qs8750DeVVeIzjMNwUaLg0a+wlu38SMPPATNr/2PGPkysM8RWr4CWpa9BJGdu9C/irUmiqYxpXcv8GH/pWDWLWIeJCH4T42mIx0jahROn4qs+yCH772vt6GFGmT2GJwvCNTqi2UuI9CfRnvJ3pHZDvCeXFpaq38gsx3ULaiezhT+iszGYoUHBBYt2iNzgrr51VOZyv8isx2g6CaXVleukNkODlXo0yxgr8psLGE+MPArfbfMCeorakZiaRtkNp77AzVVv5RpG/W63pMZ7AHsRGNjYkdT+bAiXf9WZjvAfs4GrGL4uTEsx8+aKtMx1JcvfB0FcY3MdoD1YFFJrV4us2kjKvSTz8hcYsid8o4d4xiujp8t+hWtb7wFoQ2xYxPxwYra2FHgO3cCKD16OJbDTVNYhtC774F15Ig8Q9UhbLNy9J3848clNTvd5mLlgpJFla+iRXpMZmPgqm+ETGZN7xr9NWzZH5XZWDzgUL7lWLmxDXo0mTiIgK43FddW3YFJW0NARAyYI5OdgimsViZjwKo2RiZzin/c2dDrn+4B37hzqKJTnT5mMag+Yx8jiH2XxvsftIkjHh4JQ2TNl9D81B8htOYLtATYP0GrI093WBTPacMg/9aZbW4XtgZkNTJxAaM5qQVCmJw5jlqhKS6TyU5hMe5cPgNb+ejCzJbJDlAcjZbGfy6zKcFn7Gh90W0TQ9OdRQyHc7BNS2Nnv1QmMyPJxJ2Gro96Sj+RFus9EJFGrJYWbuzcBYcfxH7G2zajnhTe0oJu1/vQuuxlMHbvwcofpCI7yqbPAtMQ8x4GWqZEkDVLxUkvEEXhbYsC4mCKuU0mOwXjzLl8C2LKr5tfeRlW4oDMRsH/UKbrqZ1dCVbgt/BR25tSBqcd1vVimesUWJPswU089no6i1qQj5XUhBBaB3KdjK3fCJdHCGPXbmh+/s/Q9OgTwLNs2Qlz3z4UyUvQ+pflYB44KISC5YvPaka3j/oxneWkFwi32FkyGYOmKJnNVCWCcefyLX9M+UxRJslkLIryrkylDWf8fZmMwTBgnExmTcN8/Ufo5NieO1rEnAiE+gwUKkJryQXYmpu7d0Pwzbch+MFHEPzwY2j6j8chvM3WncoKmiw0Nm6ClheWQeizv0LwvRVihCqCgskFORcIOpj51IFP9iff2mnqKqtn4MN28M35q710vVFmsqZuQeUMtAr2yToOrxUtmRcXQ8ESCMRKa0Y8GvzMHTIZg+Uwp4L3O2knMxqa77AUuEdmY9BU/rJMZoZXkwkso7CgrUMd3XdGc0gd5Eh9PQRXfZbRXImanwdanz4iMjch7eXv2y9cNfqMdGFeR+cghtyPYqUBM/nY4sX61zLbQaJRLEWxbjUsa7VIW2pAYWyYyfh0rEg/FG+IA89P7u0wKpVoFIuGnzmYoq9B5XMsHx/xNKx6PxJviAPv2WUltXpMK59oRjtQqyv0D2Q2Leor9J/gXXpCZjtgjP+yuFq/X2YF9eULN+L3jB8wWG6BciclsAXUFDCHoYUYwTmjSU4nN/CpQI0+S2YywjzazCPr14OxZRtYhxrFPIMAL5lGlMyW1rZ8hvjGjALfpImoEgUimzaDuWMXWI3YJrX3eTpZft5FF4DvvAmg9u6dtIHpFheLqzBcJtPCspSnFdC20B/NZmNL+nQiceB9u9NJHMnAsp6KLh8bwKcTiYNh+fHiaIM5Wca9mYqDwM9wDFq0uONnODFFAQuvx9qC/2oDDVWjOCikxC4ODi/tU7MfIVMLC5h3wngxo+055ywRbk4WxETXJ5vK6x0yGHrccjPkXz8DPIMGMk///sx/0YXgu/hC0IYPF8O79JCNI0ezKt83aiT0mH0b+KdMTikOorv6ILn/XA6bsE2ZUVJb9Yg8kms2YX/nuuJE5TOwVV7UxgGZzAiTQS+ZjAHNfWqfIDPuD9RWXT9a19Of7XOAJvzUslLwnnO2iHWyQqGsOt9UefNmTAPviOGMhoTlYRG8SEO3/gsvAGVAfyGObCCrkXfNVW1LdD2elOIguseCWJB6jj8j2CP4oEeW1OjOk4adBH0kijweWbKoMqGfjmbC1pyhZcqTycywlMMyFQtjmcWOJwAbkl1e01OWam4mXbAhEBN95GpFvvwqqzkH6m/QKISx7Rsw9h/gtNBKnhLliyjer9GV27hZHs0Mragn8KNHwdixU4ymRc+fJCP3ArHgtx5Qhjv9YUfwdFXlQ0oW6Z/Ld+cIPreuPLvZ+3RAF2VufcXCJTKbCNugAGc8O4EoVtvkQRxYnl0gabWDsaBwB4aU8Ht7y8tPlYeyhuKmIlipW156RQyrZjN6JEa9NE0M24ZXfQ7B91dAGIVmHj4sJhJpUrDlhRdFJzzZvIYTtDUQDR4It+y77RBeuVqMpkW2b++mYEXG63vWVGx1+ivS9W29dD1j68EYuwhbO+YzPX3xSm/AFjAmhITA99zbUK5nFIPVDrZWl1D5RpLykXkUZyXTNrCe2iovVcTvdT1fZjOAOQpEsVha6zfwqb9D17NO5R5sKMfj9diCEfF+jfYwzzKZzRpq2VtffDmrYVuaK9F6Yp8iatSLOvnmzl0olM8gKCcDm196FSJ7M19LRuWrNAKmyGqOIrEaG8FYvxFaX34NjD0xkUKOdIuLlSkR0zLptXDx/P2BGh0fqjoVK4FttQxn7Df1uj5KZtPG0sCg1z6yfG7AFKxlNr8cP/P+hoqa0TIbA1ZCxxritdT4OKmUoEt3hkzGwDSe1loWrG7ieibrulG6SF+DrudM/H624Et837iD5fpSmc0Kjh3ldPsEJAZaZ06vMXMlDvDmZrHJQyYLr7TeReAdOECsMXEqX8Rp4XelXRtppSONuqXipBCIqipCIO2U1FRsZlaCiF0T7pKptNHM2PJLl+hbUAyO5aO37Vg+s2CNTMZimRStmxEc2GSZjObb3roeu+1gYoRAolEjwX9Akdj6Ngqwuw/N+1WRzHYZeZMvhoJbZ0L+tdMg77prQe3naCRjoAqdLgXTroaCW2Zi2dPBd/lloBRHBR2Q5QiHM1oX385JIRAnAov03+N122wkHrur6d4lDmP9mVFSW/VvKJJdMnsMBncd0fUSmevAZAkEwpxD3xNxqEKfiS37QJmNgr8lEynB720TSO/77juMYrCHzTPwm1rrz2Qu55DFoGFb/6SJIsSdhla1IYPBf9Xl4JsyWeyz2xlobUnPObPbRtD6lDFaX+IdPapt2PnMsdj6oXuAVuP/ZbAiU/gfZLID9K1ZWAvnJvIVwFY+EXKIrC2r1T/CF1u4BpYxsa584W0ym5Sjul5mAauQ2ViYknB9ig2OdtQBj+n5vUzGgF2A7O9XsmBF7Bx7RpwB2qmDgOXliWdDxyniVlTksWMg/4br2ypyEnfLCU9ZKfSYdQvkocjEOnY5LEyfwWiz6z5loJQEwGxJbDX+7wcrhuBJmYoB75TzAz8WFZEeVti5fMacy+fcNvtNYLV4sj7FKsR9FRWjWw1GY5i2MHrO+afJ1to7YLMgRI/F8w9iaQ6LN9iwgxX6TTKTEygmizrH4dWfQ+ubb4lgQltoOlZqmj/xX3KxEAptJUo3KxViqe6PbwUPbQsUJTxCDAk3NECL7Nx3JhiSyH2oicWfsRR4VmUKrZFM2LwohrW/92I9ZiexRKEm2Pk+r6S60jHIpq5Cf445hIIzzm4qrq18XmYFdZXVU/GC7bHVFj8fXTYRyhIPtv7/jbffVnks4D8srdGfk1nBkfmLS8Nq5CtMOg/TchQ04y96VFhrBYP1it8fCEfgWmymRuA1zMGnbGtG8R6aKijje9dUULk2sJO9SWEstlPP4elAbZWj1aqvrL4Cv8jbMtsB1oN3Smr1K2U2bcKbtnAKDmxHLHBCt0ZU9PZ6i68U90Qz7b7x5zhWaro59KM5ka1bIfzJyrbI37hFTuRO+S+cBIw2XHD4+QMacqbthtKN4i288W/Bd+bYmDLiyb0FUdgt+NVfxWt+UzyIBH+mynIy441CdHQ9LMZz4mYpzHnpLeN2KyVaaMbullkb+DhnYVV50TDZN5Ynr5FeFYU9QOvX8Sk5+hicW3MTiYPI9AGiJXoHRWeLg8O6dkVdZc14mc0KGp0SwYo0rBpdd0XlD0J45So4+uh/Aq0DiZ4IpIou1pjn+RlVWFrs5Bl3thAB4e1/ChT9/c8g/2+uFn0Y21JdxGw4xA/VLMlJiHs03eZi4dUNkslO0bu68nV82dKWOwaWf2XjAr3T4eHFNfob2CLbpm/x+VxRt0CfILMdYAX8M5rNrOZj4sF6Nau0dqHjislO4uw6civjRkUd0F9s9kZ9ghhRJICE0vLcC9D89B+BKrUVMah+x7gxFN+VP3UKK/zJLOj509uh8O/uEB3waFEQtKGc2XiYH3n4EWh84F/l0fTwn30maAMHyFxishZIkS+YXRjlMdLY9SttHB+4wdiPZbKTcMfy8e45RsCW1lQ9gK7c1fjc18lDmfIBVrYrS2qrnpL5nGKozlYRv+8doOsZ9dSoMpPbk3/TD9q2CvX70xKKhX2So489AcHl7wGFqVBll6c60Pr1ZRSwSNZFHhKI/X5RGMEVH0Djbx4Uoe7p4sGOOwUrUjBk1wYr6noQW9aHUfuZzf1L8GHYwk2wrEYsM2bYgY55Fcs5NkliWdrjaMRts994LG6LC0YzQ81t6TbwPYe5oiYt39Tgcfwe9mlXzhJuoVFcq7+JPv2ZpsVn40WsiG8l48HTzfhlXsHvc1ugpupScoXkqaRg/8w2FI1lJI336KvrB/A9DuH0LFwfifSR2bShCkyd7Tx0gWhPXfq5tHT2qiIia9dB8zPPQmTDRqBKH+16xUP3kN4TWb9BCKP1/Q/lmdRQyAlZusK5c0SwYrzoEpF1J70roc6uqViFqmYc6aHrdfJwSmj+w/KFeoQNTQXN2J9oqWtXl++IrnvrDbiEA+vDFB7gnAWwJh9gnO1jKuwrrq78WL4zYw7Nm1fEtcKelmaY2JbWpRudu+sXv8jLz8srNlmeH6+nORd7A1Mlpt8AEYGLmzYDpzUiaW4RqvbpI7YfpSFgpSh250PaudHcf0DsVpLO74pEQ+6U/7LJQNsDxbtpqTghBeJy8iPcIKzIkY2bwPxuO1jNaLhpM4UUkOVRhw5u29oHRULzI1ZdvfjV20xWCxKevn3AP3UKaPQzCpqWkTDacQXi0mWQNeHhiIiijWxEF+r7vWJHkpRgI0+hIvSrtgStM8/o5xMo5mvi+Y5DypniCsSlyyGd0LwGWRPj2+1g7t2LPlMacVYW7/g56HSgfoZvxBngm3wJqCiwzgijHVcgLscNcrvIXQp//TVY3+8T6z+SET9RmAyK+fJdMAkozitbd8oJVyAuxxWyJu0//0z7V4n+SdQWodGkIxAKb/egK0UBihSDlQurEY0rEJduQQiltRWMnbvb+ic7domtRaNJJhBaQitCV2hLU/oJ6BwLox1XIC7divjN9EMNYGzfIbYOMvfsIfWIc4kEQjFZFAlM25qKH8bpInEQrkBcuh1hTQwTrLo6oPXtxuYtYB06ZBOI+Jm2cyeANmhAp0en0sUViMsJAWmELAdF9JoHDohJxgjtYtJ4WISHeC+6ADzDhgGjpbQOkbxdhSsQlxMOGu1q36KH+inaoEGgBIodf1ukq3EF4nJCQhZFrEnH+tnV/YxkuAJxcUlCt60HcXE5GXAF4uKSBFcgLi5JcAXi4pIEVyAuLklwBeLikhCA/wXUnoG+io/J4wAAAABJRU5ErkJggg=="})})),Object(k.jsxs)("div",{className:"gradio_interface",theme:this.props.theme,children:[Object(k.jsxs)("div",{className:A()("panels",{"items-start":"unaligned"===this.props.layout,"items-stretch":"unaligned"!==this.props.layout,"flex-col":"vertical"===this.props.layout}),children:[Object(k.jsxs)("div",{className:"panel",children:[Object(k.jsx)("div",{className:"component_set",children:this.props.input_components.map((function(t,n){var r=ft[t.name][0];return Object(k.jsxs)("div",{className:"component",children:[Object(k.jsx)("div",{className:"panel_header",children:t.label}),Object(k.jsx)(r,i(i({},t),{},{handleChange:e.handleChange.bind(e,n),value:e.state[n],interpretation:null===e.state.interpretation?null:e.state.interpretation[n]}))]},n)}))}),Object(k.jsxs)("div",{className:"panel_buttons",children:[Object(k.jsx)("button",{className:"panel_button",onClick:this.clear,children:"Clear"}),!this.props.live&&Object(k.jsx)("button",{className:"panel_button submit",onClick:this.submit,children:"Submit"})]})]}),Object(k.jsxs)("div",{className:"panel",children:[Object(k.jsxs)("div",{className:A()("component_set","relative",{"opacity-50":t&&!this.props.live}),children:[t,this.props.output_components.map((function(t,n){var r=pt[t.name][0],o=e.props.input_components.length+n;return Object(k.jsxs)("div",{className:"component",children:[Object(k.jsx)("div",{className:"panel_header",children:t.label}),Object(k.jsx)(r,i(i({},t),{},{handleChange:e.handleChange.bind(e,o),value:e.state[o]}))]},o)}))]}),Object(k.jsxs)("div",{className:"panel_buttons",children:[!!this.props.allow_interpretation&&(null===this.state.interpretation?Object(k.jsx)("button",{className:A()("panel_button",{disabled:!1===this.state.complete}),onClick:this.interpret,children:"Interpret"}):Object(k.jsx)("button",{className:"panel_button",onClick:this.removeInterpret,children:"Hide"})),!!this.props.allow_screenshot&&Object(k.jsx)("button",{className:"panel_button hidden",children:"Screenshot"}),!!this.props.allow_flagging&&(null===this.props.flagging_options?Object(k.jsx)("button",{className:A()("panel_button","flag",{disabled:!1===this.state.complete}),onClick:this.flag.bind(this,null),children:this.state.just_flagged?"Flagged":"Flag"}):Object(k.jsxs)("button",{className:A()("panel_button","flag",{disabled:!1===this.state.complete}),children:[this.state.just_flagged?"Flagged":"Flag \u25bc",Object(k.jsx)("div",{className:"dropcontent",children:this.props.flagging_options.map((function(t){return Object(k.jsx)("div",{onClick:e.flag.bind(e,t),children:t})}))})]}))]})]})]}),!!this.props.examples&&Object(k.jsx)(bt,{examples:this.props.examples,examples_dir:this.examples_dir,example_id:this.state.example_id,input_components:this.props.input_components,output_components:this.props.output_components,handleExampleChange:this.handleExampleChange})]})}}]),n}(d.a.Component),bt=function(e){C(n,e);var t=O(n);function n(){return v(this,n),t.apply(this,arguments)}return j(n,[{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"examples",children:[Object(k.jsx)("h4",{children:"Examples"}),Object(k.jsxs)("div",{className:"examples_control",children:[Object(k.jsxs)("button",{className:"load_prev examples-content",children:["Load Previous ",Object(k.jsxs)("div",{className:"shortcut",children:["CTRL + ",Object(k.jsx)("span",{style:{display:"inline-block",transform:"scale(-1, 1)"},children:"\u279c"})]})]}),Object(k.jsxs)("button",{className:"load_next examples-content",children:["Load Next ",Object(k.jsx)("div",{className:"shortcut",children:"CTRL + \u279c"})]}),Object(k.jsx)("button",{className:"table_examples",children:Object(k.jsxs)("svg",{width:"40",height:"24",children:[Object(k.jsx)("rect",{x:"0",y:"0",width:"40",height:"6"}),Object(k.jsx)("rect",{x:"0",y:"9",width:"40",height:"6"}),Object(k.jsx)("rect",{x:"0",y:"18",width:"40",height:"6"})]})}),Object(k.jsx)("button",{className:"gallery_examples current",children:Object(k.jsxs)("svg",{width:"40",height:"24",children:[Object(k.jsx)("rect",{x:"0",y:"0",width:"18",height:"40"}),Object(k.jsx)("rect",{x:"22",y:"0",width:"18",height:"40"})]})})]}),Object(k.jsx)("div",{className:"pages hidden",children:"Page:"}),Object(k.jsxs)("table",{className:"examples_table",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[this.props.input_components.map((function(e,t){return Object(k.jsx)("th",{children:e.label},t)})),this.props.examples[0].length>this.props.input_components.length&&this.props.output_components.map((function(t,n){return Object(k.jsx)("th",{children:t.label},n+e.props.input_components.length)}))]})}),Object(k.jsx)("tbody",{children:this.props.examples.map((function(t,n){return Object(k.jsx)("tr",{className:A()({selected:n===e.props.example_id}),onClick:function(){return e.props.handleExampleChange(n)},children:t.map((function(t,n){var r=ft[e.props.input_components[n].name][1];return Object(k.jsx)("td",{children:Object(k.jsx)(r,{examples_dir:e.props.examples_dir,value:t},n)})}))},n)}))})]})]})}}]),n}(d.a.Component),mt=gt;function vt(e){return Object(k.jsx)("div",{class:"login",children:Object(k.jsxs)("form",{id:"login",method:"POST",action:"login",children:[Object(k.jsx)("h2",{children:"login"}),!!e.auth_message&&Object(k.jsx)("div",{dangerouslySetInnerHTML:{__html:e.auth_message}}),Object(k.jsx)("label",{for:"username",children:"username"}),Object(k.jsx)("input",{type:"text",name:"username"}),Object(k.jsx)("label",{for:"password",children:"password"}),Object(k.jsx)("input",{type:"password",name:"password"}),Object(k.jsx)("input",{class:"link",type:"submit",className:"submit"})]})})}Promise.resolve().then(n.t.bind(null,94,7));var yt=function(){var e=u(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/"+n+"/",{method:"POST",body:JSON.stringify({data:t}),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function jt(){return(jt=u(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=10;break;case 3:return t=e.sent,e.next=6,t.json();case 6:return t=e.sent,e.abrupt("return",t);case 10:return e.abrupt("return",window.config);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return jt.apply(this,arguments)})().then((function(e){e.auth_required?f.a.render(Object(k.jsx)(vt,i({},e)),document.getElementById("root")):f.a.render(Object(k.jsxs)("div",{class:"gradio_page",children:[!!e.title&&Object(k.jsx)("h1",{className:"title",children:e.title}),!!e.description&&Object(k.jsx)("p",{className:"description",children:e.description}),Object(k.jsx)(mt,i(i({},e),{},{fn:yt})),!!e.article&&Object(k.jsx)("p",{className:"article prose",dangerouslySetInnerHTML:{__html:e.article}})]}),document.getElementById("root"))}))},function(e,t,n){},function(e,t,n){}]);
//# sourceMappingURL=bundle.js.map